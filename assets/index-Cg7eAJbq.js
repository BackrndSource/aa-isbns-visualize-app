var oF=Object.defineProperty;var aF=(t,e,r)=>e in t?oF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var lF=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var T=(t,e,r)=>aF(t,typeof e!="symbol"?e+"":e,r);var Pie=lF((Lr,Ur)=>{function cF(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var Hu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ma(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Sg={exports:{}},Tl={},xg={exports:{}},Ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hx;function uF(){if(hx)return Ve;hx=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),g=Symbol.iterator;function m(R){return R===null||typeof R!="object"?null:(R=g&&R[g]||R["@@iterator"],typeof R=="function"?R:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,b={};function S(R,L,se){this.props=R,this.context=L,this.refs=b,this.updater=se||y}S.prototype.isReactComponent={},S.prototype.setState=function(R,L){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,L,"setState")},S.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function E(){}E.prototype=S.prototype;function k(R,L,se){this.props=R,this.context=L,this.refs=b,this.updater=se||y}var C=k.prototype=new E;C.constructor=k,w(C,S.prototype),C.isPureReactComponent=!0;var P=Array.isArray,M=Object.prototype.hasOwnProperty,D={current:null},q={key:!0,ref:!0,__self:!0,__source:!0};function ee(R,L,se){var ue,he={},we=null,Te=null;if(L!=null)for(ue in L.ref!==void 0&&(Te=L.ref),L.key!==void 0&&(we=""+L.key),L)M.call(L,ue)&&!q.hasOwnProperty(ue)&&(he[ue]=L[ue]);var me=arguments.length-2;if(me===1)he.children=se;else if(1<me){for(var Oe=Array(me),Ne=0;Ne<me;Ne++)Oe[Ne]=arguments[Ne+2];he.children=Oe}if(R&&R.defaultProps)for(ue in me=R.defaultProps,me)he[ue]===void 0&&(he[ue]=me[ue]);return{$$typeof:t,type:R,key:we,ref:Te,props:he,_owner:D.current}}function J(R,L){return{$$typeof:t,type:R.type,key:L,ref:R.ref,props:R.props,_owner:R._owner}}function A(R){return typeof R=="object"&&R!==null&&R.$$typeof===t}function X(R){var L={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(se){return L[se]})}var te=/\/+/g;function Q(R,L){return typeof R=="object"&&R!==null&&R.key!=null?X(""+R.key):L.toString(36)}function ie(R,L,se,ue,he){var we=typeof R;(we==="undefined"||we==="boolean")&&(R=null);var Te=!1;if(R===null)Te=!0;else switch(we){case"string":case"number":Te=!0;break;case"object":switch(R.$$typeof){case t:case e:Te=!0}}if(Te)return Te=R,he=he(Te),R=ue===""?"."+Q(Te,0):ue,P(he)?(se="",R!=null&&(se=R.replace(te,"$&/")+"/"),ie(he,L,se,"",function(Ne){return Ne})):he!=null&&(A(he)&&(he=J(he,se+(!he.key||Te&&Te.key===he.key?"":(""+he.key).replace(te,"$&/")+"/")+R)),L.push(he)),1;if(Te=0,ue=ue===""?".":ue+":",P(R))for(var me=0;me<R.length;me++){we=R[me];var Oe=ue+Q(we,me);Te+=ie(we,L,se,Oe,he)}else if(Oe=m(R),typeof Oe=="function")for(R=Oe.call(R),me=0;!(we=R.next()).done;)we=we.value,Oe=ue+Q(we,me++),Te+=ie(we,L,se,Oe,he);else if(we==="object")throw L=String(R),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.");return Te}function xe(R,L,se){if(R==null)return R;var ue=[],he=0;return ie(R,ue,"","",function(we){return L.call(se,we,he++)}),ue}function F(R){if(R._status===-1){var L=R._result;L=L(),L.then(function(se){(R._status===0||R._status===-1)&&(R._status=1,R._result=se)},function(se){(R._status===0||R._status===-1)&&(R._status=2,R._result=se)}),R._status===-1&&(R._status=0,R._result=L)}if(R._status===1)return R._result.default;throw R._result}var z={current:null},O={transition:null},$={ReactCurrentDispatcher:z,ReactCurrentBatchConfig:O,ReactCurrentOwner:D};function j(){throw Error("act(...) is not supported in production builds of React.")}return Ve.Children={map:xe,forEach:function(R,L,se){xe(R,function(){L.apply(this,arguments)},se)},count:function(R){var L=0;return xe(R,function(){L++}),L},toArray:function(R){return xe(R,function(L){return L})||[]},only:function(R){if(!A(R))throw Error("React.Children.only expected to receive a single React element child.");return R}},Ve.Component=S,Ve.Fragment=r,Ve.Profiler=i,Ve.PureComponent=k,Ve.StrictMode=n,Ve.Suspense=u,Ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$,Ve.act=j,Ve.cloneElement=function(R,L,se){if(R==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+R+".");var ue=w({},R.props),he=R.key,we=R.ref,Te=R._owner;if(L!=null){if(L.ref!==void 0&&(we=L.ref,Te=D.current),L.key!==void 0&&(he=""+L.key),R.type&&R.type.defaultProps)var me=R.type.defaultProps;for(Oe in L)M.call(L,Oe)&&!q.hasOwnProperty(Oe)&&(ue[Oe]=L[Oe]===void 0&&me!==void 0?me[Oe]:L[Oe])}var Oe=arguments.length-2;if(Oe===1)ue.children=se;else if(1<Oe){me=Array(Oe);for(var Ne=0;Ne<Oe;Ne++)me[Ne]=arguments[Ne+2];ue.children=me}return{$$typeof:t,type:R.type,key:he,ref:we,props:ue,_owner:Te}},Ve.createContext=function(R){return R={$$typeof:o,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},R.Provider={$$typeof:s,_context:R},R.Consumer=R},Ve.createElement=ee,Ve.createFactory=function(R){var L=ee.bind(null,R);return L.type=R,L},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(R){return{$$typeof:l,render:R}},Ve.isValidElement=A,Ve.lazy=function(R){return{$$typeof:d,_payload:{_status:-1,_result:R},_init:F}},Ve.memo=function(R,L){return{$$typeof:f,type:R,compare:L===void 0?null:L}},Ve.startTransition=function(R){var L=O.transition;O.transition={};try{R()}finally{O.transition=L}},Ve.unstable_act=j,Ve.useCallback=function(R,L){return z.current.useCallback(R,L)},Ve.useContext=function(R){return z.current.useContext(R)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(R){return z.current.useDeferredValue(R)},Ve.useEffect=function(R,L){return z.current.useEffect(R,L)},Ve.useId=function(){return z.current.useId()},Ve.useImperativeHandle=function(R,L,se){return z.current.useImperativeHandle(R,L,se)},Ve.useInsertionEffect=function(R,L){return z.current.useInsertionEffect(R,L)},Ve.useLayoutEffect=function(R,L){return z.current.useLayoutEffect(R,L)},Ve.useMemo=function(R,L){return z.current.useMemo(R,L)},Ve.useReducer=function(R,L,se){return z.current.useReducer(R,L,se)},Ve.useRef=function(R){return z.current.useRef(R)},Ve.useState=function(R){return z.current.useState(R)},Ve.useSyncExternalStore=function(R,L,se){return z.current.useSyncExternalStore(R,L,se)},Ve.useTransition=function(){return z.current.useTransition()},Ve.version="18.3.1",Ve}var dx;function Us(){return dx||(dx=1,xg.exports=uF()),xg.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var px;function fF(){if(px)return Tl;px=1;var t=Us(),e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(l,u,f){var d,g={},m=null,y=null;f!==void 0&&(m=""+f),u.key!==void 0&&(m=""+u.key),u.ref!==void 0&&(y=u.ref);for(d in u)n.call(u,d)&&!s.hasOwnProperty(d)&&(g[d]=u[d]);if(l&&l.defaultProps)for(d in u=l.defaultProps,u)g[d]===void 0&&(g[d]=u[d]);return{$$typeof:e,type:l,key:m,ref:y,props:g,_owner:i.current}}return Tl.Fragment=r,Tl.jsx=o,Tl.jsxs=o,Tl}var gx;function hF(){return gx||(gx=1,Sg.exports=fF()),Sg.exports}var ke=hF(),re=Us();const N=Ma(re),mx=cF({__proto__:null,default:N},[re]);var Wu={},Tg={exports:{}},Er={},Eg={exports:{}},Ag={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _x;function dF(){return _x||(_x=1,function(t){function e(O,$){var j=O.length;O.push($);e:for(;0<j;){var R=j-1>>>1,L=O[R];if(0<i(L,$))O[R]=$,O[j]=L,j=R;else break e}}function r(O){return O.length===0?null:O[0]}function n(O){if(O.length===0)return null;var $=O[0],j=O.pop();if(j!==$){O[0]=j;e:for(var R=0,L=O.length,se=L>>>1;R<se;){var ue=2*(R+1)-1,he=O[ue],we=ue+1,Te=O[we];if(0>i(he,j))we<L&&0>i(Te,he)?(O[R]=Te,O[we]=j,R=we):(O[R]=he,O[ue]=j,R=ue);else if(we<L&&0>i(Te,j))O[R]=Te,O[we]=j,R=we;else break e}}return $}function i(O,$){var j=O.sortIndex-$.sortIndex;return j!==0?j:O.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],f=[],d=1,g=null,m=3,y=!1,w=!1,b=!1,S=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(O){for(var $=r(f);$!==null;){if($.callback===null)n(f);else if($.startTime<=O)n(f),$.sortIndex=$.expirationTime,e(u,$);else break;$=r(f)}}function P(O){if(b=!1,C(O),!w)if(r(u)!==null)w=!0,F(M);else{var $=r(f);$!==null&&z(P,$.startTime-O)}}function M(O,$){w=!1,b&&(b=!1,E(ee),ee=-1),y=!0;var j=m;try{for(C($),g=r(u);g!==null&&(!(g.expirationTime>$)||O&&!X());){var R=g.callback;if(typeof R=="function"){g.callback=null,m=g.priorityLevel;var L=R(g.expirationTime<=$);$=t.unstable_now(),typeof L=="function"?g.callback=L:g===r(u)&&n(u),C($)}else n(u);g=r(u)}if(g!==null)var se=!0;else{var ue=r(f);ue!==null&&z(P,ue.startTime-$),se=!1}return se}finally{g=null,m=j,y=!1}}var D=!1,q=null,ee=-1,J=5,A=-1;function X(){return!(t.unstable_now()-A<J)}function te(){if(q!==null){var O=t.unstable_now();A=O;var $=!0;try{$=q(!0,O)}finally{$?Q():(D=!1,q=null)}}else D=!1}var Q;if(typeof k=="function")Q=function(){k(te)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,xe=ie.port2;ie.port1.onmessage=te,Q=function(){xe.postMessage(null)}}else Q=function(){S(te,0)};function F(O){q=O,D||(D=!0,Q())}function z(O,$){ee=S(function(){O(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){w||y||(w=!0,F(M))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(O){switch(m){case 1:case 2:case 3:var $=3;break;default:$=m}var j=m;m=$;try{return O()}finally{m=j}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,$){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var j=m;m=O;try{return $()}finally{m=j}},t.unstable_scheduleCallback=function(O,$,j){var R=t.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?R+j:R):j=R,O){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=j+L,O={id:d++,callback:$,priorityLevel:O,startTime:j,expirationTime:L,sortIndex:-1},j>R?(O.sortIndex=j,e(f,O),r(u)===null&&O===r(f)&&(b?(E(ee),ee=-1):b=!0,z(P,j-R))):(O.sortIndex=L,e(u,O),w||y||(w=!0,F(M))),O},t.unstable_shouldYield=X,t.unstable_wrapCallback=function(O){var $=m;return function(){var j=m;m=$;try{return O.apply(this,arguments)}finally{m=j}}}}(Ag)),Ag}var yx;function pF(){return yx||(yx=1,Eg.exports=dF()),Eg.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vx;function gF(){if(vx)return Er;vx=1;var t=Us(),e=pF();function r(a){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+a,h=1;h<arguments.length;h++)c+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+a+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function s(a,c){o(a,c),o(a+"Capture",c)}function o(a,c){for(i[a]=c,a=0;a<c.length;a++)n.add(c[a])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},g={};function m(a){return u.call(g,a)?!0:u.call(d,a)?!1:f.test(a)?g[a]=!0:(d[a]=!0,!1)}function y(a,c,h,p){if(h!==null&&h.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return p?!1:h!==null?!h.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function w(a,c,h,p){if(c===null||typeof c>"u"||y(a,c,h,p))return!0;if(p)return!1;if(h!==null)switch(h.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function b(a,c,h,p,_,v,x){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=p,this.attributeNamespace=_,this.mustUseProperty=h,this.propertyName=a,this.type=c,this.sanitizeURL=v,this.removeEmptyString=x}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){S[a]=new b(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var c=a[0];S[c]=new b(c,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){S[a]=new b(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){S[a]=new b(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){S[a]=new b(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){S[a]=new b(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){S[a]=new b(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){S[a]=new b(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){S[a]=new b(a,5,!1,a.toLowerCase(),null,!1,!1)});var E=/[\-:]([a-z])/g;function k(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var c=a.replace(E,k);S[c]=new b(c,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var c=a.replace(E,k);S[c]=new b(c,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var c=a.replace(E,k);S[c]=new b(c,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){S[a]=new b(a,1,!1,a.toLowerCase(),null,!1,!1)}),S.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){S[a]=new b(a,1,!1,a.toLowerCase(),null,!0,!0)});function C(a,c,h,p){var _=S.hasOwnProperty(c)?S[c]:null;(_!==null?_.type!==0:p||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(w(c,h,_,p)&&(h=null),p||_===null?m(c)&&(h===null?a.removeAttribute(c):a.setAttribute(c,""+h)):_.mustUseProperty?a[_.propertyName]=h===null?_.type===3?!1:"":h:(c=_.attributeName,p=_.attributeNamespace,h===null?a.removeAttribute(c):(_=_.type,h=_===3||_===4&&h===!0?"":""+h,p?a.setAttributeNS(p,c,h):a.setAttribute(c,h))))}var P=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,M=Symbol.for("react.element"),D=Symbol.for("react.portal"),q=Symbol.for("react.fragment"),ee=Symbol.for("react.strict_mode"),J=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),X=Symbol.for("react.context"),te=Symbol.for("react.forward_ref"),Q=Symbol.for("react.suspense"),ie=Symbol.for("react.suspense_list"),xe=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),z=Symbol.for("react.offscreen"),O=Symbol.iterator;function $(a){return a===null||typeof a!="object"?null:(a=O&&a[O]||a["@@iterator"],typeof a=="function"?a:null)}var j=Object.assign,R;function L(a){if(R===void 0)try{throw Error()}catch(h){var c=h.stack.trim().match(/\n( *(at )?)/);R=c&&c[1]||""}return`
`+R+a}var se=!1;function ue(a,c){if(!a||se)return"";se=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(G){var p=G}Reflect.construct(a,[],c)}else{try{c.call()}catch(G){p=G}a.call(c.prototype)}else{try{throw Error()}catch(G){p=G}a()}}catch(G){if(G&&p&&typeof G.stack=="string"){for(var _=G.stack.split(`
`),v=p.stack.split(`
`),x=_.length-1,B=v.length-1;1<=x&&0<=B&&_[x]!==v[B];)B--;for(;1<=x&&0<=B;x--,B--)if(_[x]!==v[B]){if(x!==1||B!==1)do if(x--,B--,0>B||_[x]!==v[B]){var U=`
`+_[x].replace(" at new "," at ");return a.displayName&&U.includes("<anonymous>")&&(U=U.replace("<anonymous>",a.displayName)),U}while(1<=x&&0<=B);break}}}finally{se=!1,Error.prepareStackTrace=h}return(a=a?a.displayName||a.name:"")?L(a):""}function he(a){switch(a.tag){case 5:return L(a.type);case 16:return L("Lazy");case 13:return L("Suspense");case 19:return L("SuspenseList");case 0:case 2:case 15:return a=ue(a.type,!1),a;case 11:return a=ue(a.type.render,!1),a;case 1:return a=ue(a.type,!0),a;default:return""}}function we(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case q:return"Fragment";case D:return"Portal";case J:return"Profiler";case ee:return"StrictMode";case Q:return"Suspense";case ie:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case X:return(a.displayName||"Context")+".Consumer";case A:return(a._context.displayName||"Context")+".Provider";case te:var c=a.render;return a=a.displayName,a||(a=c.displayName||c.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case xe:return c=a.displayName||null,c!==null?c:we(a.type)||"Memo";case F:c=a._payload,a=a._init;try{return we(a(c))}catch{}}return null}function Te(a){var c=a.type;switch(a.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=c.render,a=a.displayName||a.name||"",c.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return we(c);case 8:return c===ee?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function me(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Oe(a){var c=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Ne(a){var c=Oe(a)?"checked":"value",h=Object.getOwnPropertyDescriptor(a.constructor.prototype,c),p=""+a[c];if(!a.hasOwnProperty(c)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var _=h.get,v=h.set;return Object.defineProperty(a,c,{configurable:!0,get:function(){return _.call(this)},set:function(x){p=""+x,v.call(this,x)}}),Object.defineProperty(a,c,{enumerable:h.enumerable}),{getValue:function(){return p},setValue:function(x){p=""+x},stopTracking:function(){a._valueTracker=null,delete a[c]}}}}function Tt(a){a._valueTracker||(a._valueTracker=Ne(a))}function vt(a){if(!a)return!1;var c=a._valueTracker;if(!c)return!0;var h=c.getValue(),p="";return a&&(p=Oe(a)?a.checked?"true":"false":a.value),a=p,a!==h?(c.setValue(a),!0):!1}function nt(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function Dt(a,c){var h=c.checked;return j({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??a._wrapperState.initialChecked})}function ve(a,c){var h=c.defaultValue==null?"":c.defaultValue,p=c.checked!=null?c.checked:c.defaultChecked;h=me(c.value!=null?c.value:h),a._wrapperState={initialChecked:p,initialValue:h,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function ze(a,c){c=c.checked,c!=null&&C(a,"checked",c,!1)}function Ie(a,c){ze(a,c);var h=me(c.value),p=c.type;if(h!=null)p==="number"?(h===0&&a.value===""||a.value!=h)&&(a.value=""+h):a.value!==""+h&&(a.value=""+h);else if(p==="submit"||p==="reset"){a.removeAttribute("value");return}c.hasOwnProperty("value")?Jt(a,c.type,h):c.hasOwnProperty("defaultValue")&&Jt(a,c.type,me(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(a.defaultChecked=!!c.defaultChecked)}function Ot(a,c,h){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var p=c.type;if(!(p!=="submit"&&p!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+a._wrapperState.initialValue,h||c===a.value||(a.value=c),a.defaultValue=c}h=a.name,h!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,h!==""&&(a.name=h)}function Jt(a,c,h){(c!=="number"||nt(a.ownerDocument)!==a)&&(h==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+h&&(a.defaultValue=""+h))}var mr=Array.isArray;function Kt(a,c,h,p){if(a=a.options,c){c={};for(var _=0;_<h.length;_++)c["$"+h[_]]=!0;for(h=0;h<a.length;h++)_=c.hasOwnProperty("$"+a[h].value),a[h].selected!==_&&(a[h].selected=_),_&&p&&(a[h].defaultSelected=!0)}else{for(h=""+me(h),c=null,_=0;_<a.length;_++){if(a[_].value===h){a[_].selected=!0,p&&(a[_].defaultSelected=!0);return}c!==null||a[_].disabled||(c=a[_])}c!==null&&(c.selected=!0)}}function Re(a,c){if(c.dangerouslySetInnerHTML!=null)throw Error(r(91));return j({},c,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function pt(a,c){var h=c.value;if(h==null){if(h=c.children,c=c.defaultValue,h!=null){if(c!=null)throw Error(r(92));if(mr(h)){if(1<h.length)throw Error(r(93));h=h[0]}c=h}c==null&&(c=""),h=c}a._wrapperState={initialValue:me(h)}}function Vr(a,c){var h=me(c.value),p=me(c.defaultValue);h!=null&&(h=""+h,h!==a.value&&(a.value=h),c.defaultValue==null&&a.defaultValue!==h&&(a.defaultValue=h)),p!=null&&(a.defaultValue=""+p)}function le(a){var c=a.textContent;c===a._wrapperState.initialValue&&c!==""&&c!==null&&(a.value=c)}function ge(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Me(a,c){return a==null||a==="http://www.w3.org/1999/xhtml"?ge(c):a==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var Ue,qe=function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,h,p,_){MSApp.execUnsafeLocalFunction(function(){return a(c,h,p,_)})}:a}(function(a,c){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=c;else{for(Ue=Ue||document.createElement("div"),Ue.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=Ue.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;c.firstChild;)a.appendChild(c.firstChild)}});function Pe(a,c){if(c){var h=a.firstChild;if(h&&h===a.lastChild&&h.nodeType===3){h.nodeValue=c;return}}a.textContent=c}var ct={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Bt=["Webkit","ms","Moz","O"];Object.keys(ct).forEach(function(a){Bt.forEach(function(c){c=c+a.charAt(0).toUpperCase()+a.substring(1),ct[c]=ct[a]})});function Ye(a,c,h){return c==null||typeof c=="boolean"||c===""?"":h||typeof c!="number"||c===0||ct.hasOwnProperty(a)&&ct[a]?(""+c).trim():c+"px"}function bt(a,c){a=a.style;for(var h in c)if(c.hasOwnProperty(h)){var p=h.indexOf("--")===0,_=Ye(h,c[h],p);h==="float"&&(h="cssFloat"),p?a.setProperty(h,_):a[h]=_}}var Qi=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function za(a,c){if(c){if(Qi[a]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(r(137,a));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(r(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(r(61))}if(c.style!=null&&typeof c.style!="object")throw Error(r(62))}}function Ji(a,c){if(a.indexOf("-")===-1)return typeof c.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $a=null;function es(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var ts=null,ui=null,it=null;function Lt(a){if(a=cl(a)){if(typeof ts!="function")throw Error(r(280));var c=a.stateNode;c&&(c=su(c),ts(a.stateNode,a.type,c))}}function to(a){ui?it?it.push(a):it=[a]:ui=a}function rs(){if(ui){var a=ui,c=it;if(it=ui=null,Lt(a),c)for(a=0;a<c.length;a++)Lt(c[a])}}function jr(a,c){return a(c)}function k1(){}var Ud=!1;function N1(a,c,h){if(Ud)return a(c,h);Ud=!0;try{return jr(a,c,h)}finally{Ud=!1,(ui!==null||it!==null)&&(k1(),rs())}}function Va(a,c){var h=a.stateNode;if(h===null)return null;var p=su(h);if(p===null)return null;h=p[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(a=a.type,p=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!p;break e;default:a=!1}if(a)return null;if(h&&typeof h!="function")throw Error(r(231,c,typeof h));return h}var zd=!1;if(l)try{var ja={};Object.defineProperty(ja,"passive",{get:function(){zd=!0}}),window.addEventListener("test",ja,ja),window.removeEventListener("test",ja,ja)}catch{zd=!1}function dk(a,c,h,p,_,v,x,B,U){var G=Array.prototype.slice.call(arguments,3);try{c.apply(h,G)}catch(ae){this.onError(ae)}}var Ha=!1,Bc=null,Lc=!1,$d=null,pk={onError:function(a){Ha=!0,Bc=a}};function gk(a,c,h,p,_,v,x,B,U){Ha=!1,Bc=null,dk.apply(pk,arguments)}function mk(a,c,h,p,_,v,x,B,U){if(gk.apply(this,arguments),Ha){if(Ha){var G=Bc;Ha=!1,Bc=null}else throw Error(r(198));Lc||(Lc=!0,$d=G)}}function ns(a){var c=a,h=a;if(a.alternate)for(;c.return;)c=c.return;else{a=c;do c=a,c.flags&4098&&(h=c.return),a=c.return;while(a)}return c.tag===3?h:null}function F1(a){if(a.tag===13){var c=a.memoizedState;if(c===null&&(a=a.alternate,a!==null&&(c=a.memoizedState)),c!==null)return c.dehydrated}return null}function D1(a){if(ns(a)!==a)throw Error(r(188))}function _k(a){var c=a.alternate;if(!c){if(c=ns(a),c===null)throw Error(r(188));return c!==a?null:a}for(var h=a,p=c;;){var _=h.return;if(_===null)break;var v=_.alternate;if(v===null){if(p=_.return,p!==null){h=p;continue}break}if(_.child===v.child){for(v=_.child;v;){if(v===h)return D1(_),a;if(v===p)return D1(_),c;v=v.sibling}throw Error(r(188))}if(h.return!==p.return)h=_,p=v;else{for(var x=!1,B=_.child;B;){if(B===h){x=!0,h=_,p=v;break}if(B===p){x=!0,p=_,h=v;break}B=B.sibling}if(!x){for(B=v.child;B;){if(B===h){x=!0,h=v,p=_;break}if(B===p){x=!0,p=v,h=_;break}B=B.sibling}if(!x)throw Error(r(189))}}if(h.alternate!==p)throw Error(r(190))}if(h.tag!==3)throw Error(r(188));return h.stateNode.current===h?a:c}function B1(a){return a=_k(a),a!==null?L1(a):null}function L1(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var c=L1(a);if(c!==null)return c;a=a.sibling}return null}var U1=e.unstable_scheduleCallback,z1=e.unstable_cancelCallback,yk=e.unstable_shouldYield,vk=e.unstable_requestPaint,kt=e.unstable_now,bk=e.unstable_getCurrentPriorityLevel,Vd=e.unstable_ImmediatePriority,$1=e.unstable_UserBlockingPriority,Uc=e.unstable_NormalPriority,wk=e.unstable_LowPriority,V1=e.unstable_IdlePriority,zc=null,xn=null;function Sk(a){if(xn&&typeof xn.onCommitFiberRoot=="function")try{xn.onCommitFiberRoot(zc,a,void 0,(a.current.flags&128)===128)}catch{}}var nn=Math.clz32?Math.clz32:Ek,xk=Math.log,Tk=Math.LN2;function Ek(a){return a>>>=0,a===0?32:31-(xk(a)/Tk|0)|0}var $c=64,Vc=4194304;function Wa(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function jc(a,c){var h=a.pendingLanes;if(h===0)return 0;var p=0,_=a.suspendedLanes,v=a.pingedLanes,x=h&268435455;if(x!==0){var B=x&~_;B!==0?p=Wa(B):(v&=x,v!==0&&(p=Wa(v)))}else x=h&~_,x!==0?p=Wa(x):v!==0&&(p=Wa(v));if(p===0)return 0;if(c!==0&&c!==p&&!(c&_)&&(_=p&-p,v=c&-c,_>=v||_===16&&(v&4194240)!==0))return c;if(p&4&&(p|=h&16),c=a.entangledLanes,c!==0)for(a=a.entanglements,c&=p;0<c;)h=31-nn(c),_=1<<h,p|=a[h],c&=~_;return p}function Ak(a,c){switch(a){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ck(a,c){for(var h=a.suspendedLanes,p=a.pingedLanes,_=a.expirationTimes,v=a.pendingLanes;0<v;){var x=31-nn(v),B=1<<x,U=_[x];U===-1?(!(B&h)||B&p)&&(_[x]=Ak(B,c)):U<=c&&(a.expiredLanes|=B),v&=~B}}function jd(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function j1(){var a=$c;return $c<<=1,!($c&4194240)&&($c=64),a}function Hd(a){for(var c=[],h=0;31>h;h++)c.push(a);return c}function qa(a,c,h){a.pendingLanes|=c,c!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,c=31-nn(c),a[c]=h}function Rk(a,c){var h=a.pendingLanes&~c;a.pendingLanes=c,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=c,a.mutableReadLanes&=c,a.entangledLanes&=c,c=a.entanglements;var p=a.eventTimes;for(a=a.expirationTimes;0<h;){var _=31-nn(h),v=1<<_;c[_]=0,p[_]=-1,a[_]=-1,h&=~v}}function Wd(a,c){var h=a.entangledLanes|=c;for(a=a.entanglements;h;){var p=31-nn(h),_=1<<p;_&c|a[p]&c&&(a[p]|=c),h&=~_}}var Je=0;function H1(a){return a&=-a,1<a?4<a?a&268435455?16:536870912:4:1}var W1,qd,q1,X1,K1,Xd=!1,Hc=[],fi=null,hi=null,di=null,Xa=new Map,Ka=new Map,pi=[],Pk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Y1(a,c){switch(a){case"focusin":case"focusout":fi=null;break;case"dragenter":case"dragleave":hi=null;break;case"mouseover":case"mouseout":di=null;break;case"pointerover":case"pointerout":Xa.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ka.delete(c.pointerId)}}function Ya(a,c,h,p,_,v){return a===null||a.nativeEvent!==v?(a={blockedOn:c,domEventName:h,eventSystemFlags:p,nativeEvent:v,targetContainers:[_]},c!==null&&(c=cl(c),c!==null&&qd(c)),a):(a.eventSystemFlags|=p,c=a.targetContainers,_!==null&&c.indexOf(_)===-1&&c.push(_),a)}function Mk(a,c,h,p,_){switch(c){case"focusin":return fi=Ya(fi,a,c,h,p,_),!0;case"dragenter":return hi=Ya(hi,a,c,h,p,_),!0;case"mouseover":return di=Ya(di,a,c,h,p,_),!0;case"pointerover":var v=_.pointerId;return Xa.set(v,Ya(Xa.get(v)||null,a,c,h,p,_)),!0;case"gotpointercapture":return v=_.pointerId,Ka.set(v,Ya(Ka.get(v)||null,a,c,h,p,_)),!0}return!1}function Z1(a){var c=is(a.target);if(c!==null){var h=ns(c);if(h!==null){if(c=h.tag,c===13){if(c=F1(h),c!==null){a.blockedOn=c,K1(a.priority,function(){q1(h)});return}}else if(c===3&&h.stateNode.current.memoizedState.isDehydrated){a.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Wc(a){if(a.blockedOn!==null)return!1;for(var c=a.targetContainers;0<c.length;){var h=Yd(a.domEventName,a.eventSystemFlags,c[0],a.nativeEvent);if(h===null){h=a.nativeEvent;var p=new h.constructor(h.type,h);$a=p,h.target.dispatchEvent(p),$a=null}else return c=cl(h),c!==null&&qd(c),a.blockedOn=h,!1;c.shift()}return!0}function G1(a,c,h){Wc(a)&&h.delete(c)}function Ik(){Xd=!1,fi!==null&&Wc(fi)&&(fi=null),hi!==null&&Wc(hi)&&(hi=null),di!==null&&Wc(di)&&(di=null),Xa.forEach(G1),Ka.forEach(G1)}function Za(a,c){a.blockedOn===c&&(a.blockedOn=null,Xd||(Xd=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ik)))}function Ga(a){function c(_){return Za(_,a)}if(0<Hc.length){Za(Hc[0],a);for(var h=1;h<Hc.length;h++){var p=Hc[h];p.blockedOn===a&&(p.blockedOn=null)}}for(fi!==null&&Za(fi,a),hi!==null&&Za(hi,a),di!==null&&Za(di,a),Xa.forEach(c),Ka.forEach(c),h=0;h<pi.length;h++)p=pi[h],p.blockedOn===a&&(p.blockedOn=null);for(;0<pi.length&&(h=pi[0],h.blockedOn===null);)Z1(h),h.blockedOn===null&&pi.shift()}var ro=P.ReactCurrentBatchConfig,qc=!0;function Ok(a,c,h,p){var _=Je,v=ro.transition;ro.transition=null;try{Je=1,Kd(a,c,h,p)}finally{Je=_,ro.transition=v}}function kk(a,c,h,p){var _=Je,v=ro.transition;ro.transition=null;try{Je=4,Kd(a,c,h,p)}finally{Je=_,ro.transition=v}}function Kd(a,c,h,p){if(qc){var _=Yd(a,c,h,p);if(_===null)hp(a,c,p,Xc,h),Y1(a,p);else if(Mk(_,a,c,h,p))p.stopPropagation();else if(Y1(a,p),c&4&&-1<Pk.indexOf(a)){for(;_!==null;){var v=cl(_);if(v!==null&&W1(v),v=Yd(a,c,h,p),v===null&&hp(a,c,p,Xc,h),v===_)break;_=v}_!==null&&p.stopPropagation()}else hp(a,c,p,null,h)}}var Xc=null;function Yd(a,c,h,p){if(Xc=null,a=es(p),a=is(a),a!==null)if(c=ns(a),c===null)a=null;else if(h=c.tag,h===13){if(a=F1(c),a!==null)return a;a=null}else if(h===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;a=null}else c!==a&&(a=null);return Xc=a,null}function Q1(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bk()){case Vd:return 1;case $1:return 4;case Uc:case wk:return 16;case V1:return 536870912;default:return 16}default:return 16}}var gi=null,Zd=null,Kc=null;function J1(){if(Kc)return Kc;var a,c=Zd,h=c.length,p,_="value"in gi?gi.value:gi.textContent,v=_.length;for(a=0;a<h&&c[a]===_[a];a++);var x=h-a;for(p=1;p<=x&&c[h-p]===_[v-p];p++);return Kc=_.slice(a,1<p?1-p:void 0)}function Yc(a){var c=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&c===13&&(a=13)):a=c,a===10&&(a=13),32<=a||a===13?a:0}function Zc(){return!0}function ew(){return!1}function Ir(a){function c(h,p,_,v,x){this._reactName=h,this._targetInst=_,this.type=p,this.nativeEvent=v,this.target=x,this.currentTarget=null;for(var B in a)a.hasOwnProperty(B)&&(h=a[B],this[B]=h?h(v):v[B]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Zc:ew,this.isPropagationStopped=ew,this}return j(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=Zc)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=Zc)},persist:function(){},isPersistent:Zc}),c}var no={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gd=Ir(no),Qa=j({},no,{view:0,detail:0}),Nk=Ir(Qa),Qd,Jd,Ja,Gc=j({},Qa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tp,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Ja&&(Ja&&a.type==="mousemove"?(Qd=a.screenX-Ja.screenX,Jd=a.screenY-Ja.screenY):Jd=Qd=0,Ja=a),Qd)},movementY:function(a){return"movementY"in a?a.movementY:Jd}}),tw=Ir(Gc),Fk=j({},Gc,{dataTransfer:0}),Dk=Ir(Fk),Bk=j({},Qa,{relatedTarget:0}),ep=Ir(Bk),Lk=j({},no,{animationName:0,elapsedTime:0,pseudoElement:0}),Uk=Ir(Lk),zk=j({},no,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),$k=Ir(zk),Vk=j({},no,{data:0}),rw=Ir(Vk),jk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qk(a){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(a):(a=Wk[a])?!!c[a]:!1}function tp(){return qk}var Xk=j({},Qa,{key:function(a){if(a.key){var c=jk[a.key]||a.key;if(c!=="Unidentified")return c}return a.type==="keypress"?(a=Yc(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Hk[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tp,charCode:function(a){return a.type==="keypress"?Yc(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Yc(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Kk=Ir(Xk),Yk=j({},Gc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nw=Ir(Yk),Zk=j({},Qa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tp}),Gk=Ir(Zk),Qk=j({},no,{propertyName:0,elapsedTime:0,pseudoElement:0}),Jk=Ir(Qk),eN=j({},Gc,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),tN=Ir(eN),rN=[9,13,27,32],rp=l&&"CompositionEvent"in window,el=null;l&&"documentMode"in document&&(el=document.documentMode);var nN=l&&"TextEvent"in window&&!el,iw=l&&(!rp||el&&8<el&&11>=el),sw=" ",ow=!1;function aw(a,c){switch(a){case"keyup":return rN.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lw(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var io=!1;function iN(a,c){switch(a){case"compositionend":return lw(c);case"keypress":return c.which!==32?null:(ow=!0,sw);case"textInput":return a=c.data,a===sw&&ow?null:a;default:return null}}function sN(a,c){if(io)return a==="compositionend"||!rp&&aw(a,c)?(a=J1(),Kc=Zd=gi=null,io=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return iw&&c.locale!=="ko"?null:c.data;default:return null}}var oN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cw(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c==="input"?!!oN[a.type]:c==="textarea"}function uw(a,c,h,p){to(p),c=ru(c,"onChange"),0<c.length&&(h=new Gd("onChange","change",null,h,p),a.push({event:h,listeners:c}))}var tl=null,rl=null;function aN(a){Rw(a,0)}function Qc(a){var c=co(a);if(vt(c))return a}function lN(a,c){if(a==="change")return c}var fw=!1;if(l){var np;if(l){var ip="oninput"in document;if(!ip){var hw=document.createElement("div");hw.setAttribute("oninput","return;"),ip=typeof hw.oninput=="function"}np=ip}else np=!1;fw=np&&(!document.documentMode||9<document.documentMode)}function dw(){tl&&(tl.detachEvent("onpropertychange",pw),rl=tl=null)}function pw(a){if(a.propertyName==="value"&&Qc(rl)){var c=[];uw(c,rl,a,es(a)),N1(aN,c)}}function cN(a,c,h){a==="focusin"?(dw(),tl=c,rl=h,tl.attachEvent("onpropertychange",pw)):a==="focusout"&&dw()}function uN(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Qc(rl)}function fN(a,c){if(a==="click")return Qc(c)}function hN(a,c){if(a==="input"||a==="change")return Qc(c)}function dN(a,c){return a===c&&(a!==0||1/a===1/c)||a!==a&&c!==c}var sn=typeof Object.is=="function"?Object.is:dN;function nl(a,c){if(sn(a,c))return!0;if(typeof a!="object"||a===null||typeof c!="object"||c===null)return!1;var h=Object.keys(a),p=Object.keys(c);if(h.length!==p.length)return!1;for(p=0;p<h.length;p++){var _=h[p];if(!u.call(c,_)||!sn(a[_],c[_]))return!1}return!0}function gw(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function mw(a,c){var h=gw(a);a=0;for(var p;h;){if(h.nodeType===3){if(p=a+h.textContent.length,a<=c&&p>=c)return{node:h,offset:c-a};a=p}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=gw(h)}}function _w(a,c){return a&&c?a===c?!0:a&&a.nodeType===3?!1:c&&c.nodeType===3?_w(a,c.parentNode):"contains"in a?a.contains(c):a.compareDocumentPosition?!!(a.compareDocumentPosition(c)&16):!1:!1}function yw(){for(var a=window,c=nt();c instanceof a.HTMLIFrameElement;){try{var h=typeof c.contentWindow.location.href=="string"}catch{h=!1}if(h)a=c.contentWindow;else break;c=nt(a.document)}return c}function sp(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c&&(c==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||c==="textarea"||a.contentEditable==="true")}function pN(a){var c=yw(),h=a.focusedElem,p=a.selectionRange;if(c!==h&&h&&h.ownerDocument&&_w(h.ownerDocument.documentElement,h)){if(p!==null&&sp(h)){if(c=p.start,a=p.end,a===void 0&&(a=c),"selectionStart"in h)h.selectionStart=c,h.selectionEnd=Math.min(a,h.value.length);else if(a=(c=h.ownerDocument||document)&&c.defaultView||window,a.getSelection){a=a.getSelection();var _=h.textContent.length,v=Math.min(p.start,_);p=p.end===void 0?v:Math.min(p.end,_),!a.extend&&v>p&&(_=p,p=v,v=_),_=mw(h,v);var x=mw(h,p);_&&x&&(a.rangeCount!==1||a.anchorNode!==_.node||a.anchorOffset!==_.offset||a.focusNode!==x.node||a.focusOffset!==x.offset)&&(c=c.createRange(),c.setStart(_.node,_.offset),a.removeAllRanges(),v>p?(a.addRange(c),a.extend(x.node,x.offset)):(c.setEnd(x.node,x.offset),a.addRange(c)))}}for(c=[],a=h;a=a.parentNode;)a.nodeType===1&&c.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<c.length;h++)a=c[h],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var gN=l&&"documentMode"in document&&11>=document.documentMode,so=null,op=null,il=null,ap=!1;function vw(a,c,h){var p=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;ap||so==null||so!==nt(p)||(p=so,"selectionStart"in p&&sp(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),il&&nl(il,p)||(il=p,p=ru(op,"onSelect"),0<p.length&&(c=new Gd("onSelect","select",null,c,h),a.push({event:c,listeners:p}),c.target=so)))}function Jc(a,c){var h={};return h[a.toLowerCase()]=c.toLowerCase(),h["Webkit"+a]="webkit"+c,h["Moz"+a]="moz"+c,h}var oo={animationend:Jc("Animation","AnimationEnd"),animationiteration:Jc("Animation","AnimationIteration"),animationstart:Jc("Animation","AnimationStart"),transitionend:Jc("Transition","TransitionEnd")},lp={},bw={};l&&(bw=document.createElement("div").style,"AnimationEvent"in window||(delete oo.animationend.animation,delete oo.animationiteration.animation,delete oo.animationstart.animation),"TransitionEvent"in window||delete oo.transitionend.transition);function eu(a){if(lp[a])return lp[a];if(!oo[a])return a;var c=oo[a],h;for(h in c)if(c.hasOwnProperty(h)&&h in bw)return lp[a]=c[h];return a}var ww=eu("animationend"),Sw=eu("animationiteration"),xw=eu("animationstart"),Tw=eu("transitionend"),Ew=new Map,Aw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function mi(a,c){Ew.set(a,c),s(c,[a])}for(var cp=0;cp<Aw.length;cp++){var up=Aw[cp],mN=up.toLowerCase(),_N=up[0].toUpperCase()+up.slice(1);mi(mN,"on"+_N)}mi(ww,"onAnimationEnd"),mi(Sw,"onAnimationIteration"),mi(xw,"onAnimationStart"),mi("dblclick","onDoubleClick"),mi("focusin","onFocus"),mi("focusout","onBlur"),mi(Tw,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yN=new Set("cancel close invalid load scroll toggle".split(" ").concat(sl));function Cw(a,c,h){var p=a.type||"unknown-event";a.currentTarget=h,mk(p,c,void 0,a),a.currentTarget=null}function Rw(a,c){c=(c&4)!==0;for(var h=0;h<a.length;h++){var p=a[h],_=p.event;p=p.listeners;e:{var v=void 0;if(c)for(var x=p.length-1;0<=x;x--){var B=p[x],U=B.instance,G=B.currentTarget;if(B=B.listener,U!==v&&_.isPropagationStopped())break e;Cw(_,B,G),v=U}else for(x=0;x<p.length;x++){if(B=p[x],U=B.instance,G=B.currentTarget,B=B.listener,U!==v&&_.isPropagationStopped())break e;Cw(_,B,G),v=U}}}if(Lc)throw a=$d,Lc=!1,$d=null,a}function ft(a,c){var h=c[yp];h===void 0&&(h=c[yp]=new Set);var p=a+"__bubble";h.has(p)||(Pw(c,a,2,!1),h.add(p))}function fp(a,c,h){var p=0;c&&(p|=4),Pw(h,a,p,c)}var tu="_reactListening"+Math.random().toString(36).slice(2);function ol(a){if(!a[tu]){a[tu]=!0,n.forEach(function(h){h!=="selectionchange"&&(yN.has(h)||fp(h,!1,a),fp(h,!0,a))});var c=a.nodeType===9?a:a.ownerDocument;c===null||c[tu]||(c[tu]=!0,fp("selectionchange",!1,c))}}function Pw(a,c,h,p){switch(Q1(c)){case 1:var _=Ok;break;case 4:_=kk;break;default:_=Kd}h=_.bind(null,c,h,a),_=void 0,!zd||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(_=!0),p?_!==void 0?a.addEventListener(c,h,{capture:!0,passive:_}):a.addEventListener(c,h,!0):_!==void 0?a.addEventListener(c,h,{passive:_}):a.addEventListener(c,h,!1)}function hp(a,c,h,p,_){var v=p;if(!(c&1)&&!(c&2)&&p!==null)e:for(;;){if(p===null)return;var x=p.tag;if(x===3||x===4){var B=p.stateNode.containerInfo;if(B===_||B.nodeType===8&&B.parentNode===_)break;if(x===4)for(x=p.return;x!==null;){var U=x.tag;if((U===3||U===4)&&(U=x.stateNode.containerInfo,U===_||U.nodeType===8&&U.parentNode===_))return;x=x.return}for(;B!==null;){if(x=is(B),x===null)return;if(U=x.tag,U===5||U===6){p=v=x;continue e}B=B.parentNode}}p=p.return}N1(function(){var G=v,ae=es(h),ce=[];e:{var oe=Ew.get(a);if(oe!==void 0){var _e=Gd,Se=a;switch(a){case"keypress":if(Yc(h)===0)break e;case"keydown":case"keyup":_e=Kk;break;case"focusin":Se="focus",_e=ep;break;case"focusout":Se="blur",_e=ep;break;case"beforeblur":case"afterblur":_e=ep;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_e=tw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_e=Dk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_e=Gk;break;case ww:case Sw:case xw:_e=Uk;break;case Tw:_e=Jk;break;case"scroll":_e=Nk;break;case"wheel":_e=tN;break;case"copy":case"cut":case"paste":_e=$k;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_e=nw}var Ee=(c&4)!==0,Nt=!Ee&&a==="scroll",K=Ee?oe!==null?oe+"Capture":null:oe;Ee=[];for(var V=G,Z;V!==null;){Z=V;var de=Z.stateNode;if(Z.tag===5&&de!==null&&(Z=de,K!==null&&(de=Va(V,K),de!=null&&Ee.push(al(V,de,Z)))),Nt)break;V=V.return}0<Ee.length&&(oe=new _e(oe,Se,null,h,ae),ce.push({event:oe,listeners:Ee}))}}if(!(c&7)){e:{if(oe=a==="mouseover"||a==="pointerover",_e=a==="mouseout"||a==="pointerout",oe&&h!==$a&&(Se=h.relatedTarget||h.fromElement)&&(is(Se)||Se[Vn]))break e;if((_e||oe)&&(oe=ae.window===ae?ae:(oe=ae.ownerDocument)?oe.defaultView||oe.parentWindow:window,_e?(Se=h.relatedTarget||h.toElement,_e=G,Se=Se?is(Se):null,Se!==null&&(Nt=ns(Se),Se!==Nt||Se.tag!==5&&Se.tag!==6)&&(Se=null)):(_e=null,Se=G),_e!==Se)){if(Ee=tw,de="onMouseLeave",K="onMouseEnter",V="mouse",(a==="pointerout"||a==="pointerover")&&(Ee=nw,de="onPointerLeave",K="onPointerEnter",V="pointer"),Nt=_e==null?oe:co(_e),Z=Se==null?oe:co(Se),oe=new Ee(de,V+"leave",_e,h,ae),oe.target=Nt,oe.relatedTarget=Z,de=null,is(ae)===G&&(Ee=new Ee(K,V+"enter",Se,h,ae),Ee.target=Z,Ee.relatedTarget=Nt,de=Ee),Nt=de,_e&&Se)t:{for(Ee=_e,K=Se,V=0,Z=Ee;Z;Z=ao(Z))V++;for(Z=0,de=K;de;de=ao(de))Z++;for(;0<V-Z;)Ee=ao(Ee),V--;for(;0<Z-V;)K=ao(K),Z--;for(;V--;){if(Ee===K||K!==null&&Ee===K.alternate)break t;Ee=ao(Ee),K=ao(K)}Ee=null}else Ee=null;_e!==null&&Mw(ce,oe,_e,Ee,!1),Se!==null&&Nt!==null&&Mw(ce,Nt,Se,Ee,!0)}}e:{if(oe=G?co(G):window,_e=oe.nodeName&&oe.nodeName.toLowerCase(),_e==="select"||_e==="input"&&oe.type==="file")var Ae=lN;else if(cw(oe))if(fw)Ae=hN;else{Ae=uN;var Fe=cN}else(_e=oe.nodeName)&&_e.toLowerCase()==="input"&&(oe.type==="checkbox"||oe.type==="radio")&&(Ae=fN);if(Ae&&(Ae=Ae(a,G))){uw(ce,Ae,h,ae);break e}Fe&&Fe(a,oe,G),a==="focusout"&&(Fe=oe._wrapperState)&&Fe.controlled&&oe.type==="number"&&Jt(oe,"number",oe.value)}switch(Fe=G?co(G):window,a){case"focusin":(cw(Fe)||Fe.contentEditable==="true")&&(so=Fe,op=G,il=null);break;case"focusout":il=op=so=null;break;case"mousedown":ap=!0;break;case"contextmenu":case"mouseup":case"dragend":ap=!1,vw(ce,h,ae);break;case"selectionchange":if(gN)break;case"keydown":case"keyup":vw(ce,h,ae)}var De;if(rp)e:{switch(a){case"compositionstart":var Le="onCompositionStart";break e;case"compositionend":Le="onCompositionEnd";break e;case"compositionupdate":Le="onCompositionUpdate";break e}Le=void 0}else io?aw(a,h)&&(Le="onCompositionEnd"):a==="keydown"&&h.keyCode===229&&(Le="onCompositionStart");Le&&(iw&&h.locale!=="ko"&&(io||Le!=="onCompositionStart"?Le==="onCompositionEnd"&&io&&(De=J1()):(gi=ae,Zd="value"in gi?gi.value:gi.textContent,io=!0)),Fe=ru(G,Le),0<Fe.length&&(Le=new rw(Le,a,null,h,ae),ce.push({event:Le,listeners:Fe}),De?Le.data=De:(De=lw(h),De!==null&&(Le.data=De)))),(De=nN?iN(a,h):sN(a,h))&&(G=ru(G,"onBeforeInput"),0<G.length&&(ae=new rw("onBeforeInput","beforeinput",null,h,ae),ce.push({event:ae,listeners:G}),ae.data=De))}Rw(ce,c)})}function al(a,c,h){return{instance:a,listener:c,currentTarget:h}}function ru(a,c){for(var h=c+"Capture",p=[];a!==null;){var _=a,v=_.stateNode;_.tag===5&&v!==null&&(_=v,v=Va(a,h),v!=null&&p.unshift(al(a,v,_)),v=Va(a,c),v!=null&&p.push(al(a,v,_))),a=a.return}return p}function ao(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function Mw(a,c,h,p,_){for(var v=c._reactName,x=[];h!==null&&h!==p;){var B=h,U=B.alternate,G=B.stateNode;if(U!==null&&U===p)break;B.tag===5&&G!==null&&(B=G,_?(U=Va(h,v),U!=null&&x.unshift(al(h,U,B))):_||(U=Va(h,v),U!=null&&x.push(al(h,U,B)))),h=h.return}x.length!==0&&a.push({event:c,listeners:x})}var vN=/\r\n?/g,bN=/\u0000|\uFFFD/g;function Iw(a){return(typeof a=="string"?a:""+a).replace(vN,`
`).replace(bN,"")}function nu(a,c,h){if(c=Iw(c),Iw(a)!==c&&h)throw Error(r(425))}function iu(){}var dp=null,pp=null;function gp(a,c){return a==="textarea"||a==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var mp=typeof setTimeout=="function"?setTimeout:void 0,wN=typeof clearTimeout=="function"?clearTimeout:void 0,Ow=typeof Promise=="function"?Promise:void 0,SN=typeof queueMicrotask=="function"?queueMicrotask:typeof Ow<"u"?function(a){return Ow.resolve(null).then(a).catch(xN)}:mp;function xN(a){setTimeout(function(){throw a})}function _p(a,c){var h=c,p=0;do{var _=h.nextSibling;if(a.removeChild(h),_&&_.nodeType===8)if(h=_.data,h==="/$"){if(p===0){a.removeChild(_),Ga(c);return}p--}else h!=="$"&&h!=="$?"&&h!=="$!"||p++;h=_}while(h);Ga(c)}function _i(a){for(;a!=null;a=a.nextSibling){var c=a.nodeType;if(c===1||c===3)break;if(c===8){if(c=a.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return a}function kw(a){a=a.previousSibling;for(var c=0;a;){if(a.nodeType===8){var h=a.data;if(h==="$"||h==="$!"||h==="$?"){if(c===0)return a;c--}else h==="/$"&&c++}a=a.previousSibling}return null}var lo=Math.random().toString(36).slice(2),Tn="__reactFiber$"+lo,ll="__reactProps$"+lo,Vn="__reactContainer$"+lo,yp="__reactEvents$"+lo,TN="__reactListeners$"+lo,EN="__reactHandles$"+lo;function is(a){var c=a[Tn];if(c)return c;for(var h=a.parentNode;h;){if(c=h[Vn]||h[Tn]){if(h=c.alternate,c.child!==null||h!==null&&h.child!==null)for(a=kw(a);a!==null;){if(h=a[Tn])return h;a=kw(a)}return c}a=h,h=a.parentNode}return null}function cl(a){return a=a[Tn]||a[Vn],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function co(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(r(33))}function su(a){return a[ll]||null}var vp=[],uo=-1;function yi(a){return{current:a}}function ht(a){0>uo||(a.current=vp[uo],vp[uo]=null,uo--)}function ut(a,c){uo++,vp[uo]=a.current,a.current=c}var vi={},ar=yi(vi),br=yi(!1),ss=vi;function fo(a,c){var h=a.type.contextTypes;if(!h)return vi;var p=a.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===c)return p.__reactInternalMemoizedMaskedChildContext;var _={},v;for(v in h)_[v]=c[v];return p&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=c,a.__reactInternalMemoizedMaskedChildContext=_),_}function wr(a){return a=a.childContextTypes,a!=null}function ou(){ht(br),ht(ar)}function Nw(a,c,h){if(ar.current!==vi)throw Error(r(168));ut(ar,c),ut(br,h)}function Fw(a,c,h){var p=a.stateNode;if(c=c.childContextTypes,typeof p.getChildContext!="function")return h;p=p.getChildContext();for(var _ in p)if(!(_ in c))throw Error(r(108,Te(a)||"Unknown",_));return j({},h,p)}function au(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||vi,ss=ar.current,ut(ar,a),ut(br,br.current),!0}function Dw(a,c,h){var p=a.stateNode;if(!p)throw Error(r(169));h?(a=Fw(a,c,ss),p.__reactInternalMemoizedMergedChildContext=a,ht(br),ht(ar),ut(ar,a)):ht(br),ut(br,h)}var jn=null,lu=!1,bp=!1;function Bw(a){jn===null?jn=[a]:jn.push(a)}function AN(a){lu=!0,Bw(a)}function bi(){if(!bp&&jn!==null){bp=!0;var a=0,c=Je;try{var h=jn;for(Je=1;a<h.length;a++){var p=h[a];do p=p(!0);while(p!==null)}jn=null,lu=!1}catch(_){throw jn!==null&&(jn=jn.slice(a+1)),U1(Vd,bi),_}finally{Je=c,bp=!1}}return null}var ho=[],po=0,cu=null,uu=0,Hr=[],Wr=0,os=null,Hn=1,Wn="";function as(a,c){ho[po++]=uu,ho[po++]=cu,cu=a,uu=c}function Lw(a,c,h){Hr[Wr++]=Hn,Hr[Wr++]=Wn,Hr[Wr++]=os,os=a;var p=Hn;a=Wn;var _=32-nn(p)-1;p&=~(1<<_),h+=1;var v=32-nn(c)+_;if(30<v){var x=_-_%5;v=(p&(1<<x)-1).toString(32),p>>=x,_-=x,Hn=1<<32-nn(c)+_|h<<_|p,Wn=v+a}else Hn=1<<v|h<<_|p,Wn=a}function wp(a){a.return!==null&&(as(a,1),Lw(a,1,0))}function Sp(a){for(;a===cu;)cu=ho[--po],ho[po]=null,uu=ho[--po],ho[po]=null;for(;a===os;)os=Hr[--Wr],Hr[Wr]=null,Wn=Hr[--Wr],Hr[Wr]=null,Hn=Hr[--Wr],Hr[Wr]=null}var Or=null,kr=null,gt=!1,on=null;function Uw(a,c){var h=Yr(5,null,null,0);h.elementType="DELETED",h.stateNode=c,h.return=a,c=a.deletions,c===null?(a.deletions=[h],a.flags|=16):c.push(h)}function zw(a,c){switch(a.tag){case 5:var h=a.type;return c=c.nodeType!==1||h.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(a.stateNode=c,Or=a,kr=_i(c.firstChild),!0):!1;case 6:return c=a.pendingProps===""||c.nodeType!==3?null:c,c!==null?(a.stateNode=c,Or=a,kr=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(h=os!==null?{id:Hn,overflow:Wn}:null,a.memoizedState={dehydrated:c,treeContext:h,retryLane:1073741824},h=Yr(18,null,null,0),h.stateNode=c,h.return=a,a.child=h,Or=a,kr=null,!0):!1;default:return!1}}function xp(a){return(a.mode&1)!==0&&(a.flags&128)===0}function Tp(a){if(gt){var c=kr;if(c){var h=c;if(!zw(a,c)){if(xp(a))throw Error(r(418));c=_i(h.nextSibling);var p=Or;c&&zw(a,c)?Uw(p,h):(a.flags=a.flags&-4097|2,gt=!1,Or=a)}}else{if(xp(a))throw Error(r(418));a.flags=a.flags&-4097|2,gt=!1,Or=a}}}function $w(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;Or=a}function fu(a){if(a!==Or)return!1;if(!gt)return $w(a),gt=!0,!1;var c;if((c=a.tag!==3)&&!(c=a.tag!==5)&&(c=a.type,c=c!=="head"&&c!=="body"&&!gp(a.type,a.memoizedProps)),c&&(c=kr)){if(xp(a))throw Vw(),Error(r(418));for(;c;)Uw(a,c),c=_i(c.nextSibling)}if($w(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));e:{for(a=a.nextSibling,c=0;a;){if(a.nodeType===8){var h=a.data;if(h==="/$"){if(c===0){kr=_i(a.nextSibling);break e}c--}else h!=="$"&&h!=="$!"&&h!=="$?"||c++}a=a.nextSibling}kr=null}}else kr=Or?_i(a.stateNode.nextSibling):null;return!0}function Vw(){for(var a=kr;a;)a=_i(a.nextSibling)}function go(){kr=Or=null,gt=!1}function Ep(a){on===null?on=[a]:on.push(a)}var CN=P.ReactCurrentBatchConfig;function ul(a,c,h){if(a=h.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(r(309));var p=h.stateNode}if(!p)throw Error(r(147,a));var _=p,v=""+a;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===v?c.ref:(c=function(x){var B=_.refs;x===null?delete B[v]:B[v]=x},c._stringRef=v,c)}if(typeof a!="string")throw Error(r(284));if(!h._owner)throw Error(r(290,a))}return a}function hu(a,c){throw a=Object.prototype.toString.call(c),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":a))}function jw(a){var c=a._init;return c(a._payload)}function Hw(a){function c(K,V){if(a){var Z=K.deletions;Z===null?(K.deletions=[V],K.flags|=16):Z.push(V)}}function h(K,V){if(!a)return null;for(;V!==null;)c(K,V),V=V.sibling;return null}function p(K,V){for(K=new Map;V!==null;)V.key!==null?K.set(V.key,V):K.set(V.index,V),V=V.sibling;return K}function _(K,V){return K=Ri(K,V),K.index=0,K.sibling=null,K}function v(K,V,Z){return K.index=Z,a?(Z=K.alternate,Z!==null?(Z=Z.index,Z<V?(K.flags|=2,V):Z):(K.flags|=2,V)):(K.flags|=1048576,V)}function x(K){return a&&K.alternate===null&&(K.flags|=2),K}function B(K,V,Z,de){return V===null||V.tag!==6?(V=mg(Z,K.mode,de),V.return=K,V):(V=_(V,Z),V.return=K,V)}function U(K,V,Z,de){var Ae=Z.type;return Ae===q?ae(K,V,Z.props.children,de,Z.key):V!==null&&(V.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===F&&jw(Ae)===V.type)?(de=_(V,Z.props),de.ref=ul(K,V,Z),de.return=K,de):(de=Du(Z.type,Z.key,Z.props,null,K.mode,de),de.ref=ul(K,V,Z),de.return=K,de)}function G(K,V,Z,de){return V===null||V.tag!==4||V.stateNode.containerInfo!==Z.containerInfo||V.stateNode.implementation!==Z.implementation?(V=_g(Z,K.mode,de),V.return=K,V):(V=_(V,Z.children||[]),V.return=K,V)}function ae(K,V,Z,de,Ae){return V===null||V.tag!==7?(V=gs(Z,K.mode,de,Ae),V.return=K,V):(V=_(V,Z),V.return=K,V)}function ce(K,V,Z){if(typeof V=="string"&&V!==""||typeof V=="number")return V=mg(""+V,K.mode,Z),V.return=K,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case M:return Z=Du(V.type,V.key,V.props,null,K.mode,Z),Z.ref=ul(K,null,V),Z.return=K,Z;case D:return V=_g(V,K.mode,Z),V.return=K,V;case F:var de=V._init;return ce(K,de(V._payload),Z)}if(mr(V)||$(V))return V=gs(V,K.mode,Z,null),V.return=K,V;hu(K,V)}return null}function oe(K,V,Z,de){var Ae=V!==null?V.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number")return Ae!==null?null:B(K,V,""+Z,de);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case M:return Z.key===Ae?U(K,V,Z,de):null;case D:return Z.key===Ae?G(K,V,Z,de):null;case F:return Ae=Z._init,oe(K,V,Ae(Z._payload),de)}if(mr(Z)||$(Z))return Ae!==null?null:ae(K,V,Z,de,null);hu(K,Z)}return null}function _e(K,V,Z,de,Ae){if(typeof de=="string"&&de!==""||typeof de=="number")return K=K.get(Z)||null,B(V,K,""+de,Ae);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case M:return K=K.get(de.key===null?Z:de.key)||null,U(V,K,de,Ae);case D:return K=K.get(de.key===null?Z:de.key)||null,G(V,K,de,Ae);case F:var Fe=de._init;return _e(K,V,Z,Fe(de._payload),Ae)}if(mr(de)||$(de))return K=K.get(Z)||null,ae(V,K,de,Ae,null);hu(V,de)}return null}function Se(K,V,Z,de){for(var Ae=null,Fe=null,De=V,Le=V=0,Gt=null;De!==null&&Le<Z.length;Le++){De.index>Le?(Gt=De,De=null):Gt=De.sibling;var Ke=oe(K,De,Z[Le],de);if(Ke===null){De===null&&(De=Gt);break}a&&De&&Ke.alternate===null&&c(K,De),V=v(Ke,V,Le),Fe===null?Ae=Ke:Fe.sibling=Ke,Fe=Ke,De=Gt}if(Le===Z.length)return h(K,De),gt&&as(K,Le),Ae;if(De===null){for(;Le<Z.length;Le++)De=ce(K,Z[Le],de),De!==null&&(V=v(De,V,Le),Fe===null?Ae=De:Fe.sibling=De,Fe=De);return gt&&as(K,Le),Ae}for(De=p(K,De);Le<Z.length;Le++)Gt=_e(De,K,Le,Z[Le],de),Gt!==null&&(a&&Gt.alternate!==null&&De.delete(Gt.key===null?Le:Gt.key),V=v(Gt,V,Le),Fe===null?Ae=Gt:Fe.sibling=Gt,Fe=Gt);return a&&De.forEach(function(Pi){return c(K,Pi)}),gt&&as(K,Le),Ae}function Ee(K,V,Z,de){var Ae=$(Z);if(typeof Ae!="function")throw Error(r(150));if(Z=Ae.call(Z),Z==null)throw Error(r(151));for(var Fe=Ae=null,De=V,Le=V=0,Gt=null,Ke=Z.next();De!==null&&!Ke.done;Le++,Ke=Z.next()){De.index>Le?(Gt=De,De=null):Gt=De.sibling;var Pi=oe(K,De,Ke.value,de);if(Pi===null){De===null&&(De=Gt);break}a&&De&&Pi.alternate===null&&c(K,De),V=v(Pi,V,Le),Fe===null?Ae=Pi:Fe.sibling=Pi,Fe=Pi,De=Gt}if(Ke.done)return h(K,De),gt&&as(K,Le),Ae;if(De===null){for(;!Ke.done;Le++,Ke=Z.next())Ke=ce(K,Ke.value,de),Ke!==null&&(V=v(Ke,V,Le),Fe===null?Ae=Ke:Fe.sibling=Ke,Fe=Ke);return gt&&as(K,Le),Ae}for(De=p(K,De);!Ke.done;Le++,Ke=Z.next())Ke=_e(De,K,Le,Ke.value,de),Ke!==null&&(a&&Ke.alternate!==null&&De.delete(Ke.key===null?Le:Ke.key),V=v(Ke,V,Le),Fe===null?Ae=Ke:Fe.sibling=Ke,Fe=Ke);return a&&De.forEach(function(sF){return c(K,sF)}),gt&&as(K,Le),Ae}function Nt(K,V,Z,de){if(typeof Z=="object"&&Z!==null&&Z.type===q&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case M:e:{for(var Ae=Z.key,Fe=V;Fe!==null;){if(Fe.key===Ae){if(Ae=Z.type,Ae===q){if(Fe.tag===7){h(K,Fe.sibling),V=_(Fe,Z.props.children),V.return=K,K=V;break e}}else if(Fe.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===F&&jw(Ae)===Fe.type){h(K,Fe.sibling),V=_(Fe,Z.props),V.ref=ul(K,Fe,Z),V.return=K,K=V;break e}h(K,Fe);break}else c(K,Fe);Fe=Fe.sibling}Z.type===q?(V=gs(Z.props.children,K.mode,de,Z.key),V.return=K,K=V):(de=Du(Z.type,Z.key,Z.props,null,K.mode,de),de.ref=ul(K,V,Z),de.return=K,K=de)}return x(K);case D:e:{for(Fe=Z.key;V!==null;){if(V.key===Fe)if(V.tag===4&&V.stateNode.containerInfo===Z.containerInfo&&V.stateNode.implementation===Z.implementation){h(K,V.sibling),V=_(V,Z.children||[]),V.return=K,K=V;break e}else{h(K,V);break}else c(K,V);V=V.sibling}V=_g(Z,K.mode,de),V.return=K,K=V}return x(K);case F:return Fe=Z._init,Nt(K,V,Fe(Z._payload),de)}if(mr(Z))return Se(K,V,Z,de);if($(Z))return Ee(K,V,Z,de);hu(K,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"?(Z=""+Z,V!==null&&V.tag===6?(h(K,V.sibling),V=_(V,Z),V.return=K,K=V):(h(K,V),V=mg(Z,K.mode,de),V.return=K,K=V),x(K)):h(K,V)}return Nt}var mo=Hw(!0),Ww=Hw(!1),du=yi(null),pu=null,_o=null,Ap=null;function Cp(){Ap=_o=pu=null}function Rp(a){var c=du.current;ht(du),a._currentValue=c}function Pp(a,c,h){for(;a!==null;){var p=a.alternate;if((a.childLanes&c)!==c?(a.childLanes|=c,p!==null&&(p.childLanes|=c)):p!==null&&(p.childLanes&c)!==c&&(p.childLanes|=c),a===h)break;a=a.return}}function yo(a,c){pu=a,Ap=_o=null,a=a.dependencies,a!==null&&a.firstContext!==null&&(a.lanes&c&&(Sr=!0),a.firstContext=null)}function qr(a){var c=a._currentValue;if(Ap!==a)if(a={context:a,memoizedValue:c,next:null},_o===null){if(pu===null)throw Error(r(308));_o=a,pu.dependencies={lanes:0,firstContext:a}}else _o=_o.next=a;return c}var ls=null;function Mp(a){ls===null?ls=[a]:ls.push(a)}function qw(a,c,h,p){var _=c.interleaved;return _===null?(h.next=h,Mp(c)):(h.next=_.next,_.next=h),c.interleaved=h,qn(a,p)}function qn(a,c){a.lanes|=c;var h=a.alternate;for(h!==null&&(h.lanes|=c),h=a,a=a.return;a!==null;)a.childLanes|=c,h=a.alternate,h!==null&&(h.childLanes|=c),h=a,a=a.return;return h.tag===3?h.stateNode:null}var wi=!1;function Ip(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Xw(a,c){a=a.updateQueue,c.updateQueue===a&&(c.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function Xn(a,c){return{eventTime:a,lane:c,tag:0,payload:null,callback:null,next:null}}function Si(a,c,h){var p=a.updateQueue;if(p===null)return null;if(p=p.shared,Xe&2){var _=p.pending;return _===null?c.next=c:(c.next=_.next,_.next=c),p.pending=c,qn(a,h)}return _=p.interleaved,_===null?(c.next=c,Mp(p)):(c.next=_.next,_.next=c),p.interleaved=c,qn(a,h)}function gu(a,c,h){if(c=c.updateQueue,c!==null&&(c=c.shared,(h&4194240)!==0)){var p=c.lanes;p&=a.pendingLanes,h|=p,c.lanes=h,Wd(a,h)}}function Kw(a,c){var h=a.updateQueue,p=a.alternate;if(p!==null&&(p=p.updateQueue,h===p)){var _=null,v=null;if(h=h.firstBaseUpdate,h!==null){do{var x={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};v===null?_=v=x:v=v.next=x,h=h.next}while(h!==null);v===null?_=v=c:v=v.next=c}else _=v=c;h={baseState:p.baseState,firstBaseUpdate:_,lastBaseUpdate:v,shared:p.shared,effects:p.effects},a.updateQueue=h;return}a=h.lastBaseUpdate,a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=c}function mu(a,c,h,p){var _=a.updateQueue;wi=!1;var v=_.firstBaseUpdate,x=_.lastBaseUpdate,B=_.shared.pending;if(B!==null){_.shared.pending=null;var U=B,G=U.next;U.next=null,x===null?v=G:x.next=G,x=U;var ae=a.alternate;ae!==null&&(ae=ae.updateQueue,B=ae.lastBaseUpdate,B!==x&&(B===null?ae.firstBaseUpdate=G:B.next=G,ae.lastBaseUpdate=U))}if(v!==null){var ce=_.baseState;x=0,ae=G=U=null,B=v;do{var oe=B.lane,_e=B.eventTime;if((p&oe)===oe){ae!==null&&(ae=ae.next={eventTime:_e,lane:0,tag:B.tag,payload:B.payload,callback:B.callback,next:null});e:{var Se=a,Ee=B;switch(oe=c,_e=h,Ee.tag){case 1:if(Se=Ee.payload,typeof Se=="function"){ce=Se.call(_e,ce,oe);break e}ce=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=Ee.payload,oe=typeof Se=="function"?Se.call(_e,ce,oe):Se,oe==null)break e;ce=j({},ce,oe);break e;case 2:wi=!0}}B.callback!==null&&B.lane!==0&&(a.flags|=64,oe=_.effects,oe===null?_.effects=[B]:oe.push(B))}else _e={eventTime:_e,lane:oe,tag:B.tag,payload:B.payload,callback:B.callback,next:null},ae===null?(G=ae=_e,U=ce):ae=ae.next=_e,x|=oe;if(B=B.next,B===null){if(B=_.shared.pending,B===null)break;oe=B,B=oe.next,oe.next=null,_.lastBaseUpdate=oe,_.shared.pending=null}}while(!0);if(ae===null&&(U=ce),_.baseState=U,_.firstBaseUpdate=G,_.lastBaseUpdate=ae,c=_.shared.interleaved,c!==null){_=c;do x|=_.lane,_=_.next;while(_!==c)}else v===null&&(_.shared.lanes=0);fs|=x,a.lanes=x,a.memoizedState=ce}}function Yw(a,c,h){if(a=c.effects,c.effects=null,a!==null)for(c=0;c<a.length;c++){var p=a[c],_=p.callback;if(_!==null){if(p.callback=null,p=h,typeof _!="function")throw Error(r(191,_));_.call(p)}}}var fl={},En=yi(fl),hl=yi(fl),dl=yi(fl);function cs(a){if(a===fl)throw Error(r(174));return a}function Op(a,c){switch(ut(dl,c),ut(hl,a),ut(En,fl),a=c.nodeType,a){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:Me(null,"");break;default:a=a===8?c.parentNode:c,c=a.namespaceURI||null,a=a.tagName,c=Me(c,a)}ht(En),ut(En,c)}function vo(){ht(En),ht(hl),ht(dl)}function Zw(a){cs(dl.current);var c=cs(En.current),h=Me(c,a.type);c!==h&&(ut(hl,a),ut(En,h))}function kp(a){hl.current===a&&(ht(En),ht(hl))}var wt=yi(0);function _u(a){for(var c=a;c!==null;){if(c.tag===13){var h=c.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if(c.flags&128)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var Np=[];function Fp(){for(var a=0;a<Np.length;a++)Np[a]._workInProgressVersionPrimary=null;Np.length=0}var yu=P.ReactCurrentDispatcher,Dp=P.ReactCurrentBatchConfig,us=0,St=null,Ht=null,Yt=null,vu=!1,pl=!1,gl=0,RN=0;function lr(){throw Error(r(321))}function Bp(a,c){if(c===null)return!1;for(var h=0;h<c.length&&h<a.length;h++)if(!sn(a[h],c[h]))return!1;return!0}function Lp(a,c,h,p,_,v){if(us=v,St=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,yu.current=a===null||a.memoizedState===null?ON:kN,a=h(p,_),pl){v=0;do{if(pl=!1,gl=0,25<=v)throw Error(r(301));v+=1,Yt=Ht=null,c.updateQueue=null,yu.current=NN,a=h(p,_)}while(pl)}if(yu.current=Su,c=Ht!==null&&Ht.next!==null,us=0,Yt=Ht=St=null,vu=!1,c)throw Error(r(300));return a}function Up(){var a=gl!==0;return gl=0,a}function An(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yt===null?St.memoizedState=Yt=a:Yt=Yt.next=a,Yt}function Xr(){if(Ht===null){var a=St.alternate;a=a!==null?a.memoizedState:null}else a=Ht.next;var c=Yt===null?St.memoizedState:Yt.next;if(c!==null)Yt=c,Ht=a;else{if(a===null)throw Error(r(310));Ht=a,a={memoizedState:Ht.memoizedState,baseState:Ht.baseState,baseQueue:Ht.baseQueue,queue:Ht.queue,next:null},Yt===null?St.memoizedState=Yt=a:Yt=Yt.next=a}return Yt}function ml(a,c){return typeof c=="function"?c(a):c}function zp(a){var c=Xr(),h=c.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=a;var p=Ht,_=p.baseQueue,v=h.pending;if(v!==null){if(_!==null){var x=_.next;_.next=v.next,v.next=x}p.baseQueue=_=v,h.pending=null}if(_!==null){v=_.next,p=p.baseState;var B=x=null,U=null,G=v;do{var ae=G.lane;if((us&ae)===ae)U!==null&&(U=U.next={lane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),p=G.hasEagerState?G.eagerState:a(p,G.action);else{var ce={lane:ae,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null};U===null?(B=U=ce,x=p):U=U.next=ce,St.lanes|=ae,fs|=ae}G=G.next}while(G!==null&&G!==v);U===null?x=p:U.next=B,sn(p,c.memoizedState)||(Sr=!0),c.memoizedState=p,c.baseState=x,c.baseQueue=U,h.lastRenderedState=p}if(a=h.interleaved,a!==null){_=a;do v=_.lane,St.lanes|=v,fs|=v,_=_.next;while(_!==a)}else _===null&&(h.lanes=0);return[c.memoizedState,h.dispatch]}function $p(a){var c=Xr(),h=c.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=a;var p=h.dispatch,_=h.pending,v=c.memoizedState;if(_!==null){h.pending=null;var x=_=_.next;do v=a(v,x.action),x=x.next;while(x!==_);sn(v,c.memoizedState)||(Sr=!0),c.memoizedState=v,c.baseQueue===null&&(c.baseState=v),h.lastRenderedState=v}return[v,p]}function Gw(){}function Qw(a,c){var h=St,p=Xr(),_=c(),v=!sn(p.memoizedState,_);if(v&&(p.memoizedState=_,Sr=!0),p=p.queue,Vp(tS.bind(null,h,p,a),[a]),p.getSnapshot!==c||v||Yt!==null&&Yt.memoizedState.tag&1){if(h.flags|=2048,_l(9,eS.bind(null,h,p,_,c),void 0,null),Zt===null)throw Error(r(349));us&30||Jw(h,c,_)}return _}function Jw(a,c,h){a.flags|=16384,a={getSnapshot:c,value:h},c=St.updateQueue,c===null?(c={lastEffect:null,stores:null},St.updateQueue=c,c.stores=[a]):(h=c.stores,h===null?c.stores=[a]:h.push(a))}function eS(a,c,h,p){c.value=h,c.getSnapshot=p,rS(c)&&nS(a)}function tS(a,c,h){return h(function(){rS(c)&&nS(a)})}function rS(a){var c=a.getSnapshot;a=a.value;try{var h=c();return!sn(a,h)}catch{return!0}}function nS(a){var c=qn(a,1);c!==null&&un(c,a,1,-1)}function iS(a){var c=An();return typeof a=="function"&&(a=a()),c.memoizedState=c.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ml,lastRenderedState:a},c.queue=a,a=a.dispatch=IN.bind(null,St,a),[c.memoizedState,a]}function _l(a,c,h,p){return a={tag:a,create:c,destroy:h,deps:p,next:null},c=St.updateQueue,c===null?(c={lastEffect:null,stores:null},St.updateQueue=c,c.lastEffect=a.next=a):(h=c.lastEffect,h===null?c.lastEffect=a.next=a:(p=h.next,h.next=a,a.next=p,c.lastEffect=a)),a}function sS(){return Xr().memoizedState}function bu(a,c,h,p){var _=An();St.flags|=a,_.memoizedState=_l(1|c,h,void 0,p===void 0?null:p)}function wu(a,c,h,p){var _=Xr();p=p===void 0?null:p;var v=void 0;if(Ht!==null){var x=Ht.memoizedState;if(v=x.destroy,p!==null&&Bp(p,x.deps)){_.memoizedState=_l(c,h,v,p);return}}St.flags|=a,_.memoizedState=_l(1|c,h,v,p)}function oS(a,c){return bu(8390656,8,a,c)}function Vp(a,c){return wu(2048,8,a,c)}function aS(a,c){return wu(4,2,a,c)}function lS(a,c){return wu(4,4,a,c)}function cS(a,c){if(typeof c=="function")return a=a(),c(a),function(){c(null)};if(c!=null)return a=a(),c.current=a,function(){c.current=null}}function uS(a,c,h){return h=h!=null?h.concat([a]):null,wu(4,4,cS.bind(null,c,a),h)}function jp(){}function fS(a,c){var h=Xr();c=c===void 0?null:c;var p=h.memoizedState;return p!==null&&c!==null&&Bp(c,p[1])?p[0]:(h.memoizedState=[a,c],a)}function hS(a,c){var h=Xr();c=c===void 0?null:c;var p=h.memoizedState;return p!==null&&c!==null&&Bp(c,p[1])?p[0]:(a=a(),h.memoizedState=[a,c],a)}function dS(a,c,h){return us&21?(sn(h,c)||(h=j1(),St.lanes|=h,fs|=h,a.baseState=!0),c):(a.baseState&&(a.baseState=!1,Sr=!0),a.memoizedState=h)}function PN(a,c){var h=Je;Je=h!==0&&4>h?h:4,a(!0);var p=Dp.transition;Dp.transition={};try{a(!1),c()}finally{Je=h,Dp.transition=p}}function pS(){return Xr().memoizedState}function MN(a,c,h){var p=Ai(a);if(h={lane:p,action:h,hasEagerState:!1,eagerState:null,next:null},gS(a))mS(c,h);else if(h=qw(a,c,h,p),h!==null){var _=yr();un(h,a,p,_),_S(h,c,p)}}function IN(a,c,h){var p=Ai(a),_={lane:p,action:h,hasEagerState:!1,eagerState:null,next:null};if(gS(a))mS(c,_);else{var v=a.alternate;if(a.lanes===0&&(v===null||v.lanes===0)&&(v=c.lastRenderedReducer,v!==null))try{var x=c.lastRenderedState,B=v(x,h);if(_.hasEagerState=!0,_.eagerState=B,sn(B,x)){var U=c.interleaved;U===null?(_.next=_,Mp(c)):(_.next=U.next,U.next=_),c.interleaved=_;return}}catch{}finally{}h=qw(a,c,_,p),h!==null&&(_=yr(),un(h,a,p,_),_S(h,c,p))}}function gS(a){var c=a.alternate;return a===St||c!==null&&c===St}function mS(a,c){pl=vu=!0;var h=a.pending;h===null?c.next=c:(c.next=h.next,h.next=c),a.pending=c}function _S(a,c,h){if(h&4194240){var p=c.lanes;p&=a.pendingLanes,h|=p,c.lanes=h,Wd(a,h)}}var Su={readContext:qr,useCallback:lr,useContext:lr,useEffect:lr,useImperativeHandle:lr,useInsertionEffect:lr,useLayoutEffect:lr,useMemo:lr,useReducer:lr,useRef:lr,useState:lr,useDebugValue:lr,useDeferredValue:lr,useTransition:lr,useMutableSource:lr,useSyncExternalStore:lr,useId:lr,unstable_isNewReconciler:!1},ON={readContext:qr,useCallback:function(a,c){return An().memoizedState=[a,c===void 0?null:c],a},useContext:qr,useEffect:oS,useImperativeHandle:function(a,c,h){return h=h!=null?h.concat([a]):null,bu(4194308,4,cS.bind(null,c,a),h)},useLayoutEffect:function(a,c){return bu(4194308,4,a,c)},useInsertionEffect:function(a,c){return bu(4,2,a,c)},useMemo:function(a,c){var h=An();return c=c===void 0?null:c,a=a(),h.memoizedState=[a,c],a},useReducer:function(a,c,h){var p=An();return c=h!==void 0?h(c):c,p.memoizedState=p.baseState=c,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:c},p.queue=a,a=a.dispatch=MN.bind(null,St,a),[p.memoizedState,a]},useRef:function(a){var c=An();return a={current:a},c.memoizedState=a},useState:iS,useDebugValue:jp,useDeferredValue:function(a){return An().memoizedState=a},useTransition:function(){var a=iS(!1),c=a[0];return a=PN.bind(null,a[1]),An().memoizedState=a,[c,a]},useMutableSource:function(){},useSyncExternalStore:function(a,c,h){var p=St,_=An();if(gt){if(h===void 0)throw Error(r(407));h=h()}else{if(h=c(),Zt===null)throw Error(r(349));us&30||Jw(p,c,h)}_.memoizedState=h;var v={value:h,getSnapshot:c};return _.queue=v,oS(tS.bind(null,p,v,a),[a]),p.flags|=2048,_l(9,eS.bind(null,p,v,h,c),void 0,null),h},useId:function(){var a=An(),c=Zt.identifierPrefix;if(gt){var h=Wn,p=Hn;h=(p&~(1<<32-nn(p)-1)).toString(32)+h,c=":"+c+"R"+h,h=gl++,0<h&&(c+="H"+h.toString(32)),c+=":"}else h=RN++,c=":"+c+"r"+h.toString(32)+":";return a.memoizedState=c},unstable_isNewReconciler:!1},kN={readContext:qr,useCallback:fS,useContext:qr,useEffect:Vp,useImperativeHandle:uS,useInsertionEffect:aS,useLayoutEffect:lS,useMemo:hS,useReducer:zp,useRef:sS,useState:function(){return zp(ml)},useDebugValue:jp,useDeferredValue:function(a){var c=Xr();return dS(c,Ht.memoizedState,a)},useTransition:function(){var a=zp(ml)[0],c=Xr().memoizedState;return[a,c]},useMutableSource:Gw,useSyncExternalStore:Qw,useId:pS,unstable_isNewReconciler:!1},NN={readContext:qr,useCallback:fS,useContext:qr,useEffect:Vp,useImperativeHandle:uS,useInsertionEffect:aS,useLayoutEffect:lS,useMemo:hS,useReducer:$p,useRef:sS,useState:function(){return $p(ml)},useDebugValue:jp,useDeferredValue:function(a){var c=Xr();return Ht===null?c.memoizedState=a:dS(c,Ht.memoizedState,a)},useTransition:function(){var a=$p(ml)[0],c=Xr().memoizedState;return[a,c]},useMutableSource:Gw,useSyncExternalStore:Qw,useId:pS,unstable_isNewReconciler:!1};function an(a,c){if(a&&a.defaultProps){c=j({},c),a=a.defaultProps;for(var h in a)c[h]===void 0&&(c[h]=a[h]);return c}return c}function Hp(a,c,h,p){c=a.memoizedState,h=h(p,c),h=h==null?c:j({},c,h),a.memoizedState=h,a.lanes===0&&(a.updateQueue.baseState=h)}var xu={isMounted:function(a){return(a=a._reactInternals)?ns(a)===a:!1},enqueueSetState:function(a,c,h){a=a._reactInternals;var p=yr(),_=Ai(a),v=Xn(p,_);v.payload=c,h!=null&&(v.callback=h),c=Si(a,v,_),c!==null&&(un(c,a,_,p),gu(c,a,_))},enqueueReplaceState:function(a,c,h){a=a._reactInternals;var p=yr(),_=Ai(a),v=Xn(p,_);v.tag=1,v.payload=c,h!=null&&(v.callback=h),c=Si(a,v,_),c!==null&&(un(c,a,_,p),gu(c,a,_))},enqueueForceUpdate:function(a,c){a=a._reactInternals;var h=yr(),p=Ai(a),_=Xn(h,p);_.tag=2,c!=null&&(_.callback=c),c=Si(a,_,p),c!==null&&(un(c,a,p,h),gu(c,a,p))}};function yS(a,c,h,p,_,v,x){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(p,v,x):c.prototype&&c.prototype.isPureReactComponent?!nl(h,p)||!nl(_,v):!0}function vS(a,c,h){var p=!1,_=vi,v=c.contextType;return typeof v=="object"&&v!==null?v=qr(v):(_=wr(c)?ss:ar.current,p=c.contextTypes,v=(p=p!=null)?fo(a,_):vi),c=new c(h,v),a.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=xu,a.stateNode=c,c._reactInternals=a,p&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=_,a.__reactInternalMemoizedMaskedChildContext=v),c}function bS(a,c,h,p){a=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(h,p),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(h,p),c.state!==a&&xu.enqueueReplaceState(c,c.state,null)}function Wp(a,c,h,p){var _=a.stateNode;_.props=h,_.state=a.memoizedState,_.refs={},Ip(a);var v=c.contextType;typeof v=="object"&&v!==null?_.context=qr(v):(v=wr(c)?ss:ar.current,_.context=fo(a,v)),_.state=a.memoizedState,v=c.getDerivedStateFromProps,typeof v=="function"&&(Hp(a,c,v,h),_.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(c=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),c!==_.state&&xu.enqueueReplaceState(_,_.state,null),mu(a,h,_,p),_.state=a.memoizedState),typeof _.componentDidMount=="function"&&(a.flags|=4194308)}function bo(a,c){try{var h="",p=c;do h+=he(p),p=p.return;while(p);var _=h}catch(v){_=`
Error generating stack: `+v.message+`
`+v.stack}return{value:a,source:c,stack:_,digest:null}}function qp(a,c,h){return{value:a,source:null,stack:h??null,digest:c??null}}function Xp(a,c){try{console.error(c.value)}catch(h){setTimeout(function(){throw h})}}var FN=typeof WeakMap=="function"?WeakMap:Map;function wS(a,c,h){h=Xn(-1,h),h.tag=3,h.payload={element:null};var p=c.value;return h.callback=function(){Mu||(Mu=!0,lg=p),Xp(a,c)},h}function SS(a,c,h){h=Xn(-1,h),h.tag=3;var p=a.type.getDerivedStateFromError;if(typeof p=="function"){var _=c.value;h.payload=function(){return p(_)},h.callback=function(){Xp(a,c)}}var v=a.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(h.callback=function(){Xp(a,c),typeof p!="function"&&(Ti===null?Ti=new Set([this]):Ti.add(this));var x=c.stack;this.componentDidCatch(c.value,{componentStack:x!==null?x:""})}),h}function xS(a,c,h){var p=a.pingCache;if(p===null){p=a.pingCache=new FN;var _=new Set;p.set(c,_)}else _=p.get(c),_===void 0&&(_=new Set,p.set(c,_));_.has(h)||(_.add(h),a=YN.bind(null,a,c,h),c.then(a,a))}function TS(a){do{var c;if((c=a.tag===13)&&(c=a.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return a;a=a.return}while(a!==null);return null}function ES(a,c,h,p,_){return a.mode&1?(a.flags|=65536,a.lanes=_,a):(a===c?a.flags|=65536:(a.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(c=Xn(-1,1),c.tag=2,Si(h,c,1))),h.lanes|=1),a)}var DN=P.ReactCurrentOwner,Sr=!1;function _r(a,c,h,p){c.child=a===null?Ww(c,null,h,p):mo(c,a.child,h,p)}function AS(a,c,h,p,_){h=h.render;var v=c.ref;return yo(c,_),p=Lp(a,c,h,p,v,_),h=Up(),a!==null&&!Sr?(c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~_,Kn(a,c,_)):(gt&&h&&wp(c),c.flags|=1,_r(a,c,p,_),c.child)}function CS(a,c,h,p,_){if(a===null){var v=h.type;return typeof v=="function"&&!gg(v)&&v.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(c.tag=15,c.type=v,RS(a,c,v,p,_)):(a=Du(h.type,null,p,c,c.mode,_),a.ref=c.ref,a.return=c,c.child=a)}if(v=a.child,!(a.lanes&_)){var x=v.memoizedProps;if(h=h.compare,h=h!==null?h:nl,h(x,p)&&a.ref===c.ref)return Kn(a,c,_)}return c.flags|=1,a=Ri(v,p),a.ref=c.ref,a.return=c,c.child=a}function RS(a,c,h,p,_){if(a!==null){var v=a.memoizedProps;if(nl(v,p)&&a.ref===c.ref)if(Sr=!1,c.pendingProps=p=v,(a.lanes&_)!==0)a.flags&131072&&(Sr=!0);else return c.lanes=a.lanes,Kn(a,c,_)}return Kp(a,c,h,p,_)}function PS(a,c,h){var p=c.pendingProps,_=p.children,v=a!==null?a.memoizedState:null;if(p.mode==="hidden")if(!(c.mode&1))c.memoizedState={baseLanes:0,cachePool:null,transitions:null},ut(So,Nr),Nr|=h;else{if(!(h&1073741824))return a=v!==null?v.baseLanes|h:h,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:a,cachePool:null,transitions:null},c.updateQueue=null,ut(So,Nr),Nr|=a,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=v!==null?v.baseLanes:h,ut(So,Nr),Nr|=p}else v!==null?(p=v.baseLanes|h,c.memoizedState=null):p=h,ut(So,Nr),Nr|=p;return _r(a,c,_,h),c.child}function MS(a,c){var h=c.ref;(a===null&&h!==null||a!==null&&a.ref!==h)&&(c.flags|=512,c.flags|=2097152)}function Kp(a,c,h,p,_){var v=wr(h)?ss:ar.current;return v=fo(c,v),yo(c,_),h=Lp(a,c,h,p,v,_),p=Up(),a!==null&&!Sr?(c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~_,Kn(a,c,_)):(gt&&p&&wp(c),c.flags|=1,_r(a,c,h,_),c.child)}function IS(a,c,h,p,_){if(wr(h)){var v=!0;au(c)}else v=!1;if(yo(c,_),c.stateNode===null)Eu(a,c),vS(c,h,p),Wp(c,h,p,_),p=!0;else if(a===null){var x=c.stateNode,B=c.memoizedProps;x.props=B;var U=x.context,G=h.contextType;typeof G=="object"&&G!==null?G=qr(G):(G=wr(h)?ss:ar.current,G=fo(c,G));var ae=h.getDerivedStateFromProps,ce=typeof ae=="function"||typeof x.getSnapshotBeforeUpdate=="function";ce||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(B!==p||U!==G)&&bS(c,x,p,G),wi=!1;var oe=c.memoizedState;x.state=oe,mu(c,p,x,_),U=c.memoizedState,B!==p||oe!==U||br.current||wi?(typeof ae=="function"&&(Hp(c,h,ae,p),U=c.memoizedState),(B=wi||yS(c,h,B,p,oe,U,G))?(ce||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(c.flags|=4194308)):(typeof x.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=p,c.memoizedState=U),x.props=p,x.state=U,x.context=G,p=B):(typeof x.componentDidMount=="function"&&(c.flags|=4194308),p=!1)}else{x=c.stateNode,Xw(a,c),B=c.memoizedProps,G=c.type===c.elementType?B:an(c.type,B),x.props=G,ce=c.pendingProps,oe=x.context,U=h.contextType,typeof U=="object"&&U!==null?U=qr(U):(U=wr(h)?ss:ar.current,U=fo(c,U));var _e=h.getDerivedStateFromProps;(ae=typeof _e=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(B!==ce||oe!==U)&&bS(c,x,p,U),wi=!1,oe=c.memoizedState,x.state=oe,mu(c,p,x,_);var Se=c.memoizedState;B!==ce||oe!==Se||br.current||wi?(typeof _e=="function"&&(Hp(c,h,_e,p),Se=c.memoizedState),(G=wi||yS(c,h,G,p,oe,Se,U)||!1)?(ae||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(p,Se,U),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(p,Se,U)),typeof x.componentDidUpdate=="function"&&(c.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof x.componentDidUpdate!="function"||B===a.memoizedProps&&oe===a.memoizedState||(c.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||B===a.memoizedProps&&oe===a.memoizedState||(c.flags|=1024),c.memoizedProps=p,c.memoizedState=Se),x.props=p,x.state=Se,x.context=U,p=G):(typeof x.componentDidUpdate!="function"||B===a.memoizedProps&&oe===a.memoizedState||(c.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||B===a.memoizedProps&&oe===a.memoizedState||(c.flags|=1024),p=!1)}return Yp(a,c,h,p,v,_)}function Yp(a,c,h,p,_,v){MS(a,c);var x=(c.flags&128)!==0;if(!p&&!x)return _&&Dw(c,h,!1),Kn(a,c,v);p=c.stateNode,DN.current=c;var B=x&&typeof h.getDerivedStateFromError!="function"?null:p.render();return c.flags|=1,a!==null&&x?(c.child=mo(c,a.child,null,v),c.child=mo(c,null,B,v)):_r(a,c,B,v),c.memoizedState=p.state,_&&Dw(c,h,!0),c.child}function OS(a){var c=a.stateNode;c.pendingContext?Nw(a,c.pendingContext,c.pendingContext!==c.context):c.context&&Nw(a,c.context,!1),Op(a,c.containerInfo)}function kS(a,c,h,p,_){return go(),Ep(_),c.flags|=256,_r(a,c,h,p),c.child}var Zp={dehydrated:null,treeContext:null,retryLane:0};function Gp(a){return{baseLanes:a,cachePool:null,transitions:null}}function NS(a,c,h){var p=c.pendingProps,_=wt.current,v=!1,x=(c.flags&128)!==0,B;if((B=x)||(B=a!==null&&a.memoizedState===null?!1:(_&2)!==0),B?(v=!0,c.flags&=-129):(a===null||a.memoizedState!==null)&&(_|=1),ut(wt,_&1),a===null)return Tp(c),a=c.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?(c.mode&1?a.data==="$!"?c.lanes=8:c.lanes=1073741824:c.lanes=1,null):(x=p.children,a=p.fallback,v?(p=c.mode,v=c.child,x={mode:"hidden",children:x},!(p&1)&&v!==null?(v.childLanes=0,v.pendingProps=x):v=Bu(x,p,0,null),a=gs(a,p,h,null),v.return=c,a.return=c,v.sibling=a,c.child=v,c.child.memoizedState=Gp(h),c.memoizedState=Zp,a):Qp(c,x));if(_=a.memoizedState,_!==null&&(B=_.dehydrated,B!==null))return BN(a,c,x,p,B,_,h);if(v){v=p.fallback,x=c.mode,_=a.child,B=_.sibling;var U={mode:"hidden",children:p.children};return!(x&1)&&c.child!==_?(p=c.child,p.childLanes=0,p.pendingProps=U,c.deletions=null):(p=Ri(_,U),p.subtreeFlags=_.subtreeFlags&14680064),B!==null?v=Ri(B,v):(v=gs(v,x,h,null),v.flags|=2),v.return=c,p.return=c,p.sibling=v,c.child=p,p=v,v=c.child,x=a.child.memoizedState,x=x===null?Gp(h):{baseLanes:x.baseLanes|h,cachePool:null,transitions:x.transitions},v.memoizedState=x,v.childLanes=a.childLanes&~h,c.memoizedState=Zp,p}return v=a.child,a=v.sibling,p=Ri(v,{mode:"visible",children:p.children}),!(c.mode&1)&&(p.lanes=h),p.return=c,p.sibling=null,a!==null&&(h=c.deletions,h===null?(c.deletions=[a],c.flags|=16):h.push(a)),c.child=p,c.memoizedState=null,p}function Qp(a,c){return c=Bu({mode:"visible",children:c},a.mode,0,null),c.return=a,a.child=c}function Tu(a,c,h,p){return p!==null&&Ep(p),mo(c,a.child,null,h),a=Qp(c,c.pendingProps.children),a.flags|=2,c.memoizedState=null,a}function BN(a,c,h,p,_,v,x){if(h)return c.flags&256?(c.flags&=-257,p=qp(Error(r(422))),Tu(a,c,x,p)):c.memoizedState!==null?(c.child=a.child,c.flags|=128,null):(v=p.fallback,_=c.mode,p=Bu({mode:"visible",children:p.children},_,0,null),v=gs(v,_,x,null),v.flags|=2,p.return=c,v.return=c,p.sibling=v,c.child=p,c.mode&1&&mo(c,a.child,null,x),c.child.memoizedState=Gp(x),c.memoizedState=Zp,v);if(!(c.mode&1))return Tu(a,c,x,null);if(_.data==="$!"){if(p=_.nextSibling&&_.nextSibling.dataset,p)var B=p.dgst;return p=B,v=Error(r(419)),p=qp(v,p,void 0),Tu(a,c,x,p)}if(B=(x&a.childLanes)!==0,Sr||B){if(p=Zt,p!==null){switch(x&-x){case 4:_=2;break;case 16:_=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:_=32;break;case 536870912:_=268435456;break;default:_=0}_=_&(p.suspendedLanes|x)?0:_,_!==0&&_!==v.retryLane&&(v.retryLane=_,qn(a,_),un(p,a,_,-1))}return pg(),p=qp(Error(r(421))),Tu(a,c,x,p)}return _.data==="$?"?(c.flags|=128,c.child=a.child,c=ZN.bind(null,a),_._reactRetry=c,null):(a=v.treeContext,kr=_i(_.nextSibling),Or=c,gt=!0,on=null,a!==null&&(Hr[Wr++]=Hn,Hr[Wr++]=Wn,Hr[Wr++]=os,Hn=a.id,Wn=a.overflow,os=c),c=Qp(c,p.children),c.flags|=4096,c)}function FS(a,c,h){a.lanes|=c;var p=a.alternate;p!==null&&(p.lanes|=c),Pp(a.return,c,h)}function Jp(a,c,h,p,_){var v=a.memoizedState;v===null?a.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:p,tail:h,tailMode:_}:(v.isBackwards=c,v.rendering=null,v.renderingStartTime=0,v.last=p,v.tail=h,v.tailMode=_)}function DS(a,c,h){var p=c.pendingProps,_=p.revealOrder,v=p.tail;if(_r(a,c,p.children,h),p=wt.current,p&2)p=p&1|2,c.flags|=128;else{if(a!==null&&a.flags&128)e:for(a=c.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&FS(a,h,c);else if(a.tag===19)FS(a,h,c);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===c)break e;for(;a.sibling===null;){if(a.return===null||a.return===c)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}p&=1}if(ut(wt,p),!(c.mode&1))c.memoizedState=null;else switch(_){case"forwards":for(h=c.child,_=null;h!==null;)a=h.alternate,a!==null&&_u(a)===null&&(_=h),h=h.sibling;h=_,h===null?(_=c.child,c.child=null):(_=h.sibling,h.sibling=null),Jp(c,!1,_,h,v);break;case"backwards":for(h=null,_=c.child,c.child=null;_!==null;){if(a=_.alternate,a!==null&&_u(a)===null){c.child=_;break}a=_.sibling,_.sibling=h,h=_,_=a}Jp(c,!0,h,null,v);break;case"together":Jp(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Eu(a,c){!(c.mode&1)&&a!==null&&(a.alternate=null,c.alternate=null,c.flags|=2)}function Kn(a,c,h){if(a!==null&&(c.dependencies=a.dependencies),fs|=c.lanes,!(h&c.childLanes))return null;if(a!==null&&c.child!==a.child)throw Error(r(153));if(c.child!==null){for(a=c.child,h=Ri(a,a.pendingProps),c.child=h,h.return=c;a.sibling!==null;)a=a.sibling,h=h.sibling=Ri(a,a.pendingProps),h.return=c;h.sibling=null}return c.child}function LN(a,c,h){switch(c.tag){case 3:OS(c),go();break;case 5:Zw(c);break;case 1:wr(c.type)&&au(c);break;case 4:Op(c,c.stateNode.containerInfo);break;case 10:var p=c.type._context,_=c.memoizedProps.value;ut(du,p._currentValue),p._currentValue=_;break;case 13:if(p=c.memoizedState,p!==null)return p.dehydrated!==null?(ut(wt,wt.current&1),c.flags|=128,null):h&c.child.childLanes?NS(a,c,h):(ut(wt,wt.current&1),a=Kn(a,c,h),a!==null?a.sibling:null);ut(wt,wt.current&1);break;case 19:if(p=(h&c.childLanes)!==0,a.flags&128){if(p)return DS(a,c,h);c.flags|=128}if(_=c.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),ut(wt,wt.current),p)break;return null;case 22:case 23:return c.lanes=0,PS(a,c,h)}return Kn(a,c,h)}var BS,eg,LS,US;BS=function(a,c){for(var h=c.child;h!==null;){if(h.tag===5||h.tag===6)a.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},eg=function(){},LS=function(a,c,h,p){var _=a.memoizedProps;if(_!==p){a=c.stateNode,cs(En.current);var v=null;switch(h){case"input":_=Dt(a,_),p=Dt(a,p),v=[];break;case"select":_=j({},_,{value:void 0}),p=j({},p,{value:void 0}),v=[];break;case"textarea":_=Re(a,_),p=Re(a,p),v=[];break;default:typeof _.onClick!="function"&&typeof p.onClick=="function"&&(a.onclick=iu)}za(h,p);var x;h=null;for(G in _)if(!p.hasOwnProperty(G)&&_.hasOwnProperty(G)&&_[G]!=null)if(G==="style"){var B=_[G];for(x in B)B.hasOwnProperty(x)&&(h||(h={}),h[x]="")}else G!=="dangerouslySetInnerHTML"&&G!=="children"&&G!=="suppressContentEditableWarning"&&G!=="suppressHydrationWarning"&&G!=="autoFocus"&&(i.hasOwnProperty(G)?v||(v=[]):(v=v||[]).push(G,null));for(G in p){var U=p[G];if(B=_!=null?_[G]:void 0,p.hasOwnProperty(G)&&U!==B&&(U!=null||B!=null))if(G==="style")if(B){for(x in B)!B.hasOwnProperty(x)||U&&U.hasOwnProperty(x)||(h||(h={}),h[x]="");for(x in U)U.hasOwnProperty(x)&&B[x]!==U[x]&&(h||(h={}),h[x]=U[x])}else h||(v||(v=[]),v.push(G,h)),h=U;else G==="dangerouslySetInnerHTML"?(U=U?U.__html:void 0,B=B?B.__html:void 0,U!=null&&B!==U&&(v=v||[]).push(G,U)):G==="children"?typeof U!="string"&&typeof U!="number"||(v=v||[]).push(G,""+U):G!=="suppressContentEditableWarning"&&G!=="suppressHydrationWarning"&&(i.hasOwnProperty(G)?(U!=null&&G==="onScroll"&&ft("scroll",a),v||B===U||(v=[])):(v=v||[]).push(G,U))}h&&(v=v||[]).push("style",h);var G=v;(c.updateQueue=G)&&(c.flags|=4)}},US=function(a,c,h,p){h!==p&&(c.flags|=4)};function yl(a,c){if(!gt)switch(a.tailMode){case"hidden":c=a.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?a.tail=null:h.sibling=null;break;case"collapsed":h=a.tail;for(var p=null;h!==null;)h.alternate!==null&&(p=h),h=h.sibling;p===null?c||a.tail===null?a.tail=null:a.tail.sibling=null:p.sibling=null}}function cr(a){var c=a.alternate!==null&&a.alternate.child===a.child,h=0,p=0;if(c)for(var _=a.child;_!==null;)h|=_.lanes|_.childLanes,p|=_.subtreeFlags&14680064,p|=_.flags&14680064,_.return=a,_=_.sibling;else for(_=a.child;_!==null;)h|=_.lanes|_.childLanes,p|=_.subtreeFlags,p|=_.flags,_.return=a,_=_.sibling;return a.subtreeFlags|=p,a.childLanes=h,c}function UN(a,c,h){var p=c.pendingProps;switch(Sp(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cr(c),null;case 1:return wr(c.type)&&ou(),cr(c),null;case 3:return p=c.stateNode,vo(),ht(br),ht(ar),Fp(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(a===null||a.child===null)&&(fu(c)?c.flags|=4:a===null||a.memoizedState.isDehydrated&&!(c.flags&256)||(c.flags|=1024,on!==null&&(fg(on),on=null))),eg(a,c),cr(c),null;case 5:kp(c);var _=cs(dl.current);if(h=c.type,a!==null&&c.stateNode!=null)LS(a,c,h,p,_),a.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!p){if(c.stateNode===null)throw Error(r(166));return cr(c),null}if(a=cs(En.current),fu(c)){p=c.stateNode,h=c.type;var v=c.memoizedProps;switch(p[Tn]=c,p[ll]=v,a=(c.mode&1)!==0,h){case"dialog":ft("cancel",p),ft("close",p);break;case"iframe":case"object":case"embed":ft("load",p);break;case"video":case"audio":for(_=0;_<sl.length;_++)ft(sl[_],p);break;case"source":ft("error",p);break;case"img":case"image":case"link":ft("error",p),ft("load",p);break;case"details":ft("toggle",p);break;case"input":ve(p,v),ft("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!v.multiple},ft("invalid",p);break;case"textarea":pt(p,v),ft("invalid",p)}za(h,v),_=null;for(var x in v)if(v.hasOwnProperty(x)){var B=v[x];x==="children"?typeof B=="string"?p.textContent!==B&&(v.suppressHydrationWarning!==!0&&nu(p.textContent,B,a),_=["children",B]):typeof B=="number"&&p.textContent!==""+B&&(v.suppressHydrationWarning!==!0&&nu(p.textContent,B,a),_=["children",""+B]):i.hasOwnProperty(x)&&B!=null&&x==="onScroll"&&ft("scroll",p)}switch(h){case"input":Tt(p),Ot(p,v,!0);break;case"textarea":Tt(p),le(p);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(p.onclick=iu)}p=_,c.updateQueue=p,p!==null&&(c.flags|=4)}else{x=_.nodeType===9?_:_.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=ge(h)),a==="http://www.w3.org/1999/xhtml"?h==="script"?(a=x.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof p.is=="string"?a=x.createElement(h,{is:p.is}):(a=x.createElement(h),h==="select"&&(x=a,p.multiple?x.multiple=!0:p.size&&(x.size=p.size))):a=x.createElementNS(a,h),a[Tn]=c,a[ll]=p,BS(a,c,!1,!1),c.stateNode=a;e:{switch(x=Ji(h,p),h){case"dialog":ft("cancel",a),ft("close",a),_=p;break;case"iframe":case"object":case"embed":ft("load",a),_=p;break;case"video":case"audio":for(_=0;_<sl.length;_++)ft(sl[_],a);_=p;break;case"source":ft("error",a),_=p;break;case"img":case"image":case"link":ft("error",a),ft("load",a),_=p;break;case"details":ft("toggle",a),_=p;break;case"input":ve(a,p),_=Dt(a,p),ft("invalid",a);break;case"option":_=p;break;case"select":a._wrapperState={wasMultiple:!!p.multiple},_=j({},p,{value:void 0}),ft("invalid",a);break;case"textarea":pt(a,p),_=Re(a,p),ft("invalid",a);break;default:_=p}za(h,_),B=_;for(v in B)if(B.hasOwnProperty(v)){var U=B[v];v==="style"?bt(a,U):v==="dangerouslySetInnerHTML"?(U=U?U.__html:void 0,U!=null&&qe(a,U)):v==="children"?typeof U=="string"?(h!=="textarea"||U!=="")&&Pe(a,U):typeof U=="number"&&Pe(a,""+U):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(i.hasOwnProperty(v)?U!=null&&v==="onScroll"&&ft("scroll",a):U!=null&&C(a,v,U,x))}switch(h){case"input":Tt(a),Ot(a,p,!1);break;case"textarea":Tt(a),le(a);break;case"option":p.value!=null&&a.setAttribute("value",""+me(p.value));break;case"select":a.multiple=!!p.multiple,v=p.value,v!=null?Kt(a,!!p.multiple,v,!1):p.defaultValue!=null&&Kt(a,!!p.multiple,p.defaultValue,!0);break;default:typeof _.onClick=="function"&&(a.onclick=iu)}switch(h){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return cr(c),null;case 6:if(a&&c.stateNode!=null)US(a,c,a.memoizedProps,p);else{if(typeof p!="string"&&c.stateNode===null)throw Error(r(166));if(h=cs(dl.current),cs(En.current),fu(c)){if(p=c.stateNode,h=c.memoizedProps,p[Tn]=c,(v=p.nodeValue!==h)&&(a=Or,a!==null))switch(a.tag){case 3:nu(p.nodeValue,h,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&nu(p.nodeValue,h,(a.mode&1)!==0)}v&&(c.flags|=4)}else p=(h.nodeType===9?h:h.ownerDocument).createTextNode(p),p[Tn]=c,c.stateNode=p}return cr(c),null;case 13:if(ht(wt),p=c.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(gt&&kr!==null&&c.mode&1&&!(c.flags&128))Vw(),go(),c.flags|=98560,v=!1;else if(v=fu(c),p!==null&&p.dehydrated!==null){if(a===null){if(!v)throw Error(r(318));if(v=c.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(r(317));v[Tn]=c}else go(),!(c.flags&128)&&(c.memoizedState=null),c.flags|=4;cr(c),v=!1}else on!==null&&(fg(on),on=null),v=!0;if(!v)return c.flags&65536?c:null}return c.flags&128?(c.lanes=h,c):(p=p!==null,p!==(a!==null&&a.memoizedState!==null)&&p&&(c.child.flags|=8192,c.mode&1&&(a===null||wt.current&1?Wt===0&&(Wt=3):pg())),c.updateQueue!==null&&(c.flags|=4),cr(c),null);case 4:return vo(),eg(a,c),a===null&&ol(c.stateNode.containerInfo),cr(c),null;case 10:return Rp(c.type._context),cr(c),null;case 17:return wr(c.type)&&ou(),cr(c),null;case 19:if(ht(wt),v=c.memoizedState,v===null)return cr(c),null;if(p=(c.flags&128)!==0,x=v.rendering,x===null)if(p)yl(v,!1);else{if(Wt!==0||a!==null&&a.flags&128)for(a=c.child;a!==null;){if(x=_u(a),x!==null){for(c.flags|=128,yl(v,!1),p=x.updateQueue,p!==null&&(c.updateQueue=p,c.flags|=4),c.subtreeFlags=0,p=h,h=c.child;h!==null;)v=h,a=p,v.flags&=14680066,x=v.alternate,x===null?(v.childLanes=0,v.lanes=a,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=x.childLanes,v.lanes=x.lanes,v.child=x.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=x.memoizedProps,v.memoizedState=x.memoizedState,v.updateQueue=x.updateQueue,v.type=x.type,a=x.dependencies,v.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),h=h.sibling;return ut(wt,wt.current&1|2),c.child}a=a.sibling}v.tail!==null&&kt()>xo&&(c.flags|=128,p=!0,yl(v,!1),c.lanes=4194304)}else{if(!p)if(a=_u(x),a!==null){if(c.flags|=128,p=!0,h=a.updateQueue,h!==null&&(c.updateQueue=h,c.flags|=4),yl(v,!0),v.tail===null&&v.tailMode==="hidden"&&!x.alternate&&!gt)return cr(c),null}else 2*kt()-v.renderingStartTime>xo&&h!==1073741824&&(c.flags|=128,p=!0,yl(v,!1),c.lanes=4194304);v.isBackwards?(x.sibling=c.child,c.child=x):(h=v.last,h!==null?h.sibling=x:c.child=x,v.last=x)}return v.tail!==null?(c=v.tail,v.rendering=c,v.tail=c.sibling,v.renderingStartTime=kt(),c.sibling=null,h=wt.current,ut(wt,p?h&1|2:h&1),c):(cr(c),null);case 22:case 23:return dg(),p=c.memoizedState!==null,a!==null&&a.memoizedState!==null!==p&&(c.flags|=8192),p&&c.mode&1?Nr&1073741824&&(cr(c),c.subtreeFlags&6&&(c.flags|=8192)):cr(c),null;case 24:return null;case 25:return null}throw Error(r(156,c.tag))}function zN(a,c){switch(Sp(c),c.tag){case 1:return wr(c.type)&&ou(),a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 3:return vo(),ht(br),ht(ar),Fp(),a=c.flags,a&65536&&!(a&128)?(c.flags=a&-65537|128,c):null;case 5:return kp(c),null;case 13:if(ht(wt),a=c.memoizedState,a!==null&&a.dehydrated!==null){if(c.alternate===null)throw Error(r(340));go()}return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 19:return ht(wt),null;case 4:return vo(),null;case 10:return Rp(c.type._context),null;case 22:case 23:return dg(),null;case 24:return null;default:return null}}var Au=!1,ur=!1,$N=typeof WeakSet=="function"?WeakSet:Set,be=null;function wo(a,c){var h=a.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(p){Et(a,c,p)}else h.current=null}function tg(a,c,h){try{h()}catch(p){Et(a,c,p)}}var zS=!1;function VN(a,c){if(dp=qc,a=yw(),sp(a)){if("selectionStart"in a)var h={start:a.selectionStart,end:a.selectionEnd};else e:{h=(h=a.ownerDocument)&&h.defaultView||window;var p=h.getSelection&&h.getSelection();if(p&&p.rangeCount!==0){h=p.anchorNode;var _=p.anchorOffset,v=p.focusNode;p=p.focusOffset;try{h.nodeType,v.nodeType}catch{h=null;break e}var x=0,B=-1,U=-1,G=0,ae=0,ce=a,oe=null;t:for(;;){for(var _e;ce!==h||_!==0&&ce.nodeType!==3||(B=x+_),ce!==v||p!==0&&ce.nodeType!==3||(U=x+p),ce.nodeType===3&&(x+=ce.nodeValue.length),(_e=ce.firstChild)!==null;)oe=ce,ce=_e;for(;;){if(ce===a)break t;if(oe===h&&++G===_&&(B=x),oe===v&&++ae===p&&(U=x),(_e=ce.nextSibling)!==null)break;ce=oe,oe=ce.parentNode}ce=_e}h=B===-1||U===-1?null:{start:B,end:U}}else h=null}h=h||{start:0,end:0}}else h=null;for(pp={focusedElem:a,selectionRange:h},qc=!1,be=c;be!==null;)if(c=be,a=c.child,(c.subtreeFlags&1028)!==0&&a!==null)a.return=c,be=a;else for(;be!==null;){c=be;try{var Se=c.alternate;if(c.flags&1024)switch(c.tag){case 0:case 11:case 15:break;case 1:if(Se!==null){var Ee=Se.memoizedProps,Nt=Se.memoizedState,K=c.stateNode,V=K.getSnapshotBeforeUpdate(c.elementType===c.type?Ee:an(c.type,Ee),Nt);K.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var Z=c.stateNode.containerInfo;Z.nodeType===1?Z.textContent="":Z.nodeType===9&&Z.documentElement&&Z.removeChild(Z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(de){Et(c,c.return,de)}if(a=c.sibling,a!==null){a.return=c.return,be=a;break}be=c.return}return Se=zS,zS=!1,Se}function vl(a,c,h){var p=c.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var _=p=p.next;do{if((_.tag&a)===a){var v=_.destroy;_.destroy=void 0,v!==void 0&&tg(c,h,v)}_=_.next}while(_!==p)}}function Cu(a,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var h=c=c.next;do{if((h.tag&a)===a){var p=h.create;h.destroy=p()}h=h.next}while(h!==c)}}function rg(a){var c=a.ref;if(c!==null){var h=a.stateNode;switch(a.tag){case 5:a=h;break;default:a=h}typeof c=="function"?c(a):c.current=a}}function $S(a){var c=a.alternate;c!==null&&(a.alternate=null,$S(c)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(c=a.stateNode,c!==null&&(delete c[Tn],delete c[ll],delete c[yp],delete c[TN],delete c[EN])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function VS(a){return a.tag===5||a.tag===3||a.tag===4}function jS(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||VS(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function ng(a,c,h){var p=a.tag;if(p===5||p===6)a=a.stateNode,c?h.nodeType===8?h.parentNode.insertBefore(a,c):h.insertBefore(a,c):(h.nodeType===8?(c=h.parentNode,c.insertBefore(a,h)):(c=h,c.appendChild(a)),h=h._reactRootContainer,h!=null||c.onclick!==null||(c.onclick=iu));else if(p!==4&&(a=a.child,a!==null))for(ng(a,c,h),a=a.sibling;a!==null;)ng(a,c,h),a=a.sibling}function ig(a,c,h){var p=a.tag;if(p===5||p===6)a=a.stateNode,c?h.insertBefore(a,c):h.appendChild(a);else if(p!==4&&(a=a.child,a!==null))for(ig(a,c,h),a=a.sibling;a!==null;)ig(a,c,h),a=a.sibling}var er=null,ln=!1;function xi(a,c,h){for(h=h.child;h!==null;)HS(a,c,h),h=h.sibling}function HS(a,c,h){if(xn&&typeof xn.onCommitFiberUnmount=="function")try{xn.onCommitFiberUnmount(zc,h)}catch{}switch(h.tag){case 5:ur||wo(h,c);case 6:var p=er,_=ln;er=null,xi(a,c,h),er=p,ln=_,er!==null&&(ln?(a=er,h=h.stateNode,a.nodeType===8?a.parentNode.removeChild(h):a.removeChild(h)):er.removeChild(h.stateNode));break;case 18:er!==null&&(ln?(a=er,h=h.stateNode,a.nodeType===8?_p(a.parentNode,h):a.nodeType===1&&_p(a,h),Ga(a)):_p(er,h.stateNode));break;case 4:p=er,_=ln,er=h.stateNode.containerInfo,ln=!0,xi(a,c,h),er=p,ln=_;break;case 0:case 11:case 14:case 15:if(!ur&&(p=h.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){_=p=p.next;do{var v=_,x=v.destroy;v=v.tag,x!==void 0&&(v&2||v&4)&&tg(h,c,x),_=_.next}while(_!==p)}xi(a,c,h);break;case 1:if(!ur&&(wo(h,c),p=h.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=h.memoizedProps,p.state=h.memoizedState,p.componentWillUnmount()}catch(B){Et(h,c,B)}xi(a,c,h);break;case 21:xi(a,c,h);break;case 22:h.mode&1?(ur=(p=ur)||h.memoizedState!==null,xi(a,c,h),ur=p):xi(a,c,h);break;default:xi(a,c,h)}}function WS(a){var c=a.updateQueue;if(c!==null){a.updateQueue=null;var h=a.stateNode;h===null&&(h=a.stateNode=new $N),c.forEach(function(p){var _=GN.bind(null,a,p);h.has(p)||(h.add(p),p.then(_,_))})}}function cn(a,c){var h=c.deletions;if(h!==null)for(var p=0;p<h.length;p++){var _=h[p];try{var v=a,x=c,B=x;e:for(;B!==null;){switch(B.tag){case 5:er=B.stateNode,ln=!1;break e;case 3:er=B.stateNode.containerInfo,ln=!0;break e;case 4:er=B.stateNode.containerInfo,ln=!0;break e}B=B.return}if(er===null)throw Error(r(160));HS(v,x,_),er=null,ln=!1;var U=_.alternate;U!==null&&(U.return=null),_.return=null}catch(G){Et(_,c,G)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)qS(c,a),c=c.sibling}function qS(a,c){var h=a.alternate,p=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(cn(c,a),Cn(a),p&4){try{vl(3,a,a.return),Cu(3,a)}catch(Ee){Et(a,a.return,Ee)}try{vl(5,a,a.return)}catch(Ee){Et(a,a.return,Ee)}}break;case 1:cn(c,a),Cn(a),p&512&&h!==null&&wo(h,h.return);break;case 5:if(cn(c,a),Cn(a),p&512&&h!==null&&wo(h,h.return),a.flags&32){var _=a.stateNode;try{Pe(_,"")}catch(Ee){Et(a,a.return,Ee)}}if(p&4&&(_=a.stateNode,_!=null)){var v=a.memoizedProps,x=h!==null?h.memoizedProps:v,B=a.type,U=a.updateQueue;if(a.updateQueue=null,U!==null)try{B==="input"&&v.type==="radio"&&v.name!=null&&ze(_,v),Ji(B,x);var G=Ji(B,v);for(x=0;x<U.length;x+=2){var ae=U[x],ce=U[x+1];ae==="style"?bt(_,ce):ae==="dangerouslySetInnerHTML"?qe(_,ce):ae==="children"?Pe(_,ce):C(_,ae,ce,G)}switch(B){case"input":Ie(_,v);break;case"textarea":Vr(_,v);break;case"select":var oe=_._wrapperState.wasMultiple;_._wrapperState.wasMultiple=!!v.multiple;var _e=v.value;_e!=null?Kt(_,!!v.multiple,_e,!1):oe!==!!v.multiple&&(v.defaultValue!=null?Kt(_,!!v.multiple,v.defaultValue,!0):Kt(_,!!v.multiple,v.multiple?[]:"",!1))}_[ll]=v}catch(Ee){Et(a,a.return,Ee)}}break;case 6:if(cn(c,a),Cn(a),p&4){if(a.stateNode===null)throw Error(r(162));_=a.stateNode,v=a.memoizedProps;try{_.nodeValue=v}catch(Ee){Et(a,a.return,Ee)}}break;case 3:if(cn(c,a),Cn(a),p&4&&h!==null&&h.memoizedState.isDehydrated)try{Ga(c.containerInfo)}catch(Ee){Et(a,a.return,Ee)}break;case 4:cn(c,a),Cn(a);break;case 13:cn(c,a),Cn(a),_=a.child,_.flags&8192&&(v=_.memoizedState!==null,_.stateNode.isHidden=v,!v||_.alternate!==null&&_.alternate.memoizedState!==null||(ag=kt())),p&4&&WS(a);break;case 22:if(ae=h!==null&&h.memoizedState!==null,a.mode&1?(ur=(G=ur)||ae,cn(c,a),ur=G):cn(c,a),Cn(a),p&8192){if(G=a.memoizedState!==null,(a.stateNode.isHidden=G)&&!ae&&a.mode&1)for(be=a,ae=a.child;ae!==null;){for(ce=be=ae;be!==null;){switch(oe=be,_e=oe.child,oe.tag){case 0:case 11:case 14:case 15:vl(4,oe,oe.return);break;case 1:wo(oe,oe.return);var Se=oe.stateNode;if(typeof Se.componentWillUnmount=="function"){p=oe,h=oe.return;try{c=p,Se.props=c.memoizedProps,Se.state=c.memoizedState,Se.componentWillUnmount()}catch(Ee){Et(p,h,Ee)}}break;case 5:wo(oe,oe.return);break;case 22:if(oe.memoizedState!==null){YS(ce);continue}}_e!==null?(_e.return=oe,be=_e):YS(ce)}ae=ae.sibling}e:for(ae=null,ce=a;;){if(ce.tag===5){if(ae===null){ae=ce;try{_=ce.stateNode,G?(v=_.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(B=ce.stateNode,U=ce.memoizedProps.style,x=U!=null&&U.hasOwnProperty("display")?U.display:null,B.style.display=Ye("display",x))}catch(Ee){Et(a,a.return,Ee)}}}else if(ce.tag===6){if(ae===null)try{ce.stateNode.nodeValue=G?"":ce.memoizedProps}catch(Ee){Et(a,a.return,Ee)}}else if((ce.tag!==22&&ce.tag!==23||ce.memoizedState===null||ce===a)&&ce.child!==null){ce.child.return=ce,ce=ce.child;continue}if(ce===a)break e;for(;ce.sibling===null;){if(ce.return===null||ce.return===a)break e;ae===ce&&(ae=null),ce=ce.return}ae===ce&&(ae=null),ce.sibling.return=ce.return,ce=ce.sibling}}break;case 19:cn(c,a),Cn(a),p&4&&WS(a);break;case 21:break;default:cn(c,a),Cn(a)}}function Cn(a){var c=a.flags;if(c&2){try{e:{for(var h=a.return;h!==null;){if(VS(h)){var p=h;break e}h=h.return}throw Error(r(160))}switch(p.tag){case 5:var _=p.stateNode;p.flags&32&&(Pe(_,""),p.flags&=-33);var v=jS(a);ig(a,v,_);break;case 3:case 4:var x=p.stateNode.containerInfo,B=jS(a);ng(a,B,x);break;default:throw Error(r(161))}}catch(U){Et(a,a.return,U)}a.flags&=-3}c&4096&&(a.flags&=-4097)}function jN(a,c,h){be=a,XS(a)}function XS(a,c,h){for(var p=(a.mode&1)!==0;be!==null;){var _=be,v=_.child;if(_.tag===22&&p){var x=_.memoizedState!==null||Au;if(!x){var B=_.alternate,U=B!==null&&B.memoizedState!==null||ur;B=Au;var G=ur;if(Au=x,(ur=U)&&!G)for(be=_;be!==null;)x=be,U=x.child,x.tag===22&&x.memoizedState!==null?ZS(_):U!==null?(U.return=x,be=U):ZS(_);for(;v!==null;)be=v,XS(v),v=v.sibling;be=_,Au=B,ur=G}KS(a)}else _.subtreeFlags&8772&&v!==null?(v.return=_,be=v):KS(a)}}function KS(a){for(;be!==null;){var c=be;if(c.flags&8772){var h=c.alternate;try{if(c.flags&8772)switch(c.tag){case 0:case 11:case 15:ur||Cu(5,c);break;case 1:var p=c.stateNode;if(c.flags&4&&!ur)if(h===null)p.componentDidMount();else{var _=c.elementType===c.type?h.memoizedProps:an(c.type,h.memoizedProps);p.componentDidUpdate(_,h.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var v=c.updateQueue;v!==null&&Yw(c,v,p);break;case 3:var x=c.updateQueue;if(x!==null){if(h=null,c.child!==null)switch(c.child.tag){case 5:h=c.child.stateNode;break;case 1:h=c.child.stateNode}Yw(c,x,h)}break;case 5:var B=c.stateNode;if(h===null&&c.flags&4){h=B;var U=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":U.autoFocus&&h.focus();break;case"img":U.src&&(h.src=U.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var G=c.alternate;if(G!==null){var ae=G.memoizedState;if(ae!==null){var ce=ae.dehydrated;ce!==null&&Ga(ce)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}ur||c.flags&512&&rg(c)}catch(oe){Et(c,c.return,oe)}}if(c===a){be=null;break}if(h=c.sibling,h!==null){h.return=c.return,be=h;break}be=c.return}}function YS(a){for(;be!==null;){var c=be;if(c===a){be=null;break}var h=c.sibling;if(h!==null){h.return=c.return,be=h;break}be=c.return}}function ZS(a){for(;be!==null;){var c=be;try{switch(c.tag){case 0:case 11:case 15:var h=c.return;try{Cu(4,c)}catch(U){Et(c,h,U)}break;case 1:var p=c.stateNode;if(typeof p.componentDidMount=="function"){var _=c.return;try{p.componentDidMount()}catch(U){Et(c,_,U)}}var v=c.return;try{rg(c)}catch(U){Et(c,v,U)}break;case 5:var x=c.return;try{rg(c)}catch(U){Et(c,x,U)}}}catch(U){Et(c,c.return,U)}if(c===a){be=null;break}var B=c.sibling;if(B!==null){B.return=c.return,be=B;break}be=c.return}}var HN=Math.ceil,Ru=P.ReactCurrentDispatcher,sg=P.ReactCurrentOwner,Kr=P.ReactCurrentBatchConfig,Xe=0,Zt=null,Ut=null,tr=0,Nr=0,So=yi(0),Wt=0,bl=null,fs=0,Pu=0,og=0,wl=null,xr=null,ag=0,xo=1/0,Yn=null,Mu=!1,lg=null,Ti=null,Iu=!1,Ei=null,Ou=0,Sl=0,cg=null,ku=-1,Nu=0;function yr(){return Xe&6?kt():ku!==-1?ku:ku=kt()}function Ai(a){return a.mode&1?Xe&2&&tr!==0?tr&-tr:CN.transition!==null?(Nu===0&&(Nu=j1()),Nu):(a=Je,a!==0||(a=window.event,a=a===void 0?16:Q1(a.type)),a):1}function un(a,c,h,p){if(50<Sl)throw Sl=0,cg=null,Error(r(185));qa(a,h,p),(!(Xe&2)||a!==Zt)&&(a===Zt&&(!(Xe&2)&&(Pu|=h),Wt===4&&Ci(a,tr)),Tr(a,p),h===1&&Xe===0&&!(c.mode&1)&&(xo=kt()+500,lu&&bi()))}function Tr(a,c){var h=a.callbackNode;Ck(a,c);var p=jc(a,a===Zt?tr:0);if(p===0)h!==null&&z1(h),a.callbackNode=null,a.callbackPriority=0;else if(c=p&-p,a.callbackPriority!==c){if(h!=null&&z1(h),c===1)a.tag===0?AN(QS.bind(null,a)):Bw(QS.bind(null,a)),SN(function(){!(Xe&6)&&bi()}),h=null;else{switch(H1(p)){case 1:h=Vd;break;case 4:h=$1;break;case 16:h=Uc;break;case 536870912:h=V1;break;default:h=Uc}h=ox(h,GS.bind(null,a))}a.callbackPriority=c,a.callbackNode=h}}function GS(a,c){if(ku=-1,Nu=0,Xe&6)throw Error(r(327));var h=a.callbackNode;if(To()&&a.callbackNode!==h)return null;var p=jc(a,a===Zt?tr:0);if(p===0)return null;if(p&30||p&a.expiredLanes||c)c=Fu(a,p);else{c=p;var _=Xe;Xe|=2;var v=ex();(Zt!==a||tr!==c)&&(Yn=null,xo=kt()+500,ds(a,c));do try{XN();break}catch(B){JS(a,B)}while(!0);Cp(),Ru.current=v,Xe=_,Ut!==null?c=0:(Zt=null,tr=0,c=Wt)}if(c!==0){if(c===2&&(_=jd(a),_!==0&&(p=_,c=ug(a,_))),c===1)throw h=bl,ds(a,0),Ci(a,p),Tr(a,kt()),h;if(c===6)Ci(a,p);else{if(_=a.current.alternate,!(p&30)&&!WN(_)&&(c=Fu(a,p),c===2&&(v=jd(a),v!==0&&(p=v,c=ug(a,v))),c===1))throw h=bl,ds(a,0),Ci(a,p),Tr(a,kt()),h;switch(a.finishedWork=_,a.finishedLanes=p,c){case 0:case 1:throw Error(r(345));case 2:ps(a,xr,Yn);break;case 3:if(Ci(a,p),(p&130023424)===p&&(c=ag+500-kt(),10<c)){if(jc(a,0)!==0)break;if(_=a.suspendedLanes,(_&p)!==p){yr(),a.pingedLanes|=a.suspendedLanes&_;break}a.timeoutHandle=mp(ps.bind(null,a,xr,Yn),c);break}ps(a,xr,Yn);break;case 4:if(Ci(a,p),(p&4194240)===p)break;for(c=a.eventTimes,_=-1;0<p;){var x=31-nn(p);v=1<<x,x=c[x],x>_&&(_=x),p&=~v}if(p=_,p=kt()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*HN(p/1960))-p,10<p){a.timeoutHandle=mp(ps.bind(null,a,xr,Yn),p);break}ps(a,xr,Yn);break;case 5:ps(a,xr,Yn);break;default:throw Error(r(329))}}}return Tr(a,kt()),a.callbackNode===h?GS.bind(null,a):null}function ug(a,c){var h=wl;return a.current.memoizedState.isDehydrated&&(ds(a,c).flags|=256),a=Fu(a,c),a!==2&&(c=xr,xr=h,c!==null&&fg(c)),a}function fg(a){xr===null?xr=a:xr.push.apply(xr,a)}function WN(a){for(var c=a;;){if(c.flags&16384){var h=c.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var p=0;p<h.length;p++){var _=h[p],v=_.getSnapshot;_=_.value;try{if(!sn(v(),_))return!1}catch{return!1}}}if(h=c.child,c.subtreeFlags&16384&&h!==null)h.return=c,c=h;else{if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Ci(a,c){for(c&=~og,c&=~Pu,a.suspendedLanes|=c,a.pingedLanes&=~c,a=a.expirationTimes;0<c;){var h=31-nn(c),p=1<<h;a[h]=-1,c&=~p}}function QS(a){if(Xe&6)throw Error(r(327));To();var c=jc(a,0);if(!(c&1))return Tr(a,kt()),null;var h=Fu(a,c);if(a.tag!==0&&h===2){var p=jd(a);p!==0&&(c=p,h=ug(a,p))}if(h===1)throw h=bl,ds(a,0),Ci(a,c),Tr(a,kt()),h;if(h===6)throw Error(r(345));return a.finishedWork=a.current.alternate,a.finishedLanes=c,ps(a,xr,Yn),Tr(a,kt()),null}function hg(a,c){var h=Xe;Xe|=1;try{return a(c)}finally{Xe=h,Xe===0&&(xo=kt()+500,lu&&bi())}}function hs(a){Ei!==null&&Ei.tag===0&&!(Xe&6)&&To();var c=Xe;Xe|=1;var h=Kr.transition,p=Je;try{if(Kr.transition=null,Je=1,a)return a()}finally{Je=p,Kr.transition=h,Xe=c,!(Xe&6)&&bi()}}function dg(){Nr=So.current,ht(So)}function ds(a,c){a.finishedWork=null,a.finishedLanes=0;var h=a.timeoutHandle;if(h!==-1&&(a.timeoutHandle=-1,wN(h)),Ut!==null)for(h=Ut.return;h!==null;){var p=h;switch(Sp(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&ou();break;case 3:vo(),ht(br),ht(ar),Fp();break;case 5:kp(p);break;case 4:vo();break;case 13:ht(wt);break;case 19:ht(wt);break;case 10:Rp(p.type._context);break;case 22:case 23:dg()}h=h.return}if(Zt=a,Ut=a=Ri(a.current,null),tr=Nr=c,Wt=0,bl=null,og=Pu=fs=0,xr=wl=null,ls!==null){for(c=0;c<ls.length;c++)if(h=ls[c],p=h.interleaved,p!==null){h.interleaved=null;var _=p.next,v=h.pending;if(v!==null){var x=v.next;v.next=_,p.next=x}h.pending=p}ls=null}return a}function JS(a,c){do{var h=Ut;try{if(Cp(),yu.current=Su,vu){for(var p=St.memoizedState;p!==null;){var _=p.queue;_!==null&&(_.pending=null),p=p.next}vu=!1}if(us=0,Yt=Ht=St=null,pl=!1,gl=0,sg.current=null,h===null||h.return===null){Wt=1,bl=c,Ut=null;break}e:{var v=a,x=h.return,B=h,U=c;if(c=tr,B.flags|=32768,U!==null&&typeof U=="object"&&typeof U.then=="function"){var G=U,ae=B,ce=ae.tag;if(!(ae.mode&1)&&(ce===0||ce===11||ce===15)){var oe=ae.alternate;oe?(ae.updateQueue=oe.updateQueue,ae.memoizedState=oe.memoizedState,ae.lanes=oe.lanes):(ae.updateQueue=null,ae.memoizedState=null)}var _e=TS(x);if(_e!==null){_e.flags&=-257,ES(_e,x,B,v,c),_e.mode&1&&xS(v,G,c),c=_e,U=G;var Se=c.updateQueue;if(Se===null){var Ee=new Set;Ee.add(U),c.updateQueue=Ee}else Se.add(U);break e}else{if(!(c&1)){xS(v,G,c),pg();break e}U=Error(r(426))}}else if(gt&&B.mode&1){var Nt=TS(x);if(Nt!==null){!(Nt.flags&65536)&&(Nt.flags|=256),ES(Nt,x,B,v,c),Ep(bo(U,B));break e}}v=U=bo(U,B),Wt!==4&&(Wt=2),wl===null?wl=[v]:wl.push(v),v=x;do{switch(v.tag){case 3:v.flags|=65536,c&=-c,v.lanes|=c;var K=wS(v,U,c);Kw(v,K);break e;case 1:B=U;var V=v.type,Z=v.stateNode;if(!(v.flags&128)&&(typeof V.getDerivedStateFromError=="function"||Z!==null&&typeof Z.componentDidCatch=="function"&&(Ti===null||!Ti.has(Z)))){v.flags|=65536,c&=-c,v.lanes|=c;var de=SS(v,B,c);Kw(v,de);break e}}v=v.return}while(v!==null)}rx(h)}catch(Ae){c=Ae,Ut===h&&h!==null&&(Ut=h=h.return);continue}break}while(!0)}function ex(){var a=Ru.current;return Ru.current=Su,a===null?Su:a}function pg(){(Wt===0||Wt===3||Wt===2)&&(Wt=4),Zt===null||!(fs&268435455)&&!(Pu&268435455)||Ci(Zt,tr)}function Fu(a,c){var h=Xe;Xe|=2;var p=ex();(Zt!==a||tr!==c)&&(Yn=null,ds(a,c));do try{qN();break}catch(_){JS(a,_)}while(!0);if(Cp(),Xe=h,Ru.current=p,Ut!==null)throw Error(r(261));return Zt=null,tr=0,Wt}function qN(){for(;Ut!==null;)tx(Ut)}function XN(){for(;Ut!==null&&!yk();)tx(Ut)}function tx(a){var c=sx(a.alternate,a,Nr);a.memoizedProps=a.pendingProps,c===null?rx(a):Ut=c,sg.current=null}function rx(a){var c=a;do{var h=c.alternate;if(a=c.return,c.flags&32768){if(h=zN(h,c),h!==null){h.flags&=32767,Ut=h;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{Wt=6,Ut=null;return}}else if(h=UN(h,c,Nr),h!==null){Ut=h;return}if(c=c.sibling,c!==null){Ut=c;return}Ut=c=a}while(c!==null);Wt===0&&(Wt=5)}function ps(a,c,h){var p=Je,_=Kr.transition;try{Kr.transition=null,Je=1,KN(a,c,h,p)}finally{Kr.transition=_,Je=p}return null}function KN(a,c,h,p){do To();while(Ei!==null);if(Xe&6)throw Error(r(327));h=a.finishedWork;var _=a.finishedLanes;if(h===null)return null;if(a.finishedWork=null,a.finishedLanes=0,h===a.current)throw Error(r(177));a.callbackNode=null,a.callbackPriority=0;var v=h.lanes|h.childLanes;if(Rk(a,v),a===Zt&&(Ut=Zt=null,tr=0),!(h.subtreeFlags&2064)&&!(h.flags&2064)||Iu||(Iu=!0,ox(Uc,function(){return To(),null})),v=(h.flags&15990)!==0,h.subtreeFlags&15990||v){v=Kr.transition,Kr.transition=null;var x=Je;Je=1;var B=Xe;Xe|=4,sg.current=null,VN(a,h),qS(h,a),pN(pp),qc=!!dp,pp=dp=null,a.current=h,jN(h),vk(),Xe=B,Je=x,Kr.transition=v}else a.current=h;if(Iu&&(Iu=!1,Ei=a,Ou=_),v=a.pendingLanes,v===0&&(Ti=null),Sk(h.stateNode),Tr(a,kt()),c!==null)for(p=a.onRecoverableError,h=0;h<c.length;h++)_=c[h],p(_.value,{componentStack:_.stack,digest:_.digest});if(Mu)throw Mu=!1,a=lg,lg=null,a;return Ou&1&&a.tag!==0&&To(),v=a.pendingLanes,v&1?a===cg?Sl++:(Sl=0,cg=a):Sl=0,bi(),null}function To(){if(Ei!==null){var a=H1(Ou),c=Kr.transition,h=Je;try{if(Kr.transition=null,Je=16>a?16:a,Ei===null)var p=!1;else{if(a=Ei,Ei=null,Ou=0,Xe&6)throw Error(r(331));var _=Xe;for(Xe|=4,be=a.current;be!==null;){var v=be,x=v.child;if(be.flags&16){var B=v.deletions;if(B!==null){for(var U=0;U<B.length;U++){var G=B[U];for(be=G;be!==null;){var ae=be;switch(ae.tag){case 0:case 11:case 15:vl(8,ae,v)}var ce=ae.child;if(ce!==null)ce.return=ae,be=ce;else for(;be!==null;){ae=be;var oe=ae.sibling,_e=ae.return;if($S(ae),ae===G){be=null;break}if(oe!==null){oe.return=_e,be=oe;break}be=_e}}}var Se=v.alternate;if(Se!==null){var Ee=Se.child;if(Ee!==null){Se.child=null;do{var Nt=Ee.sibling;Ee.sibling=null,Ee=Nt}while(Ee!==null)}}be=v}}if(v.subtreeFlags&2064&&x!==null)x.return=v,be=x;else e:for(;be!==null;){if(v=be,v.flags&2048)switch(v.tag){case 0:case 11:case 15:vl(9,v,v.return)}var K=v.sibling;if(K!==null){K.return=v.return,be=K;break e}be=v.return}}var V=a.current;for(be=V;be!==null;){x=be;var Z=x.child;if(x.subtreeFlags&2064&&Z!==null)Z.return=x,be=Z;else e:for(x=V;be!==null;){if(B=be,B.flags&2048)try{switch(B.tag){case 0:case 11:case 15:Cu(9,B)}}catch(Ae){Et(B,B.return,Ae)}if(B===x){be=null;break e}var de=B.sibling;if(de!==null){de.return=B.return,be=de;break e}be=B.return}}if(Xe=_,bi(),xn&&typeof xn.onPostCommitFiberRoot=="function")try{xn.onPostCommitFiberRoot(zc,a)}catch{}p=!0}return p}finally{Je=h,Kr.transition=c}}return!1}function nx(a,c,h){c=bo(h,c),c=wS(a,c,1),a=Si(a,c,1),c=yr(),a!==null&&(qa(a,1,c),Tr(a,c))}function Et(a,c,h){if(a.tag===3)nx(a,a,h);else for(;c!==null;){if(c.tag===3){nx(c,a,h);break}else if(c.tag===1){var p=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Ti===null||!Ti.has(p))){a=bo(h,a),a=SS(c,a,1),c=Si(c,a,1),a=yr(),c!==null&&(qa(c,1,a),Tr(c,a));break}}c=c.return}}function YN(a,c,h){var p=a.pingCache;p!==null&&p.delete(c),c=yr(),a.pingedLanes|=a.suspendedLanes&h,Zt===a&&(tr&h)===h&&(Wt===4||Wt===3&&(tr&130023424)===tr&&500>kt()-ag?ds(a,0):og|=h),Tr(a,c)}function ix(a,c){c===0&&(a.mode&1?(c=Vc,Vc<<=1,!(Vc&130023424)&&(Vc=4194304)):c=1);var h=yr();a=qn(a,c),a!==null&&(qa(a,c,h),Tr(a,h))}function ZN(a){var c=a.memoizedState,h=0;c!==null&&(h=c.retryLane),ix(a,h)}function GN(a,c){var h=0;switch(a.tag){case 13:var p=a.stateNode,_=a.memoizedState;_!==null&&(h=_.retryLane);break;case 19:p=a.stateNode;break;default:throw Error(r(314))}p!==null&&p.delete(c),ix(a,h)}var sx;sx=function(a,c,h){if(a!==null)if(a.memoizedProps!==c.pendingProps||br.current)Sr=!0;else{if(!(a.lanes&h)&&!(c.flags&128))return Sr=!1,LN(a,c,h);Sr=!!(a.flags&131072)}else Sr=!1,gt&&c.flags&1048576&&Lw(c,uu,c.index);switch(c.lanes=0,c.tag){case 2:var p=c.type;Eu(a,c),a=c.pendingProps;var _=fo(c,ar.current);yo(c,h),_=Lp(null,c,p,a,_,h);var v=Up();return c.flags|=1,typeof _=="object"&&_!==null&&typeof _.render=="function"&&_.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,wr(p)?(v=!0,au(c)):v=!1,c.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,Ip(c),_.updater=xu,c.stateNode=_,_._reactInternals=c,Wp(c,p,a,h),c=Yp(null,c,p,!0,v,h)):(c.tag=0,gt&&v&&wp(c),_r(null,c,_,h),c=c.child),c;case 16:p=c.elementType;e:{switch(Eu(a,c),a=c.pendingProps,_=p._init,p=_(p._payload),c.type=p,_=c.tag=JN(p),a=an(p,a),_){case 0:c=Kp(null,c,p,a,h);break e;case 1:c=IS(null,c,p,a,h);break e;case 11:c=AS(null,c,p,a,h);break e;case 14:c=CS(null,c,p,an(p.type,a),h);break e}throw Error(r(306,p,""))}return c;case 0:return p=c.type,_=c.pendingProps,_=c.elementType===p?_:an(p,_),Kp(a,c,p,_,h);case 1:return p=c.type,_=c.pendingProps,_=c.elementType===p?_:an(p,_),IS(a,c,p,_,h);case 3:e:{if(OS(c),a===null)throw Error(r(387));p=c.pendingProps,v=c.memoizedState,_=v.element,Xw(a,c),mu(c,p,null,h);var x=c.memoizedState;if(p=x.element,v.isDehydrated)if(v={element:p,isDehydrated:!1,cache:x.cache,pendingSuspenseBoundaries:x.pendingSuspenseBoundaries,transitions:x.transitions},c.updateQueue.baseState=v,c.memoizedState=v,c.flags&256){_=bo(Error(r(423)),c),c=kS(a,c,p,h,_);break e}else if(p!==_){_=bo(Error(r(424)),c),c=kS(a,c,p,h,_);break e}else for(kr=_i(c.stateNode.containerInfo.firstChild),Or=c,gt=!0,on=null,h=Ww(c,null,p,h),c.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(go(),p===_){c=Kn(a,c,h);break e}_r(a,c,p,h)}c=c.child}return c;case 5:return Zw(c),a===null&&Tp(c),p=c.type,_=c.pendingProps,v=a!==null?a.memoizedProps:null,x=_.children,gp(p,_)?x=null:v!==null&&gp(p,v)&&(c.flags|=32),MS(a,c),_r(a,c,x,h),c.child;case 6:return a===null&&Tp(c),null;case 13:return NS(a,c,h);case 4:return Op(c,c.stateNode.containerInfo),p=c.pendingProps,a===null?c.child=mo(c,null,p,h):_r(a,c,p,h),c.child;case 11:return p=c.type,_=c.pendingProps,_=c.elementType===p?_:an(p,_),AS(a,c,p,_,h);case 7:return _r(a,c,c.pendingProps,h),c.child;case 8:return _r(a,c,c.pendingProps.children,h),c.child;case 12:return _r(a,c,c.pendingProps.children,h),c.child;case 10:e:{if(p=c.type._context,_=c.pendingProps,v=c.memoizedProps,x=_.value,ut(du,p._currentValue),p._currentValue=x,v!==null)if(sn(v.value,x)){if(v.children===_.children&&!br.current){c=Kn(a,c,h);break e}}else for(v=c.child,v!==null&&(v.return=c);v!==null;){var B=v.dependencies;if(B!==null){x=v.child;for(var U=B.firstContext;U!==null;){if(U.context===p){if(v.tag===1){U=Xn(-1,h&-h),U.tag=2;var G=v.updateQueue;if(G!==null){G=G.shared;var ae=G.pending;ae===null?U.next=U:(U.next=ae.next,ae.next=U),G.pending=U}}v.lanes|=h,U=v.alternate,U!==null&&(U.lanes|=h),Pp(v.return,h,c),B.lanes|=h;break}U=U.next}}else if(v.tag===10)x=v.type===c.type?null:v.child;else if(v.tag===18){if(x=v.return,x===null)throw Error(r(341));x.lanes|=h,B=x.alternate,B!==null&&(B.lanes|=h),Pp(x,h,c),x=v.sibling}else x=v.child;if(x!==null)x.return=v;else for(x=v;x!==null;){if(x===c){x=null;break}if(v=x.sibling,v!==null){v.return=x.return,x=v;break}x=x.return}v=x}_r(a,c,_.children,h),c=c.child}return c;case 9:return _=c.type,p=c.pendingProps.children,yo(c,h),_=qr(_),p=p(_),c.flags|=1,_r(a,c,p,h),c.child;case 14:return p=c.type,_=an(p,c.pendingProps),_=an(p.type,_),CS(a,c,p,_,h);case 15:return RS(a,c,c.type,c.pendingProps,h);case 17:return p=c.type,_=c.pendingProps,_=c.elementType===p?_:an(p,_),Eu(a,c),c.tag=1,wr(p)?(a=!0,au(c)):a=!1,yo(c,h),vS(c,p,_),Wp(c,p,_,h),Yp(null,c,p,!0,a,h);case 19:return DS(a,c,h);case 22:return PS(a,c,h)}throw Error(r(156,c.tag))};function ox(a,c){return U1(a,c)}function QN(a,c,h,p){this.tag=a,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yr(a,c,h,p){return new QN(a,c,h,p)}function gg(a){return a=a.prototype,!(!a||!a.isReactComponent)}function JN(a){if(typeof a=="function")return gg(a)?1:0;if(a!=null){if(a=a.$$typeof,a===te)return 11;if(a===xe)return 14}return 2}function Ri(a,c){var h=a.alternate;return h===null?(h=Yr(a.tag,c,a.key,a.mode),h.elementType=a.elementType,h.type=a.type,h.stateNode=a.stateNode,h.alternate=a,a.alternate=h):(h.pendingProps=c,h.type=a.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=a.flags&14680064,h.childLanes=a.childLanes,h.lanes=a.lanes,h.child=a.child,h.memoizedProps=a.memoizedProps,h.memoizedState=a.memoizedState,h.updateQueue=a.updateQueue,c=a.dependencies,h.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},h.sibling=a.sibling,h.index=a.index,h.ref=a.ref,h}function Du(a,c,h,p,_,v){var x=2;if(p=a,typeof a=="function")gg(a)&&(x=1);else if(typeof a=="string")x=5;else e:switch(a){case q:return gs(h.children,_,v,c);case ee:x=8,_|=8;break;case J:return a=Yr(12,h,c,_|2),a.elementType=J,a.lanes=v,a;case Q:return a=Yr(13,h,c,_),a.elementType=Q,a.lanes=v,a;case ie:return a=Yr(19,h,c,_),a.elementType=ie,a.lanes=v,a;case z:return Bu(h,_,v,c);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case A:x=10;break e;case X:x=9;break e;case te:x=11;break e;case xe:x=14;break e;case F:x=16,p=null;break e}throw Error(r(130,a==null?a:typeof a,""))}return c=Yr(x,h,c,_),c.elementType=a,c.type=p,c.lanes=v,c}function gs(a,c,h,p){return a=Yr(7,a,p,c),a.lanes=h,a}function Bu(a,c,h,p){return a=Yr(22,a,p,c),a.elementType=z,a.lanes=h,a.stateNode={isHidden:!1},a}function mg(a,c,h){return a=Yr(6,a,null,c),a.lanes=h,a}function _g(a,c,h){return c=Yr(4,a.children!==null?a.children:[],a.key,c),c.lanes=h,c.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},c}function eF(a,c,h,p,_){this.tag=c,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hd(0),this.expirationTimes=Hd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hd(0),this.identifierPrefix=p,this.onRecoverableError=_,this.mutableSourceEagerHydrationData=null}function yg(a,c,h,p,_,v,x,B,U){return a=new eF(a,c,h,B,U),c===1?(c=1,v===!0&&(c|=8)):c=0,v=Yr(3,null,null,c),a.current=v,v.stateNode=a,v.memoizedState={element:p,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ip(v),a}function tF(a,c,h){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:D,key:p==null?null:""+p,children:a,containerInfo:c,implementation:h}}function ax(a){if(!a)return vi;a=a._reactInternals;e:{if(ns(a)!==a||a.tag!==1)throw Error(r(170));var c=a;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(wr(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(r(171))}if(a.tag===1){var h=a.type;if(wr(h))return Fw(a,h,c)}return c}function lx(a,c,h,p,_,v,x,B,U){return a=yg(h,p,!0,a,_,v,x,B,U),a.context=ax(null),h=a.current,p=yr(),_=Ai(h),v=Xn(p,_),v.callback=c??null,Si(h,v,_),a.current.lanes=_,qa(a,_,p),Tr(a,p),a}function Lu(a,c,h,p){var _=c.current,v=yr(),x=Ai(_);return h=ax(h),c.context===null?c.context=h:c.pendingContext=h,c=Xn(v,x),c.payload={element:a},p=p===void 0?null:p,p!==null&&(c.callback=p),a=Si(_,c,x),a!==null&&(un(a,_,x,v),gu(a,_,x)),x}function Uu(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function cx(a,c){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var h=a.retryLane;a.retryLane=h!==0&&h<c?h:c}}function vg(a,c){cx(a,c),(a=a.alternate)&&cx(a,c)}var ux=typeof reportError=="function"?reportError:function(a){console.error(a)};function bg(a){this._internalRoot=a}zu.prototype.render=bg.prototype.render=function(a){var c=this._internalRoot;if(c===null)throw Error(r(409));Lu(a,c,null,null)},zu.prototype.unmount=bg.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var c=a.containerInfo;hs(function(){Lu(null,a,null,null)}),c[Vn]=null}};function zu(a){this._internalRoot=a}zu.prototype.unstable_scheduleHydration=function(a){if(a){var c=X1();a={blockedOn:null,target:a,priority:c};for(var h=0;h<pi.length&&c!==0&&c<pi[h].priority;h++);pi.splice(h,0,a),h===0&&Z1(a)}};function wg(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function $u(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function fx(){}function rF(a,c,h,p,_){if(_){if(typeof p=="function"){var v=p;p=function(){var G=Uu(x);v.call(G)}}var x=lx(c,p,a,0,null,!1,!1,"",fx);return a._reactRootContainer=x,a[Vn]=x.current,ol(a.nodeType===8?a.parentNode:a),hs(),x}for(;_=a.lastChild;)a.removeChild(_);if(typeof p=="function"){var B=p;p=function(){var G=Uu(U);B.call(G)}}var U=yg(a,0,!1,null,null,!1,!1,"",fx);return a._reactRootContainer=U,a[Vn]=U.current,ol(a.nodeType===8?a.parentNode:a),hs(function(){Lu(c,U,h,p)}),U}function Vu(a,c,h,p,_){var v=h._reactRootContainer;if(v){var x=v;if(typeof _=="function"){var B=_;_=function(){var U=Uu(x);B.call(U)}}Lu(c,x,a,_)}else x=rF(h,c,a,_,p);return Uu(x)}W1=function(a){switch(a.tag){case 3:var c=a.stateNode;if(c.current.memoizedState.isDehydrated){var h=Wa(c.pendingLanes);h!==0&&(Wd(c,h|1),Tr(c,kt()),!(Xe&6)&&(xo=kt()+500,bi()))}break;case 13:hs(function(){var p=qn(a,1);if(p!==null){var _=yr();un(p,a,1,_)}}),vg(a,1)}},qd=function(a){if(a.tag===13){var c=qn(a,134217728);if(c!==null){var h=yr();un(c,a,134217728,h)}vg(a,134217728)}},q1=function(a){if(a.tag===13){var c=Ai(a),h=qn(a,c);if(h!==null){var p=yr();un(h,a,c,p)}vg(a,c)}},X1=function(){return Je},K1=function(a,c){var h=Je;try{return Je=a,c()}finally{Je=h}},ts=function(a,c,h){switch(c){case"input":if(Ie(a,h),c=h.name,h.type==="radio"&&c!=null){for(h=a;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<h.length;c++){var p=h[c];if(p!==a&&p.form===a.form){var _=su(p);if(!_)throw Error(r(90));vt(p),Ie(p,_)}}}break;case"textarea":Vr(a,h);break;case"select":c=h.value,c!=null&&Kt(a,!!h.multiple,c,!1)}},jr=hg,k1=hs;var nF={usingClientEntryPoint:!1,Events:[cl,co,su,to,rs,hg]},xl={findFiberByHostInstance:is,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},iF={bundleType:xl.bundleType,version:xl.version,rendererPackageName:xl.rendererPackageName,rendererConfig:xl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:P.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=B1(a),a===null?null:a.stateNode},findFiberByHostInstance:xl.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ju=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ju.isDisabled&&ju.supportsFiber)try{zc=ju.inject(iF),xn=ju}catch{}}return Er.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nF,Er.createPortal=function(a,c){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wg(c))throw Error(r(200));return tF(a,c,null,h)},Er.createRoot=function(a,c){if(!wg(a))throw Error(r(299));var h=!1,p="",_=ux;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(p=c.identifierPrefix),c.onRecoverableError!==void 0&&(_=c.onRecoverableError)),c=yg(a,1,!1,null,null,h,!1,p,_),a[Vn]=c.current,ol(a.nodeType===8?a.parentNode:a),new bg(c)},Er.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var c=a._reactInternals;if(c===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=B1(c),a=a===null?null:a.stateNode,a},Er.flushSync=function(a){return hs(a)},Er.hydrate=function(a,c,h){if(!$u(c))throw Error(r(200));return Vu(null,a,c,!0,h)},Er.hydrateRoot=function(a,c,h){if(!wg(a))throw Error(r(405));var p=h!=null&&h.hydratedSources||null,_=!1,v="",x=ux;if(h!=null&&(h.unstable_strictMode===!0&&(_=!0),h.identifierPrefix!==void 0&&(v=h.identifierPrefix),h.onRecoverableError!==void 0&&(x=h.onRecoverableError)),c=lx(c,null,a,1,h??null,_,!1,v,x),a[Vn]=c.current,ol(a),p)for(a=0;a<p.length;a++)h=p[a],_=h._getVersion,_=_(h._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[h,_]:c.mutableSourceEagerHydrationData.push(h,_);return new zu(c)},Er.render=function(a,c,h){if(!$u(c))throw Error(r(200));return Vu(null,a,c,!1,h)},Er.unmountComponentAtNode=function(a){if(!$u(a))throw Error(r(40));return a._reactRootContainer?(hs(function(){Vu(null,null,a,!1,function(){a._reactRootContainer=null,a[Vn]=null})}),!0):!1},Er.unstable_batchedUpdates=hg,Er.unstable_renderSubtreeIntoContainer=function(a,c,h,p){if(!$u(h))throw Error(r(200));if(a==null||a._reactInternals===void 0)throw Error(r(38));return Vu(a,c,h,!1,p)},Er.version="18.3.1-next-f1338f8080-20240426",Er}var bx;function mF(){if(bx)return Tg.exports;bx=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Tg.exports=gF(),Tg.exports}var wx;function _F(){if(wx)return Wu;wx=1;var t=mF();return Wu.createRoot=t.createRoot,Wu.hydrateRoot=t.hydrateRoot,Wu}var yF=_F();const Sx="tiles",vF=["cadal_ssno","cerlalc","duxiu_ssid","edsebk","gbooks","goodreads","ia","isbndb","isbngrp","libby","md5","nexusstc_download","nexusstc","oclc","ol","rgb","trantor"],El={width:5e4,height:5e4,tileSize:5e3,maxLevel:4},bF={target:[25e3,2e4,0],zoom:-7};function Zf(t,e){if(!t)throw new Error(e||"loader assertion failed.")}const Lv=!!(typeof process!="object"||String(process)!=="[object process]"||process.browser),xx=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);xx&&parseFloat(xx[1]);const qu=globalThis,Eo=globalThis.process||{},wF=globalThis.navigator||{};function V3(t){var n,i;if(typeof window<"u"&&((n=window.process)==null?void 0:n.type)==="renderer"||typeof process<"u"&&((i=process.versions)!=null&&i.electron))return!0;const r=typeof navigator<"u"&&navigator.userAgent;return!!(r&&r.indexOf("Electron")>=0)}function zs(){return!(typeof process=="object"&&String(process)==="[object process]"&&!(process!=null&&process.browser))||V3()}function SF(t){return zs()?V3()?"Electron":(wF.userAgent||"").indexOf("Edge")>-1?"Edge":globalThis.chrome?"Chrome":globalThis.safari?"Safari":globalThis.mozInnerScreenX?"Firefox":"Unknown":"Node"}const j3="4.1.0";function xF(t){try{const e=window[t],r="__storage_test__";return e.setItem(r,r),e.removeItem(r),e}catch{return null}}class TF{constructor(e,r,n="sessionStorage"){this.storage=xF(n),this.id=e,this.config=r,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const r=JSON.stringify(this.config);this.storage.setItem(this.id,r)}}_loadConfiguration(){let e={};if(this.storage){const r=this.storage.getItem(this.id);e=r?JSON.parse(r):{}}return Object.assign(this.config,e),this}}function EF(t){let e;return t<10?e=`${t.toFixed(2)}ms`:t<100?e=`${t.toFixed(1)}ms`:t<1e3?e=`${t.toFixed(0)}ms`:e=`${(t/1e3).toFixed(2)}s`,e}function AF(t,e=8){const r=Math.max(e-t.length,0);return`${" ".repeat(r)}${t}`}var Gf;(function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(Gf||(Gf={}));const CF=10;function Tx(t){return typeof t!="string"?t:(t=t.toUpperCase(),Gf[t]||Gf.WHITE)}function RF(t,e,r){return!zs&&typeof t=="string"&&(e&&(t=`\x1B[${Tx(e)}m${t}\x1B[39m`),r&&(t=`\x1B[${Tx(r)+CF}m${t}\x1B[49m`)),t}function PF(t,e=["constructor"]){const r=Object.getPrototypeOf(t),n=Object.getOwnPropertyNames(r),i=t;for(const s of n){const o=i[s];typeof o=="function"&&(e.find(l=>s===l)||(i[s]=o.bind(t)))}}function Uv(t,e){if(!t)throw new Error("Assertion failed")}function Ao(){var e,r,n;let t;if(zs()&&qu.performance)t=(r=(e=qu==null?void 0:qu.performance)==null?void 0:e.now)==null?void 0:r.call(e);else if("hrtime"in Eo){const i=(n=Eo==null?void 0:Eo.hrtime)==null?void 0:n.call(Eo);t=i[0]*1e3+i[1]/1e6}else t=Date.now();return t}const Co={debug:zs()&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},MF={enabled:!0,level:0};function Ro(){}const Ex={},Ax={once:!0};class Ec{constructor({id:e}={id:""}){this.VERSION=j3,this._startTs=Ao(),this._deltaTs=Ao(),this.userData={},this.LOG_THROTTLE_TIMEOUT=0,this.id=e,this.userData={},this._storage=new TF(`__probe-${this.id}__`,MF),this.timeStamp(`${this.id} started`),PF(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((Ao()-this._startTs).toPrecision(10))}getDelta(){return Number((Ao()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(e=!0){return this._storage.setConfiguration({enabled:e}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,r){this._storage.setConfiguration({[e]:r})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,r){if(!e)throw new Error(r||"Assertion failed")}warn(e){return this._getLogFunction(0,e,Co.warn,arguments,Ax)}error(e){return this._getLogFunction(0,e,Co.error,arguments)}deprecated(e,r){return this.warn(`\`${e}\` is deprecated and will be removed in a later version. Use \`${r}\` instead`)}removed(e,r){return this.error(`\`${e}\` has been removed. Use \`${r}\` instead`)}probe(e,r){return this._getLogFunction(e,r,Co.log,arguments,{time:!0,once:!0})}log(e,r){return this._getLogFunction(e,r,Co.debug,arguments)}info(e,r){return this._getLogFunction(e,r,console.info,arguments)}once(e,r){return this._getLogFunction(e,r,Co.debug||Co.info,arguments,Ax)}table(e,r,n){return r?this._getLogFunction(e,r,console.table||Ro,n&&[n],{tag:OF(r)}):Ro}time(e,r){return this._getLogFunction(e,r,console.time?console.time:console.info)}timeEnd(e,r){return this._getLogFunction(e,r,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,r){return this._getLogFunction(e,r,console.timeStamp||Ro)}group(e,r,n={collapsed:!1}){const i=Cx({logLevel:e,message:r,opts:n}),{collapsed:s}=n;return i.method=(s?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(e,r,n={}){return this.group(e,r,Object.assign({},n,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||Ro)}withGroup(e,r,n){this.group(e,r)();try{n()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=H3(e)}_getLogFunction(e,r,n,i,s){if(this._shouldLog(e)){s=Cx({logLevel:e,message:r,args:i,opts:s}),n=n||s.method,Uv(n),s.total=this.getTotal(),s.delta=this.getDelta(),this._deltaTs=Ao();const o=s.tag||s.message;if(s.once&&o)if(!Ex[o])Ex[o]=Ao();else return Ro;return r=IF(this.id,s.message,s),n.bind(console,r,...s.args)}return Ro}}Ec.VERSION=j3;function H3(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return Uv(Number.isFinite(e)&&e>=0),e}function Cx(t){const{logLevel:e,message:r}=t;t.logLevel=H3(e);const n=t.args?Array.from(t.args):[];for(;n.length&&n.shift()!==r;);switch(typeof e){case"string":case"function":r!==void 0&&n.unshift(r),t.message=e;break;case"object":Object.assign(t,e);break}typeof t.message=="function"&&(t.message=t.message());const i=typeof t.message;return Uv(i==="string"||i==="object"),Object.assign(t,{args:n},t.opts)}function IF(t,e,r){if(typeof e=="string"){const n=r.time?AF(EF(r.total)):"";e=r.time?`${t}: ${n}  ${e}`:`${t}: ${e}`,e=RF(e,r.color,r.background)}return e}function OF(t){for(const e in t)for(const r in t[e])return r||"untitled";return"empty"}const Cg="4.3.2",kF=Cg[0]>="0"&&Cg[0]<="9"?`v${Cg}`:"";function NF(){const t=new Ec({id:"loaders.gl"});return globalThis.loaders=globalThis.loaders||{},globalThis.loaders.log=t,globalThis.loaders.version=kF,globalThis.probe=globalThis.probe||{},globalThis.probe.loaders=t,t}const FF=NF();function DF(t,e){return W3(t||{},e)}function W3(t,e,r=0){if(r>3)return e;const n={...t};for(const[i,s]of Object.entries(e))s&&typeof s=="object"&&!Array.isArray(s)?n[i]=W3(n[i]||{},e[i],r+1):n[i]=e[i];return n}const BF="latest";function LF(){var t;return(t=globalThis._loadersgl_)!=null&&t.version||(globalThis._loadersgl_=globalThis._loadersgl_||{},globalThis._loadersgl_.version="4.3.2"),globalThis._loadersgl_.version}const UF=LF();function Hi(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}const Ts=typeof process!="object"||String(process)!=="[object process]"||process.browser,zF=typeof window<"u"&&typeof window.orientation<"u",Rx=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);Rx&&parseFloat(Rx[1]);class $F{constructor(e,r){T(this,"name");T(this,"workerThread");T(this,"isRunning",!0);T(this,"result");T(this,"_resolve",()=>{});T(this,"_reject",()=>{});this.name=e,this.workerThread=r,this.result=new Promise((n,i)=>{this._resolve=n,this._reject=i})}postMessage(e,r){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:r})}done(e){Hi(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){Hi(this.isRunning),this.isRunning=!1,this._reject(e)}}class Rg{terminate(){}}const Pg=new Map;function VF(t){Hi(t.source&&!t.url||!t.source&&t.url);let e=Pg.get(t.source||t.url);return e||(t.url&&(e=jF(t.url),Pg.set(t.url,e)),t.source&&(e=q3(t.source),Pg.set(t.source,e))),Hi(e),e}function jF(t){if(!t.startsWith("http"))return t;const e=HF(t);return q3(e)}function q3(t){const e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function HF(t){return`try {
  importScripts('${t}');
} catch (error) {
  console.error(error);
  throw error;
}`}function X3(t,e=!0,r){const n=r||new Set;if(t){if(Px(t))n.add(t);else if(Px(t.buffer))n.add(t.buffer);else if(!ArrayBuffer.isView(t)){if(e&&typeof t=="object")for(const i in t)X3(t[i],e,n)}}return r===void 0?Array.from(n):[]}function Px(t){return t?t instanceof ArrayBuffer||typeof MessagePort<"u"&&t instanceof MessagePort||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas:!1}const Mg=()=>{};class xy{constructor(e){T(this,"name");T(this,"source");T(this,"url");T(this,"terminated",!1);T(this,"worker");T(this,"onMessage");T(this,"onError");T(this,"_loadableURL","");const{name:r,source:n,url:i}=e;Hi(n||i),this.name=r,this.source=n,this.url=i,this.onMessage=Mg,this.onError=s=>console.log(s),this.worker=Ts?this._createBrowserWorker():this._createNodeWorker()}static isSupported(){return typeof Worker<"u"&&Ts||typeof Rg<"u"&&!Ts}destroy(){this.onMessage=Mg,this.onError=Mg,this.worker.terminate(),this.terminated=!0}get isRunning(){return!!this.onMessage}postMessage(e,r){r=r||X3(e),this.worker.postMessage(e,r)}_getErrorFromErrorEvent(e){let r="Failed to load ";return r+=`worker ${this.name} from ${this.url}. `,e.message&&(r+=`${e.message} in `),e.lineno&&(r+=`:${e.lineno}:${e.colno}`),new Error(r)}_createBrowserWorker(){this._loadableURL=VF({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=r=>{r.data?this.onMessage(r.data):this.onError(new Error("No data received"))},e.onerror=r=>{this.onError(this._getErrorFromErrorEvent(r)),this.terminated=!0},e.onmessageerror=r=>console.error(r),e}_createNodeWorker(){let e;if(this.url){const n=this.url.includes(":/")||this.url.startsWith("/")?this.url:`./${this.url}`;e=new Rg(n,{eval:!1})}else if(this.source)e=new Rg(this.source,{eval:!0});else throw new Error("no worker");return e.on("message",r=>{this.onMessage(r)}),e.on("error",r=>{this.onError(r)}),e.on("exit",r=>{}),e}}class WF{constructor(e){T(this,"name","unnamed");T(this,"source");T(this,"url");T(this,"maxConcurrency",1);T(this,"maxMobileConcurrency",1);T(this,"onDebug",()=>{});T(this,"reuseWorkers",!0);T(this,"props",{});T(this,"jobQueue",[]);T(this,"idleQueue",[]);T(this,"count",0);T(this,"isDestroyed",!1);this.source=e.source,this.url=e.url,this.setProps(e)}static isSupported(){return xy.isSupported()}destroy(){this.idleQueue.forEach(e=>e.destroy()),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},e.name!==void 0&&(this.name=e.name),e.maxConcurrency!==void 0&&(this.maxConcurrency=e.maxConcurrency),e.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=e.maxMobileConcurrency),e.reuseWorkers!==void 0&&(this.reuseWorkers=e.reuseWorkers),e.onDebug!==void 0&&(this.onDebug=e.onDebug)}async startJob(e,r=(i,s,o)=>i.done(o),n=(i,s)=>i.error(s)){const i=new Promise(s=>(this.jobQueue.push({name:e,onMessage:r,onError:n,onStart:s}),this));return this._startQueuedJob(),await i}async _startQueuedJob(){if(!this.jobQueue.length)return;const e=this._getAvailableWorker();if(!e)return;const r=this.jobQueue.shift();if(r){this.onDebug({message:"Starting job",name:r.name,workerThread:e,backlog:this.jobQueue.length});const n=new $F(r.name,e);e.onMessage=i=>r.onMessage(n,i.type,i.payload),e.onError=i=>r.onError(n,i),r.onStart(n);try{await n.result}catch(i){console.error(`Worker exception: ${i}`)}finally{this.returnWorkerToQueue(e)}}}returnWorkerToQueue(e){!Ts||this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e=`${this.name.toLowerCase()} (#${this.count} of ${this.maxConcurrency})`;return new xy({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return zF?this.maxMobileConcurrency:this.maxConcurrency}}const qF={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}},Li=class Li{constructor(e){T(this,"props");T(this,"workerPools",new Map);this.props={...qF},this.setProps(e),this.workerPools=new Map}static isSupported(){return xy.isSupported()}static getWorkerFarm(e={}){return Li._workerFarm=Li._workerFarm||new Li({}),Li._workerFarm.setProps(e),Li._workerFarm}destroy(){for(const e of this.workerPools.values())e.destroy();this.workerPools=new Map}setProps(e){this.props={...this.props,...e};for(const r of this.workerPools.values())r.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:r,source:n,url:i}=e;let s=this.workerPools.get(r);return s||(s=new WF({name:r,source:n,url:i}),s.setProps(this._getWorkerPoolProps()),this.workerPools.set(r,s)),s}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}};T(Li,"_workerFarm");let Qf=Li;function XF(t,e={}){const r=e[t.id]||{},n=Ts?`${t.id}-worker.js`:`${t.id}-worker-node.js`;let i=r.workerUrl;if(!i&&t.id==="compression"&&(i=e.workerUrl),e._workerType==="test"&&(Ts?i=`modules/${t.module}/dist/${n}`:i=`modules/${t.module}/src/workers/${t.id}-worker-node.ts`),!i){let s=t.version;s==="latest"&&(s=BF);const o=s?`@${s}`:"";i=`https://unpkg.com/@loaders.gl/${t.module}${o}/dist/${n}`}return Hi(i),i}function KF(t,e=UF){Hi(t,"no worker provided");const r=t.version;return!(!e||!r)}function YF(t,e){return!Qf.isSupported()||!Ts&&!(e!=null&&e._nodeWorkers)?!1:t.worker&&(e==null?void 0:e.worker)}async function ZF(t,e,r,n,i){const s=t.id,o=XF(t,r),u=Qf.getWorkerFarm(r).getWorkerPool({name:s,url:o});r=JSON.parse(JSON.stringify(r)),n=JSON.parse(JSON.stringify(n||{}));const f=await u.startJob("process-on-worker",GF.bind(null,i));return f.postMessage("process",{input:e,options:r,context:n}),await(await f.result).result}async function GF(t,e,r,n){switch(r){case"done":e.done(n);break;case"error":e.error(new Error(n.error));break;case"process":const{id:i,input:s,options:o}=n;try{const l=await t(s,o);e.postMessage("done",{id:i,result:l})}catch(l){const u=l instanceof Error?l.message:"unknown error";e.postMessage("error",{id:i,error:u})}break;default:console.warn(`parse-with-worker unknown message ${r}`)}}function QF(t,e,r){if(r=r||t.byteLength,t.byteLength<r||e.byteLength<r)return!1;const n=new Uint8Array(t),i=new Uint8Array(e);for(let s=0;s<n.length;++s)if(n[s]!==i[s])return!1;return!0}function JF(...t){return e4(t)}function e4(t){const e=t.map(s=>s instanceof ArrayBuffer?new Uint8Array(s):s),r=e.reduce((s,o)=>s+o.byteLength,0),n=new Uint8Array(r);let i=0;for(const s of e)n.set(s,i),i+=s.byteLength;return n.buffer}async function t4(t){const e=[];for await(const r of t)e.push(r);return JF(...e)}function Mx(){let t;if(typeof window<"u"&&window.performance)t=window.performance.now();else if(typeof process<"u"&&process.hrtime){const e=process.hrtime();t=e[0]*1e3+e[1]/1e6}else t=Date.now();return t}class Ix{constructor(e,r){this.sampleSize=1,this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this.name=e,this.type=r,this.reset()}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=Mx(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(Mx()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class Ac{constructor(e){this.stats={},this.id=e.id,this.stats={},this._initializeStats(e.stats),Object.seal(this)}get(e,r="count"){return this._getOrCreate({name:e,type:r})}get size(){return Object.keys(this.stats).length}reset(){for(const e of Object.values(this.stats))e.reset();return this}forEach(e){for(const r of Object.values(this.stats))e(r)}getTable(){const e={};return this.forEach(r=>{e[r.name]={time:r.time||0,count:r.count||0,average:r.getAverageTime()||0,hz:r.getHz()||0}}),e}_initializeStats(e=[]){e.forEach(r=>this._getOrCreate(r))}_getOrCreate(e){const{name:r,type:n}=e;let i=this.stats[r];return i||(e instanceof Ix?i=e:i=new Ix(r,n),this.stats[r]=i),i}}const r4="Queued Requests",n4="Active Requests",i4="Cancelled Requests",s4="Queued Requests Ever",o4="Active Requests Ever",a4={id:"request-scheduler",throttleRequests:!0,maxRequests:6,debounceTime:0};class l4{constructor(e={}){T(this,"props");T(this,"stats");T(this,"activeRequestCount",0);T(this,"requestQueue",[]);T(this,"requestMap",new Map);T(this,"updateTimer",null);this.props={...a4,...e},this.stats=new Ac({id:this.props.id}),this.stats.get(r4),this.stats.get(n4),this.stats.get(i4),this.stats.get(s4),this.stats.get(o4)}scheduleRequest(e,r=()=>0){if(!this.props.throttleRequests)return Promise.resolve({done:()=>{}});if(this.requestMap.has(e))return this.requestMap.get(e);const n={handle:e,priority:0,getPriority:r},i=new Promise(s=>(n.resolve=s,n));return this.requestQueue.push(n),this.requestMap.set(e,i),this._issueNewRequests(),i}_issueRequest(e){const{handle:r,resolve:n}=e;let i=!1;const s=()=>{i||(i=!0,this.requestMap.delete(r),this.activeRequestCount--,this._issueNewRequests())};return this.activeRequestCount++,n?n({done:s}):Promise.resolve({done:s})}_issueNewRequests(){this.updateTimer!==null&&clearTimeout(this.updateTimer),this.updateTimer=setTimeout(()=>this._issueNewRequestsAsync(),this.props.debounceTime)}_issueNewRequestsAsync(){this.updateTimer!==null&&clearTimeout(this.updateTimer),this.updateTimer=null;const e=Math.max(this.props.maxRequests-this.activeRequestCount,0);if(e!==0){this._updateAllRequests();for(let r=0;r<e;++r){const n=this.requestQueue.shift();n&&this._issueRequest(n)}}}_updateAllRequests(){const e=this.requestQueue;for(let r=0;r<e.length;++r){const n=e[r];this._updateRequest(n)||(e.splice(r,1),this.requestMap.delete(n.handle),r--)}e.sort((r,n)=>r.priority-n.priority)}_updateRequest(e){return e.priority=e.getPriority(e.handle),e.priority<0?(e.resolve(null),!1):!0}}let c4="";const Ox={};function u4(t){for(const e in Ox)if(t.startsWith(e)){const r=Ox[e];t=t.replace(e,r)}return!t.startsWith("http://")&&!t.startsWith("https://")&&(t=`${c4}${t}`),t}function f4(t){return t&&typeof t=="object"&&t.isBuffer}function K3(t){if(f4(t))return t;if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return t.byteOffset===0&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);if(typeof t=="string"){const e=t;return new TextEncoder().encode(e).buffer}if(t&&typeof t=="object"&&t._toArrayBuffer)return t._toArrayBuffer();throw new Error("toArrayBuffer")}function Y3(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(e+1):""}function h4(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(0,e):""}const d4=t=>typeof t=="boolean",Zl=t=>typeof t=="function",Cc=t=>t!==null&&typeof t=="object",kx=t=>Cc(t)&&t.constructor==={}.constructor,p4=t=>!!t&&typeof t[Symbol.iterator]=="function",g4=t=>t&&typeof t[Symbol.asyncIterator]=="function",$s=t=>typeof Response<"u"&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json,Vs=t=>typeof Blob<"u"&&t instanceof Blob,m4=t=>t&&typeof t=="object"&&t.isBuffer,_4=t=>typeof ReadableStream<"u"&&t instanceof ReadableStream||Cc(t)&&Zl(t.tee)&&Zl(t.cancel)&&Zl(t.getReader),y4=t=>Cc(t)&&Zl(t.read)&&Zl(t.pipe)&&d4(t.readable),Z3=t=>_4(t)||y4(t);class v4 extends Error{constructor(r,n){super(r);T(this,"reason");T(this,"url");T(this,"response");this.reason=n.reason,this.url=n.url,this.response=n.response}}const b4=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,w4=/^([-\w.]+\/[-\w.+]+)/;function Nx(t,e){return t.toLowerCase()===e.toLowerCase()}function S4(t){const e=w4.exec(t);return e?e[1]:t}function Fx(t){const e=b4.exec(t);return e?e[1]:""}const G3=/\?.*/;function x4(t){const e=t.match(G3);return e&&e[0]}function zv(t){return t.replace(G3,"")}function T4(t){if(t.length<50)return t;const e=t.slice(t.length-15);return`${t.substr(0,32)}...${e}`}function Gh(t){return $s(t)?t.url:Vs(t)?t.name||"":typeof t=="string"?t:""}function $v(t){if($s(t)){const e=t,r=e.headers.get("content-type")||"",n=zv(e.url);return S4(r)||Fx(n)}return Vs(t)?t.type||"":typeof t=="string"?Fx(t):""}function E4(t){return $s(t)?t.headers["content-length"]||-1:Vs(t)?t.size:typeof t=="string"?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}async function Q3(t){if($s(t))return t;const e={},r=E4(t);r>=0&&(e["content-length"]=String(r));const n=Gh(t),i=$v(t);i&&(e["content-type"]=i);const s=await R4(t);s&&(e["x-first-bytes"]=s),typeof t=="string"&&(t=new TextEncoder().encode(t));const o=new Response(t,{headers:e});return Object.defineProperty(o,"url",{value:n}),o}async function A4(t){if(!t.ok)throw await C4(t)}async function C4(t){const e=T4(t.url);let r=`Failed to fetch resource (${t.status}) ${t.statusText}: ${e}`;r=r.length>100?`${r.slice(0,100)}...`:r;const n={reason:t.statusText,url:t.url,response:t};try{const i=t.headers.get("Content-Type");n.reason=!t.bodyUsed&&(i!=null&&i.includes("application/json"))?await t.json():await t.text()}catch{}return new v4(r,n)}async function R4(t){if(typeof t=="string")return`data:,${t.slice(0,5)}`;if(t instanceof Blob){const r=t.slice(0,5);return await new Promise(n=>{const i=new FileReader;i.onload=s=>{var o;return n((o=s==null?void 0:s.target)==null?void 0:o.result)},i.readAsDataURL(r)})}if(t instanceof ArrayBuffer){const r=t.slice(0,5);return`data:base64,${P4(r)}`}return null}function P4(t){let e="";const r=new Uint8Array(t);for(let n=0;n<r.byteLength;n++)e+=String.fromCharCode(r[n]);return btoa(e)}function M4(t){return!I4(t)&&!O4(t)}function I4(t){return t.startsWith("http:")||t.startsWith("https:")}function O4(t){return t.startsWith("data:")}async function Dx(t,e){var r,n;if(typeof t=="string"){const i=u4(t);return M4(i)&&(r=globalThis.loaders)!=null&&r.fetchNode?(n=globalThis.loaders)==null?void 0:n.fetchNode(i,e):await fetch(i,e)}return await Q3(t)}const Bx=new Ec({id:"loaders.gl"});class k4{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}class N4{constructor(){T(this,"console");this.console=console}log(...e){return this.console.log.bind(this.console,...e)}info(...e){return this.console.info.bind(this.console,...e)}warn(...e){return this.console.warn.bind(this.console,...e)}error(...e){return this.console.error.bind(this.console,...e)}}const J3={fetch:null,mimeType:void 0,nothrow:!1,log:new N4,useLocalLibraries:!1,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:Lv,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},F4={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function eP(){globalThis.loaders=globalThis.loaders||{};const{loaders:t}=globalThis;return t._state||(t._state={}),t._state}function tP(){const t=eP();return t.globalOptions=t.globalOptions||{...J3},t.globalOptions}function D4(t,e,r,n){return r=r||[],r=Array.isArray(r)?r:[r],B4(t,r),U4(e,t,n)}function B4(t,e){Lx(t,null,J3,F4,e);for(const r of e){const n=t&&t[r.id]||{},i=r.options&&r.options[r.id]||{},s=r.deprecatedOptions&&r.deprecatedOptions[r.id]||{};Lx(n,r.id,i,s,e)}}function Lx(t,e,r,n,i){const s=e||"Top level",o=e?`${e}.`:"";for(const l in t){const u=!e&&Cc(t[l]),f=l==="baseUri"&&!e,d=l==="workerUrl"&&e;if(!(l in r)&&!f&&!d){if(l in n)Bx.warn(`${s} loader option '${o}${l}' no longer supported, use '${n[l]}'`)();else if(!u){const g=L4(l,i);Bx.warn(`${s} loader option '${o}${l}' not recognized. ${g}`)()}}}}function L4(t,e){const r=t.toLowerCase();let n="";for(const i of e)for(const s in i.options){if(t===s)return`Did you mean '${i.id}.${s}'?`;const o=s.toLowerCase();(r.startsWith(o)||o.startsWith(r))&&(n=n||`Did you mean '${i.id}.${s}'?`)}return n}function U4(t,e,r){const i={...t.options||{}};return z4(i,r),i.log===null&&(i.log=new k4),Ux(i,tP()),Ux(i,e),i}function Ux(t,e){for(const r in e)if(r in e){const n=e[r];kx(n)&&kx(t[r])?t[r]={...t[r],...e[r]}:t[r]=e[r]}}function z4(t,e){e&&!("baseUri"in t)&&(t.baseUri=e)}function Vv(t){return t?(Array.isArray(t)&&(t=t[0]),Array.isArray(t==null?void 0:t.extensions)):!1}function jv(t){Zf(t,"null loader"),Zf(Vv(t),"invalid loader");let e;return Array.isArray(t)&&(e=t[1],t=t[0],t={...t,options:{...t.options,...e}}),(t!=null&&t.parseTextSync||t!=null&&t.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}const rP=()=>{const t=eP();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};function $4(t){const e=rP();t=Array.isArray(t)?t:[t];for(const r of t){const n=jv(r);e.find(i=>n===i)||e.unshift(n)}}function V4(){return rP()}const j4=/\.([^.]+)$/;async function H4(t,e=[],r,n){if(!nP(t))return null;let i=zx(t,e,{...r,nothrow:!0},n);if(i)return i;if(Vs(t)&&(t=await t.slice(0,10).arrayBuffer(),i=zx(t,e,r,n)),!i&&!(r!=null&&r.nothrow))throw new Error(iP(t));return i}function zx(t,e=[],r,n){if(!nP(t))return null;if(e&&!Array.isArray(e))return jv(e);let i=[];e&&(i=i.concat(e)),r!=null&&r.ignoreRegisteredLoaders||i.push(...V4()),q4(i);const s=W4(t,i,r,n);if(!s&&!(r!=null&&r.nothrow))throw new Error(iP(t));return s}function W4(t,e,r,n){const i=Gh(t),s=$v(t),o=zv(i)||(n==null?void 0:n.url);let l=null,u="";return r!=null&&r.mimeType&&(l=Ig(e,r==null?void 0:r.mimeType),u=`match forced by supplied MIME type ${r==null?void 0:r.mimeType}`),l=l||X4(e,o),u=u||(l?`matched url ${o}`:""),l=l||Ig(e,s),u=u||(l?`matched MIME type ${s}`:""),l=l||Y4(e,t),u=u||(l?`matched initial data ${sP(t)}`:""),r!=null&&r.fallbackMimeType&&(l=l||Ig(e,r==null?void 0:r.fallbackMimeType),u=u||(l?`matched fallback MIME type ${s}`:"")),u&&FF.log(1,`selectLoader selected ${l==null?void 0:l.name}: ${u}.`),l}function nP(t){return!(t instanceof Response&&t.status===204)}function iP(t){const e=Gh(t),r=$v(t);let n="No valid loader found (";n+=e?`${Y3(e)}, `:"no url provided, ",n+=`MIME type: ${r?`"${r}"`:"not provided"}, `;const i=t?sP(t):"";return n+=i?` first bytes: "${i}"`:"first bytes: not available",n+=")",n}function q4(t){for(const e of t)jv(e)}function X4(t,e){const r=e&&j4.exec(e),n=r&&r[1];return n?K4(t,n):null}function K4(t,e){e=e.toLowerCase();for(const r of t)for(const n of r.extensions)if(n.toLowerCase()===e)return r;return null}function Ig(t,e){var r;for(const n of t)if((r=n.mimeTypes)!=null&&r.some(i=>Nx(e,i))||Nx(e,`application/x.${n.id}`))return n;return null}function Y4(t,e){if(!e)return null;for(const r of t)if(typeof e=="string"){if(Z4(e,r))return r}else if(ArrayBuffer.isView(e)){if($x(e.buffer,e.byteOffset,r))return r}else if(e instanceof ArrayBuffer&&$x(e,0,r))return r;return null}function Z4(t,e){return e.testText?e.testText(t):(Array.isArray(e.tests)?e.tests:[e.tests]).some(n=>t.startsWith(n))}function $x(t,e,r){return(Array.isArray(r.tests)?r.tests:[r.tests]).some(i=>G4(t,e,r,i))}function G4(t,e,r,n){if(n instanceof ArrayBuffer)return QF(n,t,n.byteLength);switch(typeof n){case"function":return n(t);case"string":const i=Ty(t,e,n.length);return n===i;default:return!1}}function sP(t,e=5){return typeof t=="string"?t.slice(0,e):ArrayBuffer.isView(t)?Ty(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?Ty(t,0,e):""}function Ty(t,e,r){if(t.byteLength<e+r)return"";const n=new DataView(t);let i="";for(let s=0;s<r;s++)i+=String.fromCharCode(n.getUint8(e+s));return i}const Q4=256*1024;function*J4(t,e){const r=(e==null?void 0:e.chunkSize)||Q4;let n=0;const i=new TextEncoder;for(;n<t.length;){const s=Math.min(t.length-n,r),o=t.slice(n,n+s);n+=s,yield i.encode(o)}}const e6=256*1024;function*t6(t,e={}){const{chunkSize:r=e6}=e;let n=0;for(;n<t.byteLength;){const i=Math.min(t.byteLength-n,r),s=new ArrayBuffer(i),o=new Uint8Array(t,n,i);new Uint8Array(s).set(o),n+=i,yield s}}const r6=1024*1024;async function*n6(t,e){const r=(e==null?void 0:e.chunkSize)||r6;let n=0;for(;n<t.size;){const i=n+r,s=await t.slice(n,i).arrayBuffer();n=i,yield s}}function Vx(t,e){return Lv?i6(t,e):s6(t)}async function*i6(t,e){const r=t.getReader();let n;try{for(;;){const i=n||r.read();e!=null&&e._streamReadAhead&&(n=r.read());const{done:s,value:o}=await i;if(s)return;yield K3(o)}}catch{r.releaseLock()}}async function*s6(t,e){for await(const r of t)yield K3(r)}function o6(t,e){if(typeof t=="string")return J4(t,e);if(t instanceof ArrayBuffer)return t6(t,e);if(Vs(t))return n6(t,e);if(Z3(t))return Vx(t,e);if($s(t))return Vx(t.body,e);throw new Error("makeIterator")}const oP="Cannot convert supplied data type";function a6(t,e,r){if(e.text&&typeof t=="string")return t;if(m4(t)&&(t=t.buffer),t instanceof ArrayBuffer){const n=t;return e.text&&!e.binary?new TextDecoder("utf8").decode(n):n}if(ArrayBuffer.isView(t)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(t);let n=t.buffer;const i=t.byteLength||t.length;return(t.byteOffset!==0||i!==n.byteLength)&&(n=n.slice(t.byteOffset,t.byteOffset+i)),n}throw new Error(oP)}async function l6(t,e,r){const n=t instanceof ArrayBuffer||ArrayBuffer.isView(t);if(typeof t=="string"||n)return a6(t,e);if(Vs(t)&&(t=await Q3(t)),$s(t)){const i=t;return await A4(i),e.binary?await i.arrayBuffer():await i.text()}if(Z3(t)&&(t=o6(t,r)),p4(t)||g4(t))return t4(t);throw new Error(oP)}function aP(t,e){const r=tP(),n=t||r;return typeof n.fetch=="function"?n.fetch:Cc(n.fetch)?i=>Dx(i,n.fetch):e!=null&&e.fetch?e==null?void 0:e.fetch:Dx}function c6(t,e,r){if(r)return r;const n={fetch:aP(e,t),...t};if(n.url){const i=zv(n.url);n.baseUrl=i,n.queryString=x4(n.url),n.filename=Y3(i),n.baseUrl=h4(i)}return Array.isArray(n.loaders)||(n.loaders=null),n}function u6(t,e){if(t&&!Array.isArray(t))return t;let r;if(t&&(r=Array.isArray(t)?t:[t]),e&&e.loaders){const n=Array.isArray(e.loaders)?e.loaders:[e.loaders];r=r?[...r,...n]:n}return r&&r.length?r:void 0}async function Jf(t,e,r,n){e&&!Array.isArray(e)&&!Vv(e)&&(n=void 0,r=e,e=void 0),t=await t,r=r||{};const i=Gh(t),o=u6(e,n),l=await H4(t,o,r);return l?(r=D4(r,l,o,i),n=c6({url:i,_parse:Jf,loaders:o},r,n||null),await f6(l,t,r,n)):null}async function f6(t,e,r,n){if(KF(t),r=DF(t.options,r),$s(e)){const s=e,{ok:o,redirected:l,status:u,statusText:f,type:d,url:g}=s,m=Object.fromEntries(s.headers.entries());n.response={headers:m,ok:o,redirected:l,status:u,statusText:f,type:d,url:g}}e=await l6(e,t,r);const i=t;if(i.parseTextSync&&typeof e=="string")return i.parseTextSync(e,r,n);if(YF(t,r))return await ZF(t,e,r,n,Jf);if(i.parseText&&typeof e=="string")return await i.parseText(e,r,n);if(i.parse)return await i.parse(e,r,n);throw Hi(!i.parseSync),new Error(`${t.id} loader - no parser found and worker is disabled`)}async function ac(t,e,r,n){let i,s;!Array.isArray(e)&&!Vv(e)?(i=[],s=e):(i=e,s=r);const o=aP(s);let l=t;return typeof t=="string"&&(l=await o(t)),Vs(t)&&(l=await o(t)),Array.isArray(i)?await Jf(l,i,s):await Jf(l,i,s)}const h6="4.3.2";var $3;const d6=($3=globalThis.loaders)==null?void 0:$3.parseImageNode,Ey=typeof Image<"u",Ay=typeof ImageBitmap<"u",p6=!!d6,Cy=Lv?!0:p6;function g6(t){switch(t){case"auto":return Ay||Ey||Cy;case"imagebitmap":return Ay;case"image":return Ey;case"data":return Cy;default:throw new Error(`@loaders.gl/images: image ${t} not supported in this environment`)}}function m6(){if(Ay)return"imagebitmap";if(Ey)return"image";if(Cy)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}function _6(t){const e=v6(t);if(!e)throw new Error("Not an image");return e}function y6(t){switch(_6(t)){case"data":return t;case"image":case"imagebitmap":const e=document.createElement("canvas"),r=e.getContext("2d");if(!r)throw new Error("getImageData");return e.width=t.width,e.height=t.height,r.drawImage(t,0,0),r.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}function v6(t){return typeof ImageBitmap<"u"&&t instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&t instanceof Image?"image":t&&typeof t=="object"&&t.data&&t.width&&t.height?"data":null}const b6=/^data:image\/svg\+xml/,w6=/\.svg((\?|#).*)?$/;function Hv(t){return t&&(b6.test(t)||w6.test(t))}function S6(t,e){if(Hv(e)){let n=new TextDecoder().decode(t);try{typeof unescape=="function"&&typeof encodeURIComponent=="function"&&(n=unescape(encodeURIComponent(n)))}catch(s){throw new Error(s.message)}return`data:image/svg+xml;base64,${btoa(n)}`}return lP(t,e)}function lP(t,e){if(Hv(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}async function cP(t,e,r){const n=S6(t,r),i=self.URL||self.webkitURL,s=typeof n!="string"&&i.createObjectURL(n);try{return await x6(s||n,e)}finally{s&&i.revokeObjectURL(s)}}async function x6(t,e){const r=new Image;return r.src=t,e.image&&e.image.decode&&r.decode?(await r.decode(),r):await new Promise((n,i)=>{try{r.onload=()=>n(r),r.onerror=s=>{const o=s instanceof Error?s.message:"error";i(new Error(o))}}catch(s){i(s)}})}const T6={};let jx=!0;async function E6(t,e,r){let n;Hv(r)?n=await cP(t,e,r):n=lP(t,r);const i=e&&e.imagebitmap;return await A6(n,i)}async function A6(t,e=null){if((C6(e)||!jx)&&(e=null),e)try{return await createImageBitmap(t,e)}catch(r){console.warn(r),jx=!1}return await createImageBitmap(t)}function C6(t){for(const e in t||T6)return!1;return!0}function R6(t){return!O6(t,"ftyp",4)||!(t[8]&96)?null:P6(t)}function P6(t){switch(M6(t,8,12).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}}function M6(t,e,r){return String.fromCharCode(...t.slice(e,r))}function I6(t){return[...t].map(e=>e.charCodeAt(0))}function O6(t,e,r=0){const n=I6(e);for(let i=0;i<n.length;++i)if(n[i]!==t[i+r])return!1;return!0}const Fn=!1,Gl=!0;function uP(t){const e=Rc(t);return N6(e)||B6(e)||F6(e)||D6(e)||k6(e)}function k6(t){const e=new Uint8Array(t instanceof DataView?t.buffer:t),r=R6(e);return r?{mimeType:r.mimeType,width:0,height:0}:null}function N6(t){const e=Rc(t);return e.byteLength>=24&&e.getUint32(0,Fn)===2303741511?{mimeType:"image/png",width:e.getUint32(16,Fn),height:e.getUint32(20,Fn)}:null}function F6(t){const e=Rc(t);return e.byteLength>=10&&e.getUint32(0,Fn)===1195984440?{mimeType:"image/gif",width:e.getUint16(6,Gl),height:e.getUint16(8,Gl)}:null}function D6(t){const e=Rc(t);return e.byteLength>=14&&e.getUint16(0,Fn)===16973&&e.getUint32(2,Gl)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,Gl),height:e.getUint32(22,Gl)}:null}function B6(t){const e=Rc(t);if(!(e.byteLength>=3&&e.getUint16(0,Fn)===65496&&e.getUint8(2)===255))return null;const{tableMarkers:n,sofMarkers:i}=L6();let s=2;for(;s+9<e.byteLength;){const o=e.getUint16(s,Fn);if(i.has(o))return{mimeType:"image/jpeg",height:e.getUint16(s+5,Fn),width:e.getUint16(s+7,Fn)};if(!n.has(o))return null;s+=2,s+=e.getUint16(s,Fn)}return null}function L6(){const t=new Set([65499,65476,65484,65501,65534]);for(let r=65504;r<65520;++r)t.add(r);return{tableMarkers:t,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}function Rc(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}async function U6(t,e){var i;const{mimeType:r}=uP(t)||{},n=(i=globalThis.loaders)==null?void 0:i.parseImageNode;return Zf(n),await n(t,r)}async function z6(t,e,r){e=e||{};const i=(e.image||{}).type||"auto",{url:s}=r||{},o=$6(i);let l;switch(o){case"imagebitmap":l=await E6(t,e,s);break;case"image":l=await cP(t,e,s);break;case"data":l=await U6(t);break;default:Zf(!1)}return i==="data"&&(l=y6(l)),l}function $6(t){switch(t){case"auto":case"data":return m6();default:return g6(t),t}}const V6=["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],j6=["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],H6={image:{type:"auto",decode:!0}},W6={dataType:null,batchType:null,id:"image",module:"images",name:"Images",version:h6,mimeTypes:j6,extensions:V6,parse:z6,tests:[t=>!!uP(new DataView(t))],options:H6},je=new Ec({id:"deck"});let Ry={};function q6(t){Ry=t}function dr(t,e,r,n){je.level>0&&Ry[t]&&Ry[t].call(null,e,r,n)}function X6(t){const e=t[0],r=t[t.length-1];return e==="{"&&r==="}"||e==="["&&r==="]"}const K6={dataType:null,batchType:null,id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:X6,parseTextSync:JSON.parse};function Y6(){const t="9.1.0",e=globalThis.deck&&globalThis.deck.VERSION;if(e&&e!==t)throw new Error(`deck.gl - multiple versions detected: ${e} vs ${t}`);return e||(je.log(1,`deck.gl ${t}`)(),globalThis.deck={...globalThis.deck,VERSION:t,version:t,log:je,_registerLoggers:q6},$4([K6,[W6,{imagebitmap:{premultiplyAlpha:"none"}}]])),t}const Z6=Y6();function Wv(t,e){if(!t)throw new Error(e||"shadertools: assertion failed.")}const Og={number:{type:"number",validate(t,e){return Number.isFinite(t)&&typeof e=="object"&&(e.max===void 0||t<=e.max)&&(e.min===void 0||t>=e.min)}},array:{type:"array",validate(t,e){return Array.isArray(t)||ArrayBuffer.isView(t)}}};function G6(t){const e={};for(const[r,n]of Object.entries(t))e[r]=Q6(n);return e}function Q6(t){let e=Hx(t);if(e!=="object")return{value:t,...Og[e],type:e};if(typeof t=="object")return t?t.type!==void 0?{...t,...Og[t.type],type:t.type}:t.value===void 0?{type:"object",value:t}:(e=Hx(t.value),{...t,...Og[e],type:e}):{type:"object",value:null};throw new Error("props")}function Hx(t){return Array.isArray(t)||ArrayBuffer.isView(t)?"array":typeof t}const J6=`#ifdef MODULE_LOGDEPTH
  logdepth_adjustPosition(gl_Position);
#endif
`,eD=`#ifdef MODULE_MATERIAL
  fragColor = material_filterColor(fragColor);
#endif

#ifdef MODULE_LIGHTING
  fragColor = lighting_filterColor(fragColor);
#endif

#ifdef MODULE_FOG
  fragColor = fog_filterColor(fragColor);
#endif

#ifdef MODULE_PICKING
  fragColor = picking_filterHighlightColor(fragColor);
  fragColor = picking_filterPickingColor(fragColor);
#endif

#ifdef MODULE_LOGDEPTH
  logdepth_setFragDepth();
#endif
`,tD={vertex:J6,fragment:eD},Wx=/void\s+main\s*\([^)]*\)\s*\{\n?/,qx=/}\n?[^{}]*$/,kg=[],Of="__LUMA_INJECT_DECLARATIONS__";function rD(t){const e={vertex:{},fragment:{}};for(const r in t){let n=t[r];const i=nD(r);typeof n=="string"&&(n={order:0,injection:n}),e[i][r]=n}return e}function nD(t){const e=t.slice(0,2);switch(e){case"vs":return"vertex";case"fs":return"fragment";default:throw new Error(e)}}function eh(t,e,r,n=!1){const i=e==="vertex";for(const s in r){const o=r[s];o.sort((u,f)=>u.order-f.order),kg.length=o.length;for(let u=0,f=o.length;u<f;++u)kg[u]=o[u].injection;const l=`${kg.join(`
`)}
`;switch(s){case"vs:#decl":i&&(t=t.replace(Of,l));break;case"vs:#main-start":i&&(t=t.replace(Wx,u=>u+l));break;case"vs:#main-end":i&&(t=t.replace(qx,u=>l+u));break;case"fs:#decl":i||(t=t.replace(Of,l));break;case"fs:#main-start":i||(t=t.replace(Wx,u=>u+l));break;case"fs:#main-end":i||(t=t.replace(qx,u=>l+u));break;default:t=t.replace(s,u=>u+l)}}return t=t.replace(Of,""),n&&(t=t.replace(/\}\s*$/,s=>s+tD[e])),t}function th(t){t.map(e=>iD(e))}function iD(t){if(t.instance)return;th(t.dependencies||[]);const{propTypes:e={},deprecations:r=[],inject:n={}}=t,i={normalizedInjections:rD(n),parsedDeprecations:sD(r)};e&&(i.propValidators=G6(e)),t.instance=i;let s={};e&&(s=Object.entries(e).reduce((o,[l,u])=>{const f=u==null?void 0:u.value;return f&&(o[l]=f),o},{})),t.defaultUniforms={...t.defaultUniforms,...s}}function fP(t,e,r){var n;(n=t.deprecations)==null||n.forEach(i=>{var s;(s=i.regex)!=null&&s.test(e)&&(i.deprecated?r.deprecated(i.old,i.new)():r.removed(i.old,i.new)())})}function sD(t){return t.forEach(e=>{switch(e.type){case"function":e.regex=new RegExp(`\\b${e.old}\\(`);break;default:e.regex=new RegExp(`${e.type} ${e.old};`)}}),t}function qv(t){th(t);const e={},r={};hP({modules:t,level:0,moduleMap:e,moduleDepth:r});const n=Object.keys(r).sort((i,s)=>r[s]-r[i]).map(i=>e[i]);return th(n),n}function hP(t){const{modules:e,level:r,moduleMap:n,moduleDepth:i}=t;if(r>=5)throw new Error("Possible loop in shader dependency graph");for(const s of e)n[s.name]=s,(i[s.name]===void 0||i[s.name]<r)&&(i[s.name]=r);for(const s of e)s.dependencies&&hP({modules:s.dependencies,level:r+1,moduleMap:n,moduleDepth:i})}function oD(t){switch(t==null?void 0:t.gpu.toLowerCase()){case"apple":return`#define APPLE_GPU
// Apple optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`;case"nvidia":return`#define NVIDIA_GPU
// Nvidia optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
`;case"intel":return`#define INTEL_GPU
// Intel optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`;case"amd":return`#define AMD_GPU
`;default:return`#define DEFAULT_GPU
// Prevent driver from optimizing away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Headless Chrome's software shader 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// If the GPU doesn't have full 32 bits precision, will causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`}}function aD(t,e){var n;if(Number(((n=t.match(/^#version[ \t]+(\d+)/m))==null?void 0:n[1])||100)!==300)throw new Error("luma.gl v9 only supports GLSL 3.00 shader sources");switch(e){case"vertex":return t=Xx(t,lD),t;case"fragment":return t=Xx(t,cD),t;default:throw new Error(e)}}const dP=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,`#version 300 es
`],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],lD=[...dP,[Py("attribute"),"in $1"],[Py("varying"),"out $1"]],cD=[...dP,[Py("varying"),"in $1"]];function Xx(t,e){for(const[r,n]of e)t=t.replace(r,n);return t}function Py(t){return new RegExp(`\\b${t}[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)`,"g")}function pP(t,e){let r="";for(const n in t){const i=t[n];if(r+=`void ${i.signature} {
`,i.header&&(r+=`  ${i.header}`),e[n]){const s=e[n];s.sort((o,l)=>o.order-l.order);for(const o of s)r+=`  ${o.injection}
`}i.footer&&(r+=`  ${i.footer}`),r+=`}
`}return r}function gP(t){const e={vertex:{},fragment:{}};for(const r of t){let n,i;typeof r!="string"?(n=r,i=n.hook):(n={},i=r),i=i.trim();const[s,o]=i.split(":"),l=i.replace(/\(.+/,""),u=Object.assign(n,{signature:o});switch(s){case"vs":e.vertex[l]=u;break;case"fs":e.fragment[l]=u;break;default:throw new Error(s)}}return e}function uD(t,e){return{name:fD(t,e),language:"glsl",version:hD(t)}}function fD(t,e="unnamed"){const n=/#define[^\S\r\n]*SHADER_NAME[^\S\r\n]*([A-Za-z0-9_-]+)\s*/.exec(t);return n?n[1]:e}function hD(t){let e=100;const r=t.match(/[^\s]+/g);if(r&&r.length>=2&&r[0]==="#version"){const n=parseInt(r[1],10);Number.isFinite(n)&&(e=n)}if(e!==100&&e!==300)throw new Error(`Invalid GLSL version ${e}`);return e}const mP=`

${Of}
`,dD=`precision highp float;
`;function pD(t){const e=qv(t.modules||[]);return{source:mD(t.platformInfo,{...t,source:t.source,stage:"vertex",modules:e}),getUniforms:_P(e)}}function gD(t){const{vs:e,fs:r}=t,n=qv(t.modules||[]);return{vs:Kx(t.platformInfo,{...t,source:e,stage:"vertex",modules:n}),fs:Kx(t.platformInfo,{...t,source:r,stage:"fragment",modules:n}),getUniforms:_P(n)}}function mD(t,e){var b;const{source:r,stage:n,modules:i,hookFunctions:s=[],inject:o={},log:l}=e;Wv(typeof r=="string","shader source must be a string");const u=r;let f="";const d=gP(s),g={},m={},y={};for(const S in o){const E=typeof o[S]=="string"?{injection:o[S],order:0}:o[S],k=/^(v|f)s:(#)?([\w-]+)$/.exec(S);if(k){const C=k[2],P=k[3];C?P==="decl"?m[S]=[E]:y[S]=[E]:g[S]=[E]}else y[S]=[E]}const w=i;for(const S of w){l&&fP(S,u,l);const E=yP(S,"wgsl");f+=E;const k=((b=S.injections)==null?void 0:b[n])||{};for(const C in k){const P=/^(v|f)s:#([\w-]+)$/.exec(C);if(P){const D=P[2]==="decl"?m:y;D[C]=D[C]||[],D[C].push(k[C])}else g[C]=g[C]||[],g[C].push(k[C])}}return f+=mP,f=eh(f,n,m),f+=pP(d[n],g),f+=u,f=eh(f,n,y),f}function Kx(t,e){var q;const{id:r,source:n,stage:i,language:s="glsl",modules:o,defines:l={},hookFunctions:u=[],inject:f={},prologue:d=!0,log:g}=e;Wv(typeof n=="string","shader source must be a string");const m=s==="glsl"?uD(n).version:-1,y=t.shaderLanguageVersion,w=m===100?"#version 100":"#version 300 es",S=n.split(`
`).slice(1).join(`
`),E={};o.forEach(ee=>{Object.assign(E,ee.defines)}),Object.assign(E,l);let k="";switch(s){case"wgsl":break;case"glsl":k=d?`${w}

// ----- PROLOGUE -------------------------
${_D({id:r,source:n,stage:i})}
${`#define SHADER_TYPE_${i.toUpperCase()}`}

${oD(t)}
${i==="fragment"?dD:""}

// ----- APPLICATION DEFINES -------------------------

${yD(E)}

`:`${w}
`;break}const C=gP(u),P={},M={},D={};for(const ee in f){const J=typeof f[ee]=="string"?{injection:f[ee],order:0}:f[ee],A=/^(v|f)s:(#)?([\w-]+)$/.exec(ee);if(A){const X=A[2],te=A[3];X?te==="decl"?M[ee]=[J]:D[ee]=[J]:P[ee]=[J]}else D[ee]=[J]}for(const ee of o){g&&fP(ee,S,g);const J=yP(ee,i);k+=J;const A=((q=ee.instance)==null?void 0:q.normalizedInjections[i])||{};for(const X in A){const te=/^(v|f)s:#([\w-]+)$/.exec(X);if(te){const ie=te[2]==="decl"?M:D;ie[X]=ie[X]||[],ie[X].push(A[X])}else P[X]=P[X]||[],P[X].push(A[X])}}return k+="// ----- MAIN SHADER SOURCE -------------------------",k+=mP,k=eh(k,i,M),k+=pP(C[i],P),k+=S,k=eh(k,i,D),s==="glsl"&&m!==y&&(k=aD(k,i)),k.trim()}function _P(t){return function(r){var i;const n={};for(const s of t){const o=(i=s.getUniforms)==null?void 0:i.call(s,r,n);Object.assign(n,o)}return n}}function _D(t){const{id:e,source:r,stage:n}=t;return e&&r.indexOf("SHADER_NAME")===-1?`
#define SHADER_NAME ${e}_${n}`:""}function yD(t={}){let e="";for(const r in t){const n=t[r];(n||Number.isFinite(n))&&(e+=`#define ${r.toUpperCase()} ${t[r]}
`)}return e}function yP(t,e){let r;switch(e){case"vertex":r=t.vs||"";break;case"fragment":r=t.fs||"";break;case"wgsl":r=t.source||"";break;default:Wv(!1)}if(!t.name)throw new Error("Shader module must have a name");const n=t.name.toUpperCase().replace(/[^0-9a-z]/gi,"_");let i=`// ----- MODULE ${t.name} ---------------

`;return e!=="wgsl"&&(i+=`#define MODULE_${n}
`),i+=`${r}
`,i}const vD=/^\s*\#\s*ifdef\s*([a-zA-Z_]+)\s*$/,bD=/^\s*\#\s*endif\s*$/;function wD(t,e){var o;const r=t.split(`
`),n=[];let i=!0,s=null;for(const l of r){const u=l.match(vD),f=l.match(bD);u?(s=u[1],i=!!((o=e==null?void 0:e.defines)!=null&&o[s])):f?i=!0:i&&n.push(l)}return n.join(`
`)}const ws=class ws{constructor(){T(this,"_hookFunctions",[]);T(this,"_defaultModules",[])}static getDefaultShaderAssembler(){return ws.defaultShaderAssembler=ws.defaultShaderAssembler||new ws,ws.defaultShaderAssembler}addDefaultModule(e){this._defaultModules.find(r=>r.name===(typeof e=="string"?e:e.name))||this._defaultModules.push(e)}removeDefaultModule(e){const r=typeof e=="string"?e:e.name;this._defaultModules=this._defaultModules.filter(n=>n.name!==r)}addShaderHook(e,r){r&&(e=Object.assign(r,{hook:e})),this._hookFunctions.push(e)}assembleWGSLShader(e){const r=this._getModuleList(e.modules),n=this._hookFunctions,{source:i,getUniforms:s}=pD({...e,source:e.source,modules:r,hookFunctions:n});return{source:e.platformInfo.shaderLanguage==="wgsl"?wD(i):i,getUniforms:s,modules:r}}assembleGLSLShaderPair(e){const r=this._getModuleList(e.modules),n=this._hookFunctions;return{...gD({...e,vs:e.vs,fs:e.fs,modules:r,hookFunctions:n}),modules:r}}_getModuleList(e=[]){const r=new Array(this._defaultModules.length+e.length),n={};let i=0;for(let s=0,o=this._defaultModules.length;s<o;++s){const l=this._defaultModules[s],u=l.name;r[i++]=l,n[u]=!0}for(let s=0,o=e.length;s<o;++s){const l=e[s],u=l.name;n[u]||(r[i++]=l,n[u]=!0)}return r.length=i,th(r),r}};T(ws,"defaultShaderAssembler");let rh=ws;const SD=`out vec4 transform_output;
void main() {
  transform_output = vec4(0);
}`,xD=`#version 300 es
${SD}`;function TD(t){const{input:e,inputChannels:r,output:n}={};if(!e)return xD;if(!r)throw new Error("inputChannels");const i=ED(r),s=AD(e,r);return`#version 300 es
in ${i} ${e};
out vec4 ${n};
void main() {
  ${n} = ${s};
}`}function ED(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error(`invalid channels: ${t}`)}}function AD(t,e){switch(e){case 1:return`vec4(${t}, 0.0, 0.0, 1.0)`;case 2:return`vec4(${t}, 0.0, 1.0)`;case 3:return`vec4(${t}, 1.0)`;case 4:return t;default:throw new Error(`invalid channels: ${e}`)}}class CD{constructor(){T(this,"stats",new Map)}getStats(e){return this.get(e)}get(e){return this.stats.has(e)||this.stats.set(e,new Ac({id:e})),this.stats.get(e)}}const vP=new CD,fe=new Ec({id:"luma.gl"}),Ng={};function Qh(t="id"){Ng[t]=Ng[t]||1;const e=Ng[t]++;return`${t}-${e}`}var Sy;let rt=(Sy=class{constructor(e,r,n){T(this,"id");T(this,"props");T(this,"userData",{});T(this,"_device");T(this,"destroyed",!1);T(this,"allocatedBytes",0);T(this,"_attachedResources",new Set);if(!e)throw new Error("no device");this._device=e,this.props=RD(r,n);const i=this.props.id!=="undefined"?this.props.id:Qh(this[Symbol.toStringTag]);this.props.id=i,this.id=i,this.userData=this.props.userData||{},this.addStats()}toString(){return`${this[Symbol.toStringTag]||this.constructor.name}:"${this.id}"`}destroy(){this.destroyResource()}delete(){return this.destroy(),this}getProps(){return this.props}attachResource(e){this._attachedResources.add(e)}detachResource(e){this._attachedResources.delete(e)}destroyAttachedResource(e){this._attachedResources.delete(e)&&e.destroy()}destroyAttachedResources(){for(const e of Object.values(this._attachedResources))e.destroy();this._attachedResources=new Set}destroyResource(){this.destroyAttachedResources(),this.removeStats(),this.destroyed=!0}removeStats(){const e=this._device.statsManager.getStats("Resource Counts"),r=this[Symbol.toStringTag];e.get(`${r}s Active`).decrementCount()}trackAllocatedMemory(e,r=this[Symbol.toStringTag]){const n=this._device.statsManager.getStats("Resource Counts");n.get("GPU Memory").addCount(e),n.get(`${r} Memory`).addCount(e),this.allocatedBytes=e}trackDeallocatedMemory(e=this[Symbol.toStringTag]){const r=this._device.statsManager.getStats("Resource Counts");r.get("GPU Memory").subtractCount(this.allocatedBytes),r.get(`${e} Memory`).subtractCount(this.allocatedBytes),this.allocatedBytes=0}addStats(){const e=this._device.statsManager.getStats("Resource Counts"),r=this[Symbol.toStringTag];e.get("Resources Created").incrementCount(),e.get(`${r}s Created`).incrementCount(),e.get(`${r}s Active`).incrementCount()}},T(Sy,"defaultProps",{id:"undefined",handle:void 0,userData:void 0}),Sy);function RD(t,e){const r={...e};for(const n in t)t[n]!==void 0&&(r[n]=t[n]);return r}var $t;let It=($t=class extends rt{constructor(r,n){const i={...n};(n.usage||0)&$t.INDEX&&!n.indexType&&(n.data instanceof Uint32Array?i.indexType="uint32":n.data instanceof Uint16Array&&(i.indexType="uint16")),delete i.data;super(r,i,$t.defaultProps);T(this,"usage");T(this,"indexType");T(this,"updateTimestamp");T(this,"debugData",new ArrayBuffer(0));this.usage=i.usage||0,this.indexType=i.indexType,this.updateTimestamp=r.incrementTimestamp()}get[Symbol.toStringTag](){return"Buffer"}clone(r){return this.device.createBuffer({...this.props,...r})}readSyncWebGL(r,n){throw new Error("not implemented")}_setDebugData(r,n,i){const s=ArrayBuffer.isView(r)?r.buffer:r,o=Math.min(r?r.byteLength:i,$t.DEBUG_DATA_MAX_LENGTH);s===null?this.debugData=new ArrayBuffer(o):n===0&&i===s.byteLength?this.debugData=s.slice(0,o):this.debugData=s.slice(n,n+o)}},T($t,"defaultProps",{...rt.defaultProps,usage:0,byteLength:0,byteOffset:0,data:null,indexType:"uint16",mappedAtCreation:!1}),T($t,"MAP_READ",1),T($t,"MAP_WRITE",2),T($t,"COPY_SRC",4),T($t,"COPY_DST",8),T($t,"INDEX",16),T($t,"VERTEX",32),T($t,"UNIFORM",64),T($t,"STORAGE",128),T($t,"INDIRECT",256),T($t,"QUERY_RESOLVE",512),T($t,"DEBUG_DATA_MAX_LENGTH",32),$t);function bP(t){const e=Yx[t],r=PD(e),n=t.includes("norm"),i=!n&&!t.startsWith("float"),s=t.startsWith("s");return{dataType:Yx[t],byteLength:r,integer:i,signed:s,normalized:n}}function PD(t){return MD[t]}const Yx={uint8:"uint8",sint8:"sint8",unorm8:"uint8",snorm8:"sint8",uint16:"uint16",sint16:"sint16",unorm16:"uint16",snorm16:"sint16",float16:"float16",float32:"float32",uint32:"uint32",sint32:"sint32"},MD={uint8:1,sint8:1,uint16:2,sint16:2,float16:2,float32:4,uint32:4,sint32:4},fr="texture-compression-bc",et="texture-compression-astc",Rn="texture-compression-etc2",ID="texture-compression-etc1-webgl",Xu="texture-compression-pvrtc-webgl",Fg="texture-compression-atc-webgl",Ku="float32-renderable-webgl",Dg="float16-renderable-webgl",OD="rgb9e5ufloat-renderable-webgl",Bg="snorm8-renderable-webgl",Al="norm16-renderable-webgl",Lg="snorm16-renderable-webgl",Yu="float32-filterable",Zx="float16-filterable-webgl";function wP(t){const e=kD[t];if(!e)throw new Error(`Unsupported texture format ${t}`);return e}const kD={r8unorm:{},r8snorm:{render:Bg},r8uint:{},r8sint:{},rg8unorm:{},rg8snorm:{render:Bg},rg8uint:{},rg8sint:{},r16uint:{},r16sint:{},r16float:{render:Dg,filter:"float16-filterable-webgl"},"r16unorm-webgl":{f:Al},"r16snorm-webgl":{f:Lg},"rgba4unorm-webgl":{channels:"rgba",bitsPerChannel:[4,4,4,4],packed:!0},"rgb565unorm-webgl":{channels:"rgb",bitsPerChannel:[5,6,5,0],packed:!0},"rgb5a1unorm-webgl":{channels:"rgba",bitsPerChannel:[5,5,5,1],packed:!0},"rgb8unorm-webgl":{},"rgb8snorm-webgl":{},rgba8unorm:{},"rgba8unorm-srgb":{},rgba8snorm:{render:Bg},rgba8uint:{},rgba8sint:{},bgra8unorm:{},"bgra8unorm-srgb":{},rg16uint:{},rg16sint:{},rg16float:{render:Dg,filter:Zx},"rg16unorm-webgl":{render:Al},"rg16snorm-webgl":{render:Lg},r32uint:{},r32sint:{},r32float:{render:Ku,filter:Yu},rgb9e5ufloat:{channels:"rgb",packed:!0,render:OD},rg11b10ufloat:{channels:"rgb",bitsPerChannel:[11,11,10,0],packed:!0,p:1,render:Ku},rgb10a2unorm:{channels:"rgba",bitsPerChannel:[10,10,10,2],packed:!0,p:1},"rgb10a2uint-webgl":{channels:"rgba",bitsPerChannel:[10,10,10,2],packed:!0,p:1,wgpu:!1},"rgb16unorm-webgl":{f:Al},"rgb16snorm-webgl":{f:Al},rg32uint:{},rg32sint:{},rg32float:{render:!1,filter:Yu},rgba16uint:{},rgba16sint:{},rgba16float:{render:Dg,filter:Zx},"rgba16unorm-webgl":{render:Al},"rgba16snorm-webgl":{render:Lg},"rgb32float-webgl":{render:Ku,filter:Yu},rgba32uint:{},rgba32sint:{},rgba32float:{render:Ku,filter:Yu},stencil8:{attachment:"stencil",bitsPerChannel:[8,0,0,0],dataType:"uint8"},depth16unorm:{attachment:"depth",bitsPerChannel:[16,0,0,0],dataType:"uint16"},depth24plus:{attachment:"depth",bitsPerChannel:[24,0,0,0],dataType:"uint32"},depth32float:{attachment:"depth",bitsPerChannel:[32,0,0,0],dataType:"float32"},"depth24plus-stencil8":{attachment:"depth-stencil",bitsPerChannel:[24,8,0,0],packed:!0},"depth32float-stencil8":{attachment:"depth-stencil",bitsPerChannel:[32,8,0,0],packed:!0},"bc1-rgb-unorm-webgl":{f:fr},"bc1-rgb-unorm-srgb-webgl":{f:fr},"bc1-rgba-unorm":{f:fr},"bc1-rgba-unorm-srgb":{f:fr},"bc2-rgba-unorm":{f:fr},"bc2-rgba-unorm-srgb":{f:fr},"bc3-rgba-unorm":{f:fr},"bc3-rgba-unorm-srgb":{f:fr},"bc4-r-unorm":{f:fr},"bc4-r-snorm":{f:fr},"bc5-rg-unorm":{f:fr},"bc5-rg-snorm":{f:fr},"bc6h-rgb-ufloat":{f:fr},"bc6h-rgb-float":{f:fr},"bc7-rgba-unorm":{f:fr},"bc7-rgba-unorm-srgb":{f:fr},"etc2-rgb8unorm":{f:Rn},"etc2-rgb8unorm-srgb":{f:Rn},"etc2-rgb8a1unorm":{f:Rn},"etc2-rgb8a1unorm-srgb":{f:Rn},"etc2-rgba8unorm":{f:Rn},"etc2-rgba8unorm-srgb":{f:Rn},"eac-r11unorm":{f:Rn},"eac-r11snorm":{f:Rn},"eac-rg11unorm":{f:Rn},"eac-rg11snorm":{f:Rn},"astc-4x4-unorm":{f:et},"astc-4x4-unorm-srgb":{f:et},"astc-5x4-unorm":{f:et},"astc-5x4-unorm-srgb":{f:et},"astc-5x5-unorm":{f:et},"astc-5x5-unorm-srgb":{f:et},"astc-6x5-unorm":{f:et},"astc-6x5-unorm-srgb":{f:et},"astc-6x6-unorm":{f:et},"astc-6x6-unorm-srgb":{f:et},"astc-8x5-unorm":{f:et},"astc-8x5-unorm-srgb":{f:et},"astc-8x6-unorm":{f:et},"astc-8x6-unorm-srgb":{f:et},"astc-8x8-unorm":{f:et},"astc-8x8-unorm-srgb":{f:et},"astc-10x5-unorm":{f:et},"astc-10x5-unorm-srgb":{f:et},"astc-10x6-unorm":{f:et},"astc-10x6-unorm-srgb":{f:et},"astc-10x8-unorm":{f:et},"astc-10x8-unorm-srgb":{f:et},"astc-10x10-unorm":{f:et},"astc-10x10-unorm-srgb":{f:et},"astc-12x10-unorm":{f:et},"astc-12x10-unorm-srgb":{f:et},"astc-12x12-unorm":{f:et},"astc-12x12-unorm-srgb":{f:et},"pvrtc-rgb4unorm-webgl":{f:Xu},"pvrtc-rgba4unorm-webgl":{f:Xu},"pvrtc-rbg2unorm-webgl":{f:Xu},"pvrtc-rgba2unorm-webgl":{f:Xu},"etc1-rbg-unorm-webgl":{f:ID},"atc-rgb-unorm-webgl":{f:Fg},"atc-rgba-unorm-webgl":{f:Fg},"atc-rgbai-unorm-webgl":{f:Fg}},ND=["bc1","bc2","bc3","bc4","bc5","bc6","bc7","etc1","etc2","eac","atc","astc","pvrtc"],FD=/^(r|rg|rgb|rgba|bgra)([0-9]*)([a-z]*)(-srgb)?(-webgl)?$/;function SP(t){return ND.some(e=>t.startsWith(e))}function Xv(t){let e=DD(t);if(SP(t)){e.channels="rgb",e.components=3,e.bytesPerPixel=1,e.srgb=!1,e.compressed=!0;const n=BD(t);n&&(e.blockWidth=n.blockWidth,e.blockHeight=n.blockHeight)}const r=FD.exec(t);if(r){const[,n,i,s,o,l]=r,u=`${s}${i}`,f=bP(u),d=f.byteLength*8,g=n.length,m=[d,g>=2?d:0,g>=3?d:0,g>=4?d:0];e={format:t,attachment:e.attachment,dataType:f.dataType,components:g,channels:n,integer:f.integer,signed:f.signed,normalized:f.normalized,bitsPerChannel:m,bytesPerPixel:f.byteLength*n.length,packed:e.packed,srgb:e.srgb},l==="-webgl"&&(e.webgl=!0),o==="-srgb"&&(e.srgb=!0)}return t.endsWith("-webgl")&&(e.webgl=!0),t.endsWith("-srgb")&&(e.srgb=!0),e}function DD(t){var s;const e=wP(t),r=e.bytesPerPixel||1,n=e.bitsPerChannel||[8,8,8,8];return delete e.bitsPerChannel,delete e.bytesPerPixel,delete e.f,delete e.render,delete e.filter,delete e.blend,delete e.store,{...e,format:t,attachment:e.attachment||"color",channels:e.channels||"r",components:e.components||((s=e.channels)==null?void 0:s.length)||1,bytesPerPixel:r,bitsPerChannel:n,dataType:e.dataType||"uint8",srgb:e.srgb??!1,packed:e.packed??!1,webgl:e.webgl??!1,integer:e.integer??!1,signed:e.signed??!1,normalized:e.normalized??!1,compressed:e.compressed??!1}}function BD(t){const r=/.*-(\d+)x(\d+)-.*/.exec(t);if(r){const[,n,i]=r;return{blockWidth:Number(n),blockHeight:Number(i)}}return null}function LD(t){const e=wP(t),r={format:t,create:e.f??!0,render:e.render??!0,filter:e.filter??!0,blend:e.blend??!0,store:e.store??!0},n=Xv(t),i=t.startsWith("depth")||t.startsWith("stencil"),s=n==null?void 0:n.signed,o=n==null?void 0:n.integer,l=n==null?void 0:n.webgl;return r.render&&(r.render=!s),r.filter&&(r.filter=!i&&!s&&!o&&!l),r}class UD{}class zD{constructor(e=[],r){T(this,"features");T(this,"disabledFeatures");this.features=new Set(e),this.disabledFeatures=r||{}}*[Symbol.iterator](){yield*this.features}has(e){var r;return!((r=this.disabledFeatures)!=null&&r[e])&&this.features.has(e)}}const Dh=class Dh{constructor(e){T(this,"id");T(this,"props");T(this,"userData",{});T(this,"statsManager",vP);T(this,"timestamp",0);T(this,"_lumaData",{});this.props={...Dh.defaultProps,...e},this.id=this.props.id||Qh(this[Symbol.toStringTag].toLowerCase())}get[Symbol.toStringTag](){return"Device"}getTextureFormatCapabilities(e){const r=LD(e),n=o=>(typeof o=="string"?this.features.has(o):o)??!0,i=n(r.create),s={format:e,create:i,render:i&&n(r.render),filter:i&&n(r.filter),blend:i&&n(r.blend),store:i&&n(r.store)};return this._getDeviceSpecificTextureFormatCapabilities(s)}isTextureFormatSupported(e,r){return this.getTextureFormatCapabilities(e).create}isTextureFormatFilterable(e){return this.getTextureFormatCapabilities(e).filter}isTextureFormatRenderable(e){return this.getTextureFormatCapabilities(e).render}isTextureFormatCompressed(e){return SP(e)}loseDevice(){return!1}reportError(e){this.props.onError(e)}getDefaultCanvasContext(){if(!this.canvasContext)throw new Error("Device has no default CanvasContext. See props.createCanvasContext");return this.canvasContext}createCommandEncoder(e={}){throw new Error("not implemented")}incrementTimestamp(){return this.timestamp++}onError(e){this.props.onError(e)}getCanvasContext(){return this.getDefaultCanvasContext()}readPixelsToArrayWebGL(e,r){throw new Error("not implemented")}readPixelsToBufferWebGL(e,r){throw new Error("not implemented")}setParametersWebGL(e){throw new Error("not implemented")}getParametersWebGL(e){throw new Error("not implemented")}withParametersWebGL(e,r){throw new Error("not implemented")}clearWebGL(e){throw new Error("not implemented")}resetWebGL(){throw new Error("not implemented")}_normalizeBufferProps(e){(e instanceof ArrayBuffer||ArrayBuffer.isView(e))&&(e={data:e});const r={...e};return(e.usage||0)&It.INDEX&&!e.indexType&&(e.data instanceof Uint32Array?r.indexType="uint32":e.data instanceof Uint16Array?r.indexType="uint16":fe.warn("indices buffer content must be of integer type")()),r}};T(Dh,"defaultProps",{id:null,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,createCanvasContext:void 0,onError:e=>fe.error(e.message)(),_requestMaxLimits:!0,_factoryDestroyPolicy:"unused",_initializeFeatures:!0,_disabledFeatures:{"compilation-status-async-webgl":!0},_resourceDefaults:{},webgl:{},debug:fe.get("debug")||void 0,debugShaders:fe.get("debug-shaders")||void 0,debugFramebuffers:!!fe.get("debug-framebuffers"),debugWebGL:!!fe.get("debug-webgl"),debugSpectorJS:void 0,debugSpectorJSUrl:void 0,_handle:void 0});let Es=Dh;const $D=zs()&&typeof document<"u",VD=()=>$D&&document.readyState==="complete",jD="set luma.log.level=1 (or higher) to trace rendering",Gx="No matching device found. Ensure `@luma.gl/webgl` and/or `@luma.gl/webgpu` modules are imported.",Ui=class Ui{constructor(){T(this,"stats",vP);T(this,"log",fe);T(this,"VERSION","9.1.0");T(this,"spector");T(this,"preregisteredAdapters",new Map);if(globalThis.luma){if(globalThis.luma.VERSION!==this.VERSION)throw fe.error(`Found luma.gl ${globalThis.luma.VERSION} while initialzing ${this.VERSION}`)(),fe.error("'yarn why @luma.gl/core' can help identify the source of the conflict")(),new Error("luma.gl - multiple versions detected: see console log");fe.error("This version of luma.gl has already been initialized")()}fe.log(1,`${this.VERSION} - ${jD}`)(),globalThis.luma=this}registerAdapters(e){for(const r of e)this.preregisteredAdapters.set(r.type,r)}getSupportedAdapters(e=[]){const r=this.getAdapterMap(e);return Array.from(r).map(([,n])=>n).filter(n=>{var i;return(i=n.isSupported)==null?void 0:i.call(n)}).map(n=>n.type)}getBestAvailableAdapter(e=[]){var n,i,s,o;const r=this.getAdapterMap(e);return(i=(n=r.get("webgpu"))==null?void 0:n.isSupported)!=null&&i.call(n)?"webgpu":(o=(s=r.get("webgl"))==null?void 0:s.isSupported)!=null&&o.call(s)?"webgl":null}setDefaultDeviceProps(e){Object.assign(Ui.defaultProps,e)}async createDevice(e={}){var l;e={...Ui.defaultProps,...e},e.waitForPageLoad&&await Ui.pageLoaded;const r=this.getAdapterMap(e.adapters);let n=e.type||"";n==="best-available"&&(n=this.getBestAvailableAdapter(e.adapters)||n);const s=(this.getAdapterMap(e.adapters)||r).get(n),o=await((l=s==null?void 0:s.create)==null?void 0:l.call(s,e));if(o)return o;throw new Error(Gx)}async attachDevice(e){var o;const r=this.getAdapterMap(e.adapters);let n="";e.handle instanceof WebGL2RenderingContext&&(n="webgl"),e.createCanvasContext&&await Ui.pageLoaded,e.handle===null&&(n="unknown");const i=r.get(n),s=await((o=i==null?void 0:i.attach)==null?void 0:o.call(i,null));if(s)return s;throw new Error(Gx)}enforceWebGL2(e=!0,r=[]){var s;const i=this.getAdapterMap(r).get("webgl");i||fe.warn("enforceWebGL2: webgl adapter not found")(),(s=i==null?void 0:i.enforceWebGL2)==null||s.call(i,e)}getAdapterMap(e=[]){const r=new Map(this.preregisteredAdapters);for(const n of e)r.set(n.type,n);return r}registerDevices(e){fe.warn("luma.registerDevices() is deprecated, use luma.registerAdapters() instead");for(const r of e){const n=r.adapter;n&&this.preregisteredAdapters.set(n.type,n)}}};T(Ui,"defaultProps",{...Es.defaultProps,type:"best-available",adapters:void 0,waitForPageLoad:!0}),T(Ui,"pageLoaded",HD().then(()=>{fe.probe(2,"DOM is loaded")()}));let My=Ui;const Iy=new My;function HD(){return VD()||typeof window>"u"?Promise.resolve():new Promise(t=>{window.addEventListener("load",()=>t())})}class WD{}const Bh=class Bh{constructor(e){T(this,"id");T(this,"props");T(this,"canvas");T(this,"htmlCanvas");T(this,"offscreenCanvas");T(this,"type");T(this,"width",1);T(this,"height",1);T(this,"resizeObserver");T(this,"_canvasSizeInfo",{clientWidth:0,clientHeight:0,devicePixelRatio:1});if(this.props={...Bh.defaultProps,...e},e=this.props,!zs()){this.id="node-canvas-context",this.type="node",this.width=this.props.width,this.height=this.props.height,this.canvas=null;return}if(e.canvas)typeof e.canvas=="string"?this.canvas=XD(e.canvas):this.canvas=e.canvas;else{const r=KD(e),n=qD((e==null?void 0:e.container)||null);n.insertBefore(r,n.firstChild),this.canvas=r,e!=null&&e.visible||(this.canvas.style.visibility="hidden")}this.canvas instanceof HTMLCanvasElement?(this.id=this.canvas.id,this.type="html-canvas",this.htmlCanvas=this.canvas):(this.id="offscreen-canvas",this.type="offscreen-canvas",this.offscreenCanvas=this.canvas),this.canvas instanceof HTMLCanvasElement&&e.autoResize&&(this.resizeObserver=new ResizeObserver(r=>{for(const n of r)n.target===this.canvas&&this.update()}),this.resizeObserver.observe(this.canvas))}toString(){return`${this[Symbol.toStringTag]}(${this.id})`}getDevicePixelRatio(e){return typeof OffscreenCanvas<"u"&&this.canvas instanceof OffscreenCanvas||(e=e===void 0?this.props.useDevicePixels:e,!e||e<=0)?1:e===!0?typeof window<"u"&&window.devicePixelRatio||1:e}getPixelSize(){switch(this.type){case"node":return[this.width,this.height];case"offscreen-canvas":return[this.canvas.width,this.canvas.height];case"html-canvas":const e=this.getDevicePixelRatio(),r=this.canvas;return r.parentElement?[r.clientWidth*e,r.clientHeight*e]:[this.canvas.width,this.canvas.height];default:throw new Error(this.type)}}getAspect(){const[e,r]=this.getPixelSize();return e/r}cssToDeviceRatio(){var e;try{const[r]=this.getDrawingBufferSize(),n=this._canvasSizeInfo.clientWidth||((e=this.htmlCanvas)==null?void 0:e.clientWidth);return n?r/n:1}catch{return 1}}cssToDevicePixels(e,r=!0){const n=this.cssToDeviceRatio(),[i,s]=this.getDrawingBufferSize();return YD(e,n,i,s,r)}setDevicePixelRatio(e,r={}){if(!this.htmlCanvas)return;let n="width"in r?r.width:this.htmlCanvas.clientWidth,i="height"in r?r.height:this.htmlCanvas.clientHeight;(!n||!i)&&(fe.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,n=this.htmlCanvas.width||1,i=this.htmlCanvas.height||1);const s=this._canvasSizeInfo;if(s.clientWidth!==n||s.clientHeight!==i||s.devicePixelRatio!==e){let o=e;const l=Math.floor(n*o),u=Math.floor(i*o);if(this.htmlCanvas.width=l,this.htmlCanvas.height=u,this.device.gl){const[d,g]=this.getDrawingBufferSize();(d!==l||g!==u)&&(o=Math.min(d/n,g/i),this.htmlCanvas.width=Math.floor(n*o),this.htmlCanvas.height=Math.floor(i*o),fe.warn("Device pixel ratio clamped")()),this._canvasSizeInfo.clientWidth=n,this._canvasSizeInfo.clientHeight=i,this._canvasSizeInfo.devicePixelRatio=e}}}getDrawingBufferSize(){const e=this.device.gl;if(!e)throw new Error("canvas size");return[e.drawingBufferWidth,e.drawingBufferHeight]}_setAutoCreatedCanvasId(e){var r;((r=this.htmlCanvas)==null?void 0:r.id)==="lumagl-auto-created-canvas"&&(this.htmlCanvas.id=e)}};T(Bh,"defaultProps",{canvas:null,width:800,height:600,useDevicePixels:!0,autoResize:!0,container:null,visible:!0,alphaMode:"opaque",colorSpace:"srgb"});let Oy=Bh;function qD(t){if(typeof t=="string"){const e=document.getElementById(t);if(!e)throw new Error(`${t} is not an HTML element`);return e}else if(t)return t;return document.body}function XD(t){const e=document.getElementById(t);if(!(e instanceof HTMLCanvasElement))throw new Error("Object is not a canvas element");return e}function KD(t){const{width:e,height:r}=t,n=document.createElement("canvas");return n.id=Qh("lumagl-auto-created-canvas"),n.width=e||1,n.height=r||1,n.style.width=Number.isFinite(e)?`${e}px`:"100%",n.style.height=Number.isFinite(r)?`${r}px`:"100%",n}function YD(t,e,r,n,i){const s=t,o=Qx(s[0],e,r);let l=Jx(s[1],e,n,i),u=Qx(s[0]+1,e,r);const f=u===r-1?u:u-1;u=Jx(s[1]+1,e,n,i);let d;return i?(u=u===0?u:u+1,d=l,l=u):d=u===n-1?u:u-1,{x:o,y:l,width:Math.max(f-o+1,1),height:Math.max(d-l+1,1)}}function Qx(t,e,r){return Math.min(Math.round(t*e),r-1)}function Jx(t,e,r,n){return n?Math.max(0,r-1-Math.round(t*e)):Math.min(Math.round(t*e),r-1)}const rr=class rr extends rt{constructor(r,n){n=rr.normalizeProps(r,n);super(r,n,rr.defaultProps);T(this,"dimension");T(this,"format");T(this,"width");T(this,"height");T(this,"depth");T(this,"mipLevels");T(this,"updateTimestamp");if(this.dimension=this.props.dimension,this.format=this.props.format,this.width=this.props.width,this.height=this.props.height,this.depth=this.props.depth,this.props.width===void 0||this.props.height===void 0){const i=rr.getTextureDataSize(this.props.data);this.width=(i==null?void 0:i.width)||1,this.height=(i==null?void 0:i.height)||1}this.props.mipmaps&&this.props.mipLevels===void 0&&(this.props.mipLevels="pyramid"),this.mipLevels=this.props.mipLevels==="pyramid"?rr.getMipLevelCount(this.width,this.height):this.props.mipLevels||1,this.updateTimestamp=r.incrementTimestamp()}get[Symbol.toStringTag](){return"Texture"}toString(){return`Texture(${this.id},${this.format},${this.width}x${this.height})`}clone(r){return this.device.createTexture({...this.props,...r})}static isExternalImage(r){return typeof ImageData<"u"&&r instanceof ImageData||typeof ImageBitmap<"u"&&r instanceof ImageBitmap||typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement||typeof HTMLVideoElement<"u"&&r instanceof HTMLVideoElement||typeof VideoFrame<"u"&&r instanceof VideoFrame||typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&r instanceof OffscreenCanvas}static getExternalImageSize(r){if(typeof ImageData<"u"&&r instanceof ImageData||typeof ImageBitmap<"u"&&r instanceof ImageBitmap||typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&r instanceof OffscreenCanvas)return{width:r.width,height:r.height};if(typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement)return{width:r.naturalWidth,height:r.naturalHeight};if(typeof HTMLVideoElement<"u"&&r instanceof HTMLVideoElement)return{width:r.videoWidth,height:r.videoHeight};if(typeof VideoFrame<"u"&&r instanceof VideoFrame)return{width:r.displayWidth,height:r.displayHeight};throw new Error("Unknown image type")}static isTextureLevelData(r){const n=r==null?void 0:r.data;return ArrayBuffer.isView(n)}static getTextureDataSize(r){if(!r||ArrayBuffer.isView(r))return null;if(Array.isArray(r))return rr.getTextureDataSize(r[0]);if(rr.isExternalImage(r))return rr.getExternalImageSize(r);if(r&&typeof r=="object"&&r.constructor===Object){const i=Object.values(r)[0];return{width:i.width,height:i.height}}throw new Error("texture size deduction failed")}static normalizeTextureData(r,n){let i;return ArrayBuffer.isView(r)?i=[{data:r,width:n.width,height:n.height}]:Array.isArray(r)?i=r:i=[r],i}static getMipLevelCount(r,n){return Math.floor(Math.log2(Math.max(r,n)))+1}static getCubeFaceDepth(r){switch(r){case"+X":return 0;case"-X":return 1;case"+Y":return 2;case"-Y":return 3;case"+Z":return 4;case"-Z":return 5;default:throw new Error(r)}}static normalizeProps(r,n){var u,f;const i={...n},s=((f=(u=r==null?void 0:r.props)==null?void 0:u._resourceDefaults)==null?void 0:f.texture)||{};Object.assign(i,s);const{width:o,height:l}=i;return typeof o=="number"&&(i.width=Math.max(1,Math.ceil(o))),typeof l=="number"&&(i.height=Math.max(1,Math.ceil(l))),i}};T(rr,"COPY_SRC",1),T(rr,"COPY_DST",2),T(rr,"TEXTURE",4),T(rr,"STORAGE",8),T(rr,"RENDER_ATTACHMENT",16),T(rr,"CubeFaces",["+X","-X","+Y","-Y","+Z","-Z"]),T(rr,"defaultProps",{...rt.defaultProps,data:null,dimension:"2d",format:"rgba8unorm",width:void 0,height:void 0,depth:1,mipmaps:!1,compressed:!1,usage:0,mipLevels:void 0,samples:void 0,sampler:{},view:void 0,flipY:void 0}),T(rr,"defaultCopyExternalImageOptions",{image:void 0,sourceX:0,sourceY:0,width:void 0,height:void 0,depth:1,mipLevel:0,x:0,y:0,z:0,aspect:"all",colorSpace:"srgb",premultipliedAlpha:!1,flipY:!1});let Pt=rr;const Lh=class Lh extends rt{get[Symbol.toStringTag](){return"TextureView"}constructor(e,r){super(e,r,Lh.defaultProps)}};T(Lh,"defaultProps",{...rt.defaultProps,format:void 0,dimension:void 0,aspect:"all",baseMipLevel:0,mipLevelCount:void 0,baseArrayLayer:0,arrayLayerCount:void 0});let nh=Lh;function ZD(t,e,r){let n="";const i=e.split(/\r?\n/),s=t.slice().sort((o,l)=>o.lineNum-l.lineNum);switch((r==null?void 0:r.showSourceCode)||"no"){case"all":let o=0;for(let l=1;l<=i.length;l++)for(n+=xP(i[l-1],l,r);s.length>o&&s[o].lineNum===l;){const u=s[o++];n+=eT(u,i,u.lineNum,{...r,inlineSource:!1})}return n;case"issues":case"no":for(const l of t)n+=eT(l,i,l.lineNum,{inlineSource:(r==null?void 0:r.showSourceCode)!=="no"});return n}}function eT(t,e,r,n){if(n!=null&&n.inlineSource){const s=GD(e,r),o=t.linePos>0?`${" ".repeat(t.linePos+5)}^^^
`:"";return`
${s}${o}${t.type.toUpperCase()}: ${t.message}

`}const i=t.type==="error"?"red":"#8B4000";return n!=null&&n.html?`<div class='luma-compiler-log-error' style="color:${i};"><b> ${t.type.toUpperCase()}: ${t.message}</b></div>`:`${t.type.toUpperCase()}: ${t.message}`}function GD(t,e,r){let n="";for(let i=e-2;i<=e;i++){const s=t[i-1];s!==void 0&&(n+=xP(s,e,r))}return n}function xP(t,e,r){const n=r!=null&&r.html?JD(t):t;return`${QD(String(e),4)}: ${n}${r!=null&&r.html?"<br/>":`
`}`}function QD(t,e){let r="";for(let n=t.length;n<e;++n)r+=" ";return r+t}function JD(t){return t.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;")}const Uh=class Uh extends rt{constructor(r,n){n={...n,debugShaders:n.debugShaders||r.props.debugShaders||"errors"};super(r,{id:eB(n),...n},Uh.defaultProps);T(this,"stage");T(this,"source");T(this,"compilationStatus","pending");this.stage=this.props.stage,this.source=this.props.source}get[Symbol.toStringTag](){return"Shader"}getCompilationInfoSync(){return null}getTranslatedSource(){return null}async debugShader(){const r=this.props.debugShaders;switch(r){case"never":return;case"errors":if(this.compilationStatus==="success")return;break}const n=await this.getCompilationInfo();r==="warnings"&&(n==null?void 0:n.length)===0||this._displayShaderLog(n)}_displayShaderLog(r){var f;if(typeof document>"u"||!(document!=null&&document.createElement))return;const n=TP(this.source),i=`${this.stage} ${n}`;let s=ZD(r,this.source,{showSourceCode:"all",html:!0});const o=this.getTranslatedSource();o&&(s+=`<br /><br /><h1>Translated Source</h1><br /><br /><code style="user-select:text;"><pre>${o}</pre></code>`);const l=document.createElement("Button");l.innerHTML=`
<h1>Shader Compilation Error in ${i}</h1><br /><br />
<code style="user-select:text;"><pre>
${s}
</pre></code>`,l.style.top="10px",l.style.left="10px",l.style.position="absolute",l.style.zIndex="9999",l.style.width="100%",l.style.textAlign="left",document.body.appendChild(l),(f=document.getElementsByClassName("luma-compiler-log-error")[0])==null||f.scrollIntoView(),l.onclick=()=>{const d=`data:text/plain,${encodeURIComponent(this.source)}`;navigator.clipboard.writeText(d)}}};T(Uh,"defaultProps",{...rt.defaultProps,language:"auto",stage:void 0,source:"",sourceMap:null,entryPoint:"main",debugShaders:void 0});let ih=Uh;function eB(t){return TP(t.source)||t.id||Qh(`unnamed ${t.stage}-shader`)}function TP(t,e="unnamed"){const n=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/.exec(t);return n?n[1]:e}const sc=class sc extends rt{get[Symbol.toStringTag](){return"Sampler"}constructor(e,r){r=sc.normalizeProps(e,r),super(e,r,sc.defaultProps)}static normalizeProps(e,r){var s,o;const n=((o=(s=e==null?void 0:e.props)==null?void 0:s._resourceDefaults)==null?void 0:o.sampler)||{};return{...r,...n}}};T(sc,"defaultProps",{...rt.defaultProps,type:"color-sampler",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge",addressModeW:"clamp-to-edge",magFilter:"nearest",minFilter:"nearest",mipmapFilter:"none",lodMinClamp:0,lodMaxClamp:32,compare:"less-equal",maxAnisotropy:1});let sh=sc;const zh=class zh extends rt{constructor(r,n={}){super(r,n,zh.defaultProps);T(this,"width");T(this,"height");this.width=this.props.width,this.height=this.props.height}get[Symbol.toStringTag](){return"Framebuffer"}clone(r){const n=this.colorAttachments.map(s=>s.texture.clone(r)),i=this.depthStencilAttachment&&this.depthStencilAttachment.texture.clone(r);return this.device.createFramebuffer({...this.props,colorAttachments:n,depthStencilAttachment:i})}resize(r){let n=!r;if(r){const[i,s]=Array.isArray(r)?r:[r.width,r.height];n=n||s!==this.height||i!==this.width,this.width=i,this.height=s}n&&(fe.log(2,`Resizing framebuffer ${this.id} to ${this.width}x${this.height}`)(),this.resizeAttachments(this.width,this.height))}autoCreateAttachmentTextures(){if(this.props.colorAttachments.length===0&&!this.props.depthStencilAttachment)throw new Error("Framebuffer has noattachments");this.colorAttachments=this.props.colorAttachments.map((n,i)=>{if(typeof n=="string"){const s=this.createColorTexture(n,i);return this.attachResource(s),s.view}return n instanceof Pt?n.view:n});const r=this.props.depthStencilAttachment;if(r)if(typeof r=="string"){const n=this.createDepthStencilTexture(r);this.attachResource(n),this.depthStencilAttachment=n.view}else r instanceof Pt?this.depthStencilAttachment=r.view:this.depthStencilAttachment=r}createColorTexture(r,n){return this.device.createTexture({id:`${this.id}-color-attachment-${n}`,usage:Pt.RENDER_ATTACHMENT,format:r,width:this.width,height:this.height,sampler:{magFilter:"linear",minFilter:"linear"}})}createDepthStencilTexture(r){return this.device.createTexture({id:`${this.id}-depth-stencil-attachment`,usage:Pt.RENDER_ATTACHMENT,format:r,width:this.width,height:this.height,mipmaps:!1})}resizeAttachments(r,n){for(let i=0;i<this.colorAttachments.length;++i)if(this.colorAttachments[i]){const s=this.colorAttachments[i].texture.clone({width:r,height:n});this.destroyAttachedResource(this.colorAttachments[i]),this.colorAttachments[i]=s.view,this.attachResource(s.view)}if(this.depthStencilAttachment){const i=this.depthStencilAttachment.texture.clone({width:r,height:n});this.destroyAttachedResource(this.depthStencilAttachment),this.depthStencilAttachment=i.view,this.attachResource(i)}this.updateAttachments()}};T(zh,"defaultProps",{...rt.defaultProps,width:1,height:1,colorAttachments:[],depthStencilAttachment:null});let oh=zh;const $h=class $h extends rt{constructor(r,n){super(r,n,$h.defaultProps);T(this,"shaderLayout");T(this,"bufferLayout");T(this,"linkStatus","pending");T(this,"hash","");this.shaderLayout=this.props.shaderLayout,this.bufferLayout=this.props.bufferLayout||[]}get[Symbol.toStringTag](){return"RenderPipeline"}setUniformsWebGL(r){throw new Error("Use uniform blocks")}};T($h,"defaultProps",{...rt.defaultProps,vs:null,vertexEntryPoint:"vertexMain",vsConstants:{},fs:null,fragmentEntryPoint:"fragmentMain",fsConstants:{},shaderLayout:null,bufferLayout:[],topology:"triangle-list",parameters:{},bindings:{},uniforms:{}});let wa=$h;const dn=class dn extends rt{get[Symbol.toStringTag](){return"RenderPass"}constructor(e,r){r=dn.normalizeProps(e,r),super(e,r,dn.defaultProps)}static normalizeProps(e,r){var s;return{...(s=e.props._resourceDefaults)==null?void 0:s.renderPass,...r}}};T(dn,"defaultClearColor",[0,0,0,1]),T(dn,"defaultClearDepth",1),T(dn,"defaultClearStencil",0),T(dn,"defaultProps",{...rt.defaultProps,framebuffer:null,parameters:void 0,clearColor:dn.defaultClearColor,clearColors:void 0,clearDepth:dn.defaultClearDepth,clearStencil:dn.defaultClearStencil,depthReadOnly:!1,stencilReadOnly:!1,discard:!1,occlusionQuerySet:void 0,timestampQuerySet:void 0,beginTimestampIndex:void 0,endTimestampIndex:void 0});let ky=dn;const Vh=class Vh extends rt{constructor(r,n){super(r,n,Vh.defaultProps);T(this,"hash","");T(this,"shaderLayout");this.shaderLayout=n.shaderLayout}get[Symbol.toStringTag](){return"ComputePipeline"}};T(Vh,"defaultProps",{...rt.defaultProps,shader:void 0,entryPoint:void 0,constants:{},shaderLayout:void 0});let ah=Vh;const jh=class jh extends rt{get[Symbol.toStringTag](){return"CommandEncoder"}constructor(e,r){super(e,r,jh.defaultProps)}};T(jh,"defaultProps",{...rt.defaultProps,measureExecutionTime:void 0});let Ny=jh;const Hh=class Hh extends rt{get[Symbol.toStringTag](){return"CommandBuffer"}constructor(e,r){super(e,r,Hh.defaultProps)}};T(Hh,"defaultProps",{...rt.defaultProps});let Fy=Hh;function tB(t){const[e,r]=nB[t],n=e==="i32"||e==="u32",i=e!=="u32",s=iB[e]*r,o=rB(e,r);return{dataType:e,components:r,defaultVertexFormat:o,byteLength:s,integer:n,signed:i}}function rB(t,e){let r;switch(t){case"f32":r="float32";break;case"i32":r="sint32";break;case"u32":r="uint32";break;case"f16":return e<=2?"float16x2":"float16x4"}return e===1?r:`${r}x${e}`}const nB={f32:["f32",1],"vec2<f32>":["f32",2],"vec3<f32>":["f32",3],"vec4<f32>":["f32",4],f16:["f16",1],"vec2<f16>":["f16",2],"vec3<f16>":["f16",3],"vec4<f16>":["f16",4],i32:["i32",1],"vec2<i32>":["i32",2],"vec3<i32>":["i32",3],"vec4<i32>":["i32",4],u32:["u32",1],"vec2<u32>":["u32",2],"vec3<u32>":["u32",3],"vec4<u32>":["u32",4]},iB={f32:4,f16:2,i32:4,u32:4};function EP(t){let e;t.endsWith("-webgl")&&(t.replace("-webgl",""),e=!0);const[r,n]=t.split("x"),i=r,s=n?parseInt(n):1,o=bP(i),l={type:i,components:s,byteLength:o.byteLength*s,integer:o.integer,signed:o.signed,normalized:o.normalized};return e&&(l.webglOnly=!0),l}function AP(t,e){const r={};for(const n of t.attributes){const i=oB(t,e,n.name);i&&(r[n.name]=i)}return r}function sB(t,e,r=16){const n=AP(t,e),i=new Array(r).fill(null);for(const s of Object.values(n))i[s.location]=s;return i}function oB(t,e,r){const n=aB(t,r),i=lB(e,r);if(!n)return null;const s=tB(n.type),o=(i==null?void 0:i.vertexFormat)||s.defaultVertexFormat,l=EP(o);return{attributeName:(i==null?void 0:i.attributeName)||n.name,bufferName:(i==null?void 0:i.bufferName)||n.name,location:n.location,shaderType:n.type,shaderDataType:s.dataType,shaderComponents:s.components,vertexFormat:o,bufferDataType:l.type,bufferComponents:l.components,normalized:l.normalized,integer:s.integer,stepMode:(i==null?void 0:i.stepMode)||n.stepMode||"vertex",byteOffset:(i==null?void 0:i.byteOffset)||0,byteStride:(i==null?void 0:i.byteStride)||0}}function aB(t,e){const r=t.attributes.find(n=>n.name===e);return r||fe.warn(`shader layout attribute "${e}" not present in shader`),r||null}function lB(t,e){cB(t);let r=uB(t,e);return r||(r=fB(t,e),r)?r:(fe.warn(`layout for attribute "${e}" not present in buffer layout`),null)}function cB(t){for(const e of t)(e.attributes&&e.format||!e.attributes&&!e.format)&&fe.warn(`BufferLayout ${name} must have either 'attributes' or 'format' field`)}function uB(t,e){for(const r of t)if(r.format&&r.name===e)return{attributeName:r.name,bufferName:e,stepMode:r.stepMode,vertexFormat:r.format,byteOffset:0,byteStride:r.byteStride||0};return null}function fB(t,e){var r;for(const n of t){let i=n.byteStride;if(typeof n.byteStride!="number")for(const o of n.attributes||[]){const l=EP(o.format);i+=l.byteLength}const s=(r=n.attributes)==null?void 0:r.find(o=>o.attribute===e);if(s)return{attributeName:s.attribute,bufferName:n.name,stepMode:n.stepMode,vertexFormat:s.format,byteOffset:s.byteOffset,byteStride:i}}return null}const Wh=class Wh extends rt{constructor(r,n){super(r,n,Wh.defaultProps);T(this,"maxVertexAttributes");T(this,"attributeInfos");T(this,"indexBuffer",null);T(this,"attributes");this.maxVertexAttributes=r.limits.maxVertexAttributes,this.attributes=new Array(this.maxVertexAttributes).fill(null);const{shaderLayout:i,bufferLayout:s}=n.renderPipeline||{};if(!i||!s)throw new Error("VertexArray");this.attributeInfos=sB(i,s,this.maxVertexAttributes)}get[Symbol.toStringTag](){return"VertexArray"}setConstantWebGL(r,n){throw new Error("constant attributes not supported")}};T(Wh,"defaultProps",{...rt.defaultProps,renderPipeline:null});let Dy=Wh;const qh=class qh extends rt{get[Symbol.toStringTag](){return"TransformFeedback"}constructor(e,r){super(e,r,qh.defaultProps)}};T(qh,"defaultProps",{...rt.defaultProps,layout:void 0,buffers:{}});let By=qh;const Xh=class Xh extends rt{get[Symbol.toStringTag](){return"QuerySet"}constructor(e,r){super(e,r,Xh.defaultProps)}};T(Xh,"defaultProps",{...rt.defaultProps,type:void 0,count:void 0});let Ly=Xh;const hB={f32:{type:"f32",components:1},i32:{type:"i32",components:1},u32:{type:"u32",components:1},"vec2<f32>":{type:"f32",components:2},"vec3<f32>":{type:"f32",components:3},"vec4<f32>":{type:"f32",components:4},"vec2<i32>":{type:"i32",components:2},"vec3<i32>":{type:"i32",components:3},"vec4<i32>":{type:"i32",components:4},"vec2<u32>":{type:"u32",components:2},"vec3<u32>":{type:"u32",components:3},"vec4<u32>":{type:"u32",components:4},"mat2x2<f32>":{type:"f32",components:4},"mat2x3<f32>":{type:"f32",components:6},"mat2x4<f32>":{type:"f32",components:8},"mat3x2<f32>":{type:"f32",components:6},"mat3x3<f32>":{type:"f32",components:9},"mat3x4<f32>":{type:"f32",components:12},"mat4x2<f32>":{type:"f32",components:8},"mat4x3<f32>":{type:"f32",components:12},"mat4x4<f32>":{type:"f32",components:16}};function dB(t){return hB[t]}function pB(t,e){switch(e){case 1:return t;case 2:return t+t%2;default:return t+(4-t%4)%4}}let Zu;function CP(t){return(!Zu||Zu.byteLength<t)&&(Zu=new ArrayBuffer(t)),Zu}function gB(t,e){const r=CP(t.BYTES_PER_ELEMENT*e);return new t(r,0,e)}function mB(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function lh(t){return Array.isArray(t)?t.length===0||typeof t[0]=="number":mB(t)}const tT=1024;class _B{constructor(e){T(this,"layout",{});T(this,"byteLength");let r=0;for(const[i,s]of Object.entries(e)){const o=dB(s),{type:l,components:u}=o;r=pB(r,u);const f=r;r+=u,this.layout[i]={type:l,size:u,offset:f}}r+=(4-r%4)%4;const n=r*4;this.byteLength=Math.max(n,tT)}getData(e){const r=Math.max(this.byteLength,tT),n=CP(r),i={i32:new Int32Array(n),u32:new Uint32Array(n),f32:new Float32Array(n),f16:new Uint16Array(n)};for(const[s,o]of Object.entries(e)){const l=this.layout[s];if(!l){fe.warn(`Supplied uniform value ${s} not present in uniform block layout`)();continue}const{type:u,size:f,offset:d}=l,g=i[u];if(f===1){if(typeof o!="number"&&typeof o!="boolean"){fe.warn(`Supplied value for single component uniform ${s} is not a number: ${o}`)();continue}g[d]=Number(o)}else{if(!lh(o)){fe.warn(`Supplied value for multi component / array uniform ${s} is not a numeric array: ${o}`)();continue}g.set(o,d)}}return new Uint8Array(n)}has(e){return!!this.layout[e]}get(e){return this.layout[e]}}function yB(t,e,r=16){if(t!==e)return!1;const n=t,i=e;if(!lh(n))return!1;if(lh(i)&&n.length===i.length){for(let s=0;s<n.length;++s)if(i[s]!==n[s])return!1}return!0}function vB(t){return lh(t)?t.slice():t}class bB{constructor(e){T(this,"name");T(this,"uniforms",{});T(this,"modifiedUniforms",{});T(this,"modified",!0);T(this,"bindingLayout",{});T(this,"needsRedraw","initialized");var r;if(this.name=(e==null?void 0:e.name)||"unnamed",e!=null&&e.name&&(e!=null&&e.shaderLayout)){const n=(r=e==null?void 0:e.shaderLayout.bindings)==null?void 0:r.find(s=>s.type==="uniform"&&s.name===(e==null?void 0:e.name));if(!n)throw new Error(e==null?void 0:e.name);const i=n;for(const s of i.uniforms||[])this.bindingLayout[s.name]=s}}setUniforms(e){for(const[r,n]of Object.entries(e))this._setUniform(r,n),this.needsRedraw||this.setNeedsRedraw(`${this.name}.${r}=${n}`)}setNeedsRedraw(e){this.needsRedraw=this.needsRedraw||e}getAllUniforms(){return this.modifiedUniforms={},this.needsRedraw=!1,this.uniforms||{}}_setUniform(e,r){yB(this.uniforms[e],r)||(this.uniforms[e]=vB(r),this.modifiedUniforms[e]=!0,this.modified=!0)}}class wB{constructor(e){T(this,"uniformBlocks",new Map);T(this,"uniformBufferLayouts",new Map);T(this,"uniformBuffers",new Map);for(const[r,n]of Object.entries(e)){const i=r,s=new _B(n.uniformTypes||{});this.uniformBufferLayouts.set(i,s);const o=new bB({name:r});o.setUniforms(n.defaultUniforms||{}),this.uniformBlocks.set(i,o)}}destroy(){for(const e of this.uniformBuffers.values())e.destroy()}setUniforms(e){var r;for(const[n,i]of Object.entries(e))(r=this.uniformBlocks.get(n))==null||r.setUniforms(i);this.updateUniformBuffers()}getUniformBufferByteLength(e){var r;return((r=this.uniformBufferLayouts.get(e))==null?void 0:r.byteLength)||0}getUniformBufferData(e){var n,i;const r=((n=this.uniformBlocks.get(e))==null?void 0:n.getAllUniforms())||{};return(i=this.uniformBufferLayouts.get(e))==null?void 0:i.getData(r)}createUniformBuffer(e,r,n){n&&this.setUniforms(n);const i=this.getUniformBufferByteLength(r),s=e.createBuffer({usage:It.UNIFORM|It.COPY_DST,byteLength:i}),o=this.getUniformBufferData(r);return s.write(o),s}getManagedUniformBuffer(e,r){if(!this.uniformBuffers.get(r)){const n=this.getUniformBufferByteLength(r),i=e.createBuffer({usage:It.UNIFORM|It.COPY_DST,byteLength:n});this.uniformBuffers.set(r,i)}return this.uniformBuffers.get(r)}updateUniformBuffers(){let e=!1;for(const r of this.uniformBlocks.keys()){const n=this.updateUniformBuffer(r);e||(e=n)}return e&&fe.log(3,`UniformStore.updateUniformBuffers(): ${e}`)(),e}updateUniformBuffer(e){var s;const r=this.uniformBlocks.get(e);let n=this.uniformBuffers.get(e),i=!1;if(n&&(r!=null&&r.needsRedraw)){i||(i=r.needsRedraw);const o=this.getUniformBufferData(e);n=this.uniformBuffers.get(e),n==null||n.write(o);const l=(s=this.uniformBlocks.get(e))==null?void 0:s.getAllUniforms();fe.log(4,`Writing to uniform buffer ${String(e)}`,o,l)()}return i}}function RP(t){const e=ArrayBuffer.isView(t)?t.constructor:t;switch(e){case Float32Array:return"float32";case Uint16Array:return"uint16";case Uint32Array:return"uint32";case Uint8Array:case Uint8ClampedArray:return"uint8";case Int8Array:return"sint8";case Int16Array:return"sint16";case Int32Array:return"sint32";default:throw new Error(e.constructor.name)}}function PP(t){switch(t){case"float32":return Float32Array;case"uint32":return Uint32Array;case"sint32":return Int32Array;case"uint16":case"unorm16":return Uint16Array;case"sint16":case"snorm16":return Int16Array;case"uint8":case"unorm8":return Uint8Array;case"sint8":case"snorm8":return Int8Array;default:throw new Error(t)}}function SB(t,e,r){if(!e||e>4)throw new Error(`size ${e}`);const n=e;let i=RP(t);if(i==="uint8"&&r&&n===1)return"unorm8-webgl";if(i==="uint8"&&r&&n===3)return"unorm8x3-webgl";if(i==="uint8"||i==="sint8"){if(n===1||n===3)throw new Error(`size: ${e}`);return r&&(i=i.replace("int","norm")),`${i}x${n}`}if(i==="uint16"||i==="sint16"){if(n===1||n===3)throw new Error(`size: ${e}`);return r&&(i=i.replace("int","norm")),`${i}x${n}`}return n===1?i:`${i}x${n}`}class Ug{constructor(e){T(this,"bufferLayouts");this.bufferLayouts=e}getBufferLayout(e){return this.bufferLayouts.find(r=>r.name===e)||null}getAttributeNamesForBuffer(e){var r;return e.attributes?(r=e.attributes)==null?void 0:r.map(n=>n.attribute):[e.name]}mergeBufferLayouts(e,r){const n=[...e];for(const i of r){const s=n.findIndex(o=>o.name===i.name);s<0?n.push(i):n[s]=i}return n}}class xB{constructor(){this.constants=new Map,this.aliases=new Map,this.structs=new Map}}class si{constructor(){}get isAstNode(){return!0}get astNodeType(){return""}evaluate(e){throw new Error("Cannot evaluate node")}evaluateString(e){return this.evaluate(e).toString()}search(e){}searchBlock(e,r){if(e){r(ch.instance);for(const n of e)n instanceof Array?this.searchBlock(n,r):n.search(r);r(uh.instance)}}}class ch extends si{}ch.instance=new ch;class uh extends si{}uh.instance=new uh;class yt extends si{constructor(){super()}}let Uy=class extends yt{constructor(e,r,n,i,s,o){super(),this.calls=new Set,this.name=e,this.args=r,this.returnType=n,this.body=i,this.startLine=s,this.endLine=o}get astNodeType(){return"function"}search(e){this.searchBlock(this.body,e)}};class TB extends yt{constructor(e){super(),this.expression=e}get astNodeType(){return"staticAssert"}search(e){this.expression.search(e)}}class EB extends yt{constructor(e,r){super(),this.condition=e,this.body=r}get astNodeType(){return"while"}search(e){this.condition.search(e),this.searchBlock(this.body,e)}}class AB extends yt{constructor(e){super(),this.body=e}get astNodeType(){return"continuing"}search(e){this.searchBlock(this.body,e)}}class CB extends yt{constructor(e,r,n,i){super(),this.init=e,this.condition=r,this.increment=n,this.body=i}get astNodeType(){return"for"}search(e){var r,n,i;(r=this.init)===null||r===void 0||r.search(e),(n=this.condition)===null||n===void 0||n.search(e),(i=this.increment)===null||i===void 0||i.search(e),this.searchBlock(this.body,e)}}class bs extends yt{constructor(e,r,n,i,s){super(),this.name=e,this.type=r,this.storage=n,this.access=i,this.value=s}get astNodeType(){return"var"}search(e){var r;e(this),(r=this.value)===null||r===void 0||r.search(e)}}class MP extends yt{constructor(e,r,n){super(),this.name=e,this.type=r,this.value=n}get astNodeType(){return"override"}search(e){var r;(r=this.value)===null||r===void 0||r.search(e)}}class zy extends yt{constructor(e,r,n,i,s){super(),this.name=e,this.type=r,this.storage=n,this.access=i,this.value=s}get astNodeType(){return"let"}search(e){var r;e(this),(r=this.value)===null||r===void 0||r.search(e)}}class rT extends yt{constructor(e,r,n,i,s){super(),this.name=e,this.type=r,this.storage=n,this.access=i,this.value=s}get astNodeType(){return"const"}evaluate(e){return this.value.evaluate(e)}search(e){var r;e(this),(r=this.value)===null||r===void 0||r.search(e)}}var Sa;(function(t){t.increment="++",t.decrement="--"})(Sa||(Sa={}));(function(t){function e(r){const n=r;if(n=="parse")throw new Error("Invalid value for IncrementOperator");return t[n]}t.parse=e})(Sa||(Sa={}));class RB extends yt{constructor(e,r){super(),this.operator=e,this.variable=r}get astNodeType(){return"increment"}search(e){this.variable.search(e)}}var lc;(function(t){t.assign="=",t.addAssign="+=",t.subtractAssin="-=",t.multiplyAssign="*=",t.divideAssign="/=",t.moduloAssign="%=",t.andAssign="&=",t.orAssign="|=",t.xorAssign="^=",t.shiftLeftAssign="<<=",t.shiftRightAssign=">>="})(lc||(lc={}));(function(t){function e(r){const n=r;if(n=="parse")throw new Error("Invalid value for AssignOperator");return n}t.parse=e})(lc||(lc={}));class PB extends yt{constructor(e,r,n){super(),this.operator=e,this.variable=r,this.value=n}get astNodeType(){return"assign"}search(e){this.variable.search(e),this.value.search(e)}}class IP extends yt{constructor(e,r){super(),this.name=e,this.args=r}get astNodeType(){return"call"}search(e){for(const r of this.args)r.search(e);e(this)}}class MB extends yt{constructor(e,r){super(),this.body=e,this.continuing=r}get astNodeType(){return"loop"}}class IB extends yt{constructor(e,r){super(),this.condition=e,this.body=r}get astNodeType(){return"body"}}class OB extends yt{constructor(e,r,n,i){super(),this.condition=e,this.body=r,this.elseif=n,this.else=i}get astNodeType(){return"if"}search(e){this.condition.search(e),this.searchBlock(this.body,e),this.searchBlock(this.elseif,e),this.searchBlock(this.else,e)}}class kB extends yt{constructor(e){super(),this.value=e}get astNodeType(){return"return"}search(e){var r;(r=this.value)===null||r===void 0||r.search(e)}}class NB extends yt{constructor(e){super(),this.name=e}get astNodeType(){return"enable"}}class FB extends yt{constructor(e){super(),this.extensions=e}get astNodeType(){return"requires"}}class DB extends yt{constructor(e,r){super(),this.severity=e,this.rule=r}get astNodeType(){return"diagnostic"}}class OP extends yt{constructor(e,r){super(),this.name=e,this.type=r}get astNodeType(){return"alias"}}class BB extends yt{constructor(){super()}get astNodeType(){return"discard"}}class LB extends yt{constructor(){super()}get astNodeType(){return"break"}}class UB extends yt{constructor(){super()}get astNodeType(){return"continue"}}class js extends yt{constructor(e){super(),this.name=e}get astNodeType(){return"type"}get isStruct(){return!1}get isArray(){return!1}}class vs extends js{constructor(e,r,n,i){super(e),this.members=r,this.startLine=n,this.endLine=i}get astNodeType(){return"struct"}get isStruct(){return!0}getMemberIndex(e){for(let r=0;r<this.members.length;r++)if(this.members[r].name==e)return r;return-1}}class kP extends js{constructor(e,r,n){super(e),this.format=r,this.access=n}get astNodeType(){return"template"}}class zB extends js{constructor(e,r,n,i){super(e),this.storage=r,this.type=n,this.access=i}get astNodeType(){return"pointer"}}class NP extends js{constructor(e,r,n,i){super(e),this.attributes=r,this.format=n,this.count=i}get astNodeType(){return"array"}get isArray(){return!0}}class Bl extends js{constructor(e,r,n){super(e),this.format=r,this.access=n}get astNodeType(){return"sampler"}}class Un extends si{constructor(){super()}}class $B extends Un{constructor(e){super(),this.value=e}get astNodeType(){return"stringExpr"}toString(){return this.value}evaluateString(){return this.value}}class aa extends Un{constructor(e,r){super(),this.type=e,this.args=r}get astNodeType(){return"createExpr"}search(e){if(e(this),this.args)for(const r of this.args)r.search(e)}evaluate(e){return this.args[0].evaluate(e)}}class FP extends Un{constructor(e,r){super(),this.name=e,this.args=r}get astNodeType(){return"callExpr"}evaluate(e){switch(this.name){case"abs":return Math.abs(this.args[0].evaluate(e));case"acos":return Math.acos(this.args[0].evaluate(e));case"acosh":return Math.acosh(this.args[0].evaluate(e));case"asin":return Math.asin(this.args[0].evaluate(e));case"asinh":return Math.asinh(this.args[0].evaluate(e));case"atan":return Math.atan(this.args[0].evaluate(e));case"atan2":return Math.atan2(this.args[0].evaluate(e),this.args[1].evaluate(e));case"atanh":return Math.atanh(this.args[0].evaluate(e));case"ceil":return Math.ceil(this.args[0].evaluate(e));case"clamp":return Math.min(Math.max(this.args[0].evaluate(e),this.args[1].evaluate(e)),this.args[2].evaluate(e));case"cos":return Math.cos(this.args[0].evaluate(e));case"degrees":return this.args[0].evaluate(e)*180/Math.PI;case"distance":return Math.sqrt(Math.pow(this.args[0].evaluate(e)-this.args[1].evaluate(e),2));case"dot":case"exp":return Math.exp(this.args[0].evaluate(e));case"exp2":return Math.pow(2,this.args[0].evaluate(e));case"floor":return Math.floor(this.args[0].evaluate(e));case"fma":return this.args[0].evaluate(e)*this.args[1].evaluate(e)+this.args[2].evaluate(e);case"fract":return this.args[0].evaluate(e)-Math.floor(this.args[0].evaluate(e));case"inverseSqrt":return 1/Math.sqrt(this.args[0].evaluate(e));case"log":return Math.log(this.args[0].evaluate(e));case"log2":return Math.log2(this.args[0].evaluate(e));case"max":return Math.max(this.args[0].evaluate(e),this.args[1].evaluate(e));case"min":return Math.min(this.args[0].evaluate(e),this.args[1].evaluate(e));case"mix":return this.args[0].evaluate(e)*(1-this.args[2].evaluate(e))+this.args[1].evaluate(e)*this.args[2].evaluate(e);case"modf":return this.args[0].evaluate(e)-Math.floor(this.args[0].evaluate(e));case"pow":return Math.pow(this.args[0].evaluate(e),this.args[1].evaluate(e));case"radians":return this.args[0].evaluate(e)*Math.PI/180;case"round":return Math.round(this.args[0].evaluate(e));case"sign":return Math.sign(this.args[0].evaluate(e));case"sin":return Math.sin(this.args[0].evaluate(e));case"sinh":return Math.sinh(this.args[0].evaluate(e));case"saturate":return Math.min(Math.max(this.args[0].evaluate(e),0),1);case"smoothstep":return this.args[0].evaluate(e)*this.args[0].evaluate(e)*(3-2*this.args[0].evaluate(e));case"sqrt":return Math.sqrt(this.args[0].evaluate(e));case"step":return this.args[0].evaluate(e)<this.args[1].evaluate(e)?0:1;case"tan":return Math.tan(this.args[0].evaluate(e));case"tanh":return Math.tanh(this.args[0].evaluate(e));case"trunc":return Math.trunc(this.args[0].evaluate(e));default:throw new Error("Non const function: "+this.name)}}search(e){for(const r of this.args)r.search(e);e(this)}}class $y extends Un{constructor(e){super(),this.name=e}get astNodeType(){return"varExpr"}search(e){e(this),this.postfix&&this.postfix.search(e)}evaluate(e){const r=e.constants.get(this.name);if(!r)throw new Error("Cannot evaluate node");return r.evaluate(e)}}class nT extends Un{constructor(e,r){super(),this.name=e,this.initializer=r}get astNodeType(){return"constExpr"}evaluate(e){var r,n;if(this.initializer instanceof aa){const i=(r=this.postfix)===null||r===void 0?void 0:r.evaluateString(e),s=(n=this.initializer.type)===null||n===void 0?void 0:n.name,o=e.structs.get(s),l=o==null?void 0:o.getMemberIndex(i);return l!==void 0&&l!=-1?this.initializer.args[l].evaluate(e):this.initializer.evaluate(e)}return this.initializer.evaluate(e)}search(e){this.initializer.search(e)}}class iT extends Un{constructor(e){super(),this.value=e}get astNodeType(){return"literalExpr"}evaluate(){return this.value}}class VB extends Un{constructor(e,r){super(),this.type=e,this.value=r}get astNodeType(){return"bitcastExpr"}search(e){this.value.search(e)}}class sT extends Un{constructor(e){super(),this.contents=e}get astNodeType(){return"groupExpr"}evaluate(e){return this.contents[0].evaluate(e)}search(e){this.searchBlock(this.contents,e)}}class jB extends Un{constructor(e){super(),this.index=e}search(e){this.index.search(e)}}class DP extends Un{constructor(){super()}}class HB extends DP{constructor(e,r){super(),this.operator=e,this.right=r}get astNodeType(){return"unaryOp"}evaluate(e){switch(this.operator){case"+":return this.right.evaluate(e);case"-":return-this.right.evaluate(e);case"!":return this.right.evaluate(e)?0:1;case"~":return~this.right.evaluate(e);default:throw new Error("Unknown unary operator: "+this.operator)}}search(e){this.right.search(e)}}class Pn extends DP{constructor(e,r,n){super(),this.operator=e,this.left=r,this.right=n}get astNodeType(){return"binaryOp"}evaluate(e){switch(this.operator){case"+":return this.left.evaluate(e)+this.right.evaluate(e);case"-":return this.left.evaluate(e)-this.right.evaluate(e);case"*":return this.left.evaluate(e)*this.right.evaluate(e);case"/":return this.left.evaluate(e)/this.right.evaluate(e);case"%":return this.left.evaluate(e)%this.right.evaluate(e);case"==":return this.left.evaluate(e)==this.right.evaluate(e)?1:0;case"!=":return this.left.evaluate(e)!=this.right.evaluate(e)?1:0;case"<":return this.left.evaluate(e)<this.right.evaluate(e)?1:0;case">":return this.left.evaluate(e)>this.right.evaluate(e)?1:0;case"<=":return this.left.evaluate(e)<=this.right.evaluate(e)?1:0;case">=":return this.left.evaluate(e)>=this.right.evaluate(e)?1:0;case"&&":return this.left.evaluate(e)&&this.right.evaluate(e)?1:0;case"||":return this.left.evaluate(e)||this.right.evaluate(e)?1:0;default:throw new Error(`Unknown operator ${this.operator}`)}}search(e){this.left.search(e),this.right.search(e)}}class BP extends si{constructor(){super()}}class WB extends BP{constructor(e,r){super(),this.selector=e,this.body=r}get astNodeType(){return"case"}search(e){this.searchBlock(this.body,e)}}class qB extends BP{constructor(e){super(),this.body=e}get astNodeType(){return"default"}search(e){this.searchBlock(this.body,e)}}class XB extends si{constructor(e,r,n){super(),this.name=e,this.type=r,this.attributes=n}get astNodeType(){return"argument"}}class KB extends si{constructor(e,r){super(),this.condition=e,this.body=r}get astNodeType(){return"elseif"}search(e){this.condition.search(e),this.searchBlock(this.body,e)}}class YB extends si{constructor(e,r,n){super(),this.name=e,this.type=r,this.attributes=n}get astNodeType(){return"member"}}let ZB=class extends si{constructor(e,r){super(),this.name=e,this.value=r}get astNodeType(){return"attribute"}};var Y,H;(function(t){t[t.token=0]="token",t[t.keyword=1]="keyword",t[t.reserved=2]="reserved"})(H||(H={}));class W{constructor(e,r,n){this.name=e,this.type=r,this.rule=n}toString(){return this.name}}class I{}Y=I;I.none=new W("",H.reserved,"");I.eof=new W("EOF",H.token,"");I.reserved={asm:new W("asm",H.reserved,"asm"),bf16:new W("bf16",H.reserved,"bf16"),do:new W("do",H.reserved,"do"),enum:new W("enum",H.reserved,"enum"),f16:new W("f16",H.reserved,"f16"),f64:new W("f64",H.reserved,"f64"),handle:new W("handle",H.reserved,"handle"),i8:new W("i8",H.reserved,"i8"),i16:new W("i16",H.reserved,"i16"),i64:new W("i64",H.reserved,"i64"),mat:new W("mat",H.reserved,"mat"),premerge:new W("premerge",H.reserved,"premerge"),regardless:new W("regardless",H.reserved,"regardless"),typedef:new W("typedef",H.reserved,"typedef"),u8:new W("u8",H.reserved,"u8"),u16:new W("u16",H.reserved,"u16"),u64:new W("u64",H.reserved,"u64"),unless:new W("unless",H.reserved,"unless"),using:new W("using",H.reserved,"using"),vec:new W("vec",H.reserved,"vec"),void:new W("void",H.reserved,"void")};I.keywords={array:new W("array",H.keyword,"array"),atomic:new W("atomic",H.keyword,"atomic"),bool:new W("bool",H.keyword,"bool"),f32:new W("f32",H.keyword,"f32"),i32:new W("i32",H.keyword,"i32"),mat2x2:new W("mat2x2",H.keyword,"mat2x2"),mat2x3:new W("mat2x3",H.keyword,"mat2x3"),mat2x4:new W("mat2x4",H.keyword,"mat2x4"),mat3x2:new W("mat3x2",H.keyword,"mat3x2"),mat3x3:new W("mat3x3",H.keyword,"mat3x3"),mat3x4:new W("mat3x4",H.keyword,"mat3x4"),mat4x2:new W("mat4x2",H.keyword,"mat4x2"),mat4x3:new W("mat4x3",H.keyword,"mat4x3"),mat4x4:new W("mat4x4",H.keyword,"mat4x4"),ptr:new W("ptr",H.keyword,"ptr"),sampler:new W("sampler",H.keyword,"sampler"),sampler_comparison:new W("sampler_comparison",H.keyword,"sampler_comparison"),struct:new W("struct",H.keyword,"struct"),texture_1d:new W("texture_1d",H.keyword,"texture_1d"),texture_2d:new W("texture_2d",H.keyword,"texture_2d"),texture_2d_array:new W("texture_2d_array",H.keyword,"texture_2d_array"),texture_3d:new W("texture_3d",H.keyword,"texture_3d"),texture_cube:new W("texture_cube",H.keyword,"texture_cube"),texture_cube_array:new W("texture_cube_array",H.keyword,"texture_cube_array"),texture_multisampled_2d:new W("texture_multisampled_2d",H.keyword,"texture_multisampled_2d"),texture_storage_1d:new W("texture_storage_1d",H.keyword,"texture_storage_1d"),texture_storage_2d:new W("texture_storage_2d",H.keyword,"texture_storage_2d"),texture_storage_2d_array:new W("texture_storage_2d_array",H.keyword,"texture_storage_2d_array"),texture_storage_3d:new W("texture_storage_3d",H.keyword,"texture_storage_3d"),texture_depth_2d:new W("texture_depth_2d",H.keyword,"texture_depth_2d"),texture_depth_2d_array:new W("texture_depth_2d_array",H.keyword,"texture_depth_2d_array"),texture_depth_cube:new W("texture_depth_cube",H.keyword,"texture_depth_cube"),texture_depth_cube_array:new W("texture_depth_cube_array",H.keyword,"texture_depth_cube_array"),texture_depth_multisampled_2d:new W("texture_depth_multisampled_2d",H.keyword,"texture_depth_multisampled_2d"),texture_external:new W("texture_external",H.keyword,"texture_external"),u32:new W("u32",H.keyword,"u32"),vec2:new W("vec2",H.keyword,"vec2"),vec3:new W("vec3",H.keyword,"vec3"),vec4:new W("vec4",H.keyword,"vec4"),bitcast:new W("bitcast",H.keyword,"bitcast"),block:new W("block",H.keyword,"block"),break:new W("break",H.keyword,"break"),case:new W("case",H.keyword,"case"),continue:new W("continue",H.keyword,"continue"),continuing:new W("continuing",H.keyword,"continuing"),default:new W("default",H.keyword,"default"),diagnostic:new W("diagnostic",H.keyword,"diagnostic"),discard:new W("discard",H.keyword,"discard"),else:new W("else",H.keyword,"else"),enable:new W("enable",H.keyword,"enable"),fallthrough:new W("fallthrough",H.keyword,"fallthrough"),false:new W("false",H.keyword,"false"),fn:new W("fn",H.keyword,"fn"),for:new W("for",H.keyword,"for"),function:new W("function",H.keyword,"function"),if:new W("if",H.keyword,"if"),let:new W("let",H.keyword,"let"),const:new W("const",H.keyword,"const"),loop:new W("loop",H.keyword,"loop"),while:new W("while",H.keyword,"while"),private:new W("private",H.keyword,"private"),read:new W("read",H.keyword,"read"),read_write:new W("read_write",H.keyword,"read_write"),return:new W("return",H.keyword,"return"),requires:new W("requires",H.keyword,"requires"),storage:new W("storage",H.keyword,"storage"),switch:new W("switch",H.keyword,"switch"),true:new W("true",H.keyword,"true"),alias:new W("alias",H.keyword,"alias"),type:new W("type",H.keyword,"type"),uniform:new W("uniform",H.keyword,"uniform"),var:new W("var",H.keyword,"var"),override:new W("override",H.keyword,"override"),workgroup:new W("workgroup",H.keyword,"workgroup"),write:new W("write",H.keyword,"write"),r8unorm:new W("r8unorm",H.keyword,"r8unorm"),r8snorm:new W("r8snorm",H.keyword,"r8snorm"),r8uint:new W("r8uint",H.keyword,"r8uint"),r8sint:new W("r8sint",H.keyword,"r8sint"),r16uint:new W("r16uint",H.keyword,"r16uint"),r16sint:new W("r16sint",H.keyword,"r16sint"),r16float:new W("r16float",H.keyword,"r16float"),rg8unorm:new W("rg8unorm",H.keyword,"rg8unorm"),rg8snorm:new W("rg8snorm",H.keyword,"rg8snorm"),rg8uint:new W("rg8uint",H.keyword,"rg8uint"),rg8sint:new W("rg8sint",H.keyword,"rg8sint"),r32uint:new W("r32uint",H.keyword,"r32uint"),r32sint:new W("r32sint",H.keyword,"r32sint"),r32float:new W("r32float",H.keyword,"r32float"),rg16uint:new W("rg16uint",H.keyword,"rg16uint"),rg16sint:new W("rg16sint",H.keyword,"rg16sint"),rg16float:new W("rg16float",H.keyword,"rg16float"),rgba8unorm:new W("rgba8unorm",H.keyword,"rgba8unorm"),rgba8unorm_srgb:new W("rgba8unorm_srgb",H.keyword,"rgba8unorm_srgb"),rgba8snorm:new W("rgba8snorm",H.keyword,"rgba8snorm"),rgba8uint:new W("rgba8uint",H.keyword,"rgba8uint"),rgba8sint:new W("rgba8sint",H.keyword,"rgba8sint"),bgra8unorm:new W("bgra8unorm",H.keyword,"bgra8unorm"),bgra8unorm_srgb:new W("bgra8unorm_srgb",H.keyword,"bgra8unorm_srgb"),rgb10a2unorm:new W("rgb10a2unorm",H.keyword,"rgb10a2unorm"),rg11b10float:new W("rg11b10float",H.keyword,"rg11b10float"),rg32uint:new W("rg32uint",H.keyword,"rg32uint"),rg32sint:new W("rg32sint",H.keyword,"rg32sint"),rg32float:new W("rg32float",H.keyword,"rg32float"),rgba16uint:new W("rgba16uint",H.keyword,"rgba16uint"),rgba16sint:new W("rgba16sint",H.keyword,"rgba16sint"),rgba16float:new W("rgba16float",H.keyword,"rgba16float"),rgba32uint:new W("rgba32uint",H.keyword,"rgba32uint"),rgba32sint:new W("rgba32sint",H.keyword,"rgba32sint"),rgba32float:new W("rgba32float",H.keyword,"rgba32float"),static_assert:new W("static_assert",H.keyword,"static_assert")};I.tokens={decimal_float_literal:new W("decimal_float_literal",H.token,/((-?[0-9]*\.[0-9]+|-?[0-9]+\.[0-9]*)((e|E)(\+|-)?[0-9]+)?f?)|(-?[0-9]+(e|E)(\+|-)?[0-9]+f?)|([0-9]+f)/),hex_float_literal:new W("hex_float_literal",H.token,/-?0x((([0-9a-fA-F]*\.[0-9a-fA-F]+|[0-9a-fA-F]+\.[0-9a-fA-F]*)((p|P)(\+|-)?[0-9]+f?)?)|([0-9a-fA-F]+(p|P)(\+|-)?[0-9]+f?))/),int_literal:new W("int_literal",H.token,/-?0x[0-9a-fA-F]+|0i?|-?[1-9][0-9]*i?/),uint_literal:new W("uint_literal",H.token,/0x[0-9a-fA-F]+u|0u|[1-9][0-9]*u/),ident:new W("ident",H.token,/[_a-zA-Z][0-9a-zA-Z_]*/),and:new W("and",H.token,"&"),and_and:new W("and_and",H.token,"&&"),arrow:new W("arrow ",H.token,"->"),attr:new W("attr",H.token,"@"),forward_slash:new W("forward_slash",H.token,"/"),bang:new W("bang",H.token,"!"),bracket_left:new W("bracket_left",H.token,"["),bracket_right:new W("bracket_right",H.token,"]"),brace_left:new W("brace_left",H.token,"{"),brace_right:new W("brace_right",H.token,"}"),colon:new W("colon",H.token,":"),comma:new W("comma",H.token,","),equal:new W("equal",H.token,"="),equal_equal:new W("equal_equal",H.token,"=="),not_equal:new W("not_equal",H.token,"!="),greater_than:new W("greater_than",H.token,">"),greater_than_equal:new W("greater_than_equal",H.token,">="),shift_right:new W("shift_right",H.token,">>"),less_than:new W("less_than",H.token,"<"),less_than_equal:new W("less_than_equal",H.token,"<="),shift_left:new W("shift_left",H.token,"<<"),modulo:new W("modulo",H.token,"%"),minus:new W("minus",H.token,"-"),minus_minus:new W("minus_minus",H.token,"--"),period:new W("period",H.token,"."),plus:new W("plus",H.token,"+"),plus_plus:new W("plus_plus",H.token,"++"),or:new W("or",H.token,"|"),or_or:new W("or_or",H.token,"||"),paren_left:new W("paren_left",H.token,"("),paren_right:new W("paren_right",H.token,")"),semicolon:new W("semicolon",H.token,";"),star:new W("star",H.token,"*"),tilde:new W("tilde",H.token,"~"),underscore:new W("underscore",H.token,"_"),xor:new W("xor",H.token,"^"),plus_equal:new W("plus_equal",H.token,"+="),minus_equal:new W("minus_equal",H.token,"-="),times_equal:new W("times_equal",H.token,"*="),division_equal:new W("division_equal",H.token,"/="),modulo_equal:new W("modulo_equal",H.token,"%="),and_equal:new W("and_equal",H.token,"&="),or_equal:new W("or_equal",H.token,"|="),xor_equal:new W("xor_equal",H.token,"^="),shift_right_equal:new W("shift_right_equal",H.token,">>="),shift_left_equal:new W("shift_left_equal",H.token,"<<=")};I.simpleTokens={"@":Y.tokens.attr,"{":Y.tokens.brace_left,"}":Y.tokens.brace_right,":":Y.tokens.colon,",":Y.tokens.comma,"(":Y.tokens.paren_left,")":Y.tokens.paren_right,";":Y.tokens.semicolon};I.literalTokens={"&":Y.tokens.and,"&&":Y.tokens.and_and,"->":Y.tokens.arrow,"/":Y.tokens.forward_slash,"!":Y.tokens.bang,"[":Y.tokens.bracket_left,"]":Y.tokens.bracket_right,"=":Y.tokens.equal,"==":Y.tokens.equal_equal,"!=":Y.tokens.not_equal,">":Y.tokens.greater_than,">=":Y.tokens.greater_than_equal,">>":Y.tokens.shift_right,"<":Y.tokens.less_than,"<=":Y.tokens.less_than_equal,"<<":Y.tokens.shift_left,"%":Y.tokens.modulo,"-":Y.tokens.minus,"--":Y.tokens.minus_minus,".":Y.tokens.period,"+":Y.tokens.plus,"++":Y.tokens.plus_plus,"|":Y.tokens.or,"||":Y.tokens.or_or,"*":Y.tokens.star,"~":Y.tokens.tilde,_:Y.tokens.underscore,"^":Y.tokens.xor,"+=":Y.tokens.plus_equal,"-=":Y.tokens.minus_equal,"*=":Y.tokens.times_equal,"/=":Y.tokens.division_equal,"%=":Y.tokens.modulo_equal,"&=":Y.tokens.and_equal,"|=":Y.tokens.or_equal,"^=":Y.tokens.xor_equal,">>=":Y.tokens.shift_right_equal,"<<=":Y.tokens.shift_left_equal};I.regexTokens={decimal_float_literal:Y.tokens.decimal_float_literal,hex_float_literal:Y.tokens.hex_float_literal,int_literal:Y.tokens.int_literal,uint_literal:Y.tokens.uint_literal,ident:Y.tokens.ident};I.storage_class=[Y.keywords.function,Y.keywords.private,Y.keywords.workgroup,Y.keywords.uniform,Y.keywords.storage];I.access_mode=[Y.keywords.read,Y.keywords.write,Y.keywords.read_write];I.sampler_type=[Y.keywords.sampler,Y.keywords.sampler_comparison];I.sampled_texture_type=[Y.keywords.texture_1d,Y.keywords.texture_2d,Y.keywords.texture_2d_array,Y.keywords.texture_3d,Y.keywords.texture_cube,Y.keywords.texture_cube_array];I.multisampled_texture_type=[Y.keywords.texture_multisampled_2d];I.storage_texture_type=[Y.keywords.texture_storage_1d,Y.keywords.texture_storage_2d,Y.keywords.texture_storage_2d_array,Y.keywords.texture_storage_3d];I.depth_texture_type=[Y.keywords.texture_depth_2d,Y.keywords.texture_depth_2d_array,Y.keywords.texture_depth_cube,Y.keywords.texture_depth_cube_array,Y.keywords.texture_depth_multisampled_2d];I.texture_external_type=[Y.keywords.texture_external];I.any_texture_type=[...Y.sampled_texture_type,...Y.multisampled_texture_type,...Y.storage_texture_type,...Y.depth_texture_type,...Y.texture_external_type];I.texel_format=[Y.keywords.r8unorm,Y.keywords.r8snorm,Y.keywords.r8uint,Y.keywords.r8sint,Y.keywords.r16uint,Y.keywords.r16sint,Y.keywords.r16float,Y.keywords.rg8unorm,Y.keywords.rg8snorm,Y.keywords.rg8uint,Y.keywords.rg8sint,Y.keywords.r32uint,Y.keywords.r32sint,Y.keywords.r32float,Y.keywords.rg16uint,Y.keywords.rg16sint,Y.keywords.rg16float,Y.keywords.rgba8unorm,Y.keywords.rgba8unorm_srgb,Y.keywords.rgba8snorm,Y.keywords.rgba8uint,Y.keywords.rgba8sint,Y.keywords.bgra8unorm,Y.keywords.bgra8unorm_srgb,Y.keywords.rgb10a2unorm,Y.keywords.rg11b10float,Y.keywords.rg32uint,Y.keywords.rg32sint,Y.keywords.rg32float,Y.keywords.rgba16uint,Y.keywords.rgba16sint,Y.keywords.rgba16float,Y.keywords.rgba32uint,Y.keywords.rgba32sint,Y.keywords.rgba32float];I.const_literal=[Y.tokens.int_literal,Y.tokens.uint_literal,Y.tokens.decimal_float_literal,Y.tokens.hex_float_literal,Y.keywords.true,Y.keywords.false];I.literal_or_ident=[Y.tokens.ident,Y.tokens.int_literal,Y.tokens.uint_literal,Y.tokens.decimal_float_literal,Y.tokens.hex_float_literal];I.element_count_expression=[Y.tokens.int_literal,Y.tokens.uint_literal,Y.tokens.ident];I.template_types=[Y.keywords.vec2,Y.keywords.vec3,Y.keywords.vec4,Y.keywords.mat2x2,Y.keywords.mat2x3,Y.keywords.mat2x4,Y.keywords.mat3x2,Y.keywords.mat3x3,Y.keywords.mat3x4,Y.keywords.mat4x2,Y.keywords.mat4x3,Y.keywords.mat4x4,Y.keywords.atomic,Y.keywords.bitcast,...Y.any_texture_type];I.attribute_name=[Y.tokens.ident,Y.keywords.block,Y.keywords.diagnostic];I.assignment_operators=[Y.tokens.equal,Y.tokens.plus_equal,Y.tokens.minus_equal,Y.tokens.times_equal,Y.tokens.division_equal,Y.tokens.modulo_equal,Y.tokens.and_equal,Y.tokens.or_equal,Y.tokens.xor_equal,Y.tokens.shift_right_equal,Y.tokens.shift_left_equal];I.increment_operators=[Y.tokens.plus_plus,Y.tokens.minus_minus];class oT{constructor(e,r,n){this.type=e,this.lexeme=r,this.line=n}toString(){return this.lexeme}isTemplateType(){return I.template_types.indexOf(this.type)!=-1}isArrayType(){return this.type==I.keywords.array}isArrayOrTemplateType(){return this.isArrayType()||this.isTemplateType()}}class GB{constructor(e){this._tokens=[],this._start=0,this._current=0,this._line=1,this._source=e??""}scanTokens(){for(;!this._isAtEnd();)if(this._start=this._current,!this.scanToken())throw`Invalid syntax at line ${this._line}`;return this._tokens.push(new oT(I.eof,"",this._line)),this._tokens}scanToken(){let e=this._advance();if(e==`
`)return this._line++,!0;if(this._isWhitespace(e))return!0;if(e=="/"){if(this._peekAhead()=="/"){for(;e!=`
`;){if(this._isAtEnd())return!0;e=this._advance()}return this._line++,!0}else if(this._peekAhead()=="*"){this._advance();let o=1;for(;o>0;){if(this._isAtEnd())return!0;if(e=this._advance(),e==`
`)this._line++;else if(e=="*"){if(this._peekAhead()=="/"&&(this._advance(),o--,o==0))return!0}else e=="/"&&this._peekAhead()=="*"&&(this._advance(),o++)}return!0}}const r=I.simpleTokens[e];if(r)return this._addToken(r),!0;let n=I.none;const i=this._isAlpha(e),s=e==="_";if(this._isAlphaNumeric(e)){let o=this._peekAhead();for(;this._isAlphaNumeric(o);)e+=this._advance(),o=this._peekAhead()}if(i){const o=I.keywords[e];if(o)return this._addToken(o),!0}if(i||s)return this._addToken(I.tokens.ident),!0;for(;;){let o=this._findType(e);const l=this._peekAhead();if(e=="-"&&this._tokens.length>0){if(l=="=")return this._current++,e+=l,this._addToken(I.tokens.minus_equal),!0;if(l=="-")return this._current++,e+=l,this._addToken(I.tokens.minus_minus),!0;const u=this._tokens.length-1;if((I.literal_or_ident.indexOf(this._tokens[u].type)!=-1||this._tokens[u].type==I.tokens.paren_right)&&l!=">")return this._addToken(o),!0}if(e==">"&&(l==">"||l=="=")){let u=!1,f=this._tokens.length-1;for(let d=0;d<5&&f>=0&&I.assignment_operators.indexOf(this._tokens[f].type)===-1;++d,--f)if(this._tokens[f].type===I.tokens.less_than){f>0&&this._tokens[f-1].isArrayOrTemplateType()&&(u=!0);break}if(u)return this._addToken(o),!0}if(o===I.none){let u=e,f=0;const d=2;for(let g=0;g<d;++g)if(u+=this._peekAhead(g),o=this._findType(u),o!==I.none){f=g;break}if(o===I.none)return n===I.none?!1:(this._current--,this._addToken(n),!0);e=u,this._current+=f+1}if(n=o,this._isAtEnd())break;e+=this._advance()}return n===I.none?!1:(this._addToken(n),!0)}_findType(e){for(const n in I.regexTokens){const i=I.regexTokens[n];if(this._match(e,i.rule))return i}const r=I.literalTokens[e];return r||I.none}_match(e,r){const n=r.exec(e);return n&&n.index==0&&n[0]==e}_isAtEnd(){return this._current>=this._source.length}_isAlpha(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"}_isAlphaNumeric(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||e=="_"||e>="0"&&e<="9"}_isWhitespace(e){return e==" "||e=="	"||e=="\r"}_advance(e=0){let r=this._source[this._current];return e=e||0,e++,this._current+=e,r}_peekAhead(e=0){return e=e||0,this._current+e>=this._source.length?"\0":this._source[this._current+e]}_addToken(e){const r=this._source.substring(this._start,this._current);this._tokens.push(new oT(e,r,this._line))}}class QB{constructor(){this._tokens=[],this._current=0,this._currentLine=0,this._context=new xB,this._deferArrayCountEval=[]}parse(e){this._initialize(e),this._deferArrayCountEval.length=0;const r=[];for(;!this._isAtEnd();){const n=this._global_decl_or_directive();if(!n)break;r.push(n)}if(this._deferArrayCountEval.length>0){for(const n of this._deferArrayCountEval){const i=n.arrayType,s=n.countNode;if(s instanceof $y){const l=s.name,u=this._context.constants.get(l);if(u)try{const f=u.evaluate(this._context);i.count=f}catch{}}}this._deferArrayCountEval.length=0}return r}_initialize(e){if(e)if(typeof e=="string"){const r=new GB(e);this._tokens=r.scanTokens()}else this._tokens=e;else this._tokens=[];this._current=0}_error(e,r){return{token:e,message:r,toString:function(){return`${r}`}}}_isAtEnd(){return this._current>=this._tokens.length||this._peek().type==I.eof}_match(e){if(e instanceof W)return this._check(e)?(this._advance(),!0):!1;for(let r=0,n=e.length;r<n;++r){const i=e[r];if(this._check(i))return this._advance(),!0}return!1}_consume(e,r){if(this._check(e))return this._advance();throw this._error(this._peek(),r)}_check(e){if(this._isAtEnd())return!1;const r=this._peek();if(e instanceof Array){const n=r.type;return e.indexOf(n)!=-1}return r.type==e}_advance(){var e,r;return this._currentLine=(r=(e=this._peek())===null||e===void 0?void 0:e.line)!==null&&r!==void 0?r:-1,this._isAtEnd()||this._current++,this._previous()}_peek(){return this._tokens[this._current]}_previous(){return this._tokens[this._current-1]}_global_decl_or_directive(){for(;this._match(I.tokens.semicolon)&&!this._isAtEnd(););if(this._match(I.keywords.alias)){const r=this._type_alias();return this._consume(I.tokens.semicolon,"Expected ';'"),r}if(this._match(I.keywords.diagnostic)){const r=this._diagnostic();return this._consume(I.tokens.semicolon,"Expected ';'"),r}if(this._match(I.keywords.requires)){const r=this._requires_directive();return this._consume(I.tokens.semicolon,"Expected ';'"),r}if(this._match(I.keywords.enable)){const r=this._enable_directive();return this._consume(I.tokens.semicolon,"Expected ';'"),r}const e=this._attribute();if(this._check(I.keywords.var)){const r=this._global_variable_decl();return r!=null&&(r.attributes=e),this._consume(I.tokens.semicolon,"Expected ';'."),r}if(this._check(I.keywords.override)){const r=this._override_variable_decl();return r!=null&&(r.attributes=e),this._consume(I.tokens.semicolon,"Expected ';'."),r}if(this._check(I.keywords.let)){const r=this._global_let_decl();return r!=null&&(r.attributes=e),this._consume(I.tokens.semicolon,"Expected ';'."),r}if(this._check(I.keywords.const)){const r=this._global_const_decl();return r!=null&&(r.attributes=e),this._consume(I.tokens.semicolon,"Expected ';'."),r}if(this._check(I.keywords.struct)){const r=this._struct_decl();return r!=null&&(r.attributes=e),r}if(this._check(I.keywords.fn)){const r=this._function_decl();return r!=null&&(r.attributes=e),r}return null}_function_decl(){if(!this._match(I.keywords.fn))return null;const e=this._currentLine,r=this._consume(I.tokens.ident,"Expected function name.").toString();this._consume(I.tokens.paren_left,"Expected '(' for function arguments.");const n=[];if(!this._check(I.tokens.paren_right))do{if(this._check(I.tokens.paren_right))break;const l=this._attribute(),u=this._consume(I.tokens.ident,"Expected argument name.").toString();this._consume(I.tokens.colon,"Expected ':' for argument type.");const f=this._attribute(),d=this._type_decl();d!=null&&(d.attributes=f,n.push(new XB(u,d,l)))}while(this._match(I.tokens.comma));this._consume(I.tokens.paren_right,"Expected ')' after function arguments.");let i=null;if(this._match(I.tokens.arrow)){const l=this._attribute();i=this._type_decl(),i!=null&&(i.attributes=l)}const s=this._compound_statement(),o=this._currentLine;return new Uy(r,n,i,s,e,o)}_compound_statement(){const e=[];for(this._consume(I.tokens.brace_left,"Expected '{' for block.");!this._check(I.tokens.brace_right);){const r=this._statement();r!==null&&e.push(r)}return this._consume(I.tokens.brace_right,"Expected '}' for block."),e}_statement(){for(;this._match(I.tokens.semicolon)&&!this._isAtEnd(););if(this._check(I.tokens.attr)&&this._attribute(),this._check(I.keywords.if))return this._if_statement();if(this._check(I.keywords.switch))return this._switch_statement();if(this._check(I.keywords.loop))return this._loop_statement();if(this._check(I.keywords.for))return this._for_statement();if(this._check(I.keywords.while))return this._while_statement();if(this._check(I.keywords.continuing))return this._continuing_statement();if(this._check(I.keywords.static_assert))return this._static_assert_statement();if(this._check(I.tokens.brace_left))return this._compound_statement();let e=null;return this._check(I.keywords.return)?e=this._return_statement():this._check([I.keywords.var,I.keywords.let,I.keywords.const])?e=this._variable_statement():this._match(I.keywords.discard)?e=new BB:this._match(I.keywords.break)?e=new LB:this._match(I.keywords.continue)?e=new UB:e=this._increment_decrement_statement()||this._func_call_statement()||this._assignment_statement(),e!=null&&this._consume(I.tokens.semicolon,"Expected ';' after statement."),e}_static_assert_statement(){if(!this._match(I.keywords.static_assert))return null;const e=this._optional_paren_expression();return new TB(e)}_while_statement(){if(!this._match(I.keywords.while))return null;const e=this._optional_paren_expression();this._check(I.tokens.attr)&&this._attribute();const r=this._compound_statement();return new EB(e,r)}_continuing_statement(){if(!this._match(I.keywords.continuing))return null;const e=this._compound_statement();return new AB(e)}_for_statement(){if(!this._match(I.keywords.for))return null;this._consume(I.tokens.paren_left,"Expected '('.");const e=this._check(I.tokens.semicolon)?null:this._for_init();this._consume(I.tokens.semicolon,"Expected ';'.");const r=this._check(I.tokens.semicolon)?null:this._short_circuit_or_expression();this._consume(I.tokens.semicolon,"Expected ';'.");const n=this._check(I.tokens.paren_right)?null:this._for_increment();this._consume(I.tokens.paren_right,"Expected ')'."),this._check(I.tokens.attr)&&this._attribute();const i=this._compound_statement();return new CB(e,r,n,i)}_for_init(){return this._variable_statement()||this._func_call_statement()||this._assignment_statement()}_for_increment(){return this._func_call_statement()||this._increment_decrement_statement()||this._assignment_statement()}_variable_statement(){if(this._check(I.keywords.var)){const e=this._variable_decl();if(e===null)throw this._error(this._peek(),"Variable declaration expected.");let r=null;return this._match(I.tokens.equal)&&(r=this._short_circuit_or_expression()),new bs(e.name,e.type,e.storage,e.access,r)}if(this._match(I.keywords.let)){const e=this._consume(I.tokens.ident,"Expected name for let.").toString();let r=null;if(this._match(I.tokens.colon)){const i=this._attribute();r=this._type_decl(),r!=null&&(r.attributes=i)}this._consume(I.tokens.equal,"Expected '=' for let.");const n=this._short_circuit_or_expression();return new zy(e,r,null,null,n)}if(this._match(I.keywords.const)){const e=this._consume(I.tokens.ident,"Expected name for const.").toString();let r=null;if(this._match(I.tokens.colon)){const i=this._attribute();r=this._type_decl(),r!=null&&(r.attributes=i)}this._consume(I.tokens.equal,"Expected '=' for const.");const n=this._short_circuit_or_expression();return new rT(e,r,null,null,n)}return null}_increment_decrement_statement(){const e=this._current,r=this._unary_expression();if(r==null)return null;if(!this._check(I.increment_operators))return this._current=e,null;const n=this._consume(I.increment_operators,"Expected increment operator");return new RB(n.type===I.tokens.plus_plus?Sa.increment:Sa.decrement,r)}_assignment_statement(){let e=null;if(this._check(I.tokens.brace_right))return null;let r=this._match(I.tokens.underscore);if(r||(e=this._unary_expression()),!r&&e==null)return null;const n=this._consume(I.assignment_operators,"Expected assignment operator."),i=this._short_circuit_or_expression();return new PB(lc.parse(n.lexeme),e,i)}_func_call_statement(){if(!this._check(I.tokens.ident))return null;const e=this._current,r=this._consume(I.tokens.ident,"Expected function name."),n=this._argument_expression_list();return n===null?(this._current=e,null):new IP(r.lexeme,n)}_loop_statement(){if(!this._match(I.keywords.loop))return null;this._check(I.tokens.attr)&&this._attribute(),this._consume(I.tokens.brace_left,"Expected '{' for loop.");const e=[];let r=this._statement();for(;r!==null;){if(Array.isArray(r))for(let i of r)e.push(i);else e.push(r);r=this._statement()}let n=null;return this._match(I.keywords.continuing)&&(n=this._compound_statement()),this._consume(I.tokens.brace_right,"Expected '}' for loop."),new MB(e,n)}_switch_statement(){if(!this._match(I.keywords.switch))return null;const e=this._optional_paren_expression();this._check(I.tokens.attr)&&this._attribute(),this._consume(I.tokens.brace_left,"Expected '{' for switch.");const r=this._switch_body();if(r==null||r.length==0)throw this._error(this._previous(),"Expected 'case' or 'default'.");return this._consume(I.tokens.brace_right,"Expected '}' for switch."),new IB(e,r)}_switch_body(){const e=[];if(this._match(I.keywords.case)){const r=this._case_selectors();this._match(I.tokens.colon),this._check(I.tokens.attr)&&this._attribute(),this._consume(I.tokens.brace_left,"Exected '{' for switch case.");const n=this._case_body();this._consume(I.tokens.brace_right,"Exected '}' for switch case."),e.push(new WB(r,n))}if(this._match(I.keywords.default)){this._match(I.tokens.colon),this._check(I.tokens.attr)&&this._attribute(),this._consume(I.tokens.brace_left,"Exected '{' for switch default.");const r=this._case_body();this._consume(I.tokens.brace_right,"Exected '}' for switch default."),e.push(new qB(r))}if(this._check([I.keywords.default,I.keywords.case])){const r=this._switch_body();e.push(r[0])}return e}_case_selectors(){const e=[this._shift_expression()];for(;this._match(I.tokens.comma);)e.push(this._shift_expression());return e}_case_body(){if(this._match(I.keywords.fallthrough))return this._consume(I.tokens.semicolon,"Expected ';'"),[];let e=this._statement();if(e==null)return[];e instanceof Array||(e=[e]);const r=this._case_body();return r.length==0?e:[...e,r[0]]}_if_statement(){if(!this._match(I.keywords.if))return null;const e=this._optional_paren_expression();this._check(I.tokens.attr)&&this._attribute();const r=this._compound_statement();let n=[];this._match_elseif()&&(this._check(I.tokens.attr)&&this._attribute(),n=this._elseif_statement(n));let i=null;return this._match(I.keywords.else)&&(this._check(I.tokens.attr)&&this._attribute(),i=this._compound_statement()),new OB(e,r,n,i)}_match_elseif(){return this._tokens[this._current].type===I.keywords.else&&this._tokens[this._current+1].type===I.keywords.if?(this._advance(),this._advance(),!0):!1}_elseif_statement(e=[]){const r=this._optional_paren_expression(),n=this._compound_statement();return e.push(new KB(r,n)),this._match_elseif()&&(this._check(I.tokens.attr)&&this._attribute(),this._elseif_statement(e)),e}_return_statement(){if(!this._match(I.keywords.return))return null;const e=this._short_circuit_or_expression();return new kB(e)}_short_circuit_or_expression(){let e=this._short_circuit_and_expr();for(;this._match(I.tokens.or_or);)e=new Pn(this._previous().toString(),e,this._short_circuit_and_expr());return e}_short_circuit_and_expr(){let e=this._inclusive_or_expression();for(;this._match(I.tokens.and_and);)e=new Pn(this._previous().toString(),e,this._inclusive_or_expression());return e}_inclusive_or_expression(){let e=this._exclusive_or_expression();for(;this._match(I.tokens.or);)e=new Pn(this._previous().toString(),e,this._exclusive_or_expression());return e}_exclusive_or_expression(){let e=this._and_expression();for(;this._match(I.tokens.xor);)e=new Pn(this._previous().toString(),e,this._and_expression());return e}_and_expression(){let e=this._equality_expression();for(;this._match(I.tokens.and);)e=new Pn(this._previous().toString(),e,this._equality_expression());return e}_equality_expression(){const e=this._relational_expression();return this._match([I.tokens.equal_equal,I.tokens.not_equal])?new Pn(this._previous().toString(),e,this._relational_expression()):e}_relational_expression(){let e=this._shift_expression();for(;this._match([I.tokens.less_than,I.tokens.greater_than,I.tokens.less_than_equal,I.tokens.greater_than_equal]);)e=new Pn(this._previous().toString(),e,this._shift_expression());return e}_shift_expression(){let e=this._additive_expression();for(;this._match([I.tokens.shift_left,I.tokens.shift_right]);)e=new Pn(this._previous().toString(),e,this._additive_expression());return e}_additive_expression(){let e=this._multiplicative_expression();for(;this._match([I.tokens.plus,I.tokens.minus]);)e=new Pn(this._previous().toString(),e,this._multiplicative_expression());return e}_multiplicative_expression(){let e=this._unary_expression();for(;this._match([I.tokens.star,I.tokens.forward_slash,I.tokens.modulo]);)e=new Pn(this._previous().toString(),e,this._unary_expression());return e}_unary_expression(){return this._match([I.tokens.minus,I.tokens.bang,I.tokens.tilde,I.tokens.star,I.tokens.and])?new HB(this._previous().toString(),this._unary_expression()):this._singular_expression()}_singular_expression(){const e=this._primary_expression(),r=this._postfix_expression();return r&&(e.postfix=r),e}_postfix_expression(){if(this._match(I.tokens.bracket_left)){const e=this._short_circuit_or_expression();this._consume(I.tokens.bracket_right,"Expected ']'.");const r=new jB(e),n=this._postfix_expression();return n&&(r.postfix=n),r}if(this._match(I.tokens.period)){const e=this._consume(I.tokens.ident,"Expected member name."),r=this._postfix_expression(),n=new $B(e.lexeme);return r&&(n.postfix=r),n}return null}_getStruct(e){return this._context.aliases.has(e)?this._context.aliases.get(e).type:this._context.structs.has(e)?this._context.structs.get(e):null}_primary_expression(){if(this._match(I.tokens.ident)){const n=this._previous().toString();if(this._check(I.tokens.paren_left)){const i=this._argument_expression_list(),s=this._getStruct(n);return s!=null?new aa(s,i):new FP(n,i)}if(this._context.constants.has(n)){const i=this._context.constants.get(n);return new nT(n,i.value)}return new $y(n)}if(this._match(I.const_literal))return new iT(parseFloat(this._previous().toString()));if(this._check(I.tokens.paren_left))return this._paren_expression();if(this._match(I.keywords.bitcast)){this._consume(I.tokens.less_than,"Expected '<'.");const n=this._type_decl();this._consume(I.tokens.greater_than,"Expected '>'.");const i=this._paren_expression();return new VB(n,i)}const e=this._type_decl(),r=this._argument_expression_list();return new aa(e,r)}_argument_expression_list(){if(!this._match(I.tokens.paren_left))return null;const e=[];do{if(this._check(I.tokens.paren_right))break;const r=this._short_circuit_or_expression();e.push(r)}while(this._match(I.tokens.comma));return this._consume(I.tokens.paren_right,"Expected ')' for agument list"),e}_optional_paren_expression(){this._match(I.tokens.paren_left);const e=this._short_circuit_or_expression();return this._match(I.tokens.paren_right),new sT([e])}_paren_expression(){this._consume(I.tokens.paren_left,"Expected '('.");const e=this._short_circuit_or_expression();return this._consume(I.tokens.paren_right,"Expected ')'."),new sT([e])}_struct_decl(){if(!this._match(I.keywords.struct))return null;const e=this._currentLine,r=this._consume(I.tokens.ident,"Expected name for struct.").toString();this._consume(I.tokens.brace_left,"Expected '{' for struct body.");const n=[];for(;!this._check(I.tokens.brace_right);){const o=this._attribute(),l=this._consume(I.tokens.ident,"Expected variable name.").toString();this._consume(I.tokens.colon,"Expected ':' for struct member type.");const u=this._attribute(),f=this._type_decl();f!=null&&(f.attributes=u),this._check(I.tokens.brace_right)?this._match(I.tokens.comma):this._consume(I.tokens.comma,"Expected ',' for struct member."),n.push(new YB(l,f,o))}this._consume(I.tokens.brace_right,"Expected '}' after struct body.");const i=this._currentLine,s=new vs(r,n,e,i);return this._context.structs.set(r,s),s}_global_variable_decl(){const e=this._variable_decl();return e&&this._match(I.tokens.equal)&&(e.value=this._const_expression()),e}_override_variable_decl(){const e=this._override_decl();return e&&this._match(I.tokens.equal)&&(e.value=this._const_expression()),e}_global_const_decl(){if(!this._match(I.keywords.const))return null;const e=this._consume(I.tokens.ident,"Expected variable name");let r=null;if(this._match(I.tokens.colon)){const s=this._attribute();r=this._type_decl(),r!=null&&(r.attributes=s)}let n=null;if(this._match(I.tokens.equal)){const s=this._short_circuit_or_expression();if(s instanceof aa)n=s;else if(s instanceof nT&&s.initializer instanceof aa)n=s.initializer;else try{const o=s.evaluate(this._context);n=new iT(o)}catch{n=s}}const i=new rT(e.toString(),r,"","",n);return this._context.constants.set(i.name,i),i}_global_let_decl(){if(!this._match(I.keywords.let))return null;const e=this._consume(I.tokens.ident,"Expected variable name");let r=null;if(this._match(I.tokens.colon)){const i=this._attribute();r=this._type_decl(),r!=null&&(r.attributes=i)}let n=null;return this._match(I.tokens.equal)&&(n=this._const_expression()),new zy(e.toString(),r,"","",n)}_const_expression(){return this._short_circuit_or_expression()}_variable_decl(){if(!this._match(I.keywords.var))return null;let e="",r="";this._match(I.tokens.less_than)&&(e=this._consume(I.storage_class,"Expected storage_class.").toString(),this._match(I.tokens.comma)&&(r=this._consume(I.access_mode,"Expected access_mode.").toString()),this._consume(I.tokens.greater_than,"Expected '>'."));const n=this._consume(I.tokens.ident,"Expected variable name");let i=null;if(this._match(I.tokens.colon)){const s=this._attribute();i=this._type_decl(),i!=null&&(i.attributes=s)}return new bs(n.toString(),i,e,r,null)}_override_decl(){if(!this._match(I.keywords.override))return null;const e=this._consume(I.tokens.ident,"Expected variable name");let r=null;if(this._match(I.tokens.colon)){const n=this._attribute();r=this._type_decl(),r!=null&&(r.attributes=n)}return new MP(e.toString(),r,null)}_diagnostic(){this._consume(I.tokens.paren_left,"Expected '('");const e=this._consume(I.tokens.ident,"Expected severity control name.");this._consume(I.tokens.comma,"Expected ','");const r=this._consume(I.tokens.ident,"Expected diagnostic rule name.");return this._consume(I.tokens.paren_right,"Expected ')'"),new DB(e.toString(),r.toString())}_enable_directive(){const e=this._consume(I.tokens.ident,"identity expected.");return new NB(e.toString())}_requires_directive(){const e=[this._consume(I.tokens.ident,"identity expected.").toString()];for(;this._match(I.tokens.comma);){const r=this._consume(I.tokens.ident,"identity expected.");e.push(r.toString())}return new FB(e)}_type_alias(){const e=this._consume(I.tokens.ident,"identity expected.");this._consume(I.tokens.equal,"Expected '=' for type alias.");let r=this._type_decl();if(r===null)throw this._error(this._peek(),"Expected Type for Alias.");this._context.aliases.has(r.name)&&(r=this._context.aliases.get(r.name).type);const n=new OP(e.toString(),r);return this._context.aliases.set(n.name,n),n}_type_decl(){if(this._check([I.tokens.ident,...I.texel_format,I.keywords.bool,I.keywords.f32,I.keywords.i32,I.keywords.u32])){const n=this._advance(),i=n.toString();return this._context.structs.has(i)?this._context.structs.get(i):this._context.aliases.has(i)?this._context.aliases.get(i).type:new js(n.toString())}let e=this._texture_sampler_types();if(e)return e;if(this._check(I.template_types)){let n=this._advance().toString(),i=null,s=null;return this._match(I.tokens.less_than)&&(i=this._type_decl(),s=null,this._match(I.tokens.comma)&&(s=this._consume(I.access_mode,"Expected access_mode for pointer").toString()),this._consume(I.tokens.greater_than,"Expected '>' for type.")),new kP(n,i,s)}if(this._match(I.keywords.ptr)){let n=this._previous().toString();this._consume(I.tokens.less_than,"Expected '<' for pointer.");const i=this._consume(I.storage_class,"Expected storage_class for pointer");this._consume(I.tokens.comma,"Expected ',' for pointer.");const s=this._type_decl();let o=null;return this._match(I.tokens.comma)&&(o=this._consume(I.access_mode,"Expected access_mode for pointer").toString()),this._consume(I.tokens.greater_than,"Expected '>' for pointer."),new zB(n,i.toString(),s,o)}const r=this._attribute();if(this._match(I.keywords.array)){let n=null,i=-1;const s=this._previous();let o=null;if(this._match(I.tokens.less_than)){n=this._type_decl(),this._context.aliases.has(n.name)&&(n=this._context.aliases.get(n.name).type);let u="";if(this._match(I.tokens.comma)){o=this._shift_expression();try{u=o.evaluate(this._context).toString(),o=null}catch{u="1"}}this._consume(I.tokens.greater_than,"Expected '>' for array."),i=u?parseInt(u):0}const l=new NP(s.toString(),r,n,i);return o&&this._deferArrayCountEval.push({arrayType:l,countNode:o}),l}return null}_texture_sampler_types(){if(this._match(I.sampler_type))return new Bl(this._previous().toString(),null,null);if(this._match(I.depth_texture_type))return new Bl(this._previous().toString(),null,null);if(this._match(I.sampled_texture_type)||this._match(I.multisampled_texture_type)){const e=this._previous();this._consume(I.tokens.less_than,"Expected '<' for sampler type.");const r=this._type_decl();return this._consume(I.tokens.greater_than,"Expected '>' for sampler type."),new Bl(e.toString(),r,null)}if(this._match(I.storage_texture_type)){const e=this._previous();this._consume(I.tokens.less_than,"Expected '<' for sampler type.");const r=this._consume(I.texel_format,"Invalid texel format.").toString();this._consume(I.tokens.comma,"Expected ',' after texel format.");const n=this._consume(I.access_mode,"Expected access mode for storage texture type.").toString();return this._consume(I.tokens.greater_than,"Expected '>' for sampler type."),new Bl(e.toString(),r,n)}return null}_attribute(){let e=[];for(;this._match(I.tokens.attr);){const r=this._consume(I.attribute_name,"Expected attribute name"),n=new ZB(r.toString(),null);if(this._match(I.tokens.paren_left)){if(n.value=this._consume(I.literal_or_ident,"Expected attribute value").toString(),this._check(I.tokens.comma)){this._advance();do{const i=this._consume(I.literal_or_ident,"Expected attribute value").toString();n.value instanceof Array||(n.value=[n.value]),n.value.push(i)}while(this._match(I.tokens.comma))}this._consume(I.tokens.paren_right,"Expected ')'")}e.push(n)}return e.length==0?null:e}}class ga{constructor(e,r){this.name=e,this.attributes=r,this.size=0}get isArray(){return!1}get isStruct(){return!1}get isTemplate(){return!1}}class aT{constructor(e,r,n){this.name=e,this.type=r,this.attributes=n,this.offset=0,this.size=0}get isArray(){return this.type.isArray}get isStruct(){return this.type.isStruct}get isTemplate(){return this.type.isTemplate}get align(){return this.type.isStruct?this.type.align:0}get members(){return this.type.isStruct?this.type.members:null}get format(){return this.type.isArray?this.type.format:this.type.isTemplate?this.type.format:null}get count(){return this.type.isArray?this.type.count:0}get stride(){return this.type.isArray?this.type.stride:this.size}}class Gu extends ga{constructor(e,r){super(e,r),this.members=[],this.align=0,this.startLine=-1,this.endLine=-1,this.inUse=!1}get isStruct(){return!0}}class zg extends ga{constructor(e,r){super(e,r),this.count=0,this.stride=0}get isArray(){return!0}}class lT extends ga{constructor(e,r,n,i){super(e,n),this.format=r,this.access=i}get isTemplate(){return!0}}var Di;(function(t){t[t.Uniform=0]="Uniform",t[t.Storage=1]="Storage",t[t.Texture=2]="Texture",t[t.Sampler=3]="Sampler",t[t.StorageTexture=4]="StorageTexture"})(Di||(Di={}));class Qu{constructor(e,r,n,i,s,o,l){this.name=e,this.type=r,this.group=n,this.binding=i,this.attributes=s,this.resourceType=o,this.access=l}get isArray(){return this.type.isArray}get isStruct(){return this.type.isStruct}get isTemplate(){return this.type.isTemplate}get size(){return this.type.size}get align(){return this.type.isStruct?this.type.align:0}get members(){return this.type.isStruct?this.type.members:null}get format(){return this.type.isArray?this.type.format:this.type.isTemplate?this.type.format:null}get count(){return this.type.isArray?this.type.count:0}get stride(){return this.type.isArray?this.type.stride:this.size}}class JB{constructor(e,r){this.name=e,this.type=r}}class Ju{constructor(e,r){this.align=e,this.size=r}}class e5{constructor(e,r,n,i){this.name=e,this.type=r,this.locationType=n,this.location=i,this.interpolation=null}}class cT{constructor(e,r,n,i){this.name=e,this.type=r,this.locationType=n,this.location=i}}class t5{constructor(e,r,n,i){this.name=e,this.type=r,this.attributes=n,this.id=i}}class r5{constructor(e,r){this.name=e,this.type=r}}class n5{constructor(e,r=null){this.stage=null,this.inputs=[],this.outputs=[],this.arguments=[],this.returnType=null,this.resources=[],this.overrides=[],this.startLine=-1,this.endLine=-1,this.inUse=!1,this.calls=new Set,this.name=e,this.stage=r}}class i5{constructor(){this.vertex=[],this.fragment=[],this.compute=[]}}class s5{constructor(e){this.resources=null,this.inUse=!1,this.info=null,this.node=e}}class ei{constructor(e){this.uniforms=[],this.storage=[],this.textures=[],this.samplers=[],this.aliases=[],this.overrides=[],this.structs=[],this.entry=new i5,this.functions=[],this._types=new Map,this._functions=new Map,e&&this.update(e)}_isStorageTexture(e){return e.name=="texture_storage_1d"||e.name=="texture_storage_2d"||e.name=="texture_storage_2d_array"||e.name=="texture_storage_3d"}update(e){const n=new QB().parse(e);for(const i of n)i instanceof Uy&&this._functions.set(i.name,new s5(i));for(const i of n)if(i instanceof vs){const s=this._getTypeInfo(i,null);s instanceof Gu&&this.structs.push(s)}for(const i of n){if(i instanceof OP){this.aliases.push(this._getAliasInfo(i));continue}if(i instanceof MP){const s=i,o=this._getAttributeNum(s.attributes,"id",0),l=s.type!=null?this._getTypeInfo(s.type,s.attributes):null;this.overrides.push(new t5(s.name,l,s.attributes,o));continue}if(this._isUniformVar(i)){const s=i,o=this._getAttributeNum(s.attributes,"group",0),l=this._getAttributeNum(s.attributes,"binding",0),u=this._getTypeInfo(s.type,s.attributes),f=new Qu(s.name,u,o,l,s.attributes,Di.Uniform,s.access);this.uniforms.push(f);continue}if(this._isStorageVar(i)){const s=i,o=this._getAttributeNum(s.attributes,"group",0),l=this._getAttributeNum(s.attributes,"binding",0),u=this._getTypeInfo(s.type,s.attributes),f=this._isStorageTexture(u),d=new Qu(s.name,u,o,l,s.attributes,f?Di.StorageTexture:Di.Storage,s.access);this.storage.push(d);continue}if(this._isTextureVar(i)){const s=i,o=this._getAttributeNum(s.attributes,"group",0),l=this._getAttributeNum(s.attributes,"binding",0),u=this._getTypeInfo(s.type,s.attributes),f=this._isStorageTexture(u),d=new Qu(s.name,u,o,l,s.attributes,f?Di.StorageTexture:Di.Texture,s.access);f?this.storage.push(d):this.textures.push(d);continue}if(this._isSamplerVar(i)){const s=i,o=this._getAttributeNum(s.attributes,"group",0),l=this._getAttributeNum(s.attributes,"binding",0),u=this._getTypeInfo(s.type,s.attributes),f=new Qu(s.name,u,o,l,s.attributes,Di.Sampler,s.access);this.samplers.push(f);continue}if(i instanceof Uy){const s=this._getAttribute(i,"vertex"),o=this._getAttribute(i,"fragment"),l=this._getAttribute(i,"compute"),u=s||o||l,f=new n5(i.name,u==null?void 0:u.name);f.startLine=i.startLine,f.endLine=i.endLine,this.functions.push(f),this._functions.get(i.name).info=f,u?(this._functions.get(i.name).inUse=!0,f.inUse=!0,f.resources=this._findResources(i,!!u),f.inputs=this._getInputs(i.args),f.outputs=this._getOutputs(i.returnType),this.entry[u.name].push(f)):(f.arguments=i.args.map(d=>new r5(d.name,this._getTypeInfo(d.type,d.attributes))),f.returnType=i.returnType?this._getTypeInfo(i.returnType,i.attributes):null);continue}}for(const i of this._functions.values())i.info&&(i.info.inUse=i.inUse,this._addCalls(i.node,i.info.calls));for(const i of this._functions.values())i.node.search(s=>{var o;if(s.astNodeType==="varExpr"){const l=s;for(const u of this.overrides)l.name==u.name&&((o=i.info)===null||o===void 0||o.overrides.push(u))}});for(const i of this.uniforms)this._markStructsInUse(i.type);for(const i of this.storage)this._markStructsInUse(i.type)}_markStructsInUse(e){if(e)if(e.isStruct){if(e.inUse=!0,e.members)for(const r of e.members)this._markStructsInUse(r.type)}else if(e.isArray)this._markStructsInUse(e.format);else if(e.isTemplate)e.format&&this._markStructsInUse(e.format);else{const r=this._getAlias(e.name);r&&this._markStructsInUse(r)}}_addCalls(e,r){var n;for(const i of e.calls){const s=(n=this._functions.get(i.name))===null||n===void 0?void 0:n.info;s&&r.add(s)}}findResource(e,r){for(const n of this.uniforms)if(n.group==e&&n.binding==r)return n;for(const n of this.storage)if(n.group==e&&n.binding==r)return n;for(const n of this.textures)if(n.group==e&&n.binding==r)return n;for(const n of this.samplers)if(n.group==e&&n.binding==r)return n;return null}_findResource(e){for(const r of this.uniforms)if(r.name==e)return r;for(const r of this.storage)if(r.name==e)return r;for(const r of this.textures)if(r.name==e)return r;for(const r of this.samplers)if(r.name==e)return r;return null}_markStructsFromAST(e){const r=this._getTypeInfo(e,null);this._markStructsInUse(r)}_findResources(e,r){const n=[],i=this,s=[];return e.search(o=>{if(o instanceof ch)s.push({});else if(o instanceof uh)s.pop();else if(o instanceof bs){const l=o;r&&l.type!==null&&this._markStructsFromAST(l.type),s.length>0&&(s[s.length-1][l.name]=l)}else if(o instanceof aa){const l=o;r&&l.type!==null&&this._markStructsFromAST(l.type)}else if(o instanceof zy){const l=o;r&&l.type!==null&&this._markStructsFromAST(l.type),s.length>0&&(s[s.length-1][l.name]=l)}else if(o instanceof $y){const l=o;if(s.length>0&&s[s.length-1][l.name])return;const u=i._findResource(l.name);u&&n.push(u)}else if(o instanceof FP){const l=o,u=i._functions.get(l.name);u&&(r&&(u.inUse=!0),e.calls.add(u.node),u.resources===null&&(u.resources=i._findResources(u.node,r)),n.push(...u.resources))}else if(o instanceof IP){const l=o,u=i._functions.get(l.name);u&&(r&&(u.inUse=!0),e.calls.add(u.node),u.resources===null&&(u.resources=i._findResources(u.node,r)),n.push(...u.resources))}}),[...new Map(n.map(o=>[o.name,o])).values()]}getBindGroups(){const e=[];function r(n,i){n>=e.length&&(e.length=n+1),e[n]===void 0&&(e[n]=[]),i>=e[n].length&&(e[n].length=i+1)}for(const n of this.uniforms){r(n.group,n.binding);const i=e[n.group];i[n.binding]=n}for(const n of this.storage){r(n.group,n.binding);const i=e[n.group];i[n.binding]=n}for(const n of this.textures){r(n.group,n.binding);const i=e[n.group];i[n.binding]=n}for(const n of this.samplers){r(n.group,n.binding);const i=e[n.group];i[n.binding]=n}return e}_getOutputs(e,r=void 0){if(r===void 0&&(r=[]),e instanceof vs)this._getStructOutputs(e,r);else{const n=this._getOutputInfo(e);n!==null&&r.push(n)}return r}_getStructOutputs(e,r){for(const n of e.members)if(n.type instanceof vs)this._getStructOutputs(n.type,r);else{const i=this._getAttribute(n,"location")||this._getAttribute(n,"builtin");if(i!==null){const s=this._getTypeInfo(n.type,n.type.attributes),o=this._parseInt(i.value),l=new cT(n.name,s,i.name,o);r.push(l)}}}_getOutputInfo(e){const r=this._getAttribute(e,"location")||this._getAttribute(e,"builtin");if(r!==null){const n=this._getTypeInfo(e,e.attributes),i=this._parseInt(r.value);return new cT("",n,r.name,i)}return null}_getInputs(e,r=void 0){r===void 0&&(r=[]);for(const n of e)if(n.type instanceof vs)this._getStructInputs(n.type,r);else{const i=this._getInputInfo(n);i!==null&&r.push(i)}return r}_getStructInputs(e,r){for(const n of e.members)if(n.type instanceof vs)this._getStructInputs(n.type,r);else{const i=this._getInputInfo(n);i!==null&&r.push(i)}}_getInputInfo(e){const r=this._getAttribute(e,"location")||this._getAttribute(e,"builtin");if(r!==null){const n=this._getAttribute(e,"interpolation"),i=this._getTypeInfo(e.type,e.attributes),s=this._parseInt(r.value),o=new e5(e.name,i,r.name,s);return n!==null&&(o.interpolation=this._parseString(n.value)),o}return null}_parseString(e){return e instanceof Array&&(e=e[0]),e}_parseInt(e){e instanceof Array&&(e=e[0]);const r=parseInt(e);return isNaN(r)?e:r}_getAlias(e){for(const r of this.aliases)if(r.name==e)return r.type;return null}_getAliasInfo(e){return new JB(e.name,this._getTypeInfo(e.type,null))}_getTypeInfo(e,r){if(this._types.has(e))return this._types.get(e);if(e instanceof NP){const i=e,s=i.format?this._getTypeInfo(i.format,i.attributes):null,o=new zg(i.name,r);return o.format=s,o.count=i.count,this._types.set(e,o),this._updateTypeInfo(o),o}if(e instanceof vs){const i=e,s=new Gu(i.name,r);s.startLine=i.startLine,s.endLine=i.endLine;for(const o of i.members){const l=this._getTypeInfo(o.type,o.attributes);s.members.push(new aT(o.name,l,o.attributes))}return this._types.set(e,s),this._updateTypeInfo(s),s}if(e instanceof Bl){const i=e,s=i.format instanceof js,o=i.format?s?this._getTypeInfo(i.format,null):new ga(i.format,null):null,l=new lT(i.name,o,r,i.access);return this._types.set(e,l),this._updateTypeInfo(l),l}if(e instanceof kP){const i=e,s=i.format?this._getTypeInfo(i.format,null):null,o=new lT(i.name,s,r,i.access);return this._types.set(e,o),this._updateTypeInfo(o),o}const n=new ga(e.name,r);return this._types.set(e,n),this._updateTypeInfo(n),n}_updateTypeInfo(e){var r,n;const i=this._getTypeSize(e);if(e.size=(r=i==null?void 0:i.size)!==null&&r!==void 0?r:0,e instanceof zg&&e.format){const s=this._getTypeSize(e.format);e.stride=(n=s==null?void 0:s.size)!==null&&n!==void 0?n:0,this._updateTypeInfo(e.format)}e instanceof Gu&&this._updateStructInfo(e)}_updateStructInfo(e){var r;let n=0,i=0,s=0,o=0;for(let l=0,u=e.members.length;l<u;++l){const f=e.members[l],d=this._getTypeSize(f);if(!d)continue;(r=this._getAlias(f.type.name))!==null&&r!==void 0||f.type;const g=d.align,m=d.size;n=this._roundUp(g,n+i),i=m,s=n,o=Math.max(o,g),f.offset=n,f.size=m,this._updateTypeInfo(f.type)}e.size=this._roundUp(o,s+i),e.align=o}_getTypeSize(e){var r,n;if(e==null)return null;const i=this._getAttributeNum(e.attributes,"size",0),s=this._getAttributeNum(e.attributes,"align",0);if(e instanceof aT&&(e=e.type),e instanceof ga){const o=this._getAlias(e.name);o!==null&&(e=o)}{const o=ei._typeInfo[e.name];if(o!==void 0){const l=((r=e.format)===null||r===void 0?void 0:r.name)==="f16"?2:1;return new Ju(Math.max(s,o.align/l),Math.max(i,o.size/l))}}{const o=ei._typeInfo[e.name.substring(0,e.name.length-1)];if(o){const l=e.name[e.name.length-1]==="h"?2:1;return new Ju(Math.max(s,o.align/l),Math.max(i,o.size/l))}}if(e instanceof zg){let o=e,l=8,u=8;const f=this._getTypeSize(o.format);f!==null&&(u=f.size,l=f.align);const d=o.count,g=this._getAttributeNum((n=e==null?void 0:e.attributes)!==null&&n!==void 0?n:null,"stride",this._roundUp(l,u));return u=d*g,i&&(u=i),new Ju(Math.max(s,l),Math.max(i,u))}if(e instanceof Gu){let o=0,l=0,u=0,f=0,d=0;for(const g of e.members){const m=this._getTypeSize(g.type);m!==null&&(o=Math.max(m.align,o),u=this._roundUp(m.align,u+f),f=m.size,d=u)}return l=this._roundUp(o,d+f),new Ju(Math.max(s,o),Math.max(i,l))}return null}_isUniformVar(e){return e instanceof bs&&e.storage=="uniform"}_isStorageVar(e){return e instanceof bs&&e.storage=="storage"}_isTextureVar(e){return e instanceof bs&&e.type!==null&&ei._textureTypes.indexOf(e.type.name)!=-1}_isSamplerVar(e){return e instanceof bs&&e.type!==null&&ei._samplerTypes.indexOf(e.type.name)!=-1}_getAttribute(e,r){const n=e;if(!n||!n.attributes)return null;const i=n.attributes;for(let s of i)if(s.name==r)return s;return null}_getAttributeNum(e,r,n){if(e===null)return n;for(let i of e)if(i.name==r){let s=i!==null&&i.value!==null?i.value:n;return s instanceof Array&&(s=s[0]),typeof s=="number"?s:typeof s=="string"?parseInt(s):n}return n}_roundUp(e,r){return Math.ceil(r/e)*e}}ei._typeInfo={f16:{align:2,size:2},i32:{align:4,size:4},u32:{align:4,size:4},f32:{align:4,size:4},atomic:{align:4,size:4},vec2:{align:8,size:8},vec3:{align:16,size:12},vec4:{align:16,size:16},mat2x2:{align:8,size:16},mat3x2:{align:8,size:24},mat4x2:{align:8,size:32},mat2x3:{align:16,size:32},mat3x3:{align:16,size:48},mat4x3:{align:16,size:64},mat2x4:{align:16,size:32},mat3x4:{align:16,size:48},mat4x4:{align:16,size:64}};ei._textureTypes=I.any_texture_type.map(t=>t.name);ei._samplerTypes=I.sampler_type.map(t=>t.name);function o5(t){var s;const e={attributes:[],bindings:[]};let r;try{r=a5(t)}catch(o){return fe.error(o.message)(),e}for(const o of r.uniforms){const l=[];for(const u of((s=o.type)==null?void 0:s.members)||[])l.push({name:u.name,type:uT(u.type)});e.bindings.push({type:"uniform",name:o.name,group:o.group,location:o.binding,members:l})}for(const o of r.textures)e.bindings.push({type:"texture",name:o.name,group:o.group,location:o.binding});for(const o of r.samplers)e.bindings.push({type:"sampler",name:o.name,group:o.group,location:o.binding});const n=r.entry.vertex[0],i=(n==null?void 0:n.inputs.length)||0;for(let o=0;o<i;o++){const l=n.inputs[o];if(l.locationType==="location"){const u=uT(l.type);e.attributes.push({name:l.name,location:Number(l.location),type:u})}}return e}function uT(t){return t.format?`${t.name}<${t.format.name}>`:t.name}function a5(t){try{return new ei(t)}catch(e){if(e instanceof Error)throw e;let r="WGSL parse error";throw typeof e=="object"&&(e!=null&&e.message)&&(r+=`: ${e.message} `),typeof e=="object"&&(e!=null&&e.token)&&(r+=e.token.line||""),new Error(r,{cause:e})}}const l5={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0,_cartographicRadians:!1};globalThis.mathgl=globalThis.mathgl||{config:{...l5}};const Cr=globalThis.mathgl.config;function c5(t,{precision:e=Cr.precision}={}){return t=u5(t),`${parseFloat(t.toPrecision(e))}`}function Is(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Mt(t,e,r){return h5(t,n=>Math.max(e,Math.min(r,n)))}function As(t,e,r){return Is(t)?t.map((n,i)=>As(n,e[i],r)):r*e+(1-r)*t}function ri(t,e,r){const n=Cr.EPSILON;try{if(t===e)return!0;if(Is(t)&&Is(e)){if(t.length!==e.length)return!1;for(let i=0;i<t.length;++i)if(!ri(t[i],e[i]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):typeof t=="number"&&typeof e=="number"?Math.abs(t-e)<=Cr.EPSILON*Math.max(1,Math.abs(t),Math.abs(e)):!1}finally{Cr.EPSILON=n}}function u5(t){return Math.round(t/Cr.EPSILON)*Cr.EPSILON}function f5(t){return t.clone?t.clone():new Array(t.length)}function h5(t,e,r){if(Is(t)){const n=t;r=r||f5(n);for(let i=0;i<r.length&&i<n.length;++i){const s=typeof t=="number"?t:t[i];r[i]=e(s,i,r)}return r}return e(t)}class Kv extends Array{clone(){return new this.constructor().copy(this)}fromArray(e,r=0){for(let n=0;n<this.ELEMENTS;++n)this[n]=e[n+r];return this.check()}toArray(e=[],r=0){for(let n=0;n<this.ELEMENTS;++n)e[r+n]=this[n];return e}toObject(e){return e}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}to(e){return e===this?this:Is(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(Cr)}formatString(e){let r="";for(let n=0;n<this.ELEMENTS;++n)r+=(n>0?", ":"")+c5(this[n],e);return`${e.printTypes?this.constructor.name:""}[${r}]`}equals(e){if(!e||this.length!==e.length)return!1;for(let r=0;r<this.ELEMENTS;++r)if(!ri(this[r],e[r]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let r=0;r<this.ELEMENTS;++r)if(this[r]!==e[r])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,r,n){if(n===void 0)return this.lerp(this,e,r);for(let i=0;i<this.ELEMENTS;++i){const s=e[i],o=typeof r=="number"?r:r[i];this[i]=s+n*(o-s)}return this.check()}min(e){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(e[r],this[r]);return this.check()}max(e){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.max(e[r],this[r]);return this.check()}clamp(e,r){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],e[n]),r[n]);return this.check()}add(...e){for(const r of e)for(let n=0;n<this.ELEMENTS;++n)this[n]+=r[n];return this.check()}subtract(...e){for(const r of e)for(let n=0;n<this.ELEMENTS;++n)this[n]-=r[n];return this.check()}scale(e){if(typeof e=="number")for(let r=0;r<this.ELEMENTS;++r)this[r]*=e;else for(let r=0;r<this.ELEMENTS&&r<e.length;++r)this[r]*=e[r];return this.check()}multiplyByScalar(e){for(let r=0;r<this.ELEMENTS;++r)this[r]*=e;return this.check()}check(){if(Cr.debug&&!this.validate())throw new Error(`math.gl: ${this.constructor.name} some fields set to invalid numbers'`);return this}validate(){let e=this.length===this.ELEMENTS;for(let r=0;r<this.ELEMENTS;++r)e=e&&Number.isFinite(this[r]);return e}sub(e){return this.subtract(e)}setScalar(e){for(let r=0;r<this.ELEMENTS;++r)this[r]=e;return this.check()}addScalar(e){for(let r=0;r<this.ELEMENTS;++r)this[r]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let r=0;r<this.ELEMENTS;++r)this[r]*=e;return this.check()}divideScalar(e){return this.multiplyByScalar(1/e)}clampScalar(e,r){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],e),r);return this.check()}get elements(){return this}}function d5(t,e){if(t.length!==e)return!1;for(let r=0;r<t.length;++r)if(!Number.isFinite(t[r]))return!1;return!0}function lt(t){if(!Number.isFinite(t))throw new Error(`Invalid number ${JSON.stringify(t)}`);return t}function Ql(t,e,r=""){if(Cr.debug&&!d5(t,e))throw new Error(`math.gl: ${r} some fields set to invalid numbers'`);return t}function cc(t,e){if(!t)throw new Error(`math.gl assertion ${e}`)}class LP extends Kv{get x(){return this[0]}set x(e){this[0]=lt(e)}get y(){return this[1]}set y(e){this[1]=lt(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let r=0;r<this.ELEMENTS;++r)e+=this[r]*this[r];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let r=0;for(let n=0;n<this.ELEMENTS;++n){const i=this[n]-e[n];r+=i*i}return lt(r)}dot(e){let r=0;for(let n=0;n<this.ELEMENTS;++n)r+=this[n]*e[n];return lt(r)}normalize(){const e=this.magnitude();if(e!==0)for(let r=0;r<this.ELEMENTS;++r)this[r]/=e;return this.check()}multiply(...e){for(const r of e)for(let n=0;n<this.ELEMENTS;++n)this[n]*=r[n];return this.check()}divide(...e){for(const r of e)for(let n=0;n<this.ELEMENTS;++n)this[n]/=r[n];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return cc(e>=0&&e<this.ELEMENTS,"index is out of range"),lt(this[e])}setComponent(e,r){return cc(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=r,this.check()}addVectors(e,r){return this.copy(e).add(r)}subVectors(e,r){return this.copy(e).subtract(r)}multiplyVectors(e,r){return this.copy(e).multiply(r)}addScaledVector(e,r){return this.add(new this.constructor(e).multiplyScalar(r))}}const Jl=1e-6;let vn=typeof Float32Array<"u"?Float32Array:Array;function p5(){const t=new vn(2);return vn!=Float32Array&&(t[0]=0,t[1]=0),t}function fh(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t}function UP(t,e){return t[0]=-e[0],t[1]=-e[1],t}function zP(t,e,r,n){const i=e[0],s=e[1];return t[0]=i+n*(r[0]-i),t[1]=s+n*(r[1]-s),t}function g5(t,e,r){const n=e[0],i=e[1];return t[0]=r[0]*n+r[3]*i+r[6],t[1]=r[1]*n+r[4]*i+r[7],t}function m5(t,e,r){const n=e[0],i=e[1];return t[0]=r[0]*n+r[4]*i+r[12],t[1]=r[1]*n+r[5]*i+r[13],t}(function(){const t=p5();return function(e,r,n,i,s,o){let l,u;for(r||(r=2),n||(n=0),i?u=Math.min(i*r+n,e.length):u=e.length,l=n;l<u;l+=r)t[0]=e[l],t[1]=e[l+1],s(t,t,o),e[l]=t[0],e[l+1]=t[1];return e}})();function _5(t,e,r){const n=e[0],i=e[1],s=r[3]*n+r[7]*i||1;return t[0]=(r[0]*n+r[4]*i)/s,t[1]=(r[1]*n+r[5]*i)/s,t}function $P(t,e,r){const n=e[0],i=e[1],s=e[2],o=r[3]*n+r[7]*i+r[11]*s||1;return t[0]=(r[0]*n+r[4]*i+r[8]*s)/o,t[1]=(r[1]*n+r[5]*i+r[9]*s)/o,t[2]=(r[2]*n+r[6]*i+r[10]*s)/o,t}function y5(t,e,r){const n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i,t[1]=r[1]*n+r[3]*i,t[2]=e[2],t}function v5(t,e,r){const n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i,t[1]=r[1]*n+r[3]*i,t[2]=e[2],t[3]=e[3],t}function VP(t,e,r){const n=e[0],i=e[1],s=e[2];return t[0]=r[0]*n+r[3]*i+r[6]*s,t[1]=r[1]*n+r[4]*i+r[7]*s,t[2]=r[2]*n+r[5]*i+r[8]*s,t[3]=e[3],t}function jP(){const t=new vn(3);return vn!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function b5(t){const e=t[0],r=t[1],n=t[2];return Math.sqrt(e*e+r*r+n*n)}function fT(t,e,r){const n=new vn(3);return n[0]=t,n[1]=e,n[2]=r,n}function w5(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}function S5(t){const e=t[0],r=t[1],n=t[2];return e*e+r*r+n*n}function x5(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function T5(t,e){const r=e[0],n=e[1],i=e[2];let s=r*r+n*n+i*i;return s>0&&(s=1/Math.sqrt(s)),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t}function HP(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function kf(t,e,r){const n=e[0],i=e[1],s=e[2],o=r[0],l=r[1],u=r[2];return t[0]=i*u-s*l,t[1]=s*o-n*u,t[2]=n*l-i*o,t}function E5(t,e,r,n){const i=e[0],s=e[1],o=e[2];return t[0]=i+n*(r[0]-i),t[1]=s+n*(r[1]-s),t[2]=o+n*(r[2]-o),t}function Yv(t,e,r){const n=e[0],i=e[1],s=e[2];let o=r[3]*n+r[7]*i+r[11]*s+r[15];return o=o||1,t[0]=(r[0]*n+r[4]*i+r[8]*s+r[12])/o,t[1]=(r[1]*n+r[5]*i+r[9]*s+r[13])/o,t[2]=(r[2]*n+r[6]*i+r[10]*s+r[14])/o,t}function WP(t,e,r){const n=e[0],i=e[1],s=e[2];return t[0]=n*r[0]+i*r[3]+s*r[6],t[1]=n*r[1]+i*r[4]+s*r[7],t[2]=n*r[2]+i*r[5]+s*r[8],t}function qP(t,e,r){const n=r[0],i=r[1],s=r[2],o=r[3],l=e[0],u=e[1],f=e[2];let d=i*f-s*u,g=s*l-n*f,m=n*u-i*l,y=i*m-s*g,w=s*d-n*m,b=n*g-i*d;const S=o*2;return d*=S,g*=S,m*=S,y*=2,w*=2,b*=2,t[0]=l+d+y,t[1]=u+g+w,t[2]=f+m+b,t}function A5(t,e,r,n){const i=[],s=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],s[0]=i[0],s[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),s[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),t[0]=s[0]+r[0],t[1]=s[1]+r[1],t[2]=s[2]+r[2],t}function C5(t,e,r,n){const i=[],s=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],s[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),s[1]=i[1],s[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),t[0]=s[0]+r[0],t[1]=s[1]+r[1],t[2]=s[2]+r[2],t}function R5(t,e,r,n){const i=[],s=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],s[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),s[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),s[2]=i[2],t[0]=s[0]+r[0],t[1]=s[1]+r[1],t[2]=s[2]+r[2],t}function P5(t,e){const r=t[0],n=t[1],i=t[2],s=e[0],o=e[1],l=e[2],u=Math.sqrt((r*r+n*n+i*i)*(s*s+o*o+l*l)),f=u&&HP(t,e)/u;return Math.acos(Math.min(Math.max(f,-1),1))}const XP=w5,KP=b5,$g=S5;(function(){const t=jP();return function(e,r,n,i,s,o){let l,u;for(r||(r=3),n||(n=0),i?u=Math.min(i*r+n,e.length):u=e.length,l=n;l<u;l+=r)t[0]=e[l],t[1]=e[l+1],t[2]=e[l+2],s(t,t,o),e[l]=t[0],e[l+1]=t[1],e[l+2]=t[2];return e}})();const Vg=[0,0,0];let ef;class ye extends LP{static get ZERO(){return ef||(ef=new ye(0,0,0),Object.freeze(ef)),ef}constructor(e=0,r=0,n=0){super(-0,-0,-0),arguments.length===1&&Is(e)?this.copy(e):(Cr.debug&&(lt(e),lt(r),lt(n)),this[0]=e,this[1]=r,this[2]=n)}set(e,r,n){return this[0]=e,this[1]=r,this[2]=n,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return Cr.debug&&(lt(e.x),lt(e.y),lt(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=lt(e)}angle(e){return P5(this,e)}cross(e){return kf(this,this,e),this.check()}rotateX({radians:e,origin:r=Vg}){return A5(this,this,r,e),this.check()}rotateY({radians:e,origin:r=Vg}){return C5(this,this,r,e),this.check()}rotateZ({radians:e,origin:r=Vg}){return R5(this,this,r,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return Yv(this,this,e),this.check()}transformAsVector(e){return $P(this,this,e),this.check()}transformByMatrix3(e){return WP(this,this,e),this.check()}transformByMatrix2(e){return y5(this,this,e),this.check()}transformByQuaternion(e){return qP(this,this,e),this.check()}}let tf;class Zv extends LP{static get ZERO(){return tf||(tf=new Zv(0,0,0,0),Object.freeze(tf)),tf}constructor(e=0,r=0,n=0,i=0){super(-0,-0,-0,-0),Is(e)&&arguments.length===1?this.copy(e):(Cr.debug&&(lt(e),lt(r),lt(n),lt(i)),this[0]=e,this[1]=r,this[2]=n,this[3]=i)}set(e,r,n,i){return this[0]=e,this[1]=r,this[2]=n,this[3]=i,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}fromObject(e){return Cr.debug&&(lt(e.x),lt(e.y),lt(e.z),lt(e.w)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this[3]=e.w,this}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e.w=this[3],e}get ELEMENTS(){return 4}get z(){return this[2]}set z(e){this[2]=lt(e)}get w(){return this[3]}set w(e){this[3]=lt(e)}transform(e){return Yv(this,this,e),this.check()}transformByMatrix3(e){return VP(this,this,e),this.check()}transformByMatrix2(e){return v5(this,this,e),this.check()}transformByQuaternion(e){return qP(this,this,e),this.check()}applyMatrix4(e){return e.transform(this,this),this}}class YP extends Kv{toString(){let e="[";if(Cr.printRowMajor){e+="row-major:";for(let r=0;r<this.RANK;++r)for(let n=0;n<this.RANK;++n)e+=` ${this[n*this.RANK+r]}`}else{e+="column-major:";for(let r=0;r<this.ELEMENTS;++r)e+=` ${this[r]}`}return e+="]",e}getElementIndex(e,r){return r*this.RANK+e}getElement(e,r){return this[r*this.RANK+e]}setElement(e,r,n){return this[r*this.RANK+e]=lt(n),this}getColumn(e,r=new Array(this.RANK).fill(-0)){const n=e*this.RANK;for(let i=0;i<this.RANK;++i)r[i]=this[n+i];return r}setColumn(e,r){const n=e*this.RANK;for(let i=0;i<this.RANK;++i)this[n+i]=r[i];return this}}function M5(){const t=new vn(9);return vn!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function I5(t,e){if(t===e){const r=e[1],n=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=r,t[5]=e[7],t[6]=n,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function O5(t,e){const r=e[0],n=e[1],i=e[2],s=e[3],o=e[4],l=e[5],u=e[6],f=e[7],d=e[8],g=d*o-l*f,m=-d*s+l*u,y=f*s-o*u;let w=r*g+n*m+i*y;return w?(w=1/w,t[0]=g*w,t[1]=(-d*n+i*f)*w,t[2]=(l*n-i*o)*w,t[3]=m*w,t[4]=(d*r-i*u)*w,t[5]=(-l*r+i*s)*w,t[6]=y*w,t[7]=(-f*r+n*u)*w,t[8]=(o*r-n*s)*w,t):null}function k5(t){const e=t[0],r=t[1],n=t[2],i=t[3],s=t[4],o=t[5],l=t[6],u=t[7],f=t[8];return e*(f*s-o*u)+r*(-f*i+o*l)+n*(u*i-s*l)}function hT(t,e,r){const n=e[0],i=e[1],s=e[2],o=e[3],l=e[4],u=e[5],f=e[6],d=e[7],g=e[8],m=r[0],y=r[1],w=r[2],b=r[3],S=r[4],E=r[5],k=r[6],C=r[7],P=r[8];return t[0]=m*n+y*o+w*f,t[1]=m*i+y*l+w*d,t[2]=m*s+y*u+w*g,t[3]=b*n+S*o+E*f,t[4]=b*i+S*l+E*d,t[5]=b*s+S*u+E*g,t[6]=k*n+C*o+P*f,t[7]=k*i+C*l+P*d,t[8]=k*s+C*u+P*g,t}function N5(t,e,r){const n=e[0],i=e[1],s=e[2],o=e[3],l=e[4],u=e[5],f=e[6],d=e[7],g=e[8],m=r[0],y=r[1];return t[0]=n,t[1]=i,t[2]=s,t[3]=o,t[4]=l,t[5]=u,t[6]=m*n+y*o+f,t[7]=m*i+y*l+d,t[8]=m*s+y*u+g,t}function F5(t,e,r){const n=e[0],i=e[1],s=e[2],o=e[3],l=e[4],u=e[5],f=e[6],d=e[7],g=e[8],m=Math.sin(r),y=Math.cos(r);return t[0]=y*n+m*o,t[1]=y*i+m*l,t[2]=y*s+m*u,t[3]=y*o-m*n,t[4]=y*l-m*i,t[5]=y*u-m*s,t[6]=f,t[7]=d,t[8]=g,t}function dT(t,e,r){const n=r[0],i=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function D5(t,e){const r=e[0],n=e[1],i=e[2],s=e[3],o=r+r,l=n+n,u=i+i,f=r*o,d=n*o,g=n*l,m=i*o,y=i*l,w=i*u,b=s*o,S=s*l,E=s*u;return t[0]=1-g-w,t[3]=d-E,t[6]=m+S,t[1]=d+E,t[4]=1-f-w,t[7]=y-b,t[2]=m-S,t[5]=y+b,t[8]=1-f-g,t}var Vy;(function(t){t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL1ROW0=3]="COL1ROW0",t[t.COL1ROW1=4]="COL1ROW1",t[t.COL1ROW2=5]="COL1ROW2",t[t.COL2ROW0=6]="COL2ROW0",t[t.COL2ROW1=7]="COL2ROW1",t[t.COL2ROW2=8]="COL2ROW2"})(Vy||(Vy={}));const B5=Object.freeze([1,0,0,0,1,0,0,0,1]);class sr extends YP{static get IDENTITY(){return U5()}static get ZERO(){return L5()}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return Vy}constructor(e,...r){super(-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(e)?this.copy(e):r.length>0?this.copy([e,...r]):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this.check()}identity(){return this.copy(B5)}fromObject(e){return this.check()}fromQuaternion(e){return D5(this,e),this.check()}set(e,r,n,i,s,o,l,u,f){return this[0]=e,this[1]=r,this[2]=n,this[3]=i,this[4]=s,this[5]=o,this[6]=l,this[7]=u,this[8]=f,this.check()}setRowMajor(e,r,n,i,s,o,l,u,f){return this[0]=e,this[1]=i,this[2]=l,this[3]=r,this[4]=s,this[5]=u,this[6]=n,this[7]=o,this[8]=f,this.check()}determinant(){return k5(this)}transpose(){return I5(this,this),this.check()}invert(){return O5(this,this),this.check()}multiplyLeft(e){return hT(this,e,this),this.check()}multiplyRight(e){return hT(this,this,e),this.check()}rotate(e){return F5(this,this,e),this.check()}scale(e){return Array.isArray(e)?dT(this,this,e):dT(this,this,[e,e]),this.check()}translate(e){return N5(this,this,e),this.check()}transform(e,r){let n;switch(e.length){case 2:n=g5(r||[-0,-0],e,this);break;case 3:n=WP(r||[-0,-0,-0],e,this);break;case 4:n=VP(r||[-0,-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Ql(n,e.length),n}transformVector(e,r){return this.transform(e,r)}transformVector2(e,r){return this.transform(e,r)}transformVector3(e,r){return this.transform(e,r)}}let rf,nf=null;function L5(){return rf||(rf=new sr([0,0,0,0,0,0,0,0,0]),Object.freeze(rf)),rf}function U5(){return nf||(nf=new sr,Object.freeze(nf)),nf}function z5(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function $5(t,e){if(t===e){const r=e[1],n=e[2],i=e[3],s=e[6],o=e[7],l=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=s,t[11]=e[14],t[12]=i,t[13]=o,t[14]=l}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function jy(t,e){const r=e[0],n=e[1],i=e[2],s=e[3],o=e[4],l=e[5],u=e[6],f=e[7],d=e[8],g=e[9],m=e[10],y=e[11],w=e[12],b=e[13],S=e[14],E=e[15],k=r*l-n*o,C=r*u-i*o,P=r*f-s*o,M=n*u-i*l,D=n*f-s*l,q=i*f-s*u,ee=d*b-g*w,J=d*S-m*w,A=d*E-y*w,X=g*S-m*b,te=g*E-y*b,Q=m*E-y*S;let ie=k*Q-C*te+P*X+M*A-D*J+q*ee;return ie?(ie=1/ie,t[0]=(l*Q-u*te+f*X)*ie,t[1]=(i*te-n*Q-s*X)*ie,t[2]=(b*q-S*D+E*M)*ie,t[3]=(m*D-g*q-y*M)*ie,t[4]=(u*A-o*Q-f*J)*ie,t[5]=(r*Q-i*A+s*J)*ie,t[6]=(S*P-w*q-E*C)*ie,t[7]=(d*q-m*P+y*C)*ie,t[8]=(o*te-l*A+f*ee)*ie,t[9]=(n*A-r*te-s*ee)*ie,t[10]=(w*D-b*P+E*k)*ie,t[11]=(g*P-d*D-y*k)*ie,t[12]=(l*J-o*X-u*ee)*ie,t[13]=(r*X-n*J+i*ee)*ie,t[14]=(b*C-w*M-S*k)*ie,t[15]=(d*M-g*C+m*k)*ie,t):null}function V5(t){const e=t[0],r=t[1],n=t[2],i=t[3],s=t[4],o=t[5],l=t[6],u=t[7],f=t[8],d=t[9],g=t[10],m=t[11],y=t[12],w=t[13],b=t[14],S=t[15],E=e*o-r*s,k=e*l-n*s,C=r*l-n*o,P=f*w-d*y,M=f*b-g*y,D=d*b-g*w,q=e*D-r*M+n*P,ee=s*D-o*M+l*P,J=f*C-d*k+g*E,A=y*C-w*k+b*E;return u*q-i*ee+S*J-m*A}function Cs(t,e,r){const n=e[0],i=e[1],s=e[2],o=e[3],l=e[4],u=e[5],f=e[6],d=e[7],g=e[8],m=e[9],y=e[10],w=e[11],b=e[12],S=e[13],E=e[14],k=e[15];let C=r[0],P=r[1],M=r[2],D=r[3];return t[0]=C*n+P*l+M*g+D*b,t[1]=C*i+P*u+M*m+D*S,t[2]=C*s+P*f+M*y+D*E,t[3]=C*o+P*d+M*w+D*k,C=r[4],P=r[5],M=r[6],D=r[7],t[4]=C*n+P*l+M*g+D*b,t[5]=C*i+P*u+M*m+D*S,t[6]=C*s+P*f+M*y+D*E,t[7]=C*o+P*d+M*w+D*k,C=r[8],P=r[9],M=r[10],D=r[11],t[8]=C*n+P*l+M*g+D*b,t[9]=C*i+P*u+M*m+D*S,t[10]=C*s+P*f+M*y+D*E,t[11]=C*o+P*d+M*w+D*k,C=r[12],P=r[13],M=r[14],D=r[15],t[12]=C*n+P*l+M*g+D*b,t[13]=C*i+P*u+M*m+D*S,t[14]=C*s+P*f+M*y+D*E,t[15]=C*o+P*d+M*w+D*k,t}function hh(t,e,r){const n=r[0],i=r[1],s=r[2];let o,l,u,f,d,g,m,y,w,b,S,E;return e===t?(t[12]=e[0]*n+e[4]*i+e[8]*s+e[12],t[13]=e[1]*n+e[5]*i+e[9]*s+e[13],t[14]=e[2]*n+e[6]*i+e[10]*s+e[14],t[15]=e[3]*n+e[7]*i+e[11]*s+e[15]):(o=e[0],l=e[1],u=e[2],f=e[3],d=e[4],g=e[5],m=e[6],y=e[7],w=e[8],b=e[9],S=e[10],E=e[11],t[0]=o,t[1]=l,t[2]=u,t[3]=f,t[4]=d,t[5]=g,t[6]=m,t[7]=y,t[8]=w,t[9]=b,t[10]=S,t[11]=E,t[12]=o*n+d*i+w*s+e[12],t[13]=l*n+g*i+b*s+e[13],t[14]=u*n+m*i+S*s+e[14],t[15]=f*n+y*i+E*s+e[15]),t}function Gv(t,e,r){const n=r[0],i=r[1],s=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function j5(t,e,r,n){let i=n[0],s=n[1],o=n[2],l=Math.sqrt(i*i+s*s+o*o),u,f,d,g,m,y,w,b,S,E,k,C,P,M,D,q,ee,J,A,X,te,Q,ie,xe;return l<Jl?null:(l=1/l,i*=l,s*=l,o*=l,f=Math.sin(r),u=Math.cos(r),d=1-u,g=e[0],m=e[1],y=e[2],w=e[3],b=e[4],S=e[5],E=e[6],k=e[7],C=e[8],P=e[9],M=e[10],D=e[11],q=i*i*d+u,ee=s*i*d+o*f,J=o*i*d-s*f,A=i*s*d-o*f,X=s*s*d+u,te=o*s*d+i*f,Q=i*o*d+s*f,ie=s*o*d-i*f,xe=o*o*d+u,t[0]=g*q+b*ee+C*J,t[1]=m*q+S*ee+P*J,t[2]=y*q+E*ee+M*J,t[3]=w*q+k*ee+D*J,t[4]=g*A+b*X+C*te,t[5]=m*A+S*X+P*te,t[6]=y*A+E*X+M*te,t[7]=w*A+k*X+D*te,t[8]=g*Q+b*ie+C*xe,t[9]=m*Q+S*ie+P*xe,t[10]=y*Q+E*ie+M*xe,t[11]=w*Q+k*ie+D*xe,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function ZP(t,e,r){const n=Math.sin(r),i=Math.cos(r),s=e[4],o=e[5],l=e[6],u=e[7],f=e[8],d=e[9],g=e[10],m=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*i+f*n,t[5]=o*i+d*n,t[6]=l*i+g*n,t[7]=u*i+m*n,t[8]=f*i-s*n,t[9]=d*i-o*n,t[10]=g*i-l*n,t[11]=m*i-u*n,t}function H5(t,e,r){const n=Math.sin(r),i=Math.cos(r),s=e[0],o=e[1],l=e[2],u=e[3],f=e[8],d=e[9],g=e[10],m=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i-f*n,t[1]=o*i-d*n,t[2]=l*i-g*n,t[3]=u*i-m*n,t[8]=s*n+f*i,t[9]=o*n+d*i,t[10]=l*n+g*i,t[11]=u*n+m*i,t}function GP(t,e,r){const n=Math.sin(r),i=Math.cos(r),s=e[0],o=e[1],l=e[2],u=e[3],f=e[4],d=e[5],g=e[6],m=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i+f*n,t[1]=o*i+d*n,t[2]=l*i+g*n,t[3]=u*i+m*n,t[4]=f*i-s*n,t[5]=d*i-o*n,t[6]=g*i-l*n,t[7]=m*i-u*n,t}function W5(t,e){const r=e[0],n=e[1],i=e[2],s=e[4],o=e[5],l=e[6],u=e[8],f=e[9],d=e[10];return t[0]=Math.sqrt(r*r+n*n+i*i),t[1]=Math.sqrt(s*s+o*o+l*l),t[2]=Math.sqrt(u*u+f*f+d*d),t}function q5(t,e){const r=e[0],n=e[1],i=e[2],s=e[3],o=r+r,l=n+n,u=i+i,f=r*o,d=n*o,g=n*l,m=i*o,y=i*l,w=i*u,b=s*o,S=s*l,E=s*u;return t[0]=1-g-w,t[1]=d+E,t[2]=m-S,t[3]=0,t[4]=d-E,t[5]=1-f-w,t[6]=y+b,t[7]=0,t[8]=m+S,t[9]=y-b,t[10]=1-f-g,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function X5(t,e,r,n,i,s,o){const l=1/(r-e),u=1/(i-n),f=1/(s-o);return t[0]=s*2*l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s*2*u,t[6]=0,t[7]=0,t[8]=(r+e)*l,t[9]=(i+n)*u,t[10]=(o+s)*f,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*s*2*f,t[15]=0,t}function K5(t,e,r,n,i){const s=1/Math.tan(e/2);if(t[0]=s/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,i!=null&&i!==1/0){const o=1/(n-i);t[10]=(i+n)*o,t[14]=2*i*n*o}else t[10]=-1,t[14]=-2*n;return t}const Y5=K5;function Z5(t,e,r,n,i,s,o){const l=1/(e-r),u=1/(n-i),f=1/(s-o);return t[0]=-2*l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*f,t[11]=0,t[12]=(e+r)*l,t[13]=(i+n)*u,t[14]=(o+s)*f,t[15]=1,t}const G5=Z5;function Q5(t,e,r,n){let i,s,o,l,u,f,d,g,m,y;const w=e[0],b=e[1],S=e[2],E=n[0],k=n[1],C=n[2],P=r[0],M=r[1],D=r[2];return Math.abs(w-P)<Jl&&Math.abs(b-M)<Jl&&Math.abs(S-D)<Jl?z5(t):(g=w-P,m=b-M,y=S-D,i=1/Math.sqrt(g*g+m*m+y*y),g*=i,m*=i,y*=i,s=k*y-C*m,o=C*g-E*y,l=E*m-k*g,i=Math.sqrt(s*s+o*o+l*l),i?(i=1/i,s*=i,o*=i,l*=i):(s=0,o=0,l=0),u=m*l-y*o,f=y*s-g*l,d=g*o-m*s,i=Math.sqrt(u*u+f*f+d*d),i?(i=1/i,u*=i,f*=i,d*=i):(u=0,f=0,d=0),t[0]=s,t[1]=u,t[2]=g,t[3]=0,t[4]=o,t[5]=f,t[6]=m,t[7]=0,t[8]=l,t[9]=d,t[10]=y,t[11]=0,t[12]=-(s*w+o*b+l*S),t[13]=-(u*w+f*b+d*S),t[14]=-(g*w+m*b+y*S),t[15]=1,t)}function J5(){const t=new vn(4);return vn!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function eL(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t}function Qv(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function tL(t){const e=t[0],r=t[1],n=t[2],i=t[3];return Math.sqrt(e*e+r*r+n*n+i*i)}function rL(t){const e=t[0],r=t[1],n=t[2],i=t[3];return e*e+r*r+n*n+i*i}function nL(t,e){const r=e[0],n=e[1],i=e[2],s=e[3];let o=r*r+n*n+i*i+s*s;return o>0&&(o=1/Math.sqrt(o)),t[0]=r*o,t[1]=n*o,t[2]=i*o,t[3]=s*o,t}function iL(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function sL(t,e,r,n){const i=e[0],s=e[1],o=e[2],l=e[3];return t[0]=i+n*(r[0]-i),t[1]=s+n*(r[1]-s),t[2]=o+n*(r[2]-o),t[3]=l+n*(r[3]-l),t}function Ia(t,e,r){const n=e[0],i=e[1],s=e[2],o=e[3];return t[0]=r[0]*n+r[4]*i+r[8]*s+r[12]*o,t[1]=r[1]*n+r[5]*i+r[9]*s+r[13]*o,t[2]=r[2]*n+r[6]*i+r[10]*s+r[14]*o,t[3]=r[3]*n+r[7]*i+r[11]*s+r[15]*o,t}function oL(t,e,r){const n=e[0],i=e[1],s=e[2],o=r[0],l=r[1],u=r[2],f=r[3],d=f*n+l*s-u*i,g=f*i+u*n-o*s,m=f*s+o*i-l*n,y=-o*n-l*i-u*s;return t[0]=d*f+y*-o+g*-u-m*-l,t[1]=g*f+y*-l+m*-o-d*-u,t[2]=m*f+y*-u+d*-l-g*-o,t[3]=e[3],t}(function(){const t=J5();return function(e,r,n,i,s,o){let l,u;for(r||(r=4),n||(n=0),i?u=Math.min(i*r+n,e.length):u=e.length,l=n;l<u;l+=r)t[0]=e[l],t[1]=e[l+1],t[2]=e[l+2],t[3]=e[l+3],s(t,t,o),e[l]=t[0],e[l+1]=t[1],e[l+2]=t[2],e[l+3]=t[3];return e}})();var Hy;(function(t){t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL0ROW3=3]="COL0ROW3",t[t.COL1ROW0=4]="COL1ROW0",t[t.COL1ROW1=5]="COL1ROW1",t[t.COL1ROW2=6]="COL1ROW2",t[t.COL1ROW3=7]="COL1ROW3",t[t.COL2ROW0=8]="COL2ROW0",t[t.COL2ROW1=9]="COL2ROW1",t[t.COL2ROW2=10]="COL2ROW2",t[t.COL2ROW3=11]="COL2ROW3",t[t.COL3ROW0=12]="COL3ROW0",t[t.COL3ROW1=13]="COL3ROW1",t[t.COL3ROW2=14]="COL3ROW2",t[t.COL3ROW3=15]="COL3ROW3"})(Hy||(Hy={}));const aL=45*Math.PI/180,lL=1,jg=.1,Hg=500,cL=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class or extends YP{static get IDENTITY(){return fL()}static get ZERO(){return uL()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return Hy}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,r,n,i,s,o,l,u,f,d,g,m,y,w,b,S){return this[0]=e,this[1]=r,this[2]=n,this[3]=i,this[4]=s,this[5]=o,this[6]=l,this[7]=u,this[8]=f,this[9]=d,this[10]=g,this[11]=m,this[12]=y,this[13]=w,this[14]=b,this[15]=S,this.check()}setRowMajor(e,r,n,i,s,o,l,u,f,d,g,m,y,w,b,S){return this[0]=e,this[1]=s,this[2]=f,this[3]=y,this[4]=r,this[5]=o,this[6]=d,this[7]=w,this[8]=n,this[9]=l,this[10]=g,this[11]=b,this[12]=i,this[13]=u,this[14]=m,this[15]=S,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(cL)}fromObject(e){return this.check()}fromQuaternion(e){return q5(this,e),this.check()}frustum(e){const{left:r,right:n,bottom:i,top:s,near:o=jg,far:l=Hg}=e;return l===1/0?hL(this,r,n,i,s,o):X5(this,r,n,i,s,o,l),this.check()}lookAt(e){const{eye:r,center:n=[0,0,0],up:i=[0,1,0]}=e;return Q5(this,r,n,i),this.check()}ortho(e){const{left:r,right:n,bottom:i,top:s,near:o=jg,far:l=Hg}=e;return G5(this,r,n,i,s,o,l),this.check()}orthographic(e){const{fovy:r=aL,aspect:n=lL,focalDistance:i=1,near:s=jg,far:o=Hg}=e;pT(r);const l=r/2,u=i*Math.tan(l),f=u*n;return this.ortho({left:-f,right:f,bottom:-u,top:u,near:s,far:o})}perspective(e){const{fovy:r=45*Math.PI/180,aspect:n=1,near:i=.1,far:s=500}=e;return pT(r),Y5(this,r,n,i,s),this.check()}determinant(){return V5(this)}getScale(e=[-0,-0,-0]){return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(e=[-0,-0,-0]){return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e,r){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],r=r||[-0,-0,-0];const n=this.getScale(r),i=1/n[0],s=1/n[1],o=1/n[2];return e[0]=this[0]*i,e[1]=this[1]*s,e[2]=this[2]*o,e[3]=0,e[4]=this[4]*i,e[5]=this[5]*s,e[6]=this[6]*o,e[7]=0,e[8]=this[8]*i,e[9]=this[9]*s,e[10]=this[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e,r){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0],r=r||[-0,-0,-0];const n=this.getScale(r),i=1/n[0],s=1/n[1],o=1/n[2];return e[0]=this[0]*i,e[1]=this[1]*s,e[2]=this[2]*o,e[3]=this[4]*i,e[4]=this[5]*s,e[5]=this[6]*o,e[6]=this[8]*i,e[7]=this[9]*s,e[8]=this[10]*o,e}transpose(){return $5(this,this),this.check()}invert(){return jy(this,this),this.check()}multiplyLeft(e){return Cs(this,e,this),this.check()}multiplyRight(e){return Cs(this,this,e),this.check()}rotateX(e){return ZP(this,this,e),this.check()}rotateY(e){return H5(this,this,e),this.check()}rotateZ(e){return GP(this,this,e),this.check()}rotateXYZ(e){return this.rotateX(e[0]).rotateY(e[1]).rotateZ(e[2])}rotateAxis(e,r){return j5(this,this,e,r),this.check()}scale(e){return Gv(this,this,Array.isArray(e)?e:[e,e,e]),this.check()}translate(e){return hh(this,this,e),this.check()}transform(e,r){return e.length===4?(r=Ia(r||[-0,-0,-0,-0],e,this),Ql(r,4),r):this.transformAsPoint(e,r)}transformAsPoint(e,r){const{length:n}=e;let i;switch(n){case 2:i=m5(r||[-0,-0],e,this);break;case 3:i=Yv(r||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Ql(i,e.length),i}transformAsVector(e,r){let n;switch(e.length){case 2:n=_5(r||[-0,-0],e,this);break;case 3:n=$P(r||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Ql(n,e.length),n}transformPoint(e,r){return this.transformAsPoint(e,r)}transformVector(e,r){return this.transformAsPoint(e,r)}transformDirection(e,r){return this.transformAsVector(e,r)}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,r,n){return this.identity().translate([e,r,n])}}let sf,of;function uL(){return sf||(sf=new or([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(sf)),sf}function fL(){return of||(of=new or,Object.freeze(of)),of}function pT(t){if(t>Math.PI*2)throw Error("expected radians")}function hL(t,e,r,n,i,s){const o=2*s/(r-e),l=2*s/(i-n),u=(r+e)/(r-e),f=(i+n)/(i-n),d=-1,g=-1,m=-2*s;return t[0]=o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=u,t[9]=f,t[10]=d,t[11]=g,t[12]=0,t[13]=0,t[14]=m,t[15]=0,t}function gT(){const t=new vn(4);return vn!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function dL(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function QP(t,e,r){r=r*.5;const n=Math.sin(r);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(r),t}function mT(t,e,r){const n=e[0],i=e[1],s=e[2],o=e[3],l=r[0],u=r[1],f=r[2],d=r[3];return t[0]=n*d+o*l+i*f-s*u,t[1]=i*d+o*u+s*l-n*f,t[2]=s*d+o*f+n*u-i*l,t[3]=o*d-n*l-i*u-s*f,t}function pL(t,e,r){r*=.5;const n=e[0],i=e[1],s=e[2],o=e[3],l=Math.sin(r),u=Math.cos(r);return t[0]=n*u+o*l,t[1]=i*u+s*l,t[2]=s*u-i*l,t[3]=o*u-n*l,t}function gL(t,e,r){r*=.5;const n=e[0],i=e[1],s=e[2],o=e[3],l=Math.sin(r),u=Math.cos(r);return t[0]=n*u-s*l,t[1]=i*u+o*l,t[2]=s*u+n*l,t[3]=o*u-i*l,t}function mL(t,e,r){r*=.5;const n=e[0],i=e[1],s=e[2],o=e[3],l=Math.sin(r),u=Math.cos(r);return t[0]=n*u+i*l,t[1]=i*u-n*l,t[2]=s*u+o*l,t[3]=o*u-s*l,t}function _L(t,e){const r=e[0],n=e[1],i=e[2];return t[0]=r,t[1]=n,t[2]=i,t[3]=Math.sqrt(Math.abs(1-r*r-n*n-i*i)),t}function Nf(t,e,r,n){const i=e[0],s=e[1],o=e[2],l=e[3];let u=r[0],f=r[1],d=r[2],g=r[3],m,y,w,b,S;return m=i*u+s*f+o*d+l*g,m<0&&(m=-m,u=-u,f=-f,d=-d,g=-g),1-m>Jl?(y=Math.acos(m),S=Math.sin(y),w=Math.sin((1-n)*y)/S,b=Math.sin(n*y)/S):(w=1-n,b=n),t[0]=w*i+b*u,t[1]=w*s+b*f,t[2]=w*o+b*d,t[3]=w*l+b*g,t}function yL(t,e){const r=e[0],n=e[1],i=e[2],s=e[3],o=r*r+n*n+i*i+s*s,l=o?1/o:0;return t[0]=-r*l,t[1]=-n*l,t[2]=-i*l,t[3]=s*l,t}function vL(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function JP(t,e){const r=e[0]+e[4]+e[8];let n;if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{let i=0;e[4]>e[0]&&(i=1),e[8]>e[i*3+i]&&(i=2);const s=(i+1)%3,o=(i+2)%3;n=Math.sqrt(e[i*3+i]-e[s*3+s]-e[o*3+o]+1),t[i]=.5*n,n=.5/n,t[3]=(e[s*3+o]-e[o*3+s])*n,t[s]=(e[s*3+i]+e[i*3+s])*n,t[o]=(e[o*3+i]+e[i*3+o])*n}return t}const bL=eL,wL=Qv,SL=iL,xL=sL,TL=tL,EL=rL,eM=nL,AL=function(){const t=jP(),e=fT(1,0,0),r=fT(0,1,0);return function(n,i,s){const o=HP(i,s);return o<-.999999?(kf(t,e,i),KP(t)<1e-6&&kf(t,r,i),T5(t,t),QP(n,t,Math.PI),n):o>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(kf(t,i,s),n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=1+o,eM(n,n))}}();(function(){const t=gT(),e=gT();return function(r,n,i,s,o,l){return Nf(t,n,o,l),Nf(e,i,s,l),Nf(r,t,e,2*l*(1-l)),r}})();(function(){const t=M5();return function(e,r,n,i){return t[0]=n[0],t[3]=n[1],t[6]=n[2],t[1]=i[0],t[4]=i[1],t[7]=i[2],t[2]=-r[0],t[5]=-r[1],t[8]=-r[2],eM(e,JP(e,t))}})();const CL=[0,0,0,1];class _T extends Kv{constructor(e=0,r=0,n=0,i=1){super(-0,-0,-0,-0),Array.isArray(e)&&arguments.length===1?this.copy(e):this.set(e,r,n,i)}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}set(e,r,n,i){return this[0]=e,this[1]=r,this[2]=n,this[3]=i,this.check()}fromObject(e){return this[0]=e.x,this[1]=e.y,this[2]=e.z,this[3]=e.w,this.check()}fromMatrix3(e){return JP(this,e),this.check()}fromAxisRotation(e,r){return QP(this,e,r),this.check()}identity(){return dL(this),this.check()}setAxisAngle(e,r){return this.fromAxisRotation(e,r)}get ELEMENTS(){return 4}get x(){return this[0]}set x(e){this[0]=lt(e)}get y(){return this[1]}set y(e){this[1]=lt(e)}get z(){return this[2]}set z(e){this[2]=lt(e)}get w(){return this[3]}set w(e){this[3]=lt(e)}len(){return TL(this)}lengthSquared(){return EL(this)}dot(e){return SL(this,e)}rotationTo(e,r){return AL(this,e,r),this.check()}add(e){return bL(this,this,e),this.check()}calculateW(){return _L(this,this),this.check()}conjugate(){return vL(this,this),this.check()}invert(){return yL(this,this),this.check()}lerp(e,r,n){return n===void 0?this.lerp(this,e,r):(xL(this,e,r,n),this.check())}multiplyRight(e){return mT(this,this,e),this.check()}multiplyLeft(e){return mT(this,e,this),this.check()}normalize(){const e=this.len(),r=e>0?1/e:0;return this[0]=this[0]*r,this[1]=this[1]*r,this[2]=this[2]*r,this[3]=this[3]*r,e===0&&(this[3]=1),this.check()}rotateX(e){return pL(this,this,e),this.check()}rotateY(e){return gL(this,this,e),this.check()}rotateZ(e){return mL(this,this,e),this.check()}scale(e){return wL(this,this,e),this.check()}slerp(e,r,n){let i,s,o;switch(arguments.length){case 1:({start:i=CL,target:s,ratio:o}=e);break;case 2:i=this,s=e,o=r;break;default:i=e,s=r,o=n}return Nf(this,i,s,o),this.check()}transformVector4(e,r=new Zv){return oL(r,e,this),Ql(r,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(e,r){return this.setAxisAngle(e,r)}premultiply(e){return this.multiplyLeft(e)}multiply(e){return this.multiplyRight(e)}}const RL=1e-15,PL=1e-20;function tM(t,e=[],r=0){const n=Math.fround(t),i=t-n;return e[r]=n,e[r+1]=i,e}function ML(t){return t-Math.fround(t)}function IL(t){const e=new Float32Array(32);for(let r=0;r<4;++r)for(let n=0;n<4;++n){const i=r*4+n;tM(t[n*4+r],e,i*2)}return e}const OL=`#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND

// All these functions are for substituting tan() function from Intel GPU only
const float TWO_PI = 6.2831854820251465;
const float PI_2 = 1.5707963705062866;
const float PI_16 = 0.1963495463132858;

const float SIN_TABLE_0 = 0.19509032368659973;
const float SIN_TABLE_1 = 0.3826834261417389;
const float SIN_TABLE_2 = 0.5555702447891235;
const float SIN_TABLE_3 = 0.7071067690849304;

const float COS_TABLE_0 = 0.9807852506637573;
const float COS_TABLE_1 = 0.9238795042037964;
const float COS_TABLE_2 = 0.8314695954322815;
const float COS_TABLE_3 = 0.7071067690849304;

const float INVERSE_FACTORIAL_3 = 1.666666716337204e-01; // 1/3!
const float INVERSE_FACTORIAL_5 = 8.333333767950535e-03; // 1/5!
const float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04; // 1/7!
const float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06; // 1/9!

float sin_taylor_fp32(float a) {
  float r, s, t, x;

  if (a == 0.0) {
    return 0.0;
  }

  x = -a * a;
  s = a;
  r = a;

  r = r * x;
  t = r * INVERSE_FACTORIAL_3;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_5;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_7;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_9;
  s = s + t;

  return s;
}

void sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {
  if (a == 0.0) {
    sin_t = 0.0;
    cos_t = 1.0;
  }
  sin_t = sin_taylor_fp32(a);
  cos_t = sqrt(1.0 - sin_t * sin_t);
}

float tan_taylor_fp32(float a) {
    float sin_a;
    float cos_a;

    if (a == 0.0) {
        return 0.0;
    }

    // 2pi range reduction
    float z = floor(a / TWO_PI);
    float r = a - TWO_PI * z;

    float t;
    float q = floor(r / PI_2 + 0.5);
    int j = int(q);

    if (j < -2 || j > 2) {
        return 1.0 / 0.0;
    }

    t = r - PI_2 * q;

    q = floor(t / PI_16 + 0.5);
    int k = int(q);
    int abs_k = int(abs(float(k)));

    if (abs_k > 4) {
        return 1.0 / 0.0;
    } else {
        t = t - PI_16 * q;
    }

    float u = 0.0;
    float v = 0.0;

    float sin_t, cos_t;
    float s, c;
    sincos_taylor_fp32(t, sin_t, cos_t);

    if (k == 0) {
        s = sin_t;
        c = cos_t;
    } else {
        if (abs(float(abs_k) - 1.0) < 0.5) {
            u = COS_TABLE_0;
            v = SIN_TABLE_0;
        } else if (abs(float(abs_k) - 2.0) < 0.5) {
            u = COS_TABLE_1;
            v = SIN_TABLE_1;
        } else if (abs(float(abs_k) - 3.0) < 0.5) {
            u = COS_TABLE_2;
            v = SIN_TABLE_2;
        } else if (abs(float(abs_k) - 4.0) < 0.5) {
            u = COS_TABLE_3;
            v = SIN_TABLE_3;
        }
        if (k > 0) {
            s = u * sin_t + v * cos_t;
            c = u * cos_t - v * sin_t;
        } else {
            s = u * sin_t - v * cos_t;
            c = u * cos_t + v * sin_t;
        }
    }

    if (j == 0) {
        sin_a = s;
        cos_a = c;
    } else if (j == 1) {
        sin_a = c;
        cos_a = -s;
    } else if (j == -1) {
        sin_a = -c;
        cos_a = s;
    } else {
        sin_a = -s;
        cos_a = -c;
    }
    return sin_a / cos_a;
}
#endif

float tan_fp32(float a) {
#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
  return tan_taylor_fp32(a);
#else
  return tan(a);
#endif
}
`,kL={name:"fp32",vs:OL},NL=`
uniform fp64arithmeticUniforms {
  uniform float ONE;
} fp64;

/*
About LUMA_FP64_CODE_ELIMINATION_WORKAROUND

The purpose of this workaround is to prevent shader compilers from
optimizing away necessary arithmetic operations by swapping their sequences
or transform the equation to some 'equivalent' form.

The method is to multiply an artifical variable, ONE, which will be known to
the compiler to be 1 only at runtime. The whole expression is then represented
as a polynomial with respective to ONE. In the coefficients of all terms, only one a
and one b should appear

err = (a + b) * ONE^6 - a * ONE^5 - (a + b) * ONE^4 + a * ONE^3 - b - (a + b) * ONE^2 + a * ONE
*/

// Divide float number to high and low floats to extend fraction bits
vec2 split(float a) {
  const float SPLIT = 4097.0;
  float t = a * SPLIT;
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
  float a_hi = t * fp64.ONE - (t - a);
  float a_lo = a * fp64.ONE - a_hi;
#else
  float a_hi = t - (t - a);
  float a_lo = a - a_hi;
#endif
  return vec2(a_hi, a_lo);
}

// Divide float number again when high float uses too many fraction bits
vec2 split2(vec2 a) {
  vec2 b = split(a.x);
  b.y += a.y;
  return b;
}

// Special sum operation when a > b
vec2 quickTwoSum(float a, float b) {
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
  float sum = (a + b) * fp64.ONE;
  float err = b - (sum - a) * fp64.ONE;
#else
  float sum = a + b;
  float err = b - (sum - a);
#endif
  return vec2(sum, err);
}

// General sum operation
vec2 twoSum(float a, float b) {
  float s = (a + b);
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
  float v = (s * fp64.ONE - a) * fp64.ONE;
  float err = (a - (s - v) * fp64.ONE) * fp64.ONE * fp64.ONE * fp64.ONE + (b - v);
#else
  float v = s - a;
  float err = (a - (s - v)) + (b - v);
#endif
  return vec2(s, err);
}

vec2 twoSub(float a, float b) {
  float s = (a - b);
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
  float v = (s * fp64.ONE - a) * fp64.ONE;
  float err = (a - (s - v) * fp64.ONE) * fp64.ONE * fp64.ONE * fp64.ONE - (b + v);
#else
  float v = s - a;
  float err = (a - (s - v)) - (b + v);
#endif
  return vec2(s, err);
}

vec2 twoSqr(float a) {
  float prod = a * a;
  vec2 a_fp64 = split(a);
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
  float err = ((a_fp64.x * a_fp64.x - prod) * fp64.ONE + 2.0 * a_fp64.x *
    a_fp64.y * fp64.ONE * fp64.ONE) + a_fp64.y * a_fp64.y * fp64.ONE * fp64.ONE * fp64.ONE;
#else
  float err = ((a_fp64.x * a_fp64.x - prod) + 2.0 * a_fp64.x * a_fp64.y) + a_fp64.y * a_fp64.y;
#endif
  return vec2(prod, err);
}

vec2 twoProd(float a, float b) {
  float prod = a * b;
  vec2 a_fp64 = split(a);
  vec2 b_fp64 = split(b);
  float err = ((a_fp64.x * b_fp64.x - prod) + a_fp64.x * b_fp64.y +
    a_fp64.y * b_fp64.x) + a_fp64.y * b_fp64.y;
  return vec2(prod, err);
}

vec2 sum_fp64(vec2 a, vec2 b) {
  vec2 s, t;
  s = twoSum(a.x, b.x);
  t = twoSum(a.y, b.y);
  s.y += t.x;
  s = quickTwoSum(s.x, s.y);
  s.y += t.y;
  s = quickTwoSum(s.x, s.y);
  return s;
}

vec2 sub_fp64(vec2 a, vec2 b) {
  vec2 s, t;
  s = twoSub(a.x, b.x);
  t = twoSub(a.y, b.y);
  s.y += t.x;
  s = quickTwoSum(s.x, s.y);
  s.y += t.y;
  s = quickTwoSum(s.x, s.y);
  return s;
}

vec2 mul_fp64(vec2 a, vec2 b) {
  vec2 prod = twoProd(a.x, b.x);
  // y component is for the error
  prod.y += a.x * b.y;
#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)
  prod = split2(prod);
#endif
  prod = quickTwoSum(prod.x, prod.y);
  prod.y += a.y * b.x;
#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)
  prod = split2(prod);
#endif
  prod = quickTwoSum(prod.x, prod.y);
  return prod;
}

vec2 div_fp64(vec2 a, vec2 b) {
  float xn = 1.0 / b.x;
#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)
  vec2 yn = mul_fp64(a, vec2(xn, 0));
#else
  vec2 yn = a * xn;
#endif
  float diff = (sub_fp64(a, mul_fp64(b, yn))).x;
  vec2 prod = twoProd(xn, diff);
  return sum_fp64(yn, prod);
}

vec2 sqrt_fp64(vec2 a) {
  if (a.x == 0.0 && a.y == 0.0) return vec2(0.0, 0.0);
  if (a.x < 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);

  float x = 1.0 / sqrt(a.x);
  float yn = a.x * x;
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
  vec2 yn_sqr = twoSqr(yn) * fp64.ONE;
#else
  vec2 yn_sqr = twoSqr(yn);
#endif
  float diff = sub_fp64(a, yn_sqr).x;
  vec2 prod = twoProd(x * 0.5, diff);
#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)
  return sum_fp64(split(yn), prod);
#else
  return sum_fp64(vec2(yn, 0.0), prod);
#endif
}
`,FL={ONE:1},DL={name:"fp64arithmetic",vs:NL,defaultUniforms:FL,uniformTypes:{ONE:"f32"},fp64ify:tM,fp64LowPart:ML,fp64ifyMatrix4:IL},BL=[0,1,1,1],LL=`uniform pickingUniforms {
  float isActive;
  float isAttribute;
  float isHighlightActive;
  float useFloatColors;
  vec3 highlightedObjectColor;
  vec4 highlightColor;
} picking;

out vec4 picking_vRGBcolor_Avalid;

// Normalize unsigned byte color to 0-1 range
vec3 picking_normalizeColor(vec3 color) {
  return picking.useFloatColors > 0.5 ? color : color / 255.0;
}

// Normalize unsigned byte color to 0-1 range
vec4 picking_normalizeColor(vec4 color) {
  return picking.useFloatColors > 0.5 ? color : color / 255.0;
}

bool picking_isColorZero(vec3 color) {
  return dot(color, vec3(1.0)) < 0.00001;
}

bool picking_isColorValid(vec3 color) {
  return dot(color, vec3(1.0)) > 0.00001;
}

// Check if this vertex is highlighted 
bool isVertexHighlighted(vec3 vertexColor) {
  vec3 highlightedObjectColor = picking_normalizeColor(picking.highlightedObjectColor);
  return
    bool(picking.isHighlightActive) && picking_isColorZero(abs(vertexColor - highlightedObjectColor));
}

// Set the current picking color
void picking_setPickingColor(vec3 pickingColor) {
  pickingColor = picking_normalizeColor(pickingColor);

  if (bool(picking.isActive)) {
    // Use alpha as the validity flag. If pickingColor is [0, 0, 0] fragment is non-pickable
    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));

    if (!bool(picking.isAttribute)) {
      // Stores the picking color so that the fragment shader can render it during picking
      picking_vRGBcolor_Avalid.rgb = pickingColor;
    }
  } else {
    // Do the comparison with selected item color in vertex shader as it should mean fewer compares
    picking_vRGBcolor_Avalid.a = float(isVertexHighlighted(pickingColor));
  }
}

void picking_setPickingAttribute(float value) {
  if (bool(picking.isAttribute)) {
    picking_vRGBcolor_Avalid.r = value;
  }
}

void picking_setPickingAttribute(vec2 value) {
  if (bool(picking.isAttribute)) {
    picking_vRGBcolor_Avalid.rg = value;
  }
}

void picking_setPickingAttribute(vec3 value) {
  if (bool(picking.isAttribute)) {
    picking_vRGBcolor_Avalid.rgb = value;
  }
}
`,UL=`uniform pickingUniforms {
  float isActive;
  float isAttribute;
  float isHighlightActive;
  float useFloatColors;
  vec3 highlightedObjectColor;
  vec4 highlightColor;
} picking;

in vec4 picking_vRGBcolor_Avalid;

/*
 * Returns highlight color if this item is selected.
 */
vec4 picking_filterHighlightColor(vec4 color) {
  // If we are still picking, we don't highlight
  if (picking.isActive > 0.5) {
    return color;
  }

  bool selected = bool(picking_vRGBcolor_Avalid.a);

  if (selected) {
    // Blend in highlight color based on its alpha value
    float highLightAlpha = picking.highlightColor.a;
    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);
    float highLightRatio = highLightAlpha / blendedAlpha;

    vec3 blendedRGB = mix(color.rgb, picking.highlightColor.rgb, highLightRatio);
    return vec4(blendedRGB, blendedAlpha);
  } else {
    return color;
  }
}

/*
 * Returns picking color if picking enabled else unmodified argument.
 */
vec4 picking_filterPickingColor(vec4 color) {
  if (bool(picking.isActive)) {
    if (picking_vRGBcolor_Avalid.a == 0.0) {
      discard;
    }
    return picking_vRGBcolor_Avalid;
  }
  return color;
}

/*
 * Returns picking color if picking is enabled if not
 * highlight color if this item is selected, otherwise unmodified argument.
 */
vec4 picking_filterColor(vec4 color) {
  vec4 highlightColor = picking_filterHighlightColor(color);
  return picking_filterPickingColor(highlightColor);
}
`,yT={props:{},uniforms:{},name:"picking",uniformTypes:{isActive:"f32",isAttribute:"f32",isHighlightActive:"f32",useFloatColors:"f32",highlightedObjectColor:"vec3<f32>",highlightColor:"vec4<f32>"},defaultUniforms:{isActive:!1,isAttribute:!1,isHighlightActive:!1,useFloatColors:!0,highlightedObjectColor:[0,0,0],highlightColor:BL},vs:LL,fs:UL,getUniforms:zL};function zL(t={},e){const r={};if(t.highlightedObjectColor!==void 0)if(t.highlightedObjectColor===null)r.isHighlightActive=!1;else{r.isHighlightActive=!0;const n=t.highlightedObjectColor.slice(0,3);r.highlightedObjectColor=n}if(t.highlightColor){const n=Array.from(t.highlightColor,i=>i/255);Number.isFinite(n[3])||(n[3]=1),r.highlightColor=n}return t.isActive!==void 0&&(r.isActive=!!t.isActive,r.isAttribute=!!t.isAttribute),t.useFloatColors!==void 0&&(r.useFloatColors=!!t.useFloatColors),r}const vT=`precision highp int;

// #if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))
struct AmbientLight {
  vec3 color;
};

struct PointLight {
  vec3 color;
  vec3 position;
  vec3 attenuation; // 2nd order x:Constant-y:Linear-z:Exponential
};

struct DirectionalLight {
  vec3 color;
  vec3 direction;
};

uniform lightingUniforms {
  int enabled;
  int lightType;

  int directionalLightCount;
  int pointLightCount;

  vec3 ambientColor;

  vec3 lightColor0;
  vec3 lightPosition0;
  vec3 lightDirection0;
  vec3 lightAttenuation0;

  vec3 lightColor1;
  vec3 lightPosition1;
  vec3 lightDirection1;
  vec3 lightAttenuation1;

  vec3 lightColor2;
  vec3 lightPosition2;
  vec3 lightDirection2;
  vec3 lightAttenuation2;
} lighting;

PointLight lighting_getPointLight(int index) {
  switch (index) {
    case 0:
      return PointLight(lighting.lightColor0, lighting.lightPosition0, lighting.lightAttenuation0);
    case 1:
      return PointLight(lighting.lightColor1, lighting.lightPosition1, lighting.lightAttenuation1);
    case 2:
    default:  
      return PointLight(lighting.lightColor2, lighting.lightPosition2, lighting.lightAttenuation2);
  }
}

DirectionalLight lighting_getDirectionalLight(int index) {
  switch (index) {
    case 0:
      return DirectionalLight(lighting.lightColor0, lighting.lightDirection0);
    case 1:
      return DirectionalLight(lighting.lightColor1, lighting.lightDirection1);
    case 2:
    default:   
      return DirectionalLight(lighting.lightColor2, lighting.lightDirection2);
  }
} 

float getPointLightAttenuation(PointLight pointLight, float distance) {
  return pointLight.attenuation.x
       + pointLight.attenuation.y * distance
       + pointLight.attenuation.z * distance * distance;
}

// #endif
`,$L=`// #if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))
struct AmbientLight {
  color: vec3<f32>,
};

struct PointLight {
  color: vec3<f32>,
  position: vec3<f32>,
  attenuation: vec3<f32>, // 2nd order x:Constant-y:Linear-z:Exponential
};

struct DirectionalLight {
  color: vec3<f32>,
  direction: vec3<f32>,
};

struct lightingUniforms {
  enabled: i32,
  poightCount: i32,
  directionalLightCount: i32,

  ambientColor: vec3<f32>,

  // TODO - support multiple lights by uncommenting arrays below
  lightType: i32,
  lightColor: vec3<f32>,
  lightDirection: vec3<f32>,
  lightPosition: vec3<f32>,
  lightAttenuation: vec3<f32>,

  // AmbientLight ambientLight;
  // PointLight pointLight[MAX_LIGHTS];
  // DirectionalLight directionalLight[MAX_LIGHTS];
};

// Binding 0:1 is reserved for lighting (Note: could go into separate bind group as it is stable across draw calls)
@binding(1) @group(0) var<uniform> lighting : lightingUniforms;

fn lighting_getPointLight(index: i32) -> PointLight {
  return PointLight(lighting.lightColor, lighting.lightPosition, lighting.lightAttenuation);
}

fn lighting_getDirectionalLight(index: i32) -> DirectionalLight {
  return DirectionalLight(lighting.lightColor, lighting.lightDirection);
} 

fn getPointLightAttenuation(pointLight: PointLight, distance: f32) -> f32 {
  return pointLight.attenuation.x
       + pointLight.attenuation.y * distance
       + pointLight.attenuation.z * distance * distance;
}
`,rM=3,VL=255;var uc;(function(t){t[t.POINT=0]="POINT",t[t.DIRECTIONAL=1]="DIRECTIONAL"})(uc||(uc={}));const Ff={props:{},uniforms:{},name:"lighting",defines:{MAX_LIGHTS:rM},uniformTypes:{enabled:"i32",lightType:"i32",directionalLightCount:"i32",pointLightCount:"i32",ambientLightColor:"vec3<f32>",lightColor0:"vec3<f32>",lightPosition0:"vec3<f32>",lightDirection0:"vec3<f32>",lightAttenuation0:"vec3<f32>",lightColor1:"vec3<f32>",lightPosition1:"vec3<f32>",lightDirection1:"vec3<f32>",lightAttenuation1:"vec3<f32>",lightColor2:"vec3<f32>",lightPosition2:"vec3<f32>",lightDirection2:"vec3<f32>",lightAttenuation2:"vec3<f32>"},defaultUniforms:{enabled:1,lightType:uc.POINT,directionalLightCount:0,pointLightCount:0,ambientLightColor:[.1,.1,.1],lightColor0:[1,1,1],lightPosition0:[1,1,2],lightDirection0:[1,1,1],lightAttenuation0:[1,0,0],lightColor1:[1,1,1],lightPosition1:[1,1,2],lightDirection1:[1,1,1],lightAttenuation1:[1,0,0],lightColor2:[1,1,1],lightPosition2:[1,1,2],lightDirection2:[1,1,1],lightAttenuation2:[1,0,0]},source:$L,vs:vT,fs:vT,getUniforms:jL};function jL(t,e={}){if(t=t&&{...t},!t)return{...Ff.defaultUniforms};t.lights&&(t={...t,...WL(t.lights),lights:void 0});const{ambientLight:r,pointLights:n,directionalLights:i}=t||{};if(!(r||n&&n.length>0||i&&i.length>0))return{...Ff.defaultUniforms,enabled:0};const o={...Ff.defaultUniforms,...e,...HL({ambientLight:r,pointLights:n,directionalLights:i})};return t.enabled!==void 0&&(o.enabled=t.enabled?1:0),o}function HL({ambientLight:t,pointLights:e=[],directionalLights:r=[]}){const n={};n.ambientLightColor=Wg(t);let i=0;for(const s of e){n.lightType=uc.POINT;const o=i;n[`lightColor${o}`]=Wg(s),n[`lightPosition${o}`]=s.position,n[`lightAttenuation${o}`]=s.attenuation||[1,0,0],i++}for(const s of r){n.lightType=uc.DIRECTIONAL;const o=i;n[`lightColor${o}`]=Wg(s),n[`lightDirection${o}`]=s.direction,i++}return i>rM&&fe.warn("MAX_LIGHTS exceeded")(),n.directionalLightCount=r.length,n.pointLightCount=e.length,n}function WL(t){var r,n;const e={pointLights:[],directionalLights:[]};for(const i of t||[])switch(i.type){case"ambient":e.ambientLight=i;break;case"directional":(r=e.directionalLights)==null||r.push(i);break;case"point":(n=e.pointLights)==null||n.push(i);break}return e}function Wg(t={}){const{color:e=[0,0,0],intensity:r=1}=t;return e.map(n=>n*r/VL)}const qL=`uniform phongMaterialUniforms {
  uniform float ambient;
  uniform float diffuse;
  uniform float shininess;
  uniform vec3  specularColor;
} material;
`,XL=`uniform phongMaterialUniforms {
  uniform float ambient;
  uniform float diffuse;
  uniform float shininess;
  uniform vec3  specularColor;
} material;

vec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {
  vec3 halfway_direction = normalize(light_direction + view_direction);
  float lambertian = dot(light_direction, normal_worldspace);
  float specular = 0.0;
  if (lambertian > 0.0) {
    float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);
    specular = pow(specular_angle, material.shininess);
  }
  lambertian = max(lambertian, 0.0);
  return (lambertian * material.diffuse * surfaceColor + specular * material.specularColor) * color;
}

vec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
  vec3 lightColor = surfaceColor;

  if (lighting.enabled == 0) {
    return lightColor;
  }

  vec3 view_direction = normalize(cameraPosition - position_worldspace);
  lightColor = material.ambient * surfaceColor * lighting.ambientColor;

  for (int i = 0; i < lighting.pointLightCount; i++) {
    PointLight pointLight = lighting_getPointLight(i);
    vec3 light_position_worldspace = pointLight.position;
    vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
    float light_attenuation = getPointLightAttenuation(pointLight, distance(light_position_worldspace, position_worldspace));
    lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color / light_attenuation);
  }

  int totalLights = min(MAX_LIGHTS, lighting.pointLightCount + lighting.directionalLightCount);
  for (int i = lighting.pointLightCount; i < totalLights; i++) {
    DirectionalLight directionalLight = lighting_getDirectionalLight(i);
    lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
  }
  
  return lightColor;
}
`,nM={props:{},name:"gouraudMaterial",vs:XL.replace("phongMaterial","gouraudMaterial"),fs:qL.replace("phongMaterial","gouraudMaterial"),defines:{LIGHTING_VERTEX:1},dependencies:[Ff],uniformTypes:{ambient:"f32",diffuse:"f32",shininess:"f32",specularColor:"vec3<f32>"},defaultUniforms:{ambient:.35,diffuse:.6,shininess:32,specularColor:[.15,.15,.15]},getUniforms(t){const e={...t};return e.specularColor&&(e.specularColor=e.specularColor.map(r=>r/255)),{...nM.defaultUniforms,...e}}},bT=`uniform layerUniforms {
  uniform float opacity;
} layer;
`,KL={name:"layer",vs:bT,fs:bT,getUniforms:t=>({opacity:Math.pow(t.opacity,1/2.2)}),uniformTypes:{opacity:"f32"}},iM="#define SMOOTH_EDGE_RADIUS 0.5",YL=`
${iM}

struct VertexGeometry {
  vec4 position;
  vec3 worldPosition;
  vec3 worldPositionAlt;
  vec3 normal;
  vec2 uv;
  vec3 pickingColor;
} geometry = VertexGeometry(
  vec4(0.0, 0.0, 1.0, 0.0),
  vec3(0.0),
  vec3(0.0),
  vec3(0.0),
  vec2(0.0),
  vec3(0.0)
);
`,ZL=`
${iM}

struct FragmentGeometry {
  vec2 uv;
} geometry;

float smoothedge(float edge, float x) {
  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);
}
`,sM={name:"geometry",vs:YL,fs:ZL},GL=25;var jt;(function(t){t[t.Start=1]="Start",t[t.Move=2]="Move",t[t.End=4]="End",t[t.Cancel=8]="Cancel"})(jt||(jt={}));var qt;(function(t){t[t.None=0]="None",t[t.Left=1]="Left",t[t.Right=2]="Right",t[t.Up=4]="Up",t[t.Down=8]="Down",t[t.Horizontal=3]="Horizontal",t[t.Vertical=12]="Vertical",t[t.All=15]="All"})(qt||(qt={}));var $e;(function(t){t[t.Possible=1]="Possible",t[t.Began=2]="Began",t[t.Changed=4]="Changed",t[t.Ended=8]="Ended",t[t.Recognized=8]="Recognized",t[t.Cancelled=16]="Cancelled",t[t.Failed=32]="Failed"})($e||($e={}));const QL="compute",JL="auto",Wy="manipulation",Df="none",qy="pan-x",Xy="pan-y";function e8(t){if(t.includes(Df))return Df;const e=t.includes(qy),r=t.includes(Xy);return e&&r?Df:e||r?e?qy:Xy:t.includes(Wy)?Wy:JL}class t8{constructor(e,r){this.actions="",this.manager=e,this.set(r)}set(e){e===QL&&(e=this.compute()),this.manager.element&&(this.manager.element.style.touchAction=e,this.actions=e)}update(){this.set(this.manager.options.touchAction)}compute(){let e=[];for(const r of this.manager.recognizers)r.options.enable&&(e=e.concat(r.getTouchAction()));return e8(e.join(" "))}}function dh(t){return t.trim().split(/\s+/g)}function qg(t,e,r){if(t)for(const n of dh(e))t.addEventListener(n,r,!1)}function Xg(t,e,r){if(t)for(const n of dh(e))t.removeEventListener(n,r,!1)}function wT(t){return(t.ownerDocument||t).defaultView}function r8(t,e){let r=t;for(;r;){if(r===e)return!0;r=r.parentNode}return!1}function oM(t){const e=t.length;if(e===1)return{x:Math.round(t[0].clientX),y:Math.round(t[0].clientY)};let r=0,n=0,i=0;for(;i<e;)r+=t[i].clientX,n+=t[i].clientY,i++;return{x:Math.round(r/e),y:Math.round(n/e)}}function ST(t){const e=[];let r=0;for(;r<t.pointers.length;)e[r]={clientX:Math.round(t.pointers[r].clientX),clientY:Math.round(t.pointers[r].clientY)},r++;return{timeStamp:Date.now(),pointers:e,center:oM(e),deltaX:t.deltaX,deltaY:t.deltaY}}function aM(t,e){const r=e.x-t.x,n=e.y-t.y;return Math.sqrt(r*r+n*n)}function xT(t,e){const r=e.clientX-t.clientX,n=e.clientY-t.clientY;return Math.sqrt(r*r+n*n)}function n8(t,e){const r=e.x-t.x,n=e.y-t.y;return Math.atan2(n,r)*180/Math.PI}function TT(t,e){const r=e.clientX-t.clientX,n=e.clientY-t.clientY;return Math.atan2(n,r)*180/Math.PI}function lM(t,e){return t===e?qt.None:Math.abs(t)>=Math.abs(e)?t<0?qt.Left:qt.Right:e<0?qt.Up:qt.Down}function i8(t,e){const r=e.center;let n=t.offsetDelta,i=t.prevDelta;const s=t.prevInput;return(e.eventType===jt.Start||(s==null?void 0:s.eventType)===jt.End)&&(i=t.prevDelta={x:(s==null?void 0:s.deltaX)||0,y:(s==null?void 0:s.deltaY)||0},n=t.offsetDelta={x:r.x,y:r.y}),{deltaX:i.x+(r.x-n.x),deltaY:i.y+(r.y-n.y)}}function cM(t,e,r){return{x:e/t||0,y:r/t||0}}function s8(t,e){return xT(e[0],e[1])/xT(t[0],t[1])}function o8(t,e){return TT(e[1],e[0])-TT(t[1],t[0])}function a8(t,e){const r=t.lastInterval||e,n=e.timeStamp-r.timeStamp;let i,s,o,l;if(e.eventType!==jt.Cancel&&(n>GL||r.velocity===void 0)){const u=e.deltaX-r.deltaX,f=e.deltaY-r.deltaY,d=cM(n,u,f);s=d.x,o=d.y,i=Math.abs(d.x)>Math.abs(d.y)?d.x:d.y,l=lM(u,f),t.lastInterval=e}else i=r.velocity,s=r.velocityX,o=r.velocityY,l=r.direction;e.velocity=i,e.velocityX=s,e.velocityY=o,e.direction=l}function l8(t,e){const{session:r}=t,{pointers:n}=e,{length:i}=n;r.firstInput||(r.firstInput=ST(e)),i>1&&!r.firstMultiple?r.firstMultiple=ST(e):i===1&&(r.firstMultiple=!1);const{firstInput:s,firstMultiple:o}=r,l=o?o.center:s.center,u=e.center=oM(n);e.timeStamp=Date.now(),e.deltaTime=e.timeStamp-s.timeStamp,e.angle=n8(l,u),e.distance=aM(l,u);const{deltaX:f,deltaY:d}=i8(r,e);e.deltaX=f,e.deltaY=d,e.offsetDirection=lM(e.deltaX,e.deltaY);const g=cM(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=g.x,e.overallVelocityY=g.y,e.overallVelocity=Math.abs(g.x)>Math.abs(g.y)?g.x:g.y,e.scale=o?s8(o.pointers,n):1,e.rotation=o?o8(o.pointers,n):0,e.maxPointers=r.prevInput?e.pointers.length>r.prevInput.maxPointers?e.pointers.length:r.prevInput.maxPointers:e.pointers.length;let m=t.element;return r8(e.srcEvent.target,m)&&(m=e.srcEvent.target),e.target=m,a8(r,e),e}function c8(t,e,r){const n=r.pointers.length,i=r.changedPointers.length,s=e&jt.Start&&n-i===0,o=e&(jt.End|jt.Cancel)&&n-i===0;r.isFirst=!!s,r.isFinal=!!o,s&&(t.session={}),r.eventType=e;const l=l8(t,r);t.emit("hammer.input",l),t.recognize(l),t.session.prevInput=l}let u8=class{constructor(e){this.evEl="",this.evWin="",this.evTarget="",this.domHandler=r=>{this.manager.options.enable&&this.handler(r)},this.manager=e,this.element=e.element,this.target=e.options.inputTarget||e.element}callback(e,r){c8(this.manager,e,r)}init(){qg(this.element,this.evEl,this.domHandler),qg(this.target,this.evTarget,this.domHandler),qg(wT(this.element),this.evWin,this.domHandler)}destroy(){Xg(this.element,this.evEl,this.domHandler),Xg(this.target,this.evTarget,this.domHandler),Xg(wT(this.element),this.evWin,this.domHandler)}};const f8={pointerdown:jt.Start,pointermove:jt.Move,pointerup:jt.End,pointercancel:jt.Cancel,pointerout:jt.Cancel},h8="pointerdown",d8="pointermove pointerup pointercancel";class p8 extends u8{constructor(e){super(e),this.evEl=h8,this.evWin=d8,this.store=this.manager.session.pointerEvents=[],this.init()}handler(e){const{store:r}=this;let n=!1;const i=f8[e.type],s=e.pointerType,o=s==="touch";let l=r.findIndex(u=>u.pointerId===e.pointerId);i&jt.Start&&(e.buttons||o)?l<0&&(r.push(e),l=r.length-1):i&(jt.End|jt.Cancel)&&(n=!0),!(l<0)&&(r[l]=e,this.callback(i,{pointers:r,changedPointers:[e],eventType:i,pointerType:s,srcEvent:e}),n&&r.splice(l,1))}}const g8=["","webkit","Moz","MS","ms","o"];function m8(t,e){const r=e[0].toUpperCase()+e.slice(1);for(const n of g8){const i=n?n+r:e;if(i in t)return i}}const _8=1,ET=2,AT={touchAction:"compute",enable:!0,inputTarget:null,cssProps:{userSelect:"none",userDrag:"none",touchCallout:"none",tapHighlightColor:"rgba(0,0,0,0)"}};class y8{constructor(e,r){this.options={...AT,...r,cssProps:{...AT.cssProps,...r.cssProps},inputTarget:r.inputTarget||e},this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=new p8(this),this.touchAction=new t8(this,this.options.touchAction),this.toggleCssProps(!0)}set(e){return Object.assign(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this}stop(e){this.session.stopped=e?ET:_8}recognize(e){const{session:r}=this;if(r.stopped)return;this.session.prevented&&e.srcEvent.preventDefault();let n;const{recognizers:i}=this;let{curRecognizer:s}=r;(!s||s&&s.state&$e.Recognized)&&(s=r.curRecognizer=null);let o=0;for(;o<i.length;)n=i[o],r.stopped!==ET&&(!s||n===s||n.canRecognizeWith(s))?n.recognize(e):n.reset(),!s&&n.state&($e.Began|$e.Changed|$e.Ended)&&(s=r.curRecognizer=n),o++}get(e){const{recognizers:r}=this;for(let n=0;n<r.length;n++)if(r[n].options.event===e)return r[n];return null}add(e){if(Array.isArray(e)){for(const n of e)this.add(n);return this}const r=this.get(e.options.event);return r&&this.remove(r),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e}remove(e){if(Array.isArray(e)){for(const n of e)this.remove(n);return this}const r=typeof e=="string"?this.get(e):e;if(r){const{recognizers:n}=this,i=n.indexOf(r);i!==-1&&(n.splice(i,1),this.touchAction.update())}return this}on(e,r){if(!e||!r)return;const{handlers:n}=this;for(const i of dh(e))n[i]=n[i]||[],n[i].push(r)}off(e,r){if(!e)return;const{handlers:n}=this;for(const i of dh(e))r?n[i]&&n[i].splice(n[i].indexOf(r),1):delete n[i]}emit(e,r){const n=this.handlers[e]&&this.handlers[e].slice();if(!n||!n.length)return;const i=r;i.type=e,i.preventDefault=function(){r.srcEvent.preventDefault()};let s=0;for(;s<n.length;)n[s](i),s++}destroy(){this.toggleCssProps(!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}toggleCssProps(e){const{element:r}=this;if(r){for(const[n,i]of Object.entries(this.options.cssProps)){const s=m8(r.style,n);e?(this.oldCssProps[s]=r.style[s],r.style[s]=i):r.style[s]=this.oldCssProps[s]||""}e||(this.oldCssProps={})}}}let v8=1;function b8(){return v8++}function CT(t){return t&$e.Cancelled?"cancel":t&$e.Ended?"end":t&$e.Changed?"move":t&$e.Began?"start":""}class uM{constructor(e){this.options=e,this.id=b8(),this.state=$e.Possible,this.simultaneous={},this.requireFail=[]}set(e){return Object.assign(this.options,e),this.manager.touchAction.update(),this}recognizeWith(e){if(Array.isArray(e)){for(const i of e)this.recognizeWith(i);return this}let r;if(typeof e=="string"){if(r=this.manager.get(e),!r)throw new Error(`Cannot find recognizer ${e}`)}else r=e;const{simultaneous:n}=this;return n[r.id]||(n[r.id]=r,r.recognizeWith(this)),this}dropRecognizeWith(e){if(Array.isArray(e)){for(const n of e)this.dropRecognizeWith(n);return this}let r;return typeof e=="string"?r=this.manager.get(e):r=e,r&&delete this.simultaneous[r.id],this}requireFailure(e){if(Array.isArray(e)){for(const i of e)this.requireFailure(i);return this}let r;if(typeof e=="string"){if(r=this.manager.get(e),!r)throw new Error(`Cannot find recognizer ${e}`)}else r=e;const{requireFail:n}=this;return n.indexOf(r)===-1&&(n.push(r),r.requireFailure(this)),this}dropRequireFailure(e){if(Array.isArray(e)){for(const n of e)this.dropRequireFailure(n);return this}let r;if(typeof e=="string"?r=this.manager.get(e):r=e,r){const n=this.requireFail.indexOf(r);n>-1&&this.requireFail.splice(n,1)}return this}hasRequireFailures(){return!!this.requireFail.find(e=>e.options.enable)}canRecognizeWith(e){return!!this.simultaneous[e.id]}emit(e){if(!e)return;const{state:r}=this;r<$e.Ended&&this.manager.emit(this.options.event+CT(r),e),this.manager.emit(this.options.event,e),e.additionalEvent&&this.manager.emit(e.additionalEvent,e),r>=$e.Ended&&this.manager.emit(this.options.event+CT(r),e)}tryEmit(e){this.canEmit()?this.emit(e):this.state=$e.Failed}canEmit(){let e=0;for(;e<this.requireFail.length;){if(!(this.requireFail[e].state&($e.Failed|$e.Possible)))return!1;e++}return!0}recognize(e){const r={...e};if(!this.options.enable){this.reset(),this.state=$e.Failed;return}this.state&($e.Recognized|$e.Cancelled|$e.Failed)&&(this.state=$e.Possible),this.state=this.process(r),this.state&($e.Began|$e.Changed|$e.Ended|$e.Cancelled)&&this.tryEmit(r)}getEventNames(){return[this.options.event]}reset(){}}class fM extends uM{attrTest(e){const r=this.options.pointers;return r===0||e.pointers.length===r}process(e){const{state:r}=this,{eventType:n}=e,i=r&($e.Began|$e.Changed),s=this.attrTest(e);return i&&(n&jt.Cancel||!s)?r|$e.Cancelled:i||s?n&jt.End?r|$e.Ended:r&$e.Began?r|$e.Changed:$e.Began:$e.Failed}}class RT extends uM{constructor(e={}){super({enable:!0,event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10,...e}),this.pTime=null,this.pCenter=null,this._timer=null,this._input=null,this.count=0}getTouchAction(){return[Wy]}process(e){const{options:r}=this,n=e.pointers.length===r.pointers,i=e.distance<r.threshold,s=e.deltaTime<r.time;if(this.reset(),e.eventType&jt.Start&&this.count===0)return this.failTimeout();if(i&&s&&n){if(e.eventType!==jt.End)return this.failTimeout();const o=this.pTime?e.timeStamp-this.pTime<r.interval:!0,l=!this.pCenter||aM(this.pCenter,e.center)<r.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,!l||!o?this.count=1:this.count+=1,this._input=e,this.count%r.taps===0)return this.hasRequireFailures()?(this._timer=setTimeout(()=>{this.state=$e.Recognized,this.tryEmit(this._input)},r.interval),$e.Began):$e.Recognized}return $e.Failed}failTimeout(){return this._timer=setTimeout(()=>{this.state=$e.Failed},this.options.interval),$e.Failed}reset(){clearTimeout(this._timer)}emit(e){this.state===$e.Recognized&&(e.tapCount=this.count,this.manager.emit(this.options.event,e))}}const w8=["","start","move","end","cancel","up","down","left","right"];class PT extends fM{constructor(e={}){super({enable:!0,pointers:1,event:"pan",threshold:10,direction:qt.All,...e}),this.pX=null,this.pY=null}getTouchAction(){const{options:{direction:e}}=this,r=[];return e&qt.Horizontal&&r.push(Xy),e&qt.Vertical&&r.push(qy),r}getEventNames(){return w8.map(e=>this.options.event+e)}directionTest(e){const{options:r}=this;let n=!0,{distance:i}=e,{direction:s}=e;const o=e.deltaX,l=e.deltaY;return s&r.direction||(r.direction&qt.Horizontal?(s=o===0?qt.None:o<0?qt.Left:qt.Right,n=o!==this.pX,i=Math.abs(e.deltaX)):(s=l===0?qt.None:l<0?qt.Up:qt.Down,n=l!==this.pY,i=Math.abs(e.deltaY))),e.direction=s,n&&i>r.threshold&&!!(s&r.direction)}attrTest(e){return super.attrTest(e)&&(!!(this.state&$e.Began)||!(this.state&$e.Began)&&this.directionTest(e))}emit(e){this.pX=e.deltaX,this.pY=e.deltaY;const r=qt[e.direction].toLowerCase();r&&(e.additionalEvent=this.options.event+r),super.emit(e)}}const S8=["","start","move","end","cancel","in","out"];class x8 extends fM{constructor(e={}){super({enable:!0,event:"pinch",threshold:0,pointers:2,...e})}getTouchAction(){return[Df]}getEventNames(){return S8.map(e=>this.options.event+e)}attrTest(e){return super.attrTest(e)&&(Math.abs(e.scale-1)>this.options.threshold||!!(this.state&$e.Began))}emit(e){if(e.scale!==1){const r=e.scale<1?"in":"out";e.additionalEvent=this.options.event+r}super.emit(e)}}class Jh{constructor(e,r,n){this.element=e,this.callback=r,this.options=n}}const T8=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",E8=T8.indexOf("firefox")!==-1,MT=4.000244140625,A8=40,C8=.25;class R8 extends Jh{constructor(e,r,n){super(e,r,{enable:!0,...n}),this.handleEvent=i=>{if(!this.options.enable)return;let s=i.deltaY;globalThis.WheelEvent&&(E8&&i.deltaMode===globalThis.WheelEvent.DOM_DELTA_PIXEL&&(s/=globalThis.devicePixelRatio),i.deltaMode===globalThis.WheelEvent.DOM_DELTA_LINE&&(s*=A8)),s!==0&&s%MT===0&&(s=Math.floor(s/MT)),i.shiftKey&&s&&(s=s*C8),this.callback({type:"wheel",center:{x:i.clientX,y:i.clientY},delta:-s,srcEvent:i,pointerType:"mouse",target:i.target})},e.addEventListener("wheel",this.handleEvent,{passive:!1})}destroy(){this.element.removeEventListener("wheel",this.handleEvent)}enableEventType(e,r){e==="wheel"&&(this.options.enable=r)}}const IT=["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"];class P8 extends Jh{constructor(e,r,n){super(e,r,{enable:!0,...n}),this.handleEvent=s=>{this.handleOverEvent(s),this.handleOutEvent(s),this.handleEnterEvent(s),this.handleLeaveEvent(s),this.handleMoveEvent(s)},this.pressed=!1;const{enable:i}=this.options;this.enableMoveEvent=i,this.enableLeaveEvent=i,this.enableEnterEvent=i,this.enableOutEvent=i,this.enableOverEvent=i,IT.forEach(s=>e.addEventListener(s,this.handleEvent))}destroy(){IT.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,r){switch(e){case"pointermove":this.enableMoveEvent=r;break;case"pointerover":this.enableOverEvent=r;break;case"pointerout":this.enableOutEvent=r;break;case"pointerenter":this.enableEnterEvent=r;break;case"pointerleave":this.enableLeaveEvent=r;break}}handleOverEvent(e){this.enableOverEvent&&e.type==="mouseover"&&this._emit("pointerover",e)}handleOutEvent(e){this.enableOutEvent&&e.type==="mouseout"&&this._emit("pointerout",e)}handleEnterEvent(e){this.enableEnterEvent&&e.type==="mouseenter"&&this._emit("pointerenter",e)}handleLeaveEvent(e){this.enableLeaveEvent&&e.type==="mouseleave"&&this._emit("pointerleave",e)}handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":e.buttons===0&&(this.pressed=!1),this.pressed||this._emit("pointermove",e);break;case"mouseup":this.pressed=!1;break}}_emit(e,r){this.callback({type:e,center:{x:r.clientX,y:r.clientY},srcEvent:r,pointerType:"mouse",target:r.target})}}const OT=["keydown","keyup"];class M8 extends Jh{constructor(e,r,n){super(e,r,{enable:!0,tabIndex:0,...n}),this.handleEvent=i=>{const s=i.target||i.srcElement;s.tagName==="INPUT"&&s.type==="text"||s.tagName==="TEXTAREA"||(this.enableDownEvent&&i.type==="keydown"&&this.callback({type:"keydown",srcEvent:i,key:i.key,target:i.target}),this.enableUpEvent&&i.type==="keyup"&&this.callback({type:"keyup",srcEvent:i,key:i.key,target:i.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,e.tabIndex=this.options.tabIndex,e.style.outline="none",OT.forEach(i=>e.addEventListener(i,this.handleEvent))}destroy(){OT.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,r){e==="keydown"&&(this.enableDownEvent=r),e==="keyup"&&(this.enableUpEvent=r)}}class I8 extends Jh{constructor(e,r,n){super(e,r,n),this.handleEvent=i=>{this.options.enable&&this.callback({type:"contextmenu",center:{x:i.clientX,y:i.clientY},srcEvent:i,pointerType:"mouse",target:i.target})},e.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(e,r){e==="contextmenu"&&(this.options.enable=r)}}const kT=1,Ky=2,NT=4,O8={pointerdown:kT,pointermove:Ky,pointerup:NT,mousedown:kT,mousemove:Ky,mouseup:NT},k8=0,N8=1,F8=2,D8=1,B8=2,L8=4;function U8(t){const e=O8[t.srcEvent.type];if(!e)return null;const{buttons:r,button:n}=t.srcEvent;let i=!1,s=!1,o=!1;return e===Ky?(i=!!(r&D8),s=!!(r&L8),o=!!(r&B8)):(i=n===k8,s=n===N8,o=n===F8),{leftButton:i,middleButton:s,rightButton:o}}function z8(t,e){const r=t.center;if(!r)return null;const n=e.getBoundingClientRect(),i=n.width/e.offsetWidth||1,s=n.height/e.offsetHeight||1,o={x:(r.x-n.left-e.clientLeft)/i,y:(r.y-n.top-e.clientTop)/s};return{center:r,offsetCenter:o}}const $8={srcElement:"root",priority:0};class V8{constructor(e,r){this.handleEvent=n=>{if(this.isEmpty())return;const i=this._normalizeEvent(n);let s=n.srcEvent.target;for(;s&&s!==i.rootElement;){if(this._emit(i,s),i.handled)return;s=s.parentNode}this._emit(i,"root")},this.eventManager=e,this.recognizerName=r,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(e,r,n,i=!1,s=!1){const{handlers:o,handlersByElement:l}=this,u={...$8,...n};let f=l.get(u.srcElement);f||(f=[],l.set(u.srcElement,f));const d={type:e,handler:r,srcElement:u.srcElement,priority:u.priority};i&&(d.once=!0),s&&(d.passive=!0),o.push(d),this._active=this._active||!d.passive;let g=f.length-1;for(;g>=0&&!(f[g].priority>=d.priority);)g--;f.splice(g+1,0,d)}remove(e,r){const{handlers:n,handlersByElement:i}=this;for(let s=n.length-1;s>=0;s--){const o=n[s];if(o.type===e&&o.handler===r){n.splice(s,1);const l=i.get(o.srcElement);l.splice(l.indexOf(o),1),l.length===0&&i.delete(o.srcElement)}}this._active=n.some(s=>!s.passive)}_emit(e,r){const n=this.handlersByElement.get(r);if(n){let i=!1;const s=()=>{e.handled=!0},o=()=>{e.handled=!0,i=!0},l=[];for(let u=0;u<n.length;u++){const{type:f,handler:d,once:g}=n[u];if(d({...e,type:f,stopPropagation:s,stopImmediatePropagation:o}),g&&l.push(n[u]),i)break}for(let u=0;u<l.length;u++){const{type:f,handler:d}=l[u];this.remove(f,d)}}}_normalizeEvent(e){const r=this.eventManager.getElement();return{...e,...U8(e),...z8(e,r),preventDefault:()=>{e.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:r}}}function j8(t){if("recognizer"in t)return t;let e;const r=Array.isArray(t)?[...t]:[t];if(typeof r[0]=="function"){const n=r.shift(),i=r.shift()||{};e=new n(i)}else e=r.shift();return{recognizer:e,recognizeWith:typeof r[0]=="string"?[r[0]]:r[0],requireFailure:typeof r[1]=="string"?[r[1]]:r[1]}}class H8{constructor(e=null,r={}){if(this._onBasicInput=n=>{this.manager.emit(n.srcEvent.type,n)},this._onOtherEvent=n=>{this.manager.emit(n.type,n)},this.options={recognizers:[],events:{},touchAction:"compute",tabIndex:0,cssProps:{},...r},this.events=new Map,this.element=e,!!e){this.manager=new y8(e,this.options);for(const n of this.options.recognizers){const{recognizer:i,recognizeWith:s,requireFailure:o}=j8(n);this.manager.add(i),s&&i.recognizeWith(s),o&&i.requireFailure(o)}this.manager.on("hammer.input",this._onBasicInput),this.wheelInput=new R8(e,this._onOtherEvent,{enable:!1}),this.moveInput=new P8(e,this._onOtherEvent,{enable:!1}),this.keyInput=new M8(e,this._onOtherEvent,{enable:!1,tabIndex:r.tabIndex}),this.contextmenuInput=new I8(e,this._onOtherEvent,{enable:!1}),this.on(this.options.events)}}getElement(){return this.element}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy())}on(e,r,n){this._addEventHandler(e,r,n,!1)}once(e,r,n){this._addEventHandler(e,r,n,!0)}watch(e,r,n){this._addEventHandler(e,r,n,!1,!0)}off(e,r){this._removeEventHandler(e,r)}_toggleRecognizer(e,r){var s,o,l,u;const{manager:n}=this;if(!n)return;const i=n.get(e);i&&(i.set({enable:r}),n.touchAction.update()),(s=this.wheelInput)==null||s.enableEventType(e,r),(o=this.moveInput)==null||o.enableEventType(e,r),(l=this.keyInput)==null||l.enableEventType(e,r),(u=this.contextmenuInput)==null||u.enableEventType(e,r)}_addEventHandler(e,r,n,i,s){if(typeof e!="string"){n=r;for(const[f,d]of Object.entries(e))this._addEventHandler(f,d,n,i,s);return}const{manager:o,events:l}=this;if(!o)return;let u=l.get(e);if(!u){const f=this._getRecognizerName(e)||e;u=new V8(this,f),l.set(e,u),o&&o.on(e,u.handleEvent)}u.add(e,r,n,i,s),u.isEmpty()||this._toggleRecognizer(u.recognizerName,!0)}_removeEventHandler(e,r){if(typeof e!="string"){for(const[s,o]of Object.entries(e))this._removeEventHandler(s,o);return}const{events:n}=this,i=n.get(e);if(i&&(i.remove(e,r),i.isEmpty())){const{recognizerName:s}=i;let o=!1;for(const l of n.values())if(l.recognizerName===s&&!l.isEmpty()){o=!0;break}o||this._toggleRecognizer(s,!1)}}_getRecognizerName(e){var r;return(r=this.manager.recognizers.find(n=>n.getEventNames().includes(e)))==null?void 0:r.options.event}}const We={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(We,"IDENTITY",{get:()=>(je.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const pn={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},Os={common:0,meters:1,pixels:2},Yy={click:"onClick",panstart:"onDragStart",panmove:"onDrag",panend:"onDragEnd"},FT={multipan:[PT,{threshold:10,direction:qt.Vertical,pointers:2}],pinch:[x8,{},null,["multipan"]],pan:[PT,{threshold:1},["pinch"],["multipan"]],dblclick:[RT,{event:"dblclick",taps:2}],click:[RT,{event:"click"},null,["dblclick"]]},W8=Object.keys(We).map(t=>`const int COORDINATE_SYSTEM_${t} = ${We[t]};`).join(""),q8=Object.keys(pn).map(t=>`const int PROJECTION_MODE_${t} = ${pn[t]};`).join(""),X8=Object.keys(Os).map(t=>`const int UNIT_${t.toUpperCase()} = ${Os[t]};`).join(""),K8=`${W8}
${q8}
${X8}
uniform projectUniforms {
bool wrapLongitude;
int coordinateSystem;
vec3 commonUnitsPerMeter;
int projectionMode;
float scale;
vec3 commonUnitsPerWorldUnit;
vec3 commonUnitsPerWorldUnit2;
vec4 center;
mat4 modelMatrix;
mat4 viewProjectionMatrix;
vec2 viewportSize;
float devicePixelRatio;
float focalDistance;
vec3 cameraPosition;
vec3 coordinateOrigin;
vec3 commonOrigin;
bool pseudoMeters;
} project;
const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / (PI * 2.0);
const vec3 ZERO_64_LOW = vec3(0.0);
const float EARTH_RADIUS = 6370972.0;
const float GLOBE_RADIUS = 256.0;
float project_size_at_latitude(float lat) {
float y = clamp(lat, -89.9, 89.9);
return 1.0 / cos(radians(y));
}
float project_size() {
if (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR &&
project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT &&
project.pseudoMeters == false) {
if (geometry.position.w == 0.0) {
return project_size_at_latitude(geometry.worldPosition.y);
}
float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;
float y2 = y * y;
float y4 = y2 * y2;
float y6 = y4 * y2;
return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;
}
return 1.0;
}
float project_size_at_latitude(float meters, float lat) {
return meters * project.commonUnitsPerMeter.z * project_size_at_latitude(lat);
}
float project_size(float meters) {
return meters * project.commonUnitsPerMeter.z * project_size();
}
vec2 project_size(vec2 meters) {
return meters * project.commonUnitsPerMeter.xy * project_size();
}
vec3 project_size(vec3 meters) {
return meters * project.commonUnitsPerMeter * project_size();
}
vec4 project_size(vec4 meters) {
return vec4(meters.xyz * project.commonUnitsPerMeter, meters.w);
}
mat3 project_get_orientation_matrix(vec3 up) {
vec3 uz = normalize(up);
vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));
vec3 uy = cross(uz, ux);
return mat3(ux, uy, uz);
}
bool project_needs_rotation(vec3 commonPosition, out mat3 transform) {
if (project.projectionMode == PROJECTION_MODE_GLOBE) {
transform = project_get_orientation_matrix(commonPosition);
return true;
}
return false;
}
vec3 project_normal(vec3 vector) {
vec4 normal_modelspace = project.modelMatrix * vec4(vector, 0.0);
vec3 n = normalize(normal_modelspace.xyz * project.commonUnitsPerMeter);
mat3 rotation;
if (project_needs_rotation(geometry.position.xyz, rotation)) {
n = rotation * n;
}
return n;
}
vec4 project_offset_(vec4 offset) {
float dy = offset.y;
vec3 commonUnitsPerWorldUnit = project.commonUnitsPerWorldUnit + project.commonUnitsPerWorldUnit2 * dy;
return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);
}
vec2 project_mercator_(vec2 lnglat) {
float x = lnglat.x;
if (project.wrapLongitude) {
x = mod(x + 180., 360.0) - 180.;
}
float y = clamp(lnglat.y, -89.9, 89.9);
return vec2(
radians(x) + PI,
PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))
) * WORLD_SCALE;
}
vec3 project_globe_(vec3 lnglatz) {
float lambda = radians(lnglatz.x);
float phi = radians(lnglatz.y);
float cosPhi = cos(phi);
float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;
return vec3(
sin(lambda) * cosPhi,
-cos(lambda) * cosPhi,
sin(phi)
) * D;
}
vec4 project_position(vec4 position, vec3 position64Low) {
vec4 position_world = project.modelMatrix * position;
if (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR) {
if (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
return vec4(
project_mercator_(position_world.xy),
project_size_at_latitude(position_world.z, position_world.y),
position_world.w
);
}
if (project.coordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {
position_world.xyz += project.coordinateOrigin;
}
}
if (project.projectionMode == PROJECTION_MODE_GLOBE) {
if (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
return vec4(
project_globe_(position_world.xyz),
position_world.w
);
}
}
if (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {
if (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
if (abs(position_world.y - project.coordinateOrigin.y) > 0.25) {
return vec4(
project_mercator_(position_world.xy) - project.commonOrigin.xy,
project_size(position_world.z),
position_world.w
);
}
}
}
if (project.projectionMode == PROJECTION_MODE_IDENTITY ||
(project.projectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&
(project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
project.coordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {
position_world.xyz -= project.coordinateOrigin;
}
return project_offset_(position_world) + project_offset_(project.modelMatrix * vec4(position64Low, 0.0));
}
vec4 project_position(vec4 position) {
return project_position(position, ZERO_64_LOW);
}
vec3 project_position(vec3 position, vec3 position64Low) {
vec4 projected_position = project_position(vec4(position, 1.0), position64Low);
return projected_position.xyz;
}
vec3 project_position(vec3 position) {
vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);
return projected_position.xyz;
}
vec2 project_position(vec2 position) {
vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);
return projected_position.xy;
}
vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
return viewProjectionMatrix * position + center;
}
vec4 project_common_position_to_clipspace(vec4 position) {
return project_common_position_to_clipspace(position, project.viewProjectionMatrix, project.center);
}
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
vec2 offset = pixels / project.viewportSize * project.devicePixelRatio * 2.0;
return offset * project.focalDistance;
}
float project_size_to_pixel(float meters) {
return project_size(meters) * project.scale;
}
float project_size_to_pixel(float size, int unit) {
if (unit == UNIT_METERS) return project_size_to_pixel(size);
if (unit == UNIT_COMMON) return size * project.scale;
return size;
}
float project_pixel_size(float pixels) {
return pixels / project.scale;
}
vec2 project_pixel_size(vec2 pixels) {
return pixels / project.scale;
}
`;function Y8(t,e){if(t===e)return!0;if(Array.isArray(t)){const r=t.length;if(!e||e.length!==r)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}return!1}function Pc(t){let e={},r;return n=>{for(const i in n)if(!Y8(n[i],e[i])){r=t(n),e=n;break}return r}}const DT=[0,0,0,0],Z8=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],hM=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],G8=[0,0,0],dM=[0,0,0],Q8=Pc(t9);function pM(t,e,r=dM){r.length<3&&(r=[r[0],r[1],0]);let n=r,i,s=!0;switch(e===We.LNGLAT_OFFSETS||e===We.METER_OFFSETS?i=r:i=t.isGeospatial?[Math.fround(t.longitude),Math.fround(t.latitude),0]:null,t.projectionMode){case pn.WEB_MERCATOR:(e===We.LNGLAT||e===We.CARTESIAN)&&(i=[0,0,0],s=!1);break;case pn.WEB_MERCATOR_AUTO_OFFSET:e===We.LNGLAT?n=i:e===We.CARTESIAN&&(n=[Math.fround(t.center[0]),Math.fround(t.center[1]),0],i=t.unprojectPosition(n),n[0]-=r[0],n[1]-=r[1],n[2]-=r[2]);break;case pn.IDENTITY:n=t.position.map(Math.fround),n[2]=n[2]||0;break;case pn.GLOBE:s=!1,i=null;break;default:s=!1}return{geospatialOrigin:i,shaderCoordinateOrigin:n,offsetMode:s}}function J8(t,e,r){const{viewMatrixUncentered:n,projectionMatrix:i}=t;let{viewMatrix:s,viewProjectionMatrix:o}=t,l=DT,u=DT,f=t.cameraPosition;const{geospatialOrigin:d,shaderCoordinateOrigin:g,offsetMode:m}=pM(t,e,r);return m&&(u=t.projectPosition(d||g),f=[f[0]-u[0],f[1]-u[1],f[2]-u[2]],u[3]=1,l=Ia([],u,o),s=n||s,o=Cs([],i,s),o=Cs([],o,Z8)),{viewMatrix:s,viewProjectionMatrix:o,projectionCenter:l,originCommon:u,cameraPosCommon:f,shaderCoordinateOrigin:g,geospatialOrigin:d}}function e9({viewport:t,devicePixelRatio:e=1,modelMatrix:r=null,coordinateSystem:n=We.DEFAULT,coordinateOrigin:i=dM,autoWrapLongitude:s=!1}){n===We.DEFAULT&&(n=t.isGeospatial?We.LNGLAT:We.CARTESIAN);const o=Q8({viewport:t,devicePixelRatio:e,coordinateSystem:n,coordinateOrigin:i});return o.wrapLongitude=s,o.modelMatrix=r||hM,o}function t9({viewport:t,devicePixelRatio:e,coordinateSystem:r,coordinateOrigin:n}){const{projectionCenter:i,viewProjectionMatrix:s,originCommon:o,cameraPosCommon:l,shaderCoordinateOrigin:u,geospatialOrigin:f}=J8(t,r,n),d=t.getDistanceScales(),g=[t.width*e,t.height*e],m=Ia([],[0,0,-t.focalDistance,1],t.projectionMatrix)[3]||1,y={coordinateSystem:r,projectionMode:t.projectionMode,coordinateOrigin:u,commonOrigin:o.slice(0,3),center:i,pseudoMeters:!!t._pseudoMeters,viewportSize:g,devicePixelRatio:e,focalDistance:m,commonUnitsPerMeter:d.unitsPerMeter,commonUnitsPerWorldUnit:d.unitsPerMeter,commonUnitsPerWorldUnit2:G8,scale:t.scale,wrapLongitude:!1,viewProjectionMatrix:s,modelMatrix:hM,cameraPosition:l};if(f){const w=t.getDistanceScales(f);switch(r){case We.METER_OFFSETS:y.commonUnitsPerWorldUnit=w.unitsPerMeter,y.commonUnitsPerWorldUnit2=w.unitsPerMeter2;break;case We.LNGLAT:case We.LNGLAT_OFFSETS:t._pseudoMeters||(y.commonUnitsPerMeter=w.unitsPerMeter),y.commonUnitsPerWorldUnit=w.unitsPerDegree,y.commonUnitsPerWorldUnit2=w.unitsPerDegree2;break;case We.CARTESIAN:y.commonUnitsPerWorldUnit=[1,1,w.unitsPerMeter[2]],y.commonUnitsPerWorldUnit2=[0,0,w.unitsPerMeter2[2]];break}}return y}const r9={};function n9(t=r9){return"viewport"in t?e9(t):{}}const Jv={name:"project",dependencies:[kL,sM],vs:K8,getUniforms:n9,uniformTypes:{wrapLongitude:"f32",coordinateSystem:"i32",commonUnitsPerMeter:"vec3<f32>",projectionMode:"i32",scale:"f32",commonUnitsPerWorldUnit:"vec3<f32>",commonUnitsPerWorldUnit2:"vec3<f32>",center:"vec4<f32>",modelMatrix:"mat4x4<f32>",viewProjectionMatrix:"mat4x4<f32>",viewportSize:"vec2<f32>",devicePixelRatio:"f32",focalDistance:"f32",cameraPosition:"vec3<f32>",coordinateOrigin:"vec3<f32>",commonOrigin:"vec3<f32>",pseudoMeters:"f32"}},i9=`
vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition
) {
  vec3 projectedPosition = project_position(position, position64Low);
  mat3 rotation;
  if (project_needs_rotation(projectedPosition, rotation)) {
    // offset is specified as ENU
    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe
    offset = rotation * offset;
  }
  commonPosition = vec4(projectedPosition + offset, 1.0);
  return project_common_position_to_clipspace(commonPosition);
}

vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset
) {
  vec4 commonPosition;
  return project_position_to_clipspace(position, position64Low, offset, commonPosition);
}
`,Oa={name:"project32",dependencies:[Jv],vs:i9};function s9(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function ma(t,e){const r=Ia([],e,t);return Qv(r,r,1/r[3]),r}function BT(t,e){const r=t%e;return r<0?e+r:r}function Zy(t,e,r){return t<e?e:t>r?r:t}function o9(t){return Math.log(t)*Math.LOG2E}const eb=Math.log2||o9;function ni(t,e){if(!t)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const gn=Math.PI,gM=gn/4,Jr=gn/180,Gy=180/gn,xa=512,ph=4003e4,Qy=85.051129,a9=1.5;function l9(t){return eb(t)}function Wi(t){const[e,r]=t;ni(Number.isFinite(e)),ni(Number.isFinite(r)&&r>=-90&&r<=90,"invalid latitude");const n=e*Jr,i=r*Jr,s=xa*(n+gn)/(2*gn),o=xa*(gn+Math.log(Math.tan(gM+i*.5)))/(2*gn);return[s,o]}function Ta(t){const[e,r]=t,n=e/xa*(2*gn)-gn,i=2*(Math.atan(Math.exp(r/xa*(2*gn)-gn))-gM);return[n*Gy,i*Gy]}function c9(t){const{latitude:e}=t;ni(Number.isFinite(e));const r=Math.cos(e*Jr);return l9(ph*r)-9}function Kg(t){const e=Math.cos(t*Jr);return xa/ph/e}function Jy(t){const{latitude:e,longitude:r,highPrecision:n=!1}=t;ni(Number.isFinite(e)&&Number.isFinite(r));const i=xa,s=Math.cos(e*Jr),o=i/360,l=o/s,u=i/ph/s,f={unitsPerMeter:[u,u,u],metersPerUnit:[1/u,1/u,1/u],unitsPerDegree:[o,l,u],degreesPerUnit:[1/o,1/l,1/u]};if(n){const d=Jr*Math.tan(e*Jr)/s,g=o*d/2,m=i/ph*d,y=m/l*u;f.unitsPerDegree2=[0,g,m],f.unitsPerMeter2=[y,0,y]}return f}function mM(t,e){const[r,n,i]=t,[s,o,l]=e,{unitsPerMeter:u,unitsPerMeter2:f}=Jy({longitude:r,latitude:n,highPrecision:!0}),d=Wi(t);d[0]+=s*(u[0]+f[0]*o),d[1]+=o*(u[1]+f[1]*o);const g=Ta(d),m=(i||0)+(l||0);return Number.isFinite(i)||Number.isFinite(l)?[g[0],g[1],m]:g}function u9(t){const{height:e,pitch:r,bearing:n,altitude:i,scale:s,center:o}=t,l=s9();hh(l,l,[0,0,-i]),ZP(l,l,-r*Jr),GP(l,l,n*Jr);const u=s/e;return Gv(l,l,[u,u,u]),o&&hh(l,l,x5([],o)),l}function f9(t){const{width:e,height:r,altitude:n,pitch:i=0,offset:s,center:o,scale:l,nearZMultiplier:u=1,farZMultiplier:f=1}=t;let{fovy:d=fc(a9)}=t;n!==void 0&&(d=fc(n));const g=d*Jr,m=i*Jr,y=tb(d);let w=y;o&&(w+=o[2]*l/Math.cos(m)/r);const b=g*(.5+(s?s[1]:0)/r),S=Math.sin(b)*w/Math.sin(Zy(Math.PI/2-m-b,.01,Math.PI-.01)),E=Math.sin(m)*S+w,k=w*10,C=Math.min(E*f,k);return{fov:g,aspect:e/r,focalDistance:y,near:u,far:C}}function fc(t){return 2*Math.atan(.5/t)*Gy}function tb(t){return .5/Math.tan(.5*t*Jr)}function _M(t,e){const[r,n,i=0]=t;return ni(Number.isFinite(r)&&Number.isFinite(n)&&Number.isFinite(i)),ma(e,[r,n,i,1])}function ed(t,e,r=0){const[n,i,s]=t;if(ni(Number.isFinite(n)&&Number.isFinite(i),"invalid pixel coordinate"),Number.isFinite(s))return ma(e,[n,i,s,1]);const o=ma(e,[n,i,0,1]),l=ma(e,[n,i,1,1]),u=o[2],f=l[2],d=u===f?0:((r||0)-u)/(f-u);return zP([],o,l,d)}function h9(t){const{width:e,height:r,bounds:n,minExtent:i=0,maxZoom:s=24,offset:o=[0,0]}=t,[[l,u],[f,d]]=n,g=d9(t.padding),m=Wi([l,Zy(d,-85.051129,Qy)]),y=Wi([f,Zy(u,-85.051129,Qy)]),w=[Math.max(Math.abs(y[0]-m[0]),i),Math.max(Math.abs(y[1]-m[1]),i)],b=[e-g.left-g.right-Math.abs(o[0])*2,r-g.top-g.bottom-Math.abs(o[1])*2];ni(b[0]>0&&b[1]>0);const S=b[0]/w[0],E=b[1]/w[1],k=(g.right-g.left)/2/S,C=(g.top-g.bottom)/2/E,P=[(y[0]+m[0])/2+k,(y[1]+m[1])/2+C],M=Ta(P),D=Math.min(s,eb(Math.abs(Math.min(S,E))));return ni(Number.isFinite(D)),{longitude:M[0],latitude:M[1],zoom:D}}function d9(t=0){return typeof t=="number"?{top:t,bottom:t,left:t,right:t}:(ni(Number.isFinite(t.top)&&Number.isFinite(t.bottom)&&Number.isFinite(t.left)&&Number.isFinite(t.right)),t)}const LT=Math.PI/180;function p9(t,e=0){const{width:r,height:n,unproject:i}=t,s={targetZ:e},o=i([0,n],s),l=i([r,n],s);let u,f;const d=t.fovy?.5*t.fovy*LT:Math.atan(.5/t.altitude),g=(90-t.pitch)*LT;return d>g-.01?(u=UT(t,0,e),f=UT(t,r,e)):(u=i([0,0],s),f=i([r,0],s)),[o,l,f,u]}function UT(t,e,r){const{pixelUnprojectionMatrix:n}=t,i=ma(n,[e,0,1,1]),s=ma(n,[e,t.height,1,1]),l=(r*t.distanceScales.unitsPerMeter[2]-i[2])/(s[2]-i[2]),u=zP([],i,s,l),f=Ta(u);return f.push(r),f}const zT=512;function g9(t){const{width:e,height:r,pitch:n=0}=t;let{longitude:i,latitude:s,zoom:o,bearing:l=0}=t;(i<-180||i>180)&&(i=BT(i+180,360)-180),(l<-180||l>180)&&(l=BT(l+180,360)-180);const u=eb(r/zT);if(o<=u)o=u,s=0;else{const f=r/2/Math.pow(2,o),d=Ta([0,f])[1];if(s<d)s=d;else{const g=Ta([0,zT-f])[1];s>g&&(s=g)}}return{width:e,height:r,longitude:i,latitude:s,zoom:o,pitch:n,bearing:l}}const yM=`
uniform shadowUniforms {
  bool drawShadowMap;
  bool useShadowMap;
  vec4 color;
  highp int lightId;
  float lightCount;
  mat4 viewProjectionMatrix0;
  mat4 viewProjectionMatrix1;
  vec4 projectCenter0;
  vec4 projectCenter1;
} shadow;
`,m9=`
const int max_lights = 2;

out vec3 shadow_vPosition[max_lights];

vec4 shadow_setVertexPosition(vec4 position_commonspace) {
  mat4 viewProjectionMatrices[max_lights];
  viewProjectionMatrices[0] = shadow.viewProjectionMatrix0;
  viewProjectionMatrices[1] = shadow.viewProjectionMatrix1;
  vec4 projectCenters[max_lights];
  projectCenters[0] = shadow.projectCenter0;
  projectCenters[1] = shadow.projectCenter1;

  if (shadow.drawShadowMap) {
    return project_common_position_to_clipspace(position_commonspace, viewProjectionMatrices[shadow.lightId], projectCenters[shadow.lightId]);
  }
  if (shadow.useShadowMap) {
    for (int i = 0; i < max_lights; i++) {
      if(i < int(shadow.lightCount)) {
        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, viewProjectionMatrices[i], projectCenters[i]);
        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;
      }
    }
  }
  return gl_Position;
}
`,_9=`
${yM}
${m9}
`,y9=`
const int max_lights = 2;
uniform sampler2D shadow_uShadowMap0;
uniform sampler2D shadow_uShadowMap1;

in vec3 shadow_vPosition[max_lights];

const vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);
const vec4 bitUnpackShift = 1.0 / bitPackShift;
const vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);

float shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {
  vec4 rgbaDepth = texture(shadowMap, position.xy);

  float z = dot(rgbaDepth, bitUnpackShift);
  return smoothstep(0.001, 0.01, position.z - z);
}

vec4 shadow_filterShadowColor(vec4 color) {
  if (shadow.drawShadowMap) {
    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);
    rgbaDepth -= rgbaDepth.gbaa * bitMask;
    return rgbaDepth;
  }
  if (shadow.useShadowMap) {
    float shadowAlpha = 0.0;
    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);
    if(shadow.lightCount > 1.0) {
      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);
    }
    shadowAlpha *= shadow.color.a / shadow.lightCount;
    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);

    return vec4(
      mix(color.rgb, shadow.color.rgb, shadowAlpha / blendedAlpha),
      blendedAlpha
    );
  }
  return color;
}
`,v9=`
${yM}
${y9}
`,b9=Pc(E9),w9=Pc(A9),S9=[0,0,0,1],x9=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function T9(t,e){const[r,n,i]=t,s=ed([r,n,i],e);return Number.isFinite(i)?s:[s[0],s[1],0]}function E9({viewport:t,center:e}){return new or(t.viewProjectionMatrix).invert().transform(e)}function A9({viewport:t,shadowMatrices:e}){const r=[],n=t.pixelUnprojectionMatrix,i=t.isGeospatial?void 0:1,s=[[0,0,i],[t.width,0,i],[0,t.height,i],[t.width,t.height,i],[0,0,-1],[t.width,0,-1],[0,t.height,-1],[t.width,t.height,-1]].map(o=>T9(o,n));for(const o of e){const l=o.clone().translate(new ye(t.center).negate()),u=s.map(d=>l.transform(d)),f=new or().ortho({left:Math.min(...u.map(d=>d[0])),right:Math.max(...u.map(d=>d[0])),bottom:Math.min(...u.map(d=>d[1])),top:Math.max(...u.map(d=>d[1])),near:Math.min(...u.map(d=>-d[2])),far:Math.max(...u.map(d=>-d[2]))});r.push(f.multiplyRight(o))}return r}function C9(t){const{shadowEnabled:e=!0,project:r}=t;if(!e||!r||!t.shadowMatrices||!t.shadowMatrices.length)return{drawShadowMap:!1,useShadowMap:!1,shadow_uShadowMap0:t.dummyShadowMap,shadow_uShadowMap1:t.dummyShadowMap};const n=Jv.getUniforms(r),i=b9({viewport:r.viewport,center:n.center}),s=[],o=w9({shadowMatrices:t.shadowMatrices,viewport:r.viewport}).slice();for(let u=0;u<t.shadowMatrices.length;u++){const f=o[u],d=f.clone().translate(new ye(r.viewport.center).negate());n.coordinateSystem===We.LNGLAT&&n.projectionMode===pn.WEB_MERCATOR?(o[u]=d,s[u]=i):(o[u]=f.clone().multiplyRight(x9),s[u]=d.transform(i))}const l={drawShadowMap:!!t.drawToShadowMap,useShadowMap:t.shadowMaps?t.shadowMaps.length>0:!1,color:t.shadowColor||S9,lightId:t.shadowLightId||0,lightCount:t.shadowMatrices.length,shadow_uShadowMap0:t.dummyShadowMap,shadow_uShadowMap1:t.dummyShadowMap};for(let u=0;u<o.length;u++)l[`viewProjectionMatrix${u}`]=o[u],l[`projectCenter${u}`]=s[u];for(let u=0;u<2;u++)l[`shadow_uShadowMap${u}`]=t.shadowMaps&&t.shadowMaps[u]||t.dummyShadowMap;return l}const $T={name:"shadow",dependencies:[Jv],vs:_9,fs:v9,inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    position = shadow_setVertexPosition(geometry.position);
    `,"fs:DECKGL_FILTER_COLOR":`
    color = shadow_filterShadowColor(color);
    `},getUniforms:C9,uniformTypes:{drawShadowMap:"f32",useShadowMap:"f32",color:"vec4<f32>",lightId:"i32",lightCount:"f32",viewProjectionMatrix0:"mat4x4<f32>",viewProjectionMatrix1:"mat4x4<f32>",projectCenter0:"vec4<f32>",projectCenter1:"vec4<f32>"}},ka={...yT,defaultUniforms:{...yT.defaultUniforms,useFloatColors:!1},inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    // for picking depth values
    picking_setPickingAttribute(position.z / position.w);
  `,"vs:DECKGL_FILTER_COLOR":`
  picking_setPickingColor(geometry.pickingColor);
  `,"fs:DECKGL_FILTER_COLOR":{order:99,injection:`
  // use highlight color if this fragment belongs to the selected object.
  color = picking_filterHighlightColor(color);

  // use picking color if rendering to picking FBO.
  color = picking_filterPickingColor(color);
    `}}},R9=[sM],P9=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function M9(){const t=rh.getDefaultShaderAssembler();for(const e of R9)t.addDefaultModule(e);for(const e of P9)t.addShaderHook(e);return t}const I9=[255,255,255],O9=1;let k9=0;class N9{constructor(e={}){this.type="ambient";const{color:r=I9}=e,{intensity:n=O9}=e;this.id=e.id||`ambient-${k9++}`,this.color=r,this.intensity=n}}const F9=[255,255,255],D9=1,B9=[0,0,-1];let L9=0;class VT{constructor(e={}){this.type="directional";const{color:r=F9}=e,{intensity:n=D9}=e,{direction:i=B9}=e,{_shadow:s=!1}=e;this.id=e.id||`directional-${L9++}`,this.color=r,this.intensity=n,this.type="directional",this.direction=new ye(i).normalize().toArray(),this.shadow=s}getProjectedLight(e){return this}}class U9{constructor(e,r={id:"pass"}){const{id:n}=r;this.id=n,this.device=e,this.props={...r}}setProps(e){Object.assign(this.props,e)}render(e){}cleanup(){}}class rb extends U9{constructor(){super(...arguments),this._lastRenderIndex=-1}render(e){const[r,n]=this.device.canvasContext.getDrawingBufferSize(),i=e.clearCanvas??!0,s=e.clearColor??(i?[0,0,0,0]:!1),o=i?1:!1,l=i?0:!1,u=e.colorMask??15,f={viewport:[0,0,r,n]};e.colorMask&&(f.colorMask=u),e.scissorRect&&(f.scissorRect=e.scissorRect);const d=this.device.beginRenderPass({framebuffer:e.target,parameters:f,clearColor:s,clearDepth:o,clearStencil:l});try{return this._drawLayers(d,e)}finally{d.end()}}_drawLayers(e,r){const{target:n,shaderModuleProps:i,viewports:s,views:o,onViewportActive:l,clearStack:u=!0}=r;r.pass=r.pass||"unknown",u&&(this._lastRenderIndex=-1);const f=[];for(const d of s){const g=o&&o[d.id];l==null||l(d);const m=this._getDrawLayerParams(d,r),y=d.subViewports||[d];for(const w of y){const b=this._drawLayersInViewport(e,{target:n,shaderModuleProps:i,viewport:w,view:g,pass:r.pass,layers:r.layers},m);f.push(b)}}return f}_getDrawLayerParams(e,{layers:r,pass:n,isPicking:i=!1,layerFilter:s,cullRect:o,effects:l,shaderModuleProps:u},f=!1){var w;const d=[],g=vM(this._lastRenderIndex+1),m={layer:r[0],viewport:e,isPicking:i,renderPass:n,cullRect:o},y={};for(let b=0;b<r.length;b++){const S=r[b],E=this._shouldDrawLayer(S,m,s,y),k={shouldDrawLayer:E};E&&!f&&(k.shouldDrawLayer=!0,k.layerRenderIndex=g(S,E),k.shaderModuleProps=this._getShaderModuleProps(S,l,n,u),k.layerParameters={...(w=S.context.deck)==null?void 0:w.props.parameters,...this.getLayerParameters(S,b,e)}),d[b]=k}return d}_drawLayersInViewport(e,{layers:r,shaderModuleProps:n,pass:i,target:s,viewport:o,view:l},u){const f=z9(this.device,{shaderModuleProps:n,target:s,viewport:o});if(l&&l.props.clear){const g=l.props.clear===!0?{color:!0,depth:!0}:l.props.clear;this.device.beginRenderPass({framebuffer:s,parameters:{viewport:f,scissorRect:f},clearColor:g.color?[0,0,0,0]:!1,clearDepth:g.depth?1:!1}).end()}const d={totalCount:r.length,visibleCount:0,compositeCount:0,pickableCount:0};e.setParameters({viewport:f});for(let g=0;g<r.length;g++){const m=r[g],y=u[g],{shouldDrawLayer:w}=y;if(w&&m.props.pickable&&d.pickableCount++,m.isComposite&&d.compositeCount++,m.isDrawable&&y.shouldDrawLayer){const{layerRenderIndex:b,shaderModuleProps:S,layerParameters:E}=y;d.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,b),S.project&&(S.project.viewport=o),m.context.renderPass=e;try{m._drawLayer({renderPass:e,shaderModuleProps:S,uniforms:{layerIndex:b},parameters:E})}catch(k){m.raiseError(k,`drawing ${m} to ${i}`)}}}return d}shouldDrawLayer(e){return!0}getShaderModuleProps(e,r,n){return null}getLayerParameters(e,r,n){return e.props.parameters}_shouldDrawLayer(e,r,n,i){if(!(e.props.visible&&this.shouldDrawLayer(e)))return!1;r.layer=e;let o=e.parent;for(;o;){if(!o.props.visible||!o.filterSubLayer(r))return!1;r.layer=o,o=o.parent}if(n){const l=r.layer.id;if(l in i||(i[l]=n(r)),!i[l])return!1}return e.activateViewport(r.viewport),!0}_getShaderModuleProps(e,r,n,i){var u,f;const s=this.device.canvasContext.cssToDeviceRatio(),o=((u=e.internalState)==null?void 0:u.propsInTransition)||e.props,l={layer:o,picking:{isActive:!1},project:{viewport:e.context.viewport,devicePixelRatio:s,modelMatrix:o.modelMatrix,coordinateSystem:o.coordinateSystem,coordinateOrigin:o.coordinateOrigin,autoWrapLongitude:e.wrapLongitude}};if(r)for(const d of r)jT(l,(f=d.getShaderModuleProps)==null?void 0:f.call(d,e,l));return jT(l,this.getShaderModuleProps(e,r,l),i)}}function vM(t=0,e={}){const r={},n=(i,s)=>{const o=i.props._offset,l=i.id,u=i.parent&&i.parent.id;let f;if(u&&!(u in e)&&n(i.parent,!1),u in r){const d=r[u]=r[u]||vM(e[u],e);f=d(i,s),r[l]=d}else Number.isFinite(o)?(f=o+(e[u]||0),r[l]=null):f=t;return s&&f>=t&&(t=f+1),e[l]=f,f};return n}function z9(t,{shaderModuleProps:e,target:r,viewport:n}){var u;const i=((u=e==null?void 0:e.project)==null?void 0:u.devicePixelRatio)??t.canvasContext.cssToDeviceRatio(),[,s]=t.canvasContext.getDrawingBufferSize(),o=r?r.height:s,l=n;return[l.x*i,o-(l.y+l.height)*i,l.width*i,l.height*i]}function jT(t,...e){for(const r of e)if(r)for(const n in r)t[n]?Object.assign(t[n],r[n]):t[n]=r[n];return t}class $9 extends rb{constructor(e,r){super(e,r);const n=e.createTexture({format:"rgba8unorm",width:1,height:1,sampler:{minFilter:"linear",magFilter:"linear",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"},mipmaps:!0}),i=e.createTexture({format:"depth16unorm",width:1,height:1,mipmaps:!1});this.fbo=e.createFramebuffer({id:"shadowmap",width:1,height:1,colorAttachments:[n],depthStencilAttachment:i})}delete(){this.fbo&&(this.fbo.destroy(),this.fbo=null)}getShadowMap(){return this.fbo.colorAttachments[0].texture}render(e){const r=this.fbo,n=this.device.canvasContext.cssToDeviceRatio(),i=e.viewports[0],s=i.width*n,o=i.height*n,l=[1,1,1,1];(s!==r.width||o!==r.height)&&r.resize({width:s,height:o}),super.render({...e,clearColor:l,target:r,pass:"shadow"})}getLayerParameters(e,r,n){return{...e.props.parameters,blend:!1,depthWriteEnabled:!0,depthCompare:"less-equal"}}shouldDrawLayer(e){return e.props.shadowEnabled!==!1}getShaderModuleProps(e,r,n){return{shadow:{project:n.project,drawToShadowMap:!0}}}}const V9={color:[255,255,255],intensity:1},HT=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],j9=[0,0,0,200/255];class bM{constructor(e={}){this.id="lighting-effect",this.shadowColor=j9,this.shadow=!1,this.directionalLights=[],this.pointLights=[],this.shadowPasses=[],this.dummyShadowMap=null,this.setProps(e)}setup(e){this.context=e;const{device:r,deck:n}=e;this.shadow&&!this.dummyShadowMap&&(this._createShadowPasses(r),n._addDefaultShaderModule($T),this.dummyShadowMap=r.createTexture({width:1,height:1}))}setProps(e){this.ambientLight=void 0,this.directionalLights=[],this.pointLights=[];for(const r in e){const n=e[r];switch(n.type){case"ambient":this.ambientLight=n;break;case"directional":this.directionalLights.push(n);break;case"point":this.pointLights.push(n);break}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(r=>r.shadow),this.context&&this.setup(this.context),this.props=e}preRender({layers:e,layerFilter:r,viewports:n,onViewportActive:i,views:s}){if(this.shadow){this.shadowMatrices=this._calculateMatrices();for(let o=0;o<this.shadowPasses.length;o++)this.shadowPasses[o].render({layers:e,layerFilter:r,viewports:n,onViewportActive:i,views:s,shaderModuleProps:{shadow:{shadowLightId:o,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}}})}}getShaderModuleProps(e,r){const n=this.shadow?{project:r.project,shadowMaps:this.shadowPasses.map(o=>o.getShadowMap()),dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{},i={enabled:!0,ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(o=>o.getProjectedLight({layer:e})),pointLights:this.pointLights.map(o=>o.getProjectedLight({layer:e}))},s=e.props.material;return{shadow:n,lighting:i,phongMaterial:s,gouraudMaterial:s}}cleanup(e){for(const r of this.shadowPasses)r.delete();this.shadowPasses.length=0,this.dummyShadowMap&&(this.dummyShadowMap.destroy(),this.dummyShadowMap=null,e.deck._removeDefaultShaderModule($T))}_calculateMatrices(){const e=[];for(const r of this.directionalLights){const n=new or().lookAt({eye:new ye(r.direction).negate()});e.push(n)}return e}_createShadowPasses(e){for(let r=0;r<this.directionalLights.length;r++){const n=new $9(e);this.shadowPasses[r]=n}}_applyDefaultLights(){const{ambientLight:e,pointLights:r,directionalLights:n}=this;!e&&r.length===0&&n.length===0&&(this.ambientLight=new N9(V9),this.directionalLights.push(new VT(HT[0]),new VT(HT[1])))}}class H9{constructor(e={}){this._pool=[],this.opts={overAlloc:2,poolSize:100},this.setOptions(e)}setOptions(e){Object.assign(this.opts,e)}allocate(e,r,{size:n=1,type:i,padding:s=0,copy:o=!1,initialize:l=!1,maxCount:u}){const f=i||e&&e.constructor||Float32Array,d=r*n+s;if(ArrayBuffer.isView(e)){if(d<=e.length)return e;if(d*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new f(e.buffer,0,d)}let g=1/0;u&&(g=u*n+s);const m=this._allocate(f,d,l,g);return e&&o?m.set(e):l||m.fill(0,0,4),this._release(e),m}release(e){this._release(e)}_allocate(e,r,n,i){let s=Math.max(Math.ceil(r*this.opts.overAlloc),1);s>i&&(s=i);const o=this._pool,l=e.BYTES_PER_ELEMENT*s,u=o.findIndex(f=>f.byteLength>=l);if(u>=0){const f=new e(o.splice(u,1)[0],0,s);return n&&f.fill(0),f}return new e(s)}_release(e){if(!ArrayBuffer.isView(e))return;const r=this._pool,{buffer:n}=e,{byteLength:i}=n,s=r.findIndex(o=>o.byteLength>=i);s<0?r.push(n):(s>0||r.length<this.opts.poolSize)&&r.splice(s,0,n),r.length>this.opts.poolSize&&r.shift()}}const Ea=new H9;function Ll(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function W9(t,e){const r=t%e;return r<0?e+r:r}function q9(t){return[t[12],t[13],t[14]]}function X9(t){return{left:Po(t[3]+t[0],t[7]+t[4],t[11]+t[8],t[15]+t[12]),right:Po(t[3]-t[0],t[7]-t[4],t[11]-t[8],t[15]-t[12]),bottom:Po(t[3]+t[1],t[7]+t[5],t[11]+t[9],t[15]+t[13]),top:Po(t[3]-t[1],t[7]-t[5],t[11]-t[9],t[15]-t[13]),near:Po(t[3]+t[2],t[7]+t[6],t[11]+t[10],t[15]+t[14]),far:Po(t[3]-t[2],t[7]-t[6],t[11]-t[10],t[15]-t[14])}}const WT=new ye;function Po(t,e,r,n){WT.set(t,e,r);const i=WT.len();return{distance:n/i,normal:new ye(-t/i,-e/i,-r/i)}}function K9(t){return t-Math.fround(t)}let Cl;function Yg(t,e){const{size:r=1,startIndex:n=0}=e,i=e.endIndex!==void 0?e.endIndex:t.length,s=(i-n)/r;Cl=Ea.allocate(Cl,s,{type:Float32Array,size:r*2});let o=n,l=0;for(;o<i;){for(let u=0;u<r;u++){const f=t[o++];Cl[l+u]=f,Cl[l+u+r]=K9(f)}l+=r*2}return Cl.subarray(0,s*r*2)}function Y9(t){let e=null,r=!1;for(const n of t)n&&(e?(r||(e=[[e[0][0],e[0][1]],[e[1][0],e[1][1]]],r=!0),e[0][0]=Math.min(e[0][0],n[0][0]),e[0][1]=Math.min(e[0][1],n[0][1]),e[1][0]=Math.max(e[1][0],n[1][0]),e[1][1]=Math.max(e[1][1],n[1][1])):e=n);return e}const Z9=Math.PI/180,G9=Ll(),qT=[0,0,0],Q9={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};function J9({width:t,height:e,orthographic:r,fovyRadians:n,focalDistance:i,padding:s,near:o,far:l}){const u=t/e,f=r?new or().orthographic({fovy:n,aspect:u,focalDistance:i,near:o,far:l}):new or().perspective({fovy:n,aspect:u,near:o,far:l});if(s){const{left:d=0,right:g=0,top:m=0,bottom:y=0}=s,w=Mt((d+t-g)/2,0,t)-t/2,b=Mt((m+e-y)/2,0,e)-e/2;f[8]-=w*2/t,f[9]+=b*2/e}return f}class Hs{constructor(e={}){this._frustumPlanes={},this.id=e.id||this.constructor.displayName||"viewport",this.x=e.x||0,this.y=e.y||0,this.width=e.width||1,this.height=e.height||1,this.zoom=e.zoom||0,this.padding=e.padding,this.distanceScales=e.distanceScales||Q9,this.focalDistance=e.focalDistance||1,this.position=e.position||qT,this.modelMatrix=e.modelMatrix||null;const{longitude:r,latitude:n}=e;this.isGeospatial=Number.isFinite(n)&&Number.isFinite(r),this._initProps(e),this._initMatrices(e),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get subViewports(){return null}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?pn.WEB_MERCATOR:pn.WEB_MERCATOR_AUTO_OFFSET:pn.IDENTITY}equals(e){return e instanceof Hs?this===e?!0:e.width===this.width&&e.height===this.height&&e.scale===this.scale&&ri(e.projectionMatrix,this.projectionMatrix)&&ri(e.viewMatrix,this.viewMatrix):!1}project(e,{topLeft:r=!0}={}){const n=this.projectPosition(e),i=_M(n,this.pixelProjectionMatrix),[s,o]=i,l=r?o:this.height-o;return e.length===2?[s,l]:[s,l,i[2]]}unproject(e,{topLeft:r=!0,targetZ:n}={}){const[i,s,o]=e,l=r?s:this.height-s,u=n&&n*this.distanceScales.unitsPerMeter[2],f=ed([i,l,o],this.pixelUnprojectionMatrix,u),[d,g,m]=this.unprojectPosition(f);return Number.isFinite(o)?[d,g,m]:Number.isFinite(n)?[d,g,n]:[d,g]}projectPosition(e){const[r,n]=this.projectFlat(e),i=(e[2]||0)*this.distanceScales.unitsPerMeter[2];return[r,n,i]}unprojectPosition(e){const[r,n]=this.unprojectFlat(e),i=(e[2]||0)*this.distanceScales.metersPerUnit[2];return[r,n,i]}projectFlat(e){if(this.isGeospatial){const r=Wi(e);return r[1]=Mt(r[1],-318,830),r}return e}unprojectFlat(e){return this.isGeospatial?Ta(e):e}getBounds(e={}){const r={targetZ:e.z||0},n=this.unproject([0,0],r),i=this.unproject([this.width,0],r),s=this.unproject([0,this.height],r),o=this.unproject([this.width,this.height],r);return[Math.min(n[0],i[0],s[0],o[0]),Math.min(n[1],i[1],s[1],o[1]),Math.max(n[0],i[0],s[0],o[0]),Math.max(n[1],i[1],s[1],o[1])]}getDistanceScales(e){return e&&this.isGeospatial?Jy({longitude:e[0],latitude:e[1],highPrecision:!0}):this.distanceScales}containsPixel({x:e,y:r,width:n=1,height:i=1}){return e<this.x+this.width&&this.x<e+n&&r<this.y+this.height&&this.y<r+i}getFrustumPlanes(){return this._frustumPlanes.near?this._frustumPlanes:(Object.assign(this._frustumPlanes,X9(this.viewProjectionMatrix)),this._frustumPlanes)}panByPosition(e,r){return null}_initProps(e){const r=e.longitude,n=e.latitude;this.isGeospatial&&(Number.isFinite(e.zoom)||(this.zoom=c9({latitude:n})+Math.log2(this.focalDistance)),this.distanceScales=e.distanceScales||Jy({latitude:n,longitude:r}));const i=Math.pow(2,this.zoom);this.scale=i;const{position:s,modelMatrix:o}=e;let l=qT;if(s&&(l=o?new or(o).transformAsVector(s,[]):s),this.isGeospatial){const u=this.projectPosition([r,n,0]);this.center=new ye(l).scale(this.distanceScales.unitsPerMeter).add(u)}else this.center=this.projectPosition(l)}_initMatrices(e){const{viewMatrix:r=G9,projectionMatrix:n=null,orthographic:i=!1,fovyRadians:s,fovy:o=75,near:l=.1,far:u=1e3,padding:f=null,focalDistance:d=1}=e;this.viewMatrixUncentered=r,this.viewMatrix=new or().multiplyRight(r).translate(new ye(this.center).negate()),this.projectionMatrix=n||J9({width:this.width,height:this.height,orthographic:i,fovyRadians:s||o*Z9,focalDistance:d,padding:f,near:l,far:u});const g=Ll();Cs(g,g,this.projectionMatrix),Cs(g,g,this.viewMatrix),this.viewProjectionMatrix=g,this.viewMatrixInverse=jy([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=q9(this.viewMatrixInverse);const m=Ll(),y=Ll();Gv(m,m,[this.width/2,-this.height/2,1]),hh(m,m,[1,-1,0]),Cs(y,m,this.viewProjectionMatrix),this.pixelProjectionMatrix=y,this.pixelUnprojectionMatrix=jy(Ll(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||je.warn("Pixel project matrix not invertible")()}}Hs.displayName="Viewport";class qi extends Hs{constructor(e={}){const{latitude:r=0,longitude:n=0,zoom:i=0,pitch:s=0,bearing:o=0,nearZMultiplier:l=.1,farZMultiplier:u=1.01,nearZ:f,farZ:d,orthographic:g=!1,projectionMatrix:m,repeat:y=!1,worldOffset:w=0,position:b,padding:S,legacyMeterSizes:E=!1}=e;let{width:k,height:C,altitude:P=1.5}=e;const M=Math.pow(2,i);k=k||1,C=C||1;let D,q=null;if(m)P=m[5]/2,D=fc(P);else{e.fovy?(D=e.fovy,P=tb(D)):D=fc(P);let J;if(S){const{top:A=0,bottom:X=0}=S;J=[0,Mt((A+C-X)/2,0,C)-C/2]}q=f9({width:k,height:C,scale:M,center:b&&[0,0,b[2]*Kg(r)],offset:J,pitch:s,fovy:D,nearZMultiplier:l,farZMultiplier:u}),Number.isFinite(f)&&(q.near=f),Number.isFinite(d)&&(q.far=d)}let ee=u9({height:C,pitch:s,bearing:o,scale:M,altitude:P});w&&(ee=new or().translate([512*w,0,0]).multiplyLeft(ee)),super({...e,width:k,height:C,viewMatrix:ee,longitude:n,latitude:r,zoom:i,...q,fovy:D,focalDistance:P}),this.latitude=r,this.longitude=n,this.zoom=i,this.pitch=s,this.bearing=o,this.altitude=P,this.fovy=D,this.orthographic=g,this._subViewports=y?[]:null,this._pseudoMeters=E,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const e=this.getBounds(),r=Math.floor((e[0]+180)/360),n=Math.ceil((e[2]-180)/360);for(let i=r;i<=n;i++){const s=i?new qi({...this,worldOffset:i}):this;this._subViewports.push(s)}}return this._subViewports}projectPosition(e){if(this._pseudoMeters)return super.projectPosition(e);const[r,n]=this.projectFlat(e),i=(e[2]||0)*Kg(e[1]);return[r,n,i]}unprojectPosition(e){if(this._pseudoMeters)return super.unprojectPosition(e);const[r,n]=this.unprojectFlat(e),i=(e[2]||0)/Kg(n);return[r,n,i]}addMetersToLngLat(e,r){return mM(e,r)}panByPosition(e,r){const n=ed(r,this.pixelUnprojectionMatrix),i=this.projectFlat(e),s=fh([],i,UP([],n)),o=fh([],this.center,s),[l,u]=this.unprojectFlat(o);return{longitude:l,latitude:u}}getBounds(e={}){const r=p9(this,e.z||0);return[Math.min(r[0][0],r[1][0],r[2][0],r[3][0]),Math.min(r[0][1],r[1][1],r[2][1],r[3][1]),Math.max(r[0][0],r[1][0],r[2][0],r[3][0]),Math.max(r[0][1],r[1][1],r[2][1],r[3][1])]}fitBounds(e,r={}){const{width:n,height:i}=this,{longitude:s,latitude:o,zoom:l}=h9({width:n,height:i,bounds:e,...r});return new qi({width:n,height:i,longitude:s,latitude:o,zoom:l})}}qi.displayName="WebMercatorViewport";const XT=[0,0,0];function Zg(t,e,r=!1){const n=e.projectPosition(t);if(r&&e instanceof qi){const[i,s,o=0]=t,l=e.getDistanceScales([i,s]);n[2]=o*l.unitsPerMeter[2]}return n}function eU(t){const{viewport:e,modelMatrix:r,coordinateOrigin:n}=t;let{coordinateSystem:i,fromCoordinateSystem:s,fromCoordinateOrigin:o}=t;return i===We.DEFAULT&&(i=e.isGeospatial?We.LNGLAT:We.CARTESIAN),s===void 0&&(s=i),o===void 0&&(o=n),{viewport:e,coordinateSystem:i,coordinateOrigin:n,modelMatrix:r,fromCoordinateSystem:s,fromCoordinateOrigin:o}}function wM(t,{viewport:e,modelMatrix:r,coordinateSystem:n,coordinateOrigin:i,offsetMode:s}){let[o,l,u=0]=t;switch(r&&([o,l,u]=Ia([],[o,l,u,1],r)),n){case We.LNGLAT:return Zg([o,l,u],e,s);case We.LNGLAT_OFFSETS:return Zg([o+i[0],l+i[1],u+(i[2]||0)],e,s);case We.METER_OFFSETS:return Zg(mM(i,[o,l,u]),e,s);case We.CARTESIAN:default:return e.isGeospatial?[o+i[0],l+i[1],u+i[2]]:e.projectPosition([o,l,u])}}function tU(t,e){const{viewport:r,coordinateSystem:n,coordinateOrigin:i,modelMatrix:s,fromCoordinateSystem:o,fromCoordinateOrigin:l}=eU(e),{autoOffset:u=!0}=e,{geospatialOrigin:f=XT,shaderCoordinateOrigin:d=XT,offsetMode:g=!1}=u?pM(r,n,i):{},m=wM(t,{viewport:r,modelMatrix:s,coordinateSystem:o,coordinateOrigin:l,offsetMode:g});if(g){const y=r.projectPosition(f||d);XP(m,m,y)}return m}let rU=1,nU=1;class SM{constructor(){T(this,"time",0);T(this,"channels",new Map);T(this,"animations",new Map);T(this,"playing",!1);T(this,"lastEngineTime",-1)}addChannel(e){const{delay:r=0,duration:n=Number.POSITIVE_INFINITY,rate:i=1,repeat:s=1}=e,o=rU++,l={time:0,delay:r,duration:n,rate:i,repeat:s};return this._setChannelTime(l,this.time),this.channels.set(o,l),o}removeChannel(e){this.channels.delete(e);for(const[r,n]of this.animations)n.channel===e&&this.detachAnimation(r)}isFinished(e){const r=this.channels.get(e);return r===void 0?!1:this.time>=r.delay+r.duration*r.repeat}getTime(e){if(e===void 0)return this.time;const r=this.channels.get(e);return r===void 0?-1:r.time}setTime(e){this.time=Math.max(0,e);const r=this.channels.values();for(const i of r)this._setChannelTime(i,this.time);const n=this.animations.values();for(const i of n){const{animation:s,channel:o}=i;s.setTime(this.getTime(o))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(e,r){const n=nU++;return this.animations.set(n,{animation:e,channel:r}),e.setTime(this.getTime(r)),n}detachAnimation(e){this.animations.delete(e)}update(e){this.playing&&(this.lastEngineTime===-1&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}_setChannelTime(e,r){const n=r-e.delay,i=e.duration*e.repeat;n>=i?e.time=e.duration*e.rate:(e.time=Math.max(0,n)%e.duration,e.time*=e.rate)}}function iU(t){return typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,1e3/60)}function sU(t){return typeof window<"u"&&window.cancelAnimationFrame?window.cancelAnimationFrame(t):clearTimeout(t)}let oU=0;const aU={device:null,onAddHTML:()=>"",onInitialize:async()=>null,onRender:()=>{},onFinalize:()=>{},onError:t=>console.error(t),stats:Iy.stats.get(`animation-loop-${oU++}`),useDevicePixels:!0,autoResizeViewport:!1,autoResizeDrawingBuffer:!1};class lU{constructor(e){T(this,"device",null);T(this,"canvas",null);T(this,"props");T(this,"animationProps",null);T(this,"timeline",null);T(this,"stats");T(this,"cpuTime");T(this,"gpuTime");T(this,"frameRate");T(this,"display");T(this,"needsRedraw","initialized");T(this,"_initialized",!1);T(this,"_running",!1);T(this,"_animationFrameId",null);T(this,"_nextFramePromise",null);T(this,"_resolveNextFrame",null);T(this,"_cpuStartTime",0);T(this,"_error",null);if(this.props={...aU,...e},e=this.props,!e.device)throw new Error("No device provided");const{useDevicePixels:r=!0}=this.props;this.stats=e.stats||new Ac({id:"animation-loop-stats"}),this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this.setProps({autoResizeViewport:e.autoResizeViewport,autoResizeDrawingBuffer:e.autoResizeDrawingBuffer,useDevicePixels:r}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}destroy(){this.stop(),this._setDisplay(null)}delete(){this.destroy()}setError(e){var n,i;if(this.props.onError(e),this._error=Error(),((i=(n=this.device)==null?void 0:n.canvasContext)==null?void 0:i.canvas)instanceof HTMLCanvasElement){const s=document.createElement("h1");s.innerHTML=e.message,s.style.position="absolute",s.style.top="20%",s.style.left="10px",s.style.color="black",s.style.backgroundColor="red",document.body.appendChild(s)}}setNeedsRedraw(e){return this.needsRedraw=this.needsRedraw||e,this}setProps(e){return"autoResizeViewport"in e&&(this.props.autoResizeViewport=e.autoResizeViewport||!1),"autoResizeDrawingBuffer"in e&&(this.props.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer||!1),"useDevicePixels"in e&&(this.props.useDevicePixels=e.useDevicePixels||!1),this}async start(){if(this._running)return this;this._running=!0;try{let e;return this._initialized||(this._initialized=!0,await this._initDevice(),this._initialize(),await this.props.onInitialize(this._getAnimationProps())),this._running?(e!==!1&&(this._cancelAnimationFrame(),this._requestAnimationFrame()),this):null}catch(e){const r=e instanceof Error?e:new Error("Unknown error");throw this.props.onError(r),r}}stop(){return this._running&&(this.animationProps&&!this._error&&this.props.onFinalize(this.animationProps),this._cancelAnimationFrame(),this._nextFramePromise=null,this._resolveNextFrame=null,this._running=!1),this}redraw(){var e;return(e=this.device)!=null&&e.isLost||this._error?this:(this._beginFrameTimers(),this._setupFrame(),this._updateAnimationProps(),this._renderFrame(this._getAnimationProps()),this._clearNeedsRedraw(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endFrameTimers(),this)}attachTimeline(e){return this.timeline=e,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(e=>{this._resolveNextFrame=e})),this._nextFramePromise}async toDataURL(){if(this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.canvas instanceof HTMLCanvasElement)return this.canvas.toDataURL();throw new Error("OffscreenCanvas")}_initialize(){this._startEventHandling(),this._initializeAnimationProps(),this._updateAnimationProps(),this._resizeCanvasDrawingBuffer(),this._resizeViewport()}_setDisplay(e){this.display&&(this.display.destroy(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}_requestAnimationFrame(){this._running&&(this._animationFrameId=iU(this._animationFrame.bind(this)))}_cancelAnimationFrame(){this._animationFrameId!==null&&(sU(this._animationFrameId),this._animationFrameId=null)}_animationFrame(){this._running&&(this.redraw(),this._requestAnimationFrame())}_renderFrame(e){var r;if(this.display){this.display._renderFrame(e);return}this.props.onRender(this._getAnimationProps()),(r=this.device)==null||r.submit()}_clearNeedsRedraw(){this.needsRedraw=!1}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport()}_initializeAnimationProps(){var r,n;const e=(n=(r=this.device)==null?void 0:r.canvasContext)==null?void 0:n.canvas;if(!this.device||!e)throw new Error("loop");this.animationProps={animationLoop:this,device:this.device,canvas:e,timeline:this.timeline,useDevicePixels:this.props.useDevicePixels,needsRedraw:!1,width:1,height:1,aspect:1,time:0,startTime:Date.now(),engineTime:0,tick:0,tock:0,_mousePosition:null}}_getAnimationProps(){if(!this.animationProps)throw new Error("animationProps");return this.animationProps}_updateAnimationProps(){if(!this.animationProps)return;const{width:e,height:r,aspect:n}=this._getSizeAndAspect();(e!==this.animationProps.width||r!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),n!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=r,this.animationProps.aspect=n,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime}async _initDevice(){var e;if(this.device=await this.props.device,!this.device)throw new Error("No device provided");this.canvas=((e=this.device.canvasContext)==null?void 0:e.canvas)||null}_createInfoDiv(){if(this.canvas&&this.props.onAddHTML){const e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";const r=document.createElement("div");r.style.position="absolute",r.style.left="10px",r.style.bottom="10px",r.style.width="300px",r.style.background="white",this.canvas instanceof HTMLCanvasElement&&e.appendChild(this.canvas),e.appendChild(r);const n=this.props.onAddHTML(r);n&&(r.innerHTML=n)}}_getSizeAndAspect(){var s,o,l,u;if(!this.device)return{width:1,height:1,aspect:1};const[e,r]=((o=(s=this.device)==null?void 0:s.canvasContext)==null?void 0:o.getPixelSize())||[1,1];let n=1;const i=(u=(l=this.device)==null?void 0:l.canvasContext)==null?void 0:u.canvas;return i&&i.clientHeight?n=i.clientWidth/i.clientHeight:e>0&&r>0&&(n=e/r),{width:e,height:r,aspect:n}}_resizeViewport(){this.props.autoResizeViewport&&this.device.gl&&this.device.gl.viewport(0,0,this.device.gl.drawingBufferWidth,this.device.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){var e,r;this.props.autoResizeDrawingBuffer&&((r=(e=this.device)==null?void 0:e.canvasContext)==null||r.resize({useDevicePixels:this.props.useDevicePixels}))}_beginFrameTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this.cpuTime.timeStart()}_endFrameTimers(){this.cpuTime.timeEnd()}_startEventHandling(){this.canvas&&(this.canvas.addEventListener("mousemove",this._onMousemove.bind(this)),this.canvas.addEventListener("mouseleave",this._onMouseleave.bind(this)))}_onMousemove(e){e instanceof MouseEvent&&(this._getAnimationProps()._mousePosition=[e.offsetX,e.offsetY])}_onMouseleave(e){this._getAnimationProps()._mousePosition=null}}const Gg={};function td(t="id"){Gg[t]=Gg[t]||1;const e=Gg[t]++;return`${t}-${e}`}class KT{constructor(e){T(this,"id");T(this,"userData",{});T(this,"topology");T(this,"bufferLayout",[]);T(this,"vertexCount");T(this,"indices");T(this,"attributes");if(this.id=e.id||td("geometry"),this.topology=e.topology,this.indices=e.indices||null,this.attributes=e.attributes,this.vertexCount=e.vertexCount,this.bufferLayout=e.bufferLayout||[],this.indices&&!(this.indices.usage&It.INDEX))throw new Error("Index buffer must have INDEX usage")}destroy(){var e;(e=this.indices)==null||e.destroy();for(const r of Object.values(this.attributes))r.destroy()}getVertexCount(){return this.vertexCount}getAttributes(){return this.attributes}getIndexes(){return this.indices||null}_calculateVertexCount(e){return e.byteLength/12}}function cU(t,e){if(e instanceof KT)return e;const r=uU(t,e),{attributes:n,bufferLayout:i}=fU(t,e);return new KT({topology:e.topology||"triangle-list",bufferLayout:i,vertexCount:e.vertexCount,indices:r,attributes:n})}function uU(t,e){if(!e.indices)return;const r=e.indices.value;return t.createBuffer({usage:It.INDEX,data:r})}function fU(t,e){const r=[],n={};for(const[s,o]of Object.entries(e.attributes)){let l=s;switch(s){case"POSITION":l="positions";break;case"NORMAL":l="normals";break;case"TEXCOORD_0":l="texCoords";break;case"COLOR_0":l="colors";break}if(o){n[l]=t.createBuffer({data:o.value,id:`${s}-buffer`});const{value:u,size:f,normalized:d}=o;r.push({name:l,format:SB(u,f,d)})}}const i=e._calculateVertexCount(e.attributes,e.indices);return{attributes:n,bufferLayout:r,vertexCount:i}}const Kh=class Kh{constructor(e){T(this,"device");T(this,"destroyPolicy");T(this,"_hashCounter",0);T(this,"_hashes",{});T(this,"_renderPipelineCache",{});T(this,"_computePipelineCache",{});this.device=e,this.destroyPolicy=e.props._factoryDestroyPolicy}static getDefaultPipelineFactory(e){return e._lumaData.defaultPipelineFactory=e._lumaData.defaultPipelineFactory||new Kh(e),e._lumaData.defaultPipelineFactory}createRenderPipeline(e){const r={...wa.defaultProps,...e},n=this._hashRenderPipeline(r);if(!this._renderPipelineCache[n]){const i=this.device.createRenderPipeline({...r,id:r.id?`${r.id}-cached`:void 0});i.hash=n,this._renderPipelineCache[n]={pipeline:i,useCount:0}}return this._renderPipelineCache[n].useCount++,this._renderPipelineCache[n].pipeline}createComputePipeline(e){const r={...ah.defaultProps,...e},n=this._hashComputePipeline(r);if(!this._computePipelineCache[n]){const i=this.device.createComputePipeline({...r,id:r.id?`${r.id}-cached`:void 0});i.hash=n,this._computePipelineCache[n]={pipeline:i,useCount:0}}return this._computePipelineCache[n].useCount++,this._computePipelineCache[n].pipeline}release(e){const r=e.hash,n=e instanceof ah?this._computePipelineCache:this._renderPipelineCache;n[r].useCount--,n[r].useCount===0&&this.destroyPolicy==="unused"&&(n[r].pipeline.destroy(),delete n[r])}_hashComputePipeline(e){return`${this._getHash(e.shader.source)}`}_hashRenderPipeline(e){const r=e.vs?this._getHash(e.vs.source):0,n=e.fs?this._getHash(e.fs.source):0,i="-",s=this._getHash(JSON.stringify(e.bufferLayout));switch(this.device.type){case"webgl":return`${r}/${n}V${i}BL${s}`;default:const o=this._getHash(JSON.stringify(e.parameters));return`${r}/${n}V${i}T${e.topology}P${o}BL${s}`}}_getHash(e){return this._hashes[e]===void 0&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}};T(Kh,"defaultProps",{...wa.defaultProps});let ev=Kh;const Yh=class Yh{constructor(e){T(this,"device");T(this,"destroyPolicy");T(this,"_cache",{});this.device=e,this.destroyPolicy=e.props._factoryDestroyPolicy}static getDefaultShaderFactory(e){var r;return(r=e._lumaData).defaultShaderFactory||(r.defaultShaderFactory=new Yh(e)),e._lumaData.defaultShaderFactory}createShader(e){const r=this._hashShader(e);let n=this._cache[r];if(!n){const i=this.device.createShader({...e,id:e.id?`${e.id}-cached`:void 0});this._cache[r]=n={shader:i,useCount:0}}return n.useCount++,n.shader}release(e){const r=this._hashShader(e),n=this._cache[r];n&&(n.useCount--,n.useCount===0&&this.destroyPolicy==="unused"&&(delete this._cache[r],n.shader.destroy()))}_hashShader(e){return`${e.stage}:${e.source}`}};T(Yh,"defaultProps",{...ih.defaultProps});let tv=Yh;function hU(t,e){var i;const r={},n="Values";if(t.attributes.length===0&&!((i=t.varyings)!=null&&i.length))return{"No attributes or varyings":{[n]:"N/A"}};for(const s of t.attributes)if(s){const o=`${s.location} ${s.name}: ${s.type}`;r[`in ${o}`]={[n]:s.stepMode||"vertex"}}for(const s of t.varyings||[]){const o=`${s.location} ${s.name}`;r[`out ${o}`]={[n]:JSON.stringify(s)}}return r}let Qt=null,ms=null;function dU(t,{id:e,minimap:r,opaque:n,top:i="0",left:s="0",rgbaScale:o=1}){Qt||(Qt=document.createElement("canvas"),Qt.id=e,Qt.title=e,Qt.style.zIndex="100",Qt.style.position="absolute",Qt.style.top=i,Qt.style.left=s,Qt.style.border="blue 5px solid",Qt.style.transform="scaleY(-1)",document.body.appendChild(Qt),ms=Qt.getContext("2d")),(Qt.width!==t.width||Qt.height!==t.height)&&(Qt.width=t.width/2,Qt.height=t.height/2,Qt.style.width="400px",Qt.style.height="400px");const l=t.device.readPixelsToArrayWebGL(t),u=ms==null?void 0:ms.createImageData(t.width,t.height);if(u){for(let d=0;d<l.length;d+=4)u.data[0+d+0]=l[d+0]*o,u.data[0+d+1]=l[d+1]*o,u.data[0+d+2]=l[d+2]*o,u.data[0+d+3]=n?255:l[d+3]*o;ms==null||ms.putImageData(u,0,0)}}function rv(t,e,r){if(t===e)return!0;if(!r||!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!rv(t[n],e[n],r-1))return!1;return!0}if(Array.isArray(e))return!1;if(typeof t=="object"&&typeof e=="object"){const n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(const s of n)if(!e.hasOwnProperty(s)||!rv(t[s],e[s],r-1))return!1;return!0}return!1}function pU(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function gU(t){return Array.isArray(t)?t.length===0||typeof t[0]=="number":!1}function xM(t){return pU(t)||gU(t)}function mU(t){return xM(t)||typeof t=="number"||typeof t=="boolean"}function TM(t){const e={bindings:{},uniforms:{}};return Object.keys(t).forEach(r=>{const n=t[r];mU(n)?e.uniforms[r]=n:e.bindings[r]=n}),e}class _U{constructor(e,r){T(this,"options",{disableWarnings:!1});T(this,"modules");T(this,"moduleUniforms");T(this,"moduleBindings");Object.assign(this.options,r);const n=qv(Object.values(e).filter(i=>i.dependencies));for(const i of n)e[i.name]=i;fe.log(1,"Creating ShaderInputs with modules",Object.keys(e))(),this.modules=e,this.moduleUniforms={},this.moduleBindings={};for(const[i,s]of Object.entries(e))this._addModule(s),s.name&&i!==s.name&&!this.options.disableWarnings&&fe.warn(`Module name: ${i} vs ${s.name}`)()}destroy(){}setProps(e){var r;for(const n of Object.keys(e)){const i=n,s=e[i]||{},o=this.modules[i];if(!o){this.options.disableWarnings||fe.warn(`Module ${n} not found`)();continue}const l=this.moduleUniforms[i],u=this.moduleBindings[i],f=((r=o.getUniforms)==null?void 0:r.call(o,s,l))||s,{uniforms:d,bindings:g}=TM(f);this.moduleUniforms[i]={...l,...d},this.moduleBindings[i]={...u,...g}}}getModules(){return Object.values(this.modules)}getUniformValues(){return this.moduleUniforms}getBindingValues(){const e={};for(const r of Object.values(this.moduleBindings))Object.assign(e,r);return e}getDebugTable(){var r;const e={};for(const[n,i]of Object.entries(this.moduleUniforms))for(const[s,o]of Object.entries(i))e[`${n}.${s}`]={type:(r=this.modules[n].uniformTypes)==null?void 0:r[s],value:String(o)};return e}_addModule(e){const r=e.name;this.moduleUniforms[r]=e.defaultUniforms||{},this.moduleBindings[r]={}}}let yU="";async function vU(t,e){const r=new Image;return r.crossOrigin=(e==null?void 0:e.crossOrigin)||"anonymous",r.src=t.startsWith("http")?t:yU+t,await r.decode(),e?await createImageBitmap(r,e):await createImageBitmap(r)}class Qg{constructor(e,r){T(this,"device");T(this,"id");T(this,"texture");T(this,"sampler");T(this,"view");T(this,"ready");T(this,"isReady",!1);T(this,"destroyed",!1);T(this,"resolveReady",()=>{});T(this,"rejectReady",()=>{});this.device=e,this.id=r.id||td("async-texture"),typeof(r==null?void 0:r.data)=="string"&&r.dimension==="2d"&&(r={...r,data:vU(r.data)}),this.ready=new Promise((n,i)=>{this.resolveReady=()=>{this.isReady=!0,n()},this.rejectReady=i}),this.initAsync(r)}get[Symbol.toStringTag](){return"AsyncTexture"}toString(){return`AsyncTexture:"${this.id}"(${this.isReady?"ready":"loading"})`}async initAsync(e){let r,n;const i=e.data,s=await EM(i).then(r,n);if(this.destroyed)return;const o={...e,data:s};this.texture=this.device.createTexture(o),this.sampler=this.texture.sampler,this.view=this.texture.view,this.isReady=!0}destroy(){this.texture&&(this.texture.destroy(),this.texture=null),this.destroyed=!0}resize(e){if(!this.isReady)throw new Error("Cannot resize texture before it is ready");if(e.width===this.texture.width&&e.height===this.texture.height)return!1;if(this.texture){const r=this.texture;this.texture=r.clone(e),r.destroy()}return!0}}async function EM(t){if(t=await t,Array.isArray(t))return await Promise.all(t.map(EM));if(t&&typeof t=="object"&&t.constructor===Object){const e=t,r=await Promise.all(Object.values(e)),n=Object.keys(e),i={};for(let s=0;s<n.length;s++)i[n[s]]=r[s];return i}return t}const _s=2,bU=1e4,Zh=class Zh{constructor(e,r){T(this,"device");T(this,"id");T(this,"source");T(this,"vs");T(this,"fs");T(this,"pipelineFactory");T(this,"shaderFactory");T(this,"userData",{});T(this,"parameters");T(this,"topology");T(this,"bufferLayout");T(this,"isInstanced");T(this,"instanceCount",0);T(this,"vertexCount");T(this,"indexBuffer",null);T(this,"bufferAttributes",{});T(this,"constantAttributes",{});T(this,"bindings",{});T(this,"uniforms",{});T(this,"vertexArray");T(this,"transformFeedback",null);T(this,"pipeline");T(this,"shaderInputs");T(this,"_uniformStore");T(this,"_attributeInfos",{});T(this,"_gpuGeometry",null);T(this,"_getModuleUniforms");T(this,"props");T(this,"_pipelineNeedsUpdate","newly created");T(this,"_needsRedraw","initializing");T(this,"_destroyed",!1);T(this,"_lastDrawTimestamp",-1);T(this,"_lastLogTime",0);T(this,"_logOpen",!1);T(this,"_drawCount",0);var u,f,d,g;this.props={...Zh.defaultProps,...r},r=this.props,this.id=r.id||td("model"),this.device=e,Object.assign(this.userData,r.userData);const n=Object.fromEntries(((u=this.props.modules)==null?void 0:u.map(m=>[m.name,m]))||[]),i=r.shaderInputs||new _U(n,{disableWarnings:this.props.disableWarnings});this.setShaderInputs(i);const s=SU(e),o=(((f=this.props.modules)==null?void 0:f.length)>0?this.props.modules:(d=this.shaderInputs)==null?void 0:d.getModules())||[];if(this.device.type==="webgpu"&&this.props.source){(g=this.props).shaderLayout||(g.shaderLayout=o5(this.props.source));const{source:m,getUniforms:y}=this.props.shaderAssembler.assembleWGSLShader({platformInfo:s,...this.props,modules:o});this.source=m,this._getModuleUniforms=y}else{const{vs:m,fs:y,getUniforms:w}=this.props.shaderAssembler.assembleGLSLShaderPair({platformInfo:s,...this.props,modules:o});this.vs=m,this.fs=y,this._getModuleUniforms=w}this.vertexCount=this.props.vertexCount,this.instanceCount=this.props.instanceCount,this.topology=this.props.topology,this.bufferLayout=this.props.bufferLayout,this.parameters=this.props.parameters,r.geometry&&this.setGeometry(r.geometry),this.pipelineFactory=r.pipelineFactory||ev.getDefaultPipelineFactory(this.device),this.shaderFactory=r.shaderFactory||tv.getDefaultShaderFactory(this.device),this.pipeline=this._updatePipeline(),this.vertexArray=e.createVertexArray({renderPipeline:this.pipeline}),this._gpuGeometry&&this._setGeometryAttributes(this._gpuGeometry),"isInstanced"in r&&(this.isInstanced=r.isInstanced),r.instanceCount&&this.setInstanceCount(r.instanceCount),r.vertexCount&&this.setVertexCount(r.vertexCount),r.indexBuffer&&this.setIndexBuffer(r.indexBuffer),r.attributes&&this.setAttributes(r.attributes),r.constantAttributes&&this.setConstantAttributes(r.constantAttributes),r.bindings&&this.setBindings(r.bindings),r.uniforms&&this.setUniformsWebGL(r.uniforms),r.moduleSettings&&this.updateModuleSettingsWebGL(r.moduleSettings),r.transformFeedback&&(this.transformFeedback=r.transformFeedback),Object.seal(this)}get[Symbol.toStringTag](){return"Model"}toString(){return`Model(${this.id})`}destroy(){var e;this._destroyed||(this.pipelineFactory.release(this.pipeline),this.shaderFactory.release(this.pipeline.vs),this.pipeline.fs&&this.shaderFactory.release(this.pipeline.fs),this._uniformStore.destroy(),(e=this._gpuGeometry)==null||e.destroy(),this._destroyed=!0)}needsRedraw(){this._getBindingsUpdateTimestamp()>this._lastDrawTimestamp&&this.setNeedsRedraw("contents of bound textures or buffers updated");const e=this._needsRedraw;return this._needsRedraw=!1,e}setNeedsRedraw(e){this._needsRedraw||(this._needsRedraw=e)}predraw(){this.updateShaderInputs(),this.pipeline=this._updatePipeline()}draw(e){const r=this._areBindingsLoading();if(r)return fe.info(_s,`>>> DRAWING ABORTED ${this.id}: ${r} not loaded`)(),!1;try{e.pushDebugGroup(`${this}.predraw(${e})`),this.predraw()}finally{e.popDebugGroup()}let n;try{e.pushDebugGroup(`${this}.draw(${e})`),this._logDrawCallStart(),this.pipeline=this._updatePipeline();const i=this._getBindings();this.pipeline.setBindings(i,{disableWarnings:this.props.disableWarnings}),nv(this.uniforms)||this.pipeline.setUniformsWebGL(this.uniforms);const{indexBuffer:s}=this.vertexArray,o=s?s.byteLength/(s.indexType==="uint32"?4:2):void 0;n=this.pipeline.draw({renderPass:e,vertexArray:this.vertexArray,isInstanced:this.isInstanced,vertexCount:this.vertexCount,instanceCount:this.instanceCount,indexCount:o,transformFeedback:this.transformFeedback||void 0,parameters:this.parameters,topology:this.topology})}finally{e.popDebugGroup(),this._logDrawCallEnd()}return this._logFramebuffer(e),n?(this._lastDrawTimestamp=this.device.timestamp,this._needsRedraw=!1):this._needsRedraw="waiting for resource initialization",n}setGeometry(e){var n;(n=this._gpuGeometry)==null||n.destroy();const r=e&&cU(this.device,e);if(r){this.setTopology(r.topology||"triangle-list");const i=new Ug(this.bufferLayout);this.bufferLayout=i.mergeBufferLayouts(r.bufferLayout,this.bufferLayout),this.vertexArray&&this._setGeometryAttributes(r)}this._gpuGeometry=r}setTopology(e){e!==this.topology&&(this.topology=e,this._setPipelineNeedsUpdate("topology"))}setBufferLayout(e){const r=new Ug(this.bufferLayout);this.bufferLayout=this._gpuGeometry?r.mergeBufferLayouts(e,this._gpuGeometry.bufferLayout):e,this._setPipelineNeedsUpdate("bufferLayout"),this.pipeline=this._updatePipeline(),this.vertexArray=this.device.createVertexArray({renderPipeline:this.pipeline}),this._gpuGeometry&&this._setGeometryAttributes(this._gpuGeometry)}setParameters(e){rv(e,this.parameters,2)||(this.parameters=e,this._setPipelineNeedsUpdate("parameters"))}setInstanceCount(e){this.instanceCount=e,this.isInstanced===void 0&&e>0&&(this.isInstanced=!0),this.setNeedsRedraw("instanceCount")}setVertexCount(e){this.vertexCount=e,this.setNeedsRedraw("vertexCount")}setShaderInputs(e){this.shaderInputs=e,this._uniformStore=new wB(this.shaderInputs.modules);for(const[r,n]of Object.entries(this.shaderInputs.modules))if(wU(n)){const i=this._uniformStore.getManagedUniformBuffer(this.device,r);this.bindings[`${r}Uniforms`]=i}this.setNeedsRedraw("shaderInputs")}updateShaderInputs(){this._uniformStore.setUniforms(this.shaderInputs.getUniformValues()),this.setBindings(this.shaderInputs.getBindingValues()),this.setNeedsRedraw("shaderInputs")}setBindings(e){Object.assign(this.bindings,e),this.setNeedsRedraw("bindings")}setTransformFeedback(e){this.transformFeedback=e,this.setNeedsRedraw("transformFeedback")}setIndexBuffer(e){this.vertexArray.setIndexBuffer(e),this.setNeedsRedraw("indexBuffer")}setAttributes(e,r){const n=(r==null?void 0:r.disableWarnings)??this.props.disableWarnings;e.indices&&fe.warn(`Model:${this.id} setAttributes() - indexBuffer should be set using setIndexBuffer()`)();const i=new Ug(this.bufferLayout);for(const[s,o]of Object.entries(e)){const l=i.getBufferLayout(s);if(!l){n||fe.warn(`Model(${this.id}): Missing layout for buffer "${s}".`)();continue}const u=i.getAttributeNamesForBuffer(l);let f=!1;for(const d of u){const g=this._attributeInfos[d];g&&(this.vertexArray.setBuffer(g.location,o),f=!0)}!f&&!n&&fe.warn(`Model(${this.id}): Ignoring buffer "${o.id}" for unknown attribute "${s}"`)()}this.setNeedsRedraw("attributes")}setConstantAttributes(e,r){for(const[n,i]of Object.entries(e)){const s=this._attributeInfos[n];s?this.vertexArray.setConstantWebGL(s.location,i):((r==null?void 0:r.disableWarnings)??this.props.disableWarnings)||fe.warn(`Model "${this.id}: Ignoring constant supplied for unknown attribute "${n}"`)()}this.setNeedsRedraw("constants")}setUniforms(e){this.setUniformsWebGL(e)}setUniformsWebGL(e){nv(e)||(this.pipeline.setUniformsWebGL(e),Object.assign(this.uniforms,e)),this.setNeedsRedraw("uniforms")}updateModuleSettingsWebGL(e){const{bindings:r,uniforms:n}=TM(this._getModuleUniforms(e));Object.assign(this.bindings,r),Object.assign(this.uniforms,n),this.setNeedsRedraw("moduleSettings")}_areBindingsLoading(){for(const e of Object.values(this.bindings))if(e instanceof Qg&&!e.isReady)return e.id;return!1}_getBindings(){const e={};for(const[r,n]of Object.entries(this.bindings))n instanceof Qg?n.isReady&&(e[r]=n.texture):e[r]=n;return e}_getBindingsUpdateTimestamp(){let e=0;for(const r of Object.values(this.bindings))r instanceof nh?e=Math.max(e,r.texture.updateTimestamp):r instanceof It||r instanceof Pt?e=Math.max(e,r.updateTimestamp):r instanceof Qg?e=r.texture?Math.max(e,r.texture.updateTimestamp):1/0:r instanceof sh||(e=Math.max(e,r.buffer.updateTimestamp));return e}_setGeometryAttributes(e){const r={...e.attributes};for(const[n]of Object.entries(r))!this.pipeline.shaderLayout.attributes.find(i=>i.name===n)&&n!=="positions"&&delete r[n];this.vertexCount=e.vertexCount,this.setIndexBuffer(e.indices||null),this.setAttributes(e.attributes,{disableWarnings:!0}),this.setAttributes(r,{disableWarnings:this.props.disableWarnings}),this.setNeedsRedraw("geometry attributes")}_setPipelineNeedsUpdate(e){this._pipelineNeedsUpdate||(this._pipelineNeedsUpdate=e),this.setNeedsRedraw(e)}_updatePipeline(){if(this._pipelineNeedsUpdate){let e=null,r=null;this.pipeline&&(fe.log(1,`Model ${this.id}: Recreating pipeline because "${this._pipelineNeedsUpdate}".`)(),e=this.pipeline.vs,r=this.pipeline.fs),this._pipelineNeedsUpdate=!1;const n=this.shaderFactory.createShader({id:`${this.id}-vertex`,stage:"vertex",source:this.source||this.vs,debugShaders:this.props.debugShaders});let i=null;this.source?i=n:this.fs&&(i=this.shaderFactory.createShader({id:`${this.id}-fragment`,stage:"fragment",source:this.source||this.fs,debugShaders:this.props.debugShaders})),this.pipeline=this.pipelineFactory.createRenderPipeline({...this.props,bufferLayout:this.bufferLayout,topology:this.topology,parameters:this.parameters,bindings:this._getBindings(),vs:n,fs:i}),this._attributeInfos=AP(this.pipeline.shaderLayout,this.bufferLayout),e&&this.shaderFactory.release(e),r&&this.shaderFactory.release(r)}return this.pipeline}_logDrawCallStart(){const e=fe.level>3?0:bU;fe.level<2||Date.now()-this._lastLogTime<e||(this._lastLogTime=Date.now(),this._logOpen=!0,fe.group(_s,`>>> DRAWING MODEL ${this.id}`,{collapsed:fe.level<=2})())}_logDrawCallEnd(){if(this._logOpen){const e=hU(this.pipeline.shaderLayout,this.id);fe.table(_s,e)();const r=this.shaderInputs.getDebugTable();for(const[i,s]of Object.entries(this.uniforms))r[i]={value:s};fe.table(_s,r)();const n=this._getAttributeDebugTable();fe.table(_s,this._attributeInfos)(),fe.table(_s,n)(),fe.groupEnd(_s)(),this._logOpen=!1}}_logFramebuffer(e){const r=this.device.props.debugFramebuffers;if(this._drawCount++,!r)return;const n=e.props.framebuffer;n&&dU(n,{id:n.id,minimap:!0})}_getAttributeDebugTable(){const e={};for(const[r,n]of Object.entries(this._attributeInfos)){const i=this.vertexArray.attributes[n.location];e[n.location]={name:r,type:n.shaderType,values:i?this._getBufferOrConstantValues(i,n.bufferDataType):"null"}}if(this.vertexArray.indexBuffer){const{indexBuffer:r}=this.vertexArray,n=r.indexType==="uint32"?new Uint32Array(r.debugData):new Uint16Array(r.debugData);e.indices={name:"indices",type:r.indexType,values:n.toString()}}return e}_getBufferOrConstantValues(e,r){const n=PP(r);return(e instanceof It?new n(e.debugData):e).toString()}};T(Zh,"defaultProps",{...wa.defaultProps,source:void 0,vs:null,fs:null,id:"unnamed",handle:void 0,userData:{},defines:{},modules:[],moduleSettings:void 0,geometry:null,indexBuffer:null,attributes:{},constantAttributes:{},varyings:[],isInstanced:void 0,instanceCount:0,vertexCount:0,shaderInputs:void 0,pipelineFactory:void 0,shaderFactory:void 0,transformFeedback:void 0,shaderAssembler:rh.getDefaultShaderAssembler(),debugShaders:void 0,disableWarnings:void 0});let en=Zh;function wU(t){return!!(t.uniformTypes&&!nv(t.uniformTypes))}function SU(t){return{type:t.type,shaderLanguage:t.info.shadingLanguage,shaderLanguageVersion:t.info.shadingLanguageVersion,gpu:t.info.gpu,features:t.features}}function nv(t){for(const e in t)return!1;return!0}const oc=class oc{constructor(e,r=oc.defaultProps){T(this,"device");T(this,"model");T(this,"transformFeedback");if(!oc.isSupported(e))throw new Error("BufferTransform not yet implemented on WebGPU");this.device=e,this.model=new en(this.device,{id:r.id||"buffer-transform-model",fs:r.fs||TD(),topology:r.topology||"point-list",varyings:r.outputs||r.varyings,...r}),this.transformFeedback=this.device.createTransformFeedback({layout:this.model.pipeline.shaderLayout,buffers:r.feedbackBuffers}),this.model.setTransformFeedback(this.transformFeedback),Object.seal(this)}static isSupported(e){var r;return((r=e==null?void 0:e.info)==null?void 0:r.type)==="webgl"}destroy(){this.model&&this.model.destroy()}delete(){this.destroy()}run(e){e!=null&&e.inputBuffers&&this.model.setAttributes(e.inputBuffers),e!=null&&e.outputBuffers&&this.transformFeedback.setBuffers(e.outputBuffers);const r=this.device.beginRenderPass(e);this.model.draw(r),r.end()}getBuffer(e){return this.transformFeedback.getBuffer(e)}readAsync(e){const r=this.getBuffer(e);if(!r)throw new Error("BufferTransform#getBuffer");if(r instanceof It)return r.readAsync();const{buffer:n,byteOffset:i=0,byteLength:s=n.byteLength}=r;return n.readAsync(i,s)}};T(oc,"defaultProps",{...en.defaultProps,outputs:void 0,feedbackBuffers:void 0});let hc=oc;class Aa{constructor(e){T(this,"id");T(this,"topology");T(this,"vertexCount");T(this,"indices");T(this,"attributes");T(this,"userData",{});const{attributes:r={},indices:n=null,vertexCount:i=null}=e;this.id=e.id||td("geometry"),this.topology=e.topology,n&&(this.indices=ArrayBuffer.isView(n)?{value:n,size:1}:n),this.attributes={};for(const[s,o]of Object.entries(r)){const l=ArrayBuffer.isView(o)?{value:o}:o;if(!ArrayBuffer.isView(l.value))throw new Error(`${this._print(s)}: must be typed array or object with value as typed array`);if((s==="POSITION"||s==="positions")&&!l.size&&(l.size=3),s==="indices"){if(this.indices)throw new Error("Multiple indices detected");this.indices=l}else this.attributes[s]=l}this.indices&&this.indices.isIndexed!==void 0&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this.vertexCount=i||this._calculateVertexCount(this.attributes,this.indices)}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(e){return`Geometry ${this.id} attribute ${e}`}_setAttributes(e,r){return this}_calculateVertexCount(e,r){if(r)return r.value.length;let n=1/0;for(const i of Object.values(e)){const{value:s,size:o,constant:l}=i;!l&&s&&o!==void 0&&o>=1&&(n=Math.min(n,s.length/o))}return n}}const xU={blendColorOperation:"add",blendColorSrcFactor:"one",blendColorDstFactor:"zero",blendAlphaOperation:"add",blendAlphaSrcFactor:"constant-alpha",blendAlphaDstFactor:"zero"};class AM extends rb{constructor(){super(...arguments),this._colorEncoderState=null}render(e){return"pickingFBO"in e?this._drawPickingBuffer(e):super.render(e)}_drawPickingBuffer({layers:e,layerFilter:r,views:n,viewports:i,onViewportActive:s,pickingFBO:o,deviceRect:{x:l,y:u,width:f,height:d},cullRect:g,effects:m,pass:y="picking",pickZ:w,shaderModuleProps:b}){this.pickZ=w;const S=this._resetColorEncoder(w),E=[l,u,f,d],k=super.render({target:o,layers:e,layerFilter:r,views:n,viewports:i,onViewportActive:s,cullRect:g,effects:m==null?void 0:m.filter(P=>P.useInPicking),pass:y,isPicking:!0,shaderModuleProps:b,clearColor:[0,0,0,0],colorMask:15,scissorRect:E});return this._colorEncoderState=null,{decodePickingColor:S&&EU.bind(null,S),stats:k}}shouldDrawLayer(e){const{pickable:r,operation:n}=e.props;return r&&n.includes("draw")||n.includes("terrain")||n.includes("mask")}getShaderModuleProps(e,r,n){return{picking:{isActive:1,isAttribute:this.pickZ},lighting:{enabled:!1}}}getLayerParameters(e,r,n){const i={...e.props.parameters},{pickable:s,operation:o}=e.props;return!this._colorEncoderState||o.includes("terrain")?i.blend=!1:s&&o.includes("draw")&&(Object.assign(i,xU),i.blend=!0,i.blendColor=TU(this._colorEncoderState,e,n)),i}_resetColorEncoder(e){return this._colorEncoderState=e?null:{byLayer:new Map,byAlpha:[]},this._colorEncoderState}}function TU(t,e,r){const{byLayer:n,byAlpha:i}=t;let s,o=n.get(e);return o?(o.viewports.push(r),s=o.a):(s=n.size+1,s<=255?(o={a:s,layer:e,viewports:[r]},n.set(e,o),i[s]=o):(je.warn("Too many pickable layers, only picking the first 255")(),s=0)),[0,0,0,s/255]}function EU(t,e){const r=t.byAlpha[e[3]];return r&&{pickedLayer:r.layer,pickedViewports:r.viewports,pickedObjectIndex:r.layer.decodePickingColor(e)}}const Vo={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"},gh=Symbol.for("component"),ji=Symbol.for("propTypes"),Jg=Symbol.for("deprecatedProps"),_a=Symbol.for("asyncPropDefaults"),ks=Symbol.for("asyncPropOriginal"),zi=Symbol.for("asyncPropResolved");function rd(t,e=()=>!0){return Array.isArray(t)?CM(t,e,[]):e(t)?[t]:[]}function CM(t,e,r){let n=-1;for(;++n<t.length;){const i=t[n];Array.isArray(i)?CM(i,e,r):e(i)&&r.push(i)}return r}function AU({target:t,source:e,start:r=0,count:n=1}){const i=e.length,s=n*i;let o=0;for(let l=r;o<i;o++)t[l++]=e[o];for(;o<s;)o<s-o?(t.copyWithin(r+o,r,r+o),o*=2):(t.copyWithin(r+o,r,r+s-o),o=s);return t}class CU{constructor(e,r,n){this._loadCount=0,this._subscribers=new Set,this.id=e,this.context=n,this.setData(r)}subscribe(e){this._subscribers.add(e)}unsubscribe(e){this._subscribers.delete(e)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(e,r){if(e===this._data&&!r)return;this._data=e;const n=++this._loadCount;let i=e;typeof e=="string"&&(i=ac(e)),i instanceof Promise?(this.isLoaded=!1,this._loader=i.then(s=>{this._loadCount===n&&(this.isLoaded=!0,this._error=void 0,this._content=s)}).catch(s=>{this._loadCount===n&&(this.isLoaded=!0,this._error=s||!0)})):(this.isLoaded=!0,this._error=void 0,this._content=e);for(const s of this._subscribers)s.onChange(this.getData())}}class RU{constructor(e){var r;this.protocol=e.protocol||"resource://",this._context={device:e.device,gl:(r=e.device)==null?void 0:r.gl,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(e){return e.startsWith(this.protocol)?!0:e in this._resources}add({resourceId:e,data:r,forceUpdate:n=!1,persistent:i=!0}){let s=this._resources[e];s?s.setData(r,n):(s=new CU(e,r,this._context),this._resources[e]=s),s.persistent=i}remove(e){const r=this._resources[e];r&&(r.delete(),delete this._resources[e])}unsubscribe({consumerId:e}){const r=this._consumers[e];if(r){for(const n in r){const i=r[n],s=this._resources[i.resourceId];s&&s.unsubscribe(i)}delete this._consumers[e],this.prune()}}subscribe({resourceId:e,onChange:r,consumerId:n,requestId:i="default"}){const{_resources:s,protocol:o}=this;e.startsWith(o)&&(e=e.replace(o,""),s[e]||this.add({resourceId:e,data:null,persistent:!1}));const l=s[e];if(this._track(n,i,l,r),l)return l.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const e in this._resources)this._resources[e].delete()}_track(e,r,n,i){const s=this._consumers,o=s[e]=s[e]||{};let l=o[r];const u=l&&l.resourceId&&this._resources[l.resourceId];u&&(u.unsubscribe(l),this.prune()),n&&(l?(l.onChange=i,l.resourceId=n.id):l={onChange:i,resourceId:n.id},o[r]=l,n.subscribe(l))}_prune(){this._pruneRequest=null;for(const e of Object.keys(this._resources)){const r=this._resources[e];!r.persistent&&!r.inUse()&&(r.delete(),delete this._resources[e])}}}const PU="layerManager.setLayers",MU="layerManager.activateViewport";class IU{constructor(e,r){this._lastRenderedLayers=[],this._needsRedraw=!1,this._needsUpdate=!1,this._nextLayers=null,this._debug=!1,this._defaultShaderModulesChanged=!1,this.activateViewport=l=>{dr(MU,this,l),l&&(this.context.viewport=l)};const{deck:n,stats:i,viewport:s,timeline:o}=r||{};this.layers=[],this.resourceManager=new RU({device:e,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,device:e,gl:e==null?void 0:e.gl,deck:n,shaderAssembler:M9(),defaultShaderModules:[KL],renderPass:void 0,stats:i||new Ac({id:"deck.gl"}),viewport:s||new Hs({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:o||new SM,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const e of this.layers)this._finalizeLayer(e)}needsRedraw(e={clearRedrawFlags:!1}){let r=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);for(const n of this.layers){const i=n.getNeedsRedraw(e);r=r||i}return r}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._defaultShaderModulesChanged?"shader modules changed":this._needsUpdate}setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e}getLayers({layerIds:e}={}){return e?this.layers.filter(r=>e.find(n=>r.id.indexOf(n)===0)):this.layers}setProps(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&(this._nextLayers=e.layers),"onError"in e&&(this.context.onError=e.onError)}setLayers(e,r){dr(PU,this,r,e),this._lastRenderedLayers=e;const n=rd(e,Boolean);for(const i of n)i.context=this.context;this._updateLayers(this.layers,n)}updateLayers(){const e=this.needsUpdate();e&&(this.setNeedsRedraw(`updating layers: ${e}`),this.setLayers(this._nextLayers||this._lastRenderedLayers,e)),this._nextLayers=null}addDefaultShaderModule(e){const{defaultShaderModules:r}=this.context;r.find(n=>n.name===e.name)||(r.push(e),this._defaultShaderModulesChanged=!0)}removeDefaultShaderModule(e){const{defaultShaderModules:r}=this.context,n=r.findIndex(i=>i.name===e.name);n>=0&&(r.splice(n,1),this._defaultShaderModulesChanged=!0)}_handleError(e,r,n){n.raiseError(r,`${e} of ${n}`)}_updateLayers(e,r){const n={};for(const o of e)n[o.id]?je.warn(`Multiple old layers with same id ${o.id}`)():n[o.id]=o;if(this._defaultShaderModulesChanged){for(const o of e)o.setNeedsUpdate(),o.setChangeFlags({extensionsChanged:!0});this._defaultShaderModulesChanged=!1}const i=[];this._updateSublayersRecursively(r,n,i),this._finalizeOldLayers(n);let s=!1;for(const o of i)if(o.hasUniformTransition()){s=`Uniform transition in ${o}`;break}this._needsUpdate=s,this.layers=i}_updateSublayersRecursively(e,r,n){for(const i of e){i.context=this.context;const s=r[i.id];s===null&&je.warn(`Multiple new layers with same id ${i.id}`)(),r[i.id]=null;let o=null;try{this._debug&&s!==i&&i.validateProps(),s?(this._transferLayerState(s,i),this._updateLayer(i)):this._initializeLayer(i),n.push(i),o=i.isComposite?i.getSubLayers():null}catch(l){this._handleError("matching",l,i)}o&&this._updateSublayersRecursively(o,r,n)}}_finalizeOldLayers(e){for(const r in e){const n=e[r];n&&this._finalizeLayer(n)}}_initializeLayer(e){try{e._initialize(),e.lifecycle=Vo.INITIALIZED}catch(r){this._handleError("initialization",r,e)}}_transferLayerState(e,r){r._transferState(e),r.lifecycle=Vo.MATCHED,r!==e&&(e.lifecycle=Vo.AWAITING_GC)}_updateLayer(e){try{e._update()}catch(r){this._handleError("update",r,e)}}_finalizeLayer(e){this._needsRedraw=this._needsRedraw||`finalized ${e}`,e.lifecycle=Vo.AWAITING_FINALIZATION;try{e._finalize(),e.lifecycle=Vo.FINALIZED}catch(r){this._handleError("finalization",r,e)}}}function mn(t,e,r){if(t===e)return!0;if(!r||!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!mn(t[n],e[n],r-1))return!1;return!0}if(Array.isArray(e))return!1;if(typeof t=="object"&&typeof e=="object"){const n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(const s of n)if(!e.hasOwnProperty(s)||!mn(t[s],e[s],r-1))return!1;return!0}return!1}class OU{constructor(e){this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}finalize(){for(const e in this.controllers){const r=this.controllers[e];r&&r.finalize()}this.controllers={}}needsRedraw(e={clearRedrawFlags:!1}){const r=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),r}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}updateViewStates(){for(const e in this.controllers){const r=this.controllers[e];r&&r.updateTransition()}}getViewports(e){return e?this._viewports.filter(r=>r.containsPixel(e)):this._viewports}getViews(){const e={};return this.views.forEach(r=>{e[r.id]=r}),e}getView(e){return this.views.find(r=>r.id===e)}getViewState(e){const r=typeof e=="string"?this.getView(e):e,n=r&&this.viewState[r.getViewStateId()]||this.viewState;return r?r.filterViewState(n):n}getViewport(e){return this._viewportMap[e]}unproject(e,r){const n=this.getViewports(),i={x:e[0],y:e[1]};for(let s=n.length-1;s>=0;--s){const o=n[s];if(o.containsPixel(i)){const l=e.slice();return l[0]-=o.x,l[1]-=o.y,o.unproject(l,r)}}return null}setProps(e){e.views&&this._setViews(e.views),e.viewState&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(e,r){(e!==this.width||r!==this.height)&&(this.width=e,this.height=r,this.setNeedsUpdate("Size changed"))}_setViews(e){e=rd(e,Boolean),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}_setViewState(e){e?(!mn(e,this.viewState,3)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):je.warn("missing `viewState` or `initialViewState`")()}_createController(e,r){const n=r.type;return new n({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._eventCallbacks.onViewStateChange,onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:s=>{var o;return(o=this.getView(e.id))==null?void 0:o.makeViewport({viewState:s,width:this.width,height:this.height})}})}_updateController(e,r,n,i){const s=e.controller;if(s&&n){const o={...r,...s,id:e.id,x:n.x,y:n.y,width:n.width,height:n.height};return(!i||i.constructor!==s.type)&&(i=this._createController(e,o)),i&&i.setProps(o),i}return null}_rebuildViewports(){const{views:e}=this,r=this.controllers;this._viewports=[],this.controllers={};let n=!1;for(let i=e.length;i--;){const s=e[i],o=this.getViewState(s),l=s.makeViewport({viewState:o,width:this.width,height:this.height});let u=r[s.id];const f=!!s.controller;f&&!u&&(n=!0),(n||!f)&&u&&(u.finalize(),u=null),this.controllers[s.id]=this._updateController(s,o,l,u),l&&this._viewports.unshift(l)}for(const i in r){const s=r[i];s&&!this.controllers[i]&&s.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(e=>{e.id&&(this._viewportMap[e.id]=this._viewportMap[e.id]||e)})}_diffViews(e,r){return e.length!==r.length?!0:e.some((n,i)=>!e[i].equals(r[i]))}}const kU=/([0-9]+\.?[0-9]*)(%|px)/;function Mi(t){switch(typeof t){case"number":return{position:t,relative:!1};case"string":const e=kU.exec(t);if(e&&e.length>=3){const r=e[2]==="%",n=parseFloat(e[1]);return{position:r?n/100:n,relative:r}}default:throw new Error(`Could not parse position string ${t}`)}}function Ii(t,e){return t.relative?Math.round(t.position*e):t.position}class Ns{constructor(e){const{id:r,x:n=0,y:i=0,width:s="100%",height:o="100%",padding:l=null}=e;this.id=r||this.constructor.displayName||"view",this.props={...e,id:this.id},this._x=Mi(n),this._y=Mi(i),this._width=Mi(s),this._height=Mi(o),this._padding=l&&{left:Mi(l.left||0),right:Mi(l.right||0),top:Mi(l.top||0),bottom:Mi(l.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(e){return this===e?!0:this.constructor===e.constructor&&mn(this.props,e.props,2)}makeViewport({width:e,height:r,viewState:n}){n=this.filterViewState(n);const i=this.getDimensions({width:e,height:r});if(!i.height||!i.width)return null;const s=this.getViewportType(n);return new s({...n,...this.props,...i})}getViewStateId(){const{viewState:e}=this.props;return typeof e=="string"?e:(e==null?void 0:e.id)||this.id}filterViewState(e){if(this.props.viewState&&typeof this.props.viewState=="object"){if(!this.props.viewState.id)return this.props.viewState;const r={...e};for(const n in this.props.viewState)n!=="id"&&(r[n]=this.props.viewState[n]);return r}return e}getDimensions({width:e,height:r}){const n={x:Ii(this._x,e),y:Ii(this._y,r),width:Ii(this._width,e),height:Ii(this._height,r)};return this._padding&&(n.padding={left:Ii(this._padding.left,e),top:Ii(this._padding.top,r),right:Ii(this._padding.right,e),bottom:Ii(this._padding.bottom,r)}),n}get controller(){const e=this.props.controller;return e?e===!0?{type:this.ControllerType}:typeof e=="function"?{type:e}:{type:this.ControllerType,...e}:null}}class nd{constructor(e){this._inProgress=!1,this._handle=null,this.time=0,this.settings={duration:0},this._timeline=e}get inProgress(){return this._inProgress}start(e){var r,n;this.cancel(),this.settings=e,this._inProgress=!0,(n=(r=this.settings).onStart)==null||n.call(r,this)}end(){var e,r;this._inProgress&&(this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,(r=(e=this.settings).onEnd)==null||r.call(e,this))}cancel(){var e,r;this._inProgress&&((r=(e=this.settings).onInterrupt)==null||r.call(e,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}update(){var e,r;if(!this._inProgress)return!1;if(this._handle===null){const{_timeline:n,settings:i}=this;this._handle=n.addChannel({delay:n.getTime(),duration:i.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),(r=(e=this.settings).onUpdate)==null||r.call(e,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const YT=()=>{},iv={BREAK:1,SNAP_TO_END:2,IGNORE:3},NU=t=>t,FU=iv.BREAK;class DU{constructor(e){this._onTransitionUpdate=r=>{const{time:n,settings:{interpolator:i,startProps:s,endProps:o,duration:l,easing:u}}=r,f=u(n/l),d=i.interpolateProps(s,o,f);this.propsInTransition=this.getControllerState({...this.props,...d}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})},this.getControllerState=e.getControllerState,this.propsInTransition=null,this.transition=new nd(e.timeline),this.onViewStateChange=e.onViewStateChange||YT,this.onStateChange=e.onStateChange||YT}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(e){let r=!1;const n=this.props;if(this.props=e,!n||this._shouldIgnoreViewportChange(n,e))return!1;if(this._isTransitionEnabled(e)){let i=n;if(this.transition.inProgress){const{interruption:s,endProps:o}=this.transition.settings;i={...n,...s===iv.SNAP_TO_END?o:this.propsInTransition||n}}this._triggerTransition(i,e),r=!0}else this.transition.cancel();return r}updateTransition(){this.transition.update()}_isTransitionEnabled(e){const{transitionDuration:r,transitionInterpolator:n}=e;return(r>0||r==="auto")&&!!n}_isUpdateDueToCurrentTransition(e){return this.transition.inProgress&&this.propsInTransition?this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition):!1}_shouldIgnoreViewportChange(e,r){return this.transition.inProgress?this.transition.settings.interruption===iv.IGNORE||this._isUpdateDueToCurrentTransition(r):this._isTransitionEnabled(r)?r.transitionInterpolator.arePropsEqual(e,r):!0}_triggerTransition(e,r){const n=this.getControllerState(e),i=this.getControllerState(r).shortestPathFrom(n),s=r.transitionInterpolator,o=s.getDuration?s.getDuration(e,r):r.transitionDuration;if(o===0)return;const l=s.initializeProps(e,i);this.propsInTransition={};const u={duration:o,easing:r.transitionEasing||NU,interpolator:s,interruption:r.transitionInterruption||FU,startProps:l.start,endProps:l.end,onStart:r.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(r.onTransitionInterrupt),onEnd:this._onTransitionEnd(r.onTransitionEnd)};this.transition.start(u),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(e){return r=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),e==null||e(r)}}}function ir(t,e){if(!t)throw new Error(e||"deck.gl: assertion failed.")}class BU{constructor(e){const{compare:r,extract:n,required:i}=e;this._propsToCompare=r,this._propsToExtract=n||r,this._requiredProps=i}arePropsEqual(e,r){for(const n of this._propsToCompare)if(!(n in e)||!(n in r)||!ri(e[n],r[n]))return!1;return!0}initializeProps(e,r){const n={},i={};for(const s of this._propsToExtract)(s in e||s in r)&&(n[s]=e[s],i[s]=r[s]);return this._checkRequiredProps(n),this._checkRequiredProps(i),{start:n,end:i}}getDuration(e,r){return r.transitionDuration}_checkRequiredProps(e){this._requiredProps&&this._requiredProps.forEach(r=>{const n=e[r];ir(Number.isFinite(n)||Array.isArray(n),`${r} is required for transition`)})}}const LU=["longitude","latitude","zoom","bearing","pitch"],UU=["longitude","latitude","zoom"];class nb extends BU{constructor(e={}){const r=Array.isArray(e)?e:e.transitionProps,n=Array.isArray(e)?{}:e;n.transitionProps=Array.isArray(r)?{compare:r,required:r}:r||{compare:LU,required:UU},super(n.transitionProps),this.opts=n}initializeProps(e,r){const n=super.initializeProps(e,r),{makeViewport:i,around:s}=this.opts;if(i&&s){const o=i(e),l=i(r),u=o.unproject(s);n.start.around=s,Object.assign(n.end,{around:l.project(u),aroundPosition:u,width:r.width,height:r.height})}return n}interpolateProps(e,r,n){const i={};for(const s of this._propsToExtract)i[s]=As(e[s]||0,r[s]||0,n);if(r.aroundPosition&&this.opts.makeViewport){const s=this.opts.makeViewport({...r,...i});Object.assign(i,s.panByPosition(r.aroundPosition,As(e.around,r.around,n)))}return i}}const Oi={transitionDuration:0},zU=300,af=t=>1-(1-t)*(1-t),Mo={WHEEL:["wheel"],PAN:["panstart","panmove","panend"],PINCH:["pinchstart","pinchmove","pinchend"],MULTI_PAN:["multipanstart","multipanmove","multipanend"],DOUBLE_CLICK:["dblclick"],KEYBOARD:["keydown"]},ys={};class RM{constructor(e){this.state={},this._events={},this._interactionState={isDragging:!1},this._customEvents=[],this._eventStartBlocked=null,this._panMove=!1,this.invertPan=!1,this.dragMode="rotate",this.inertia=0,this.scrollZoom=!0,this.dragPan=!0,this.dragRotate=!0,this.doubleClickZoom=!0,this.touchZoom=!0,this.touchRotate=!1,this.keyboard=!0,this.transitionManager=new DU({...e,getControllerState:r=>new this.ControllerState(r),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=e.eventManager,this.onViewStateChange=e.onViewStateChange||(()=>{}),this.onStateChange=e.onStateChange||(()=>{}),this.makeViewport=e.makeViewport}set events(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.props&&this.setProps(this.props)}finalize(){var e;for(const r in this._events)this._events[r]&&((e=this.eventManager)==null||e.off(r,this.handleEvent));this.transitionManager.finalize()}handleEvent(e){this._controllerState=void 0;const r=this._eventStartBlocked;switch(e.type){case"panstart":return r?!1:this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return r?!1:this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"multipanstart":return r?!1:this._onMultiPanStart(e);case"multipanmove":return this._onMultiPan(e);case"multipanend":return this._onMultiPanEnd(e);case"dblclick":return this._onDoubleClick(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(e){const{x:r,y:n}=this.props,{offsetCenter:i}=e;return[i.x-r,i.y-n]}isPointInBounds(e,r){const{width:n,height:i}=this.props;if(r&&r.handled)return!1;const s=e[0]>=0&&e[0]<=n&&e[1]>=0&&e[1]<=i;return s&&r&&r.stopPropagation(),s}isFunctionKeyPressed(e){const{srcEvent:r}=e;return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(e){const r=setTimeout(()=>{this._eventStartBlocked===r&&(this._eventStartBlocked=null)},e);this._eventStartBlocked=r}setProps(e){e.dragMode&&(this.dragMode=e.dragMode),this.props=e,"transitionInterpolator"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);const{inertia:r}=e;this.inertia=Number.isFinite(r)?r:r===!0?zU:0;const{scrollZoom:n=!0,dragPan:i=!0,dragRotate:s=!0,doubleClickZoom:o=!0,touchZoom:l=!0,touchRotate:u=!1,keyboard:f=!0}=e,d=!!this.onViewStateChange;this.toggleEvents(Mo.WHEEL,d&&n),this.toggleEvents(Mo.PAN,d),this.toggleEvents(Mo.PINCH,d&&(l||u)),this.toggleEvents(Mo.MULTI_PAN,d&&u),this.toggleEvents(Mo.DOUBLE_CLICK,d&&o),this.toggleEvents(Mo.KEYBOARD,d&&f),this.scrollZoom=n,this.dragPan=i,this.dragRotate=s,this.doubleClickZoom=o,this.touchZoom=l,this.touchRotate=u,this.keyboard=f}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(e,r){this.eventManager&&e.forEach(n=>{this._events[n]!==r&&(this._events[n]=r,r?this.eventManager.on(n,this.handleEvent):this.eventManager.off(n,this.handleEvent))})}updateViewport(e,r=null,n={}){const i={...e.getViewportProps(),...r},s=this.controllerState!==e;if(this.state=e.getState(),this._setInteractionState(n),s){const o=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:i,interactionState:this._interactionState,oldViewState:o,viewId:this.props.id})}}_onTransition(e){this.onViewStateChange({...e,interactionState:this._interactionState,viewId:this.props.id})}_setInteractionState(e){Object.assign(this._interactionState,e),this.onStateChange(this._interactionState)}_onPanStart(e){const r=this.getCenter(e);if(!this.isPointInBounds(r,e))return!1;let n=this.isFunctionKeyPressed(e)||e.rightButton||!1;(this.invertPan||this.dragMode==="pan")&&(n=!n);const i=this.controllerState[n?"panStart":"rotateStart"]({pos:r});return this._panMove=n,this.updateViewport(i,Oi,{isDragging:!0}),!0}_onPan(e){return this.isDragging()?this._panMove?this._onPanMove(e):this._onPanRotate(e):!1}_onPanEnd(e){return this.isDragging()?this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e):!1}_onPanMove(e){if(!this.dragPan)return!1;const r=this.getCenter(e),n=this.controllerState.pan({pos:r});return this.updateViewport(n,Oi,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(e){const{inertia:r}=this;if(this.dragPan&&r&&e.velocity){const n=this.getCenter(e),i=[n[0]+e.velocityX*r/2,n[1]+e.velocityY*r/2],s=this.controllerState.pan({pos:i}).panEnd();this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:r,transitionEasing:af},{isDragging:!1,isPanning:!0})}else{const n=this.controllerState.panEnd();this.updateViewport(n,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(e){if(!this.dragRotate)return!1;const r=this.getCenter(e),n=this.controllerState.rotate({pos:r});return this.updateViewport(n,Oi,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(e){const{inertia:r}=this;if(this.dragRotate&&r&&e.velocity){const n=this.getCenter(e),i=[n[0]+e.velocityX*r/2,n[1]+e.velocityY*r/2],s=this.controllerState.rotate({pos:i}).rotateEnd();this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:r,transitionEasing:af},{isDragging:!1,isRotating:!0})}else{const n=this.controllerState.rotateEnd();this.updateViewport(n,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(e){if(!this.scrollZoom)return!1;const r=this.getCenter(e);if(!this.isPointInBounds(r,e))return!1;e.srcEvent.preventDefault();const{speed:n=.01,smooth:i=!1}=this.scrollZoom===!0?{}:this.scrollZoom,{delta:s}=e;let o=2/(1+Math.exp(-Math.abs(s*n)));s<0&&o!==0&&(o=1/o);const l=this.controllerState.zoom({pos:r,scale:o});return this.updateViewport(l,{...this._getTransitionProps({around:r}),transitionDuration:i?250:1},{isZooming:!0,isPanning:!0}),!0}_onMultiPanStart(e){const r=this.getCenter(e);if(!this.isPointInBounds(r,e))return!1;const n=this.controllerState.rotateStart({pos:r});return this.updateViewport(n,Oi,{isDragging:!0}),!0}_onMultiPan(e){if(!this.touchRotate||!this.isDragging())return!1;const r=this.getCenter(e);r[0]-=e.deltaX;const n=this.controllerState.rotate({pos:r});return this.updateViewport(n,Oi,{isDragging:!0,isRotating:!0}),!0}_onMultiPanEnd(e){if(!this.isDragging())return!1;const{inertia:r}=this;if(this.touchRotate&&r&&e.velocityY){const n=this.getCenter(e),i=[n[0],n[1]+=e.velocityY*r/2],s=this.controllerState.rotate({pos:i});this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:r,transitionEasing:af},{isDragging:!1,isRotating:!0}),this.blockEvents(r)}else{const n=this.controllerState.rotateEnd();this.updateViewport(n,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(e){const r=this.getCenter(e);if(!this.isPointInBounds(r,e))return!1;const n=this.controllerState.zoomStart({pos:r}).rotateStart({pos:r});return ys._startPinchRotation=e.rotation,ys._lastPinchEvent=e,this.updateViewport(n,Oi,{isDragging:!0}),!0}_onPinch(e){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let r=this.controllerState;if(this.touchZoom){const{scale:n}=e,i=this.getCenter(e);r=r.zoom({pos:i,scale:n})}if(this.touchRotate){const{rotation:n}=e;r=r.rotate({deltaAngleX:ys._startPinchRotation-n})}return this.updateViewport(r,Oi,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),ys._lastPinchEvent=e,!0}_onPinchEnd(e){if(!this.isDragging())return!1;const{inertia:r}=this,{_lastPinchEvent:n}=ys;if(this.touchZoom&&r&&n&&e.scale!==n.scale){const i=this.getCenter(e);let s=this.controllerState.rotateEnd();const o=Math.log2(e.scale),l=(o-Math.log2(n.scale))/(e.deltaTime-n.deltaTime),u=Math.pow(2,o+l*r/2);s=s.zoom({pos:i,scale:u}).zoomEnd(),this.updateViewport(s,{...this._getTransitionProps({around:i}),transitionDuration:r,transitionEasing:af},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(r)}else{const i=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(i,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return ys._startPinchRotation=null,ys._lastPinchEvent=null,!0}_onDoubleClick(e){if(!this.doubleClickZoom)return!1;const r=this.getCenter(e);if(!this.isPointInBounds(r,e))return!1;const n=this.isFunctionKeyPressed(e),i=this.controllerState.zoom({pos:r,scale:n?.5:2});return this.updateViewport(i,this._getTransitionProps({around:r}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(e){if(!this.keyboard)return!1;const r=this.isFunctionKeyPressed(e),{zoomSpeed:n,moveSpeed:i,rotateSpeedX:s,rotateSpeedY:o}=this.keyboard===!0?{}:this.keyboard,{controllerState:l}=this;let u;const f={};switch(e.srcEvent.code){case"Minus":u=r?l.zoomOut(n).zoomOut(n):l.zoomOut(n),f.isZooming=!0;break;case"Equal":u=r?l.zoomIn(n).zoomIn(n):l.zoomIn(n),f.isZooming=!0;break;case"ArrowLeft":r?(u=l.rotateLeft(s),f.isRotating=!0):(u=l.moveLeft(i),f.isPanning=!0);break;case"ArrowRight":r?(u=l.rotateRight(s),f.isRotating=!0):(u=l.moveRight(i),f.isPanning=!0);break;case"ArrowUp":r?(u=l.rotateUp(o),f.isRotating=!0):(u=l.moveUp(i),f.isPanning=!0);break;case"ArrowDown":r?(u=l.rotateDown(o),f.isRotating=!0):(u=l.moveDown(i),f.isPanning=!0);break;default:return!1}return this.updateViewport(u,this._getTransitionProps(),f),!0}_getTransitionProps(e){const{transition:r}=this;return!r||!r.transitionInterpolator?Oi:e?{...r,transitionInterpolator:new nb({...e,...r.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:r}}class PM{constructor(e,r){this._viewportProps=this.applyConstraints(e),this._state=r}getViewportProps(){return this._viewportProps}getState(){return this._state}}const ZT=5,$U=1.2;class VU extends PM{constructor(e){const{width:r,height:n,latitude:i,longitude:s,zoom:o,bearing:l=0,pitch:u=0,altitude:f=1.5,position:d=[0,0,0],maxZoom:g=20,minZoom:m=0,maxPitch:y=60,minPitch:w=0,startPanLngLat:b,startZoomLngLat:S,startRotatePos:E,startBearing:k,startPitch:C,startZoom:P,normalize:M=!0}=e;ir(Number.isFinite(s)),ir(Number.isFinite(i)),ir(Number.isFinite(o)),super({width:r,height:n,latitude:i,longitude:s,zoom:o,bearing:l,pitch:u,altitude:f,maxZoom:g,minZoom:m,maxPitch:y,minPitch:w,normalize:M,position:d},{startPanLngLat:b,startZoomLngLat:S,startRotatePos:E,startBearing:k,startPitch:C,startZoom:P}),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanLngLat:this._unproject(e)})}pan({pos:e,startPos:r}){const n=this.getState().startPanLngLat||this._unproject(r);if(!n)return this;const s=this.makeViewport(this.getViewportProps()).panByPosition(n,e);return this._getUpdatedState(s)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:e,deltaAngleX:r=0,deltaAngleY:n=0}){const{startRotatePos:i,startBearing:s,startPitch:o}=this.getState();if(!i||s===void 0||o===void 0)return this;let l;return e?l=this._getNewRotation(e,i,o,s):l={bearing:s+r,pitch:o+n},this._getUpdatedState(l)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:e}){return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:r,scale:n}){let{startZoom:i,startZoomLngLat:s}=this.getState();if(s||(i=this.getViewportProps().zoom,s=this._unproject(r)||this._unproject(e)),!s)return this;const{maxZoom:o,minZoom:l}=this.getViewportProps();let u=i+Math.log2(n);u=Mt(u,l,o);const f=this.makeViewport({...this.getViewportProps(),zoom:u});return this._getUpdatedState({zoom:u,...f.panByPosition(s,e)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(e=2){return this._zoomFromCenter(e)}zoomOut(e=2){return this._zoomFromCenter(1/e)}moveLeft(e=100){return this._panFromCenter([e,0])}moveRight(e=100){return this._panFromCenter([-e,0])}moveUp(e=100){return this._panFromCenter([0,e])}moveDown(e=100){return this._panFromCenter([0,-e])}rotateLeft(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-e})}rotateRight(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+e})}rotateUp(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+e})}rotateDown(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-e})}shortestPathFrom(e){const r=e.getViewportProps(),n={...this.getViewportProps()},{bearing:i,longitude:s}=n;return Math.abs(i-r.bearing)>180&&(n.bearing=i<0?i+360:i-360),Math.abs(s-r.longitude)>180&&(n.longitude=s<0?s+360:s-360),n}applyConstraints(e){const{maxZoom:r,minZoom:n,zoom:i}=e;e.zoom=Mt(i,n,r);const{maxPitch:s,minPitch:o,pitch:l}=e;e.pitch=Mt(l,o,s);const{normalize:u=!0}=e;return u&&Object.assign(e,g9(e)),e}_zoomFromCenter(e){const{width:r,height:n}=this.getViewportProps();return this.zoom({pos:[r/2,n/2],scale:e})}_panFromCenter(e){const{width:r,height:n}=this.getViewportProps();return this.pan({startPos:[r/2,n/2],pos:[r/2+e[0],n/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}_unproject(e){const r=this.makeViewport(this.getViewportProps());return e&&r.unproject(e)}_getNewRotation(e,r,n,i){const s=e[0]-r[0],o=e[1]-r[1],l=e[1],u=r[1],{width:f,height:d}=this.getViewportProps(),g=s/f;let m=0;o>0?Math.abs(d-u)>ZT&&(m=o/(u-d)*$U):o<0&&u>ZT&&(m=1-l/u),m=Mt(m,-1,1);const{minPitch:y,maxPitch:w}=this.getViewportProps(),b=i+180*g;let S=n;return m>0?S=n+m*(w-n):m<0&&(S=n-m*(y-n)),{pitch:S,bearing:b}}}class jU extends RM{constructor(){super(...arguments),this.ControllerState=VU,this.transition={transitionDuration:300,transitionInterpolator:new nb({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})},this.dragMode="pan"}setProps(e){e.position=e.position||[0,0,0];const r=this.props;super.setProps(e),(!r||r.height!==e.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...e,...this.state}))}}class MM extends Ns{constructor(e={}){super(e)}getViewportType(){return qi}get ControllerType(){return jU}}MM.displayName="MapView";const HU=new bM;function WU(t,e){const r=t.order??1/0,n=e.order??1/0;return r-n}class qU{constructor(e){this._resolvedEffects=[],this._defaultEffects=[],this.effects=[],this._context=e,this._needsRedraw="Initial render",this._setEffects([])}addDefaultEffect(e){const r=this._defaultEffects;if(!r.find(n=>n.id===e.id)){const n=r.findIndex(i=>WU(i,e)>0);n<0?r.push(e):r.splice(n,0,e),e.setup(this._context),this._setEffects(this.effects)}}setProps(e){"effects"in e&&(mn(e.effects,this.effects,1)||this._setEffects(e.effects))}needsRedraw(e={clearRedrawFlags:!1}){const r=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),r}getEffects(){return this._resolvedEffects}_setEffects(e){const r={};for(const i of this.effects)r[i.id]=i;const n=[];for(const i of e){const s=r[i.id];let o=i;s&&s!==i?s.setProps?(s.setProps(i.props),o=s):s.cleanup(this._context):s||i.setup(this._context),n.push(o),delete r[i.id]}for(const i in r)r[i].cleanup(this._context);this.effects=n,this._resolvedEffects=n.concat(this._defaultEffects),e.some(i=>i instanceof bM)||this._resolvedEffects.push(HU),this._needsRedraw="effects changed"}finalize(){for(const e of this._resolvedEffects)e.cleanup(this._context);this.effects.length=0,this._resolvedEffects.length=0,this._defaultEffects.length=0}}class XU extends rb{shouldDrawLayer(e){const{operation:r}=e.props;return r.includes("draw")||r.includes("terrain")}}const KU="deckRenderer.renderLayers";class YU{constructor(e){this.device=e,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new XU(e),this.pickLayersPass=new AM(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(e){this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(e){if(!e.viewports.length)return;const r=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass,n={layerFilter:this.layerFilter,isPicking:this.drawPickingColors,...e};n.effects&&this._preRender(n.effects,n);const i=this.lastPostProcessEffect?this.renderBuffers[0]:n.target;this.lastPostProcessEffect&&(n.clearColor=[0,0,0,0],n.clearCanvas=!0);const s=r.render({...n,target:i});n.effects&&this._postRender(n.effects,n),this.renderCount++,dr(KU,this,s,e)}needsRedraw(e={clearRedrawFlags:!1}){const r=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),r}finalize(){const{renderBuffers:e}=this;for(const r of e)r.delete();e.length=0}_preRender(e,r){this.lastPostProcessEffect=null,r.preRenderStats=r.preRenderStats||{};for(const n of e)r.preRenderStats[n.id]=n.preRender(r),n.postRender&&(this.lastPostProcessEffect=n.id);this.lastPostProcessEffect&&this._resizeRenderBuffers()}_resizeRenderBuffers(){const{renderBuffers:e}=this,r=this.device.canvasContext.getDrawingBufferSize();e.length===0&&[0,1].map(n=>{const i=this.device.createTexture({sampler:{minFilter:"linear",magFilter:"linear"}});e.push(this.device.createFramebuffer({id:`deck-renderbuffer-${n}`,colorAttachments:[i]}))});for(const n of e)n.resize(r)}_postRender(e,r){const{renderBuffers:n}=this,i={...r,inputBuffer:n[0],swapBuffer:n[1]};for(const s of e)if(s.postRender){i.target=s.id===this.lastPostProcessEffect?r.target:void 0;const o=s.postRender(i);i.inputBuffer=o,i.swapBuffer=o===n[0]?n[1]:n[0]}}}const ZU={pickedColor:null,pickedObjectIndex:-1};function GU({pickedColors:t,decodePickingColor:e,deviceX:r,deviceY:n,deviceRadius:i,deviceRect:s}){const{x:o,y:l,width:u,height:f}=s;let d=i*i,g=-1,m=0;for(let y=0;y<f;y++){const w=y+l-n,b=w*w;if(b>d)m+=4*u;else for(let S=0;S<u;S++){if(t[m+3]-1>=0){const k=S+o-r,C=k*k+b;C<=d&&(d=C,g=m)}m+=4}}if(g>=0){const y=t.slice(g,g+4),w=e(y);if(w){const b=Math.floor(g/4/u),S=g/4-b*u;return{...w,pickedColor:y,pickedX:o+S,pickedY:l+b}}je.error("Picked non-existent layer. Is picking buffer corrupt?")()}return ZU}function QU({pickedColors:t,decodePickingColor:e}){const r=new Map;if(t){for(let n=0;n<t.length;n+=4)if(t[n+3]-1>=0){const s=t.slice(n,n+4),o=s.join(",");if(!r.has(o)){const l=e(s);l?r.set(o,{...l,color:s}):je.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(r.values())}function IM({pickInfo:t,viewports:e,pixelRatio:r,x:n,y:i,z:s}){let o=e[0];e.length>1&&(o=ez((t==null?void 0:t.pickedViewports)||e,{x:n,y:i}));let l;if(o){const u=[n-o.x,i-o.y];s!==void 0&&(u[2]=s),l=o.unproject(u)}return{color:null,layer:null,viewport:o,index:-1,picked:!1,x:n,y:i,pixel:[n,i],coordinate:l,devicePixel:t&&"pickedX"in t?[t.pickedX,t.pickedY]:void 0,pixelRatio:r}}function JU(t){const{pickInfo:e,lastPickedInfo:r,mode:n,layers:i}=t,{pickedColor:s,pickedLayer:o,pickedObjectIndex:l}=e,u=o?[o]:[];if(n==="hover"){const g=r.index,m=r.layerId,y=o?o.props.id:null;if(y!==m||l!==g){if(y!==m){const w=i.find(b=>b.props.id===m);w&&u.unshift(w)}r.layerId=y,r.index=l,r.info=null}}const f=IM(t),d=new Map;return d.set(null,f),u.forEach(g=>{let m={...f};g===o&&(m.color=s,m.index=l,m.picked=!0),m=OM({layer:g,info:m,mode:n});const y=m.layer;g===o&&n==="hover"&&(r.info=m),d.set(y.id,m),n==="hover"&&y.updateAutoHighlight(m)}),d}function OM({layer:t,info:e,mode:r}){for(;t&&e;){const n=e.layer||null;e.sourceLayer=n,e.layer=t,e=t.getPickingInfo({info:e,mode:r,sourceLayer:n}),t=t.parent}return e}function ez(t,e){for(let r=t.length-1;r>=0;r--){const n=t[r];if(n.containsPixel(e))return n}return t[0]}class tz{constructor(e){this._pickable=!0,this.device=e,this.pickLayersPass=new AM(e),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"_pickable"in e&&(this._pickable=e._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.destroy(),this.depthFBO&&this.depthFBO.destroy()}pickObject(e){return this._pickClosestObject(e)}pickObjects(e){return this._pickVisibleObjects(e)}getLastPickedObject({x:e,y:r,layers:n,viewports:i},s=this.lastPickedInfo.info){const o=s&&s.layer&&s.layer.id,l=s&&s.viewport&&s.viewport.id,u=o?n.find(m=>m.id===o):null,f=l&&i.find(m=>m.id===l)||i[0],d=f&&f.unproject([e-f.x,r-f.y]);return{...s,...{x:e,y:r,viewport:f,coordinate:d,layer:u}}}_resizeBuffer(){var r,n;if(!this.pickingFBO&&(this.pickingFBO=this.device.createFramebuffer({colorAttachments:["rgba8unorm"],depthStencilAttachment:"depth16unorm"}),this.device.isTextureFormatRenderable("rgba32float"))){const i=this.device.createFramebuffer({colorAttachments:["rgba32float"],depthStencilAttachment:"depth16unorm"});this.depthFBO=i}const{canvas:e}=this.device.getDefaultCanvasContext();(r=this.pickingFBO)==null||r.resize({width:e.width,height:e.height}),(n=this.depthFBO)==null||n.resize({width:e.width,height:e.height})}_getPickable(e){if(this._pickable===!1)return null;const r=e.filter(n=>this.pickLayersPass.shouldDrawLayer(n)&&!n.isComposite);return r.length?r:null}_pickClosestObject({layers:e,views:r,viewports:n,x:i,y:s,radius:o=0,depth:l=1,mode:u="query",unproject3D:f,onViewportActive:d,effects:g}){const m=this.device.canvasContext.cssToDeviceRatio(),y=this._getPickable(e);if(!y||n.length===0)return{result:[],emptyInfo:IM({viewports:n,x:i,y:s,pixelRatio:m})};this._resizeBuffer();const w=this.device.canvasContext.cssToDevicePixels([i,s],!0),b=[w.x+Math.floor(w.width/2),w.y+Math.floor(w.height/2)],S=Math.round(o*m),{width:E,height:k}=this.pickingFBO,C=this._getPickingRect({deviceX:b[0],deviceY:b[1],deviceRadius:S,deviceWidth:E,deviceHeight:k}),P={x:i-o,y:s-o,width:o*2+1,height:o*2+1};let M;const D=[],q=new Set;for(let ee=0;ee<l;ee++){let J;if(C){const X=this._drawAndSample({layers:y,views:r,viewports:n,onViewportActive:d,deviceRect:C,cullRect:P,effects:g,pass:`picking:${u}`});J=GU({...X,deviceX:b[0],deviceY:b[1],deviceRadius:S,deviceRect:C})}else J={pickedColor:null,pickedObjectIndex:-1};let A;if(J.pickedLayer&&f&&this.depthFBO){const{pickedColors:X}=this._drawAndSample({layers:[J.pickedLayer],views:r,viewports:n,onViewportActive:d,deviceRect:{x:J.pickedX,y:J.pickedY,width:1,height:1},cullRect:P,effects:g,pass:`picking:${u}:z`},!0);X[3]&&(A=X[0])}J.pickedLayer&&ee+1<l&&(q.add(J.pickedLayer),J.pickedLayer.disablePickingIndex(J.pickedObjectIndex)),M=JU({pickInfo:J,lastPickedInfo:this.lastPickedInfo,mode:u,layers:y,viewports:n,x:i,y:s,z:A,pixelRatio:m});for(const X of M.values())X.layer&&D.push(X);if(!J.pickedColor)break}for(const ee of q)ee.restorePickingColors();return{result:D,emptyInfo:M.get(null)}}_pickVisibleObjects({layers:e,views:r,viewports:n,x:i,y:s,width:o=1,height:l=1,mode:u="query",maxObjects:f=null,onViewportActive:d,effects:g}){const m=this._getPickable(e);if(!m||n.length===0)return[];this._resizeBuffer();const y=this.device.canvasContext.cssToDeviceRatio(),w=this.device.canvasContext.cssToDevicePixels([i,s],!0),b=w.x,S=w.y+w.height,E=this.device.canvasContext.cssToDevicePixels([i+o,s+l],!0),k=E.x+E.width,C=E.y,P={x:b,y:C,width:k-b,height:S-C},M=this._drawAndSample({layers:m,views:r,viewports:n,onViewportActive:d,deviceRect:P,cullRect:{x:i,y:s,width:o,height:l},effects:g,pass:`picking:${u}`}),D=QU(M),q=new Map,ee=[],J=Number.isFinite(f);for(let A=0;A<D.length&&!(J&&ee.length>=f);A++){const X=D[A];let te={color:X.pickedColor,layer:null,index:X.pickedObjectIndex,picked:!0,x:i,y:s,pixelRatio:y};te=OM({layer:X.pickedLayer,info:te,mode:u});const Q=te.layer.id;q.has(Q)||q.set(Q,new Set);const ie=q.get(Q),xe=te.object??te.index;ie.has(xe)||(ie.add(xe),ee.push(te))}return ee}_drawAndSample({layers:e,views:r,viewports:n,onViewportActive:i,deviceRect:s,cullRect:o,effects:l,pass:u},f=!1){const d=f?this.depthFBO:this.pickingFBO,g={layers:e,layerFilter:this.layerFilter,views:r,viewports:n,onViewportActive:i,pickingFBO:d,deviceRect:s,cullRect:o,effects:l,pass:u,pickZ:f,preRenderStats:{}};for(const k of l)k.useInPicking&&(g.preRenderStats[k.id]=k.preRender(g));const{decodePickingColor:m}=this.pickLayersPass.render(g),{x:y,y:w,width:b,height:S}=s,E=new(f?Float32Array:Uint8Array)(b*S*4);return this.device.readPixelsToArrayWebGL(d,{sourceX:y,sourceY:w,sourceWidth:b,sourceHeight:S,target:E}),{pickedColors:E,decodePickingColor:m}}_getPickingRect({deviceX:e,deviceY:r,deviceRadius:n,deviceWidth:i,deviceHeight:s}){const o=Math.max(0,e-n),l=Math.max(0,r-n),u=Math.min(i,e+n+1)-o,f=Math.min(s,r+n+1)-l;return u<=0||f<=0?null:{x:o,y:l,width:u,height:f}}}const rz={"top-left":{top:0,left:0},"top-right":{top:0,right:0},"bottom-left":{bottom:0,left:0},"bottom-right":{bottom:0,right:0},fill:{top:0,left:0,bottom:0,right:0}},nz="top-left",GT="__root";class iz{constructor({deck:e,parentElement:r}){this.defaultWidgets=[],this.widgets=[],this.resolvedWidgets=[],this.containers={},this.lastViewports={},this.deck=e,this.parentElement=r}getWidgets(){return this.resolvedWidgets}setProps(e){e.widgets&&!mn(e.widgets,this.widgets,1)&&this._setWidgets(e.widgets)}finalize(){for(const e of this.getWidgets())this._remove(e);this.defaultWidgets.length=0,this.resolvedWidgets.length=0;for(const e in this.containers)this.containers[e].remove()}addDefault(e){this.defaultWidgets.find(r=>r.id===e.id)||(this._add(e),this.defaultWidgets.push(e),this._setWidgets(this.widgets))}_setWidgets(e){const r={};for(const n of this.resolvedWidgets)r[n.id]=n;this.resolvedWidgets.length=0;for(const n of this.defaultWidgets)r[n.id]=null,this.resolvedWidgets.push(n);for(let n of e){const i=r[n.id];i?i.viewId!==n.viewId||i.placement!==n.placement?(this._remove(i),this._add(n)):n!==i&&(i.setProps(n.props),n=i):this._add(n),r[n.id]=null,this.resolvedWidgets.push(n)}for(const n in r){const i=r[n];i&&this._remove(i)}this.widgets=e}_add(e){const{viewId:r=null,placement:n=nz}=e,i=e.onAdd({deck:this.deck,viewId:r});i&&this._getContainer(r,n).append(i),e._element=i}_remove(e){var r;(r=e.onRemove)==null||r.call(e),e._element&&e._element.remove(),e._element=void 0}_getContainer(e,r){var o;const n=e||GT;let i=this.containers[n];i||(i=document.createElement("div"),i.style.pointerEvents="none",i.style.position="absolute",i.style.overflow="hidden",(o=this.parentElement)==null||o.append(i),this.containers[n]=i);let s=i.querySelector(`.${r}`);return s||(s=document.createElement("div"),s.className=r,s.style.position="absolute",s.style.zIndex="2",Object.assign(s.style,rz[r]),i.append(s)),s}_updateContainers(){const e=this.deck.width,r=this.deck.height;for(const n in this.containers){const i=this.lastViewports[n]||null,s=n===GT||i,o=this.containers[n];s?(o.style.display="block",o.style.left=`${i?i.x:0}px`,o.style.top=`${i?i.y:0}px`,o.style.width=`${i?i.width:e}px`,o.style.height=`${i?i.height:r}px`):o.style.display="none"}}onRedraw({viewports:e,layers:r}){var i,s;const n=e.reduce((o,l)=>(o[l.id]=l,o),{});for(const o of this.getWidgets()){const{viewId:l}=o;if(l){const u=n[l];u&&(o.onViewportChange&&o.onViewportChange(u),(i=o.onRedraw)==null||i.call(o,{viewports:[u],layers:r}))}else{if(o.onViewportChange)for(const u of e)o.onViewportChange(u);(s=o.onRedraw)==null||s.call(o,{viewports:e,layers:r})}}this.lastViewports=n,this._updateContainers()}onHover(e,r){var n,i;for(const s of this.getWidgets()){const{viewId:o}=s;(!o||o===((n=e.viewport)==null?void 0:n.id))&&((i=s.onHover)==null||i.call(s,e,r))}}onEvent(e,r){var i,s;const n=Yy[r.type];if(n)for(const o of this.getWidgets()){const{viewId:l}=o;(!l||l===((i=e.viewport)==null?void 0:i.id))&&((s=o[n])==null||s.call(o,e,r))}}}const sz={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class oz{constructor(){this.id="default-tooltip",this.placement="fill",this.props={},this.isVisible=!1}onAdd({deck:e}){const r=document.createElement("div");return r.className="deck-tooltip",Object.assign(r.style,sz),this.deck=e,this.element=r,r}onRemove(){this.deck=void 0,this.element=void 0}setProps(){}onViewportChange(e){var r;this.isVisible&&e.id===((r=this.lastViewport)==null?void 0:r.id)&&e!==this.lastViewport&&this.setTooltip(null)}onHover(e){const{deck:r}=this,n=r&&r.props.getTooltip;if(!n)return;const i=n(e);this.lastViewport=e.viewport,this.setTooltip(i,e.x,e.y)}setTooltip(e,r,n){const i=this.element;if(i){if(typeof e=="string")i.innerText=e;else if(e)e.text&&(i.innerText=e.text),e.html&&(i.innerHTML=e.html),e.className&&(i.className=e.className);else{this.isVisible=!1,i.style.display="none";return}this.isVisible=!0,i.style.display="block",i.style.transform=`translate(${r}px, ${n}px)`,e&&typeof e=="object"&&"style"in e&&Object.assign(i.style,e.style)}}}var la;(function(t){t[t.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",t[t.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",t[t.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN",t[t.ZERO=0]="ZERO",t[t.ONE=1]="ONE",t[t.SRC_COLOR=768]="SRC_COLOR",t[t.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",t[t.SRC_ALPHA=770]="SRC_ALPHA",t[t.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",t[t.DST_ALPHA=772]="DST_ALPHA",t[t.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",t[t.DST_COLOR=774]="DST_COLOR",t[t.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",t[t.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",t[t.CONSTANT_COLOR=32769]="CONSTANT_COLOR",t[t.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",t[t.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",t[t.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",t[t.FUNC_ADD=32774]="FUNC_ADD",t[t.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",t[t.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",t[t.BLEND_EQUATION=32777]="BLEND_EQUATION",t[t.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",t[t.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",t[t.BLEND_DST_RGB=32968]="BLEND_DST_RGB",t[t.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",t[t.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",t[t.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",t[t.BLEND_COLOR=32773]="BLEND_COLOR",t[t.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",t[t.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",t[t.LINE_WIDTH=2849]="LINE_WIDTH",t[t.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",t[t.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",t[t.CULL_FACE_MODE=2885]="CULL_FACE_MODE",t[t.FRONT_FACE=2886]="FRONT_FACE",t[t.DEPTH_RANGE=2928]="DEPTH_RANGE",t[t.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",t[t.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",t[t.DEPTH_FUNC=2932]="DEPTH_FUNC",t[t.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",t[t.STENCIL_FUNC=2962]="STENCIL_FUNC",t[t.STENCIL_FAIL=2964]="STENCIL_FAIL",t[t.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",t[t.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",t[t.STENCIL_REF=2967]="STENCIL_REF",t[t.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",t[t.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",t[t.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",t[t.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",t[t.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",t[t.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",t[t.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",t[t.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",t[t.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",t[t.VIEWPORT=2978]="VIEWPORT",t[t.SCISSOR_BOX=3088]="SCISSOR_BOX",t[t.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",t[t.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",t[t.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",t[t.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",t[t.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",t[t.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",t[t.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",t[t.RED_BITS=3410]="RED_BITS",t[t.GREEN_BITS=3411]="GREEN_BITS",t[t.BLUE_BITS=3412]="BLUE_BITS",t[t.ALPHA_BITS=3413]="ALPHA_BITS",t[t.DEPTH_BITS=3414]="DEPTH_BITS",t[t.STENCIL_BITS=3415]="STENCIL_BITS",t[t.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",t[t.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",t[t.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",t[t.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",t[t.SAMPLES=32937]="SAMPLES",t[t.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",t[t.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",t[t.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",t[t.VENDOR=7936]="VENDOR",t[t.RENDERER=7937]="RENDERER",t[t.VERSION=7938]="VERSION",t[t.IMPLEMENTATION_COLOR_READ_TYPE=35738]="IMPLEMENTATION_COLOR_READ_TYPE",t[t.IMPLEMENTATION_COLOR_READ_FORMAT=35739]="IMPLEMENTATION_COLOR_READ_FORMAT",t[t.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",t[t.STATIC_DRAW=35044]="STATIC_DRAW",t[t.STREAM_DRAW=35040]="STREAM_DRAW",t[t.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.BUFFER_SIZE=34660]="BUFFER_SIZE",t[t.BUFFER_USAGE=34661]="BUFFER_USAGE",t[t.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",t[t.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",t[t.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",t[t.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",t[t.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",t[t.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",t[t.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",t[t.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",t[t.CULL_FACE=2884]="CULL_FACE",t[t.FRONT=1028]="FRONT",t[t.BACK=1029]="BACK",t[t.FRONT_AND_BACK=1032]="FRONT_AND_BACK",t[t.BLEND=3042]="BLEND",t[t.DEPTH_TEST=2929]="DEPTH_TEST",t[t.DITHER=3024]="DITHER",t[t.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",t[t.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",t[t.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",t[t.SCISSOR_TEST=3089]="SCISSOR_TEST",t[t.STENCIL_TEST=2960]="STENCIL_TEST",t[t.NO_ERROR=0]="NO_ERROR",t[t.INVALID_ENUM=1280]="INVALID_ENUM",t[t.INVALID_VALUE=1281]="INVALID_VALUE",t[t.INVALID_OPERATION=1282]="INVALID_OPERATION",t[t.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",t[t.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",t[t.CW=2304]="CW",t[t.CCW=2305]="CCW",t[t.DONT_CARE=4352]="DONT_CARE",t[t.FASTEST=4353]="FASTEST",t[t.NICEST=4354]="NICEST",t[t.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",t[t.BYTE=5120]="BYTE",t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.SHORT=5122]="SHORT",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.INT=5124]="INT",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.FLOAT=5126]="FLOAT",t[t.DOUBLE=5130]="DOUBLE",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.ALPHA=6406]="ALPHA",t[t.RGB=6407]="RGB",t[t.RGBA=6408]="RGBA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",t[t.VERTEX_SHADER=35633]="VERTEX_SHADER",t[t.COMPILE_STATUS=35713]="COMPILE_STATUS",t[t.DELETE_STATUS=35712]="DELETE_STATUS",t[t.LINK_STATUS=35714]="LINK_STATUS",t[t.VALIDATE_STATUS=35715]="VALIDATE_STATUS",t[t.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",t[t.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",t[t.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",t[t.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",t[t.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",t[t.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",t[t.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",t[t.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",t[t.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",t[t.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",t[t.SHADER_TYPE=35663]="SHADER_TYPE",t[t.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",t[t.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",t[t.NEVER=512]="NEVER",t[t.LESS=513]="LESS",t[t.EQUAL=514]="EQUAL",t[t.LEQUAL=515]="LEQUAL",t[t.GREATER=516]="GREATER",t[t.NOTEQUAL=517]="NOTEQUAL",t[t.GEQUAL=518]="GEQUAL",t[t.ALWAYS=519]="ALWAYS",t[t.KEEP=7680]="KEEP",t[t.REPLACE=7681]="REPLACE",t[t.INCR=7682]="INCR",t[t.DECR=7683]="DECR",t[t.INVERT=5386]="INVERT",t[t.INCR_WRAP=34055]="INCR_WRAP",t[t.DECR_WRAP=34056]="DECR_WRAP",t[t.NEAREST=9728]="NEAREST",t[t.LINEAR=9729]="LINEAR",t[t.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",t[t.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",t[t.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",t[t.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",t[t.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",t[t.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",t[t.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",t[t.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE=5890]="TEXTURE",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t[t.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",t[t.TEXTURE0=33984]="TEXTURE0",t[t.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",t[t.REPEAT=10497]="REPEAT",t[t.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",t[t.TEXTURE_WIDTH=4096]="TEXTURE_WIDTH",t[t.TEXTURE_HEIGHT=4097]="TEXTURE_HEIGHT",t[t.FLOAT_VEC2=35664]="FLOAT_VEC2",t[t.FLOAT_VEC3=35665]="FLOAT_VEC3",t[t.FLOAT_VEC4=35666]="FLOAT_VEC4",t[t.INT_VEC2=35667]="INT_VEC2",t[t.INT_VEC3=35668]="INT_VEC3",t[t.INT_VEC4=35669]="INT_VEC4",t[t.BOOL=35670]="BOOL",t[t.BOOL_VEC2=35671]="BOOL_VEC2",t[t.BOOL_VEC3=35672]="BOOL_VEC3",t[t.BOOL_VEC4=35673]="BOOL_VEC4",t[t.FLOAT_MAT2=35674]="FLOAT_MAT2",t[t.FLOAT_MAT3=35675]="FLOAT_MAT3",t[t.FLOAT_MAT4=35676]="FLOAT_MAT4",t[t.SAMPLER_2D=35678]="SAMPLER_2D",t[t.SAMPLER_CUBE=35680]="SAMPLER_CUBE",t[t.LOW_FLOAT=36336]="LOW_FLOAT",t[t.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",t[t.HIGH_FLOAT=36338]="HIGH_FLOAT",t[t.LOW_INT=36339]="LOW_INT",t[t.MEDIUM_INT=36340]="MEDIUM_INT",t[t.HIGH_INT=36341]="HIGH_INT",t[t.FRAMEBUFFER=36160]="FRAMEBUFFER",t[t.RENDERBUFFER=36161]="RENDERBUFFER",t[t.RGBA4=32854]="RGBA4",t[t.RGB5_A1=32855]="RGB5_A1",t[t.RGB565=36194]="RGB565",t[t.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",t[t.STENCIL_INDEX=6401]="STENCIL_INDEX",t[t.STENCIL_INDEX8=36168]="STENCIL_INDEX8",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t[t.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",t[t.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",t[t.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",t[t.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",t[t.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",t[t.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",t[t.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",t[t.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",t[t.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",t[t.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",t[t.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",t[t.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",t[t.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",t[t.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",t[t.NONE=0]="NONE",t[t.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",t[t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",t[t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",t[t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",t[t.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",t[t.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",t[t.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",t[t.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",t[t.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER",t[t.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",t[t.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",t[t.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",t[t.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",t[t.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",t[t.READ_BUFFER=3074]="READ_BUFFER",t[t.UNPACK_ROW_LENGTH=3314]="UNPACK_ROW_LENGTH",t[t.UNPACK_SKIP_ROWS=3315]="UNPACK_SKIP_ROWS",t[t.UNPACK_SKIP_PIXELS=3316]="UNPACK_SKIP_PIXELS",t[t.PACK_ROW_LENGTH=3330]="PACK_ROW_LENGTH",t[t.PACK_SKIP_ROWS=3331]="PACK_SKIP_ROWS",t[t.PACK_SKIP_PIXELS=3332]="PACK_SKIP_PIXELS",t[t.TEXTURE_BINDING_3D=32874]="TEXTURE_BINDING_3D",t[t.UNPACK_SKIP_IMAGES=32877]="UNPACK_SKIP_IMAGES",t[t.UNPACK_IMAGE_HEIGHT=32878]="UNPACK_IMAGE_HEIGHT",t[t.MAX_3D_TEXTURE_SIZE=32883]="MAX_3D_TEXTURE_SIZE",t[t.MAX_ELEMENTS_VERTICES=33e3]="MAX_ELEMENTS_VERTICES",t[t.MAX_ELEMENTS_INDICES=33001]="MAX_ELEMENTS_INDICES",t[t.MAX_TEXTURE_LOD_BIAS=34045]="MAX_TEXTURE_LOD_BIAS",t[t.MAX_FRAGMENT_UNIFORM_COMPONENTS=35657]="MAX_FRAGMENT_UNIFORM_COMPONENTS",t[t.MAX_VERTEX_UNIFORM_COMPONENTS=35658]="MAX_VERTEX_UNIFORM_COMPONENTS",t[t.MAX_ARRAY_TEXTURE_LAYERS=35071]="MAX_ARRAY_TEXTURE_LAYERS",t[t.MIN_PROGRAM_TEXEL_OFFSET=35076]="MIN_PROGRAM_TEXEL_OFFSET",t[t.MAX_PROGRAM_TEXEL_OFFSET=35077]="MAX_PROGRAM_TEXEL_OFFSET",t[t.MAX_VARYING_COMPONENTS=35659]="MAX_VARYING_COMPONENTS",t[t.FRAGMENT_SHADER_DERIVATIVE_HINT=35723]="FRAGMENT_SHADER_DERIVATIVE_HINT",t[t.RASTERIZER_DISCARD=35977]="RASTERIZER_DISCARD",t[t.VERTEX_ARRAY_BINDING=34229]="VERTEX_ARRAY_BINDING",t[t.MAX_VERTEX_OUTPUT_COMPONENTS=37154]="MAX_VERTEX_OUTPUT_COMPONENTS",t[t.MAX_FRAGMENT_INPUT_COMPONENTS=37157]="MAX_FRAGMENT_INPUT_COMPONENTS",t[t.MAX_SERVER_WAIT_TIMEOUT=37137]="MAX_SERVER_WAIT_TIMEOUT",t[t.MAX_ELEMENT_INDEX=36203]="MAX_ELEMENT_INDEX",t[t.RED=6403]="RED",t[t.RGB8=32849]="RGB8",t[t.RGBA8=32856]="RGBA8",t[t.RGB10_A2=32857]="RGB10_A2",t[t.TEXTURE_3D=32879]="TEXTURE_3D",t[t.TEXTURE_WRAP_R=32882]="TEXTURE_WRAP_R",t[t.TEXTURE_MIN_LOD=33082]="TEXTURE_MIN_LOD",t[t.TEXTURE_MAX_LOD=33083]="TEXTURE_MAX_LOD",t[t.TEXTURE_BASE_LEVEL=33084]="TEXTURE_BASE_LEVEL",t[t.TEXTURE_MAX_LEVEL=33085]="TEXTURE_MAX_LEVEL",t[t.TEXTURE_COMPARE_MODE=34892]="TEXTURE_COMPARE_MODE",t[t.TEXTURE_COMPARE_FUNC=34893]="TEXTURE_COMPARE_FUNC",t[t.SRGB=35904]="SRGB",t[t.SRGB8=35905]="SRGB8",t[t.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",t[t.COMPARE_REF_TO_TEXTURE=34894]="COMPARE_REF_TO_TEXTURE",t[t.RGBA32F=34836]="RGBA32F",t[t.RGB32F=34837]="RGB32F",t[t.RGBA16F=34842]="RGBA16F",t[t.RGB16F=34843]="RGB16F",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_BINDING_2D_ARRAY=35869]="TEXTURE_BINDING_2D_ARRAY",t[t.R11F_G11F_B10F=35898]="R11F_G11F_B10F",t[t.RGB9_E5=35901]="RGB9_E5",t[t.RGBA32UI=36208]="RGBA32UI",t[t.RGB32UI=36209]="RGB32UI",t[t.RGBA16UI=36214]="RGBA16UI",t[t.RGB16UI=36215]="RGB16UI",t[t.RGBA8UI=36220]="RGBA8UI",t[t.RGB8UI=36221]="RGB8UI",t[t.RGBA32I=36226]="RGBA32I",t[t.RGB32I=36227]="RGB32I",t[t.RGBA16I=36232]="RGBA16I",t[t.RGB16I=36233]="RGB16I",t[t.RGBA8I=36238]="RGBA8I",t[t.RGB8I=36239]="RGB8I",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.R8=33321]="R8",t[t.RG8=33323]="RG8",t[t.R16F=33325]="R16F",t[t.R32F=33326]="R32F",t[t.RG16F=33327]="RG16F",t[t.RG32F=33328]="RG32F",t[t.R8I=33329]="R8I",t[t.R8UI=33330]="R8UI",t[t.R16I=33331]="R16I",t[t.R16UI=33332]="R16UI",t[t.R32I=33333]="R32I",t[t.R32UI=33334]="R32UI",t[t.RG8I=33335]="RG8I",t[t.RG8UI=33336]="RG8UI",t[t.RG16I=33337]="RG16I",t[t.RG16UI=33338]="RG16UI",t[t.RG32I=33339]="RG32I",t[t.RG32UI=33340]="RG32UI",t[t.R8_SNORM=36756]="R8_SNORM",t[t.RG8_SNORM=36757]="RG8_SNORM",t[t.RGB8_SNORM=36758]="RGB8_SNORM",t[t.RGBA8_SNORM=36759]="RGBA8_SNORM",t[t.RGB10_A2UI=36975]="RGB10_A2UI",t[t.TEXTURE_IMMUTABLE_FORMAT=37167]="TEXTURE_IMMUTABLE_FORMAT",t[t.TEXTURE_IMMUTABLE_LEVELS=33503]="TEXTURE_IMMUTABLE_LEVELS",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.HALF_FLOAT=5131]="HALF_FLOAT",t[t.RG=33319]="RG",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.INT_2_10_10_10_REV=36255]="INT_2_10_10_10_REV",t[t.CURRENT_QUERY=34917]="CURRENT_QUERY",t[t.QUERY_RESULT=34918]="QUERY_RESULT",t[t.QUERY_RESULT_AVAILABLE=34919]="QUERY_RESULT_AVAILABLE",t[t.ANY_SAMPLES_PASSED=35887]="ANY_SAMPLES_PASSED",t[t.ANY_SAMPLES_PASSED_CONSERVATIVE=36202]="ANY_SAMPLES_PASSED_CONSERVATIVE",t[t.MAX_DRAW_BUFFERS=34852]="MAX_DRAW_BUFFERS",t[t.DRAW_BUFFER0=34853]="DRAW_BUFFER0",t[t.DRAW_BUFFER1=34854]="DRAW_BUFFER1",t[t.DRAW_BUFFER2=34855]="DRAW_BUFFER2",t[t.DRAW_BUFFER3=34856]="DRAW_BUFFER3",t[t.DRAW_BUFFER4=34857]="DRAW_BUFFER4",t[t.DRAW_BUFFER5=34858]="DRAW_BUFFER5",t[t.DRAW_BUFFER6=34859]="DRAW_BUFFER6",t[t.DRAW_BUFFER7=34860]="DRAW_BUFFER7",t[t.DRAW_BUFFER8=34861]="DRAW_BUFFER8",t[t.DRAW_BUFFER9=34862]="DRAW_BUFFER9",t[t.DRAW_BUFFER10=34863]="DRAW_BUFFER10",t[t.DRAW_BUFFER11=34864]="DRAW_BUFFER11",t[t.DRAW_BUFFER12=34865]="DRAW_BUFFER12",t[t.DRAW_BUFFER13=34866]="DRAW_BUFFER13",t[t.DRAW_BUFFER14=34867]="DRAW_BUFFER14",t[t.DRAW_BUFFER15=34868]="DRAW_BUFFER15",t[t.MAX_COLOR_ATTACHMENTS=36063]="MAX_COLOR_ATTACHMENTS",t[t.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",t[t.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",t[t.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",t[t.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",t[t.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",t[t.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",t[t.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",t[t.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",t[t.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",t[t.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",t[t.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",t[t.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",t[t.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",t[t.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",t[t.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15",t[t.SAMPLER_3D=35679]="SAMPLER_3D",t[t.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",t[t.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",t[t.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",t[t.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",t[t.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",t[t.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",t[t.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",t[t.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",t[t.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",t[t.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",t[t.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",t[t.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY",t[t.MAX_SAMPLES=36183]="MAX_SAMPLES",t[t.SAMPLER_BINDING=35097]="SAMPLER_BINDING",t[t.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",t[t.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",t[t.PIXEL_PACK_BUFFER_BINDING=35053]="PIXEL_PACK_BUFFER_BINDING",t[t.PIXEL_UNPACK_BUFFER_BINDING=35055]="PIXEL_UNPACK_BUFFER_BINDING",t[t.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",t[t.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",t[t.COPY_READ_BUFFER_BINDING=36662]="COPY_READ_BUFFER_BINDING",t[t.COPY_WRITE_BUFFER_BINDING=36663]="COPY_WRITE_BUFFER_BINDING",t[t.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",t[t.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",t[t.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",t[t.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",t[t.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",t[t.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",t[t.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",t[t.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",t[t.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",t[t.UNSIGNED_NORMALIZED=35863]="UNSIGNED_NORMALIZED",t[t.SIGNED_NORMALIZED=36764]="SIGNED_NORMALIZED",t[t.VERTEX_ATTRIB_ARRAY_INTEGER=35069]="VERTEX_ATTRIB_ARRAY_INTEGER",t[t.VERTEX_ATTRIB_ARRAY_DIVISOR=35070]="VERTEX_ATTRIB_ARRAY_DIVISOR",t[t.TRANSFORM_FEEDBACK_BUFFER_MODE=35967]="TRANSFORM_FEEDBACK_BUFFER_MODE",t[t.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS=35968]="MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS",t[t.TRANSFORM_FEEDBACK_VARYINGS=35971]="TRANSFORM_FEEDBACK_VARYINGS",t[t.TRANSFORM_FEEDBACK_BUFFER_START=35972]="TRANSFORM_FEEDBACK_BUFFER_START",t[t.TRANSFORM_FEEDBACK_BUFFER_SIZE=35973]="TRANSFORM_FEEDBACK_BUFFER_SIZE",t[t.TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN=35976]="TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN",t[t.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS=35978]="MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS",t[t.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS=35979]="MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS",t[t.INTERLEAVED_ATTRIBS=35980]="INTERLEAVED_ATTRIBS",t[t.SEPARATE_ATTRIBS=35981]="SEPARATE_ATTRIBS",t[t.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER",t[t.TRANSFORM_FEEDBACK_BUFFER_BINDING=35983]="TRANSFORM_FEEDBACK_BUFFER_BINDING",t[t.TRANSFORM_FEEDBACK=36386]="TRANSFORM_FEEDBACK",t[t.TRANSFORM_FEEDBACK_PAUSED=36387]="TRANSFORM_FEEDBACK_PAUSED",t[t.TRANSFORM_FEEDBACK_ACTIVE=36388]="TRANSFORM_FEEDBACK_ACTIVE",t[t.TRANSFORM_FEEDBACK_BINDING=36389]="TRANSFORM_FEEDBACK_BINDING",t[t.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING=33296]="FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING",t[t.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE=33297]="FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE",t[t.FRAMEBUFFER_ATTACHMENT_RED_SIZE=33298]="FRAMEBUFFER_ATTACHMENT_RED_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE=33299]="FRAMEBUFFER_ATTACHMENT_GREEN_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE=33300]="FRAMEBUFFER_ATTACHMENT_BLUE_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE=33301]="FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE=33302]="FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE=33303]="FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE",t[t.FRAMEBUFFER_DEFAULT=33304]="FRAMEBUFFER_DEFAULT",t[t.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",t[t.DRAW_FRAMEBUFFER_BINDING=36006]="DRAW_FRAMEBUFFER_BINDING",t[t.READ_FRAMEBUFFER_BINDING=36010]="READ_FRAMEBUFFER_BINDING",t[t.RENDERBUFFER_SAMPLES=36011]="RENDERBUFFER_SAMPLES",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER=36052]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER",t[t.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE=36182]="FRAMEBUFFER_INCOMPLETE_MULTISAMPLE",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",t[t.UNIFORM_BUFFER_BINDING=35368]="UNIFORM_BUFFER_BINDING",t[t.UNIFORM_BUFFER_START=35369]="UNIFORM_BUFFER_START",t[t.UNIFORM_BUFFER_SIZE=35370]="UNIFORM_BUFFER_SIZE",t[t.MAX_VERTEX_UNIFORM_BLOCKS=35371]="MAX_VERTEX_UNIFORM_BLOCKS",t[t.MAX_FRAGMENT_UNIFORM_BLOCKS=35373]="MAX_FRAGMENT_UNIFORM_BLOCKS",t[t.MAX_COMBINED_UNIFORM_BLOCKS=35374]="MAX_COMBINED_UNIFORM_BLOCKS",t[t.MAX_UNIFORM_BUFFER_BINDINGS=35375]="MAX_UNIFORM_BUFFER_BINDINGS",t[t.MAX_UNIFORM_BLOCK_SIZE=35376]="MAX_UNIFORM_BLOCK_SIZE",t[t.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS=35377]="MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS",t[t.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS=35379]="MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS",t[t.UNIFORM_BUFFER_OFFSET_ALIGNMENT=35380]="UNIFORM_BUFFER_OFFSET_ALIGNMENT",t[t.ACTIVE_UNIFORM_BLOCKS=35382]="ACTIVE_UNIFORM_BLOCKS",t[t.UNIFORM_TYPE=35383]="UNIFORM_TYPE",t[t.UNIFORM_SIZE=35384]="UNIFORM_SIZE",t[t.UNIFORM_BLOCK_INDEX=35386]="UNIFORM_BLOCK_INDEX",t[t.UNIFORM_OFFSET=35387]="UNIFORM_OFFSET",t[t.UNIFORM_ARRAY_STRIDE=35388]="UNIFORM_ARRAY_STRIDE",t[t.UNIFORM_MATRIX_STRIDE=35389]="UNIFORM_MATRIX_STRIDE",t[t.UNIFORM_IS_ROW_MAJOR=35390]="UNIFORM_IS_ROW_MAJOR",t[t.UNIFORM_BLOCK_BINDING=35391]="UNIFORM_BLOCK_BINDING",t[t.UNIFORM_BLOCK_DATA_SIZE=35392]="UNIFORM_BLOCK_DATA_SIZE",t[t.UNIFORM_BLOCK_ACTIVE_UNIFORMS=35394]="UNIFORM_BLOCK_ACTIVE_UNIFORMS",t[t.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES=35395]="UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES",t[t.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER=35396]="UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER",t[t.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER=35398]="UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER",t[t.OBJECT_TYPE=37138]="OBJECT_TYPE",t[t.SYNC_CONDITION=37139]="SYNC_CONDITION",t[t.SYNC_STATUS=37140]="SYNC_STATUS",t[t.SYNC_FLAGS=37141]="SYNC_FLAGS",t[t.SYNC_FENCE=37142]="SYNC_FENCE",t[t.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE",t[t.UNSIGNALED=37144]="UNSIGNALED",t[t.SIGNALED=37145]="SIGNALED",t[t.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",t[t.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",t[t.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",t[t.WAIT_FAILED=37149]="WAIT_FAILED",t[t.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT",t[t.COLOR=6144]="COLOR",t[t.DEPTH=6145]="DEPTH",t[t.STENCIL=6146]="STENCIL",t[t.MIN=32775]="MIN",t[t.MAX=32776]="MAX",t[t.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",t[t.STREAM_READ=35041]="STREAM_READ",t[t.STREAM_COPY=35042]="STREAM_COPY",t[t.STATIC_READ=35045]="STATIC_READ",t[t.STATIC_COPY=35046]="STATIC_COPY",t[t.DYNAMIC_READ=35049]="DYNAMIC_READ",t[t.DYNAMIC_COPY=35050]="DYNAMIC_COPY",t[t.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",t[t.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8",t[t.INVALID_INDEX=4294967295]="INVALID_INDEX",t[t.TIMEOUT_IGNORED=-1]="TIMEOUT_IGNORED",t[t.MAX_CLIENT_WAIT_TIMEOUT_WEBGL=37447]="MAX_CLIENT_WAIT_TIMEOUT_WEBGL",t[t.UNMASKED_VENDOR_WEBGL=37445]="UNMASKED_VENDOR_WEBGL",t[t.UNMASKED_RENDERER_WEBGL=37446]="UNMASKED_RENDERER_WEBGL",t[t.MAX_TEXTURE_MAX_ANISOTROPY_EXT=34047]="MAX_TEXTURE_MAX_ANISOTROPY_EXT",t[t.TEXTURE_MAX_ANISOTROPY_EXT=34046]="TEXTURE_MAX_ANISOTROPY_EXT",t[t.R16_EXT=33322]="R16_EXT",t[t.RG16_EXT=33324]="RG16_EXT",t[t.RGB16_EXT=32852]="RGB16_EXT",t[t.RGBA16_EXT=32859]="RGBA16_EXT",t[t.R16_SNORM_EXT=36760]="R16_SNORM_EXT",t[t.RG16_SNORM_EXT=36761]="RG16_SNORM_EXT",t[t.RGB16_SNORM_EXT=36762]="RGB16_SNORM_EXT",t[t.RGBA16_SNORM_EXT=36763]="RGBA16_SNORM_EXT",t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",t[t.COMPRESSED_RED_RGTC1_EXT=36283]="COMPRESSED_RED_RGTC1_EXT",t[t.COMPRESSED_SIGNED_RED_RGTC1_EXT=36284]="COMPRESSED_SIGNED_RED_RGTC1_EXT",t[t.COMPRESSED_RED_GREEN_RGTC2_EXT=36285]="COMPRESSED_RED_GREEN_RGTC2_EXT",t[t.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT=36286]="COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT",t[t.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",t[t.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",t[t.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",t[t.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37493]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37494]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37495]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37496]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37497]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",t[t.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",t[t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",t[t.COMPRESSED_RGBA_ASTC_5x4_KHR=37809]="COMPRESSED_RGBA_ASTC_5x4_KHR",t[t.COMPRESSED_RGBA_ASTC_5x5_KHR=37810]="COMPRESSED_RGBA_ASTC_5x5_KHR",t[t.COMPRESSED_RGBA_ASTC_6x5_KHR=37811]="COMPRESSED_RGBA_ASTC_6x5_KHR",t[t.COMPRESSED_RGBA_ASTC_6x6_KHR=37812]="COMPRESSED_RGBA_ASTC_6x6_KHR",t[t.COMPRESSED_RGBA_ASTC_8x5_KHR=37813]="COMPRESSED_RGBA_ASTC_8x5_KHR",t[t.COMPRESSED_RGBA_ASTC_8x6_KHR=37814]="COMPRESSED_RGBA_ASTC_8x6_KHR",t[t.COMPRESSED_RGBA_ASTC_8x8_KHR=37815]="COMPRESSED_RGBA_ASTC_8x8_KHR",t[t.COMPRESSED_RGBA_ASTC_10x5_KHR=37816]="COMPRESSED_RGBA_ASTC_10x5_KHR",t[t.COMPRESSED_RGBA_ASTC_10x6_KHR=37817]="COMPRESSED_RGBA_ASTC_10x6_KHR",t[t.COMPRESSED_RGBA_ASTC_10x8_KHR=37818]="COMPRESSED_RGBA_ASTC_10x8_KHR",t[t.COMPRESSED_RGBA_ASTC_10x10_KHR=37819]="COMPRESSED_RGBA_ASTC_10x10_KHR",t[t.COMPRESSED_RGBA_ASTC_12x10_KHR=37820]="COMPRESSED_RGBA_ASTC_12x10_KHR",t[t.COMPRESSED_RGBA_ASTC_12x12_KHR=37821]="COMPRESSED_RGBA_ASTC_12x12_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR=37840]="COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR=37841]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR=37842]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR=37843]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR=37844]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR=37845]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR=37846]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR=37847]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR=37848]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR=37849]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR=37850]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR=37851]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR=37852]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR=37853]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR",t[t.QUERY_COUNTER_BITS_EXT=34916]="QUERY_COUNTER_BITS_EXT",t[t.CURRENT_QUERY_EXT=34917]="CURRENT_QUERY_EXT",t[t.QUERY_RESULT_EXT=34918]="QUERY_RESULT_EXT",t[t.QUERY_RESULT_AVAILABLE_EXT=34919]="QUERY_RESULT_AVAILABLE_EXT",t[t.TIME_ELAPSED_EXT=35007]="TIME_ELAPSED_EXT",t[t.TIMESTAMP_EXT=36392]="TIMESTAMP_EXT",t[t.GPU_DISJOINT_EXT=36795]="GPU_DISJOINT_EXT",t[t.COMPLETION_STATUS_KHR=37297]="COMPLETION_STATUS_KHR",t[t.DEPTH_CLAMP_EXT=34383]="DEPTH_CLAMP_EXT",t[t.FIRST_VERTEX_CONVENTION_WEBGL=36429]="FIRST_VERTEX_CONVENTION_WEBGL",t[t.LAST_VERTEX_CONVENTION_WEBGL=36430]="LAST_VERTEX_CONVENTION_WEBGL",t[t.PROVOKING_VERTEX_WEBL=36431]="PROVOKING_VERTEX_WEBL",t[t.POLYGON_MODE_WEBGL=2880]="POLYGON_MODE_WEBGL",t[t.POLYGON_OFFSET_LINE_WEBGL=10754]="POLYGON_OFFSET_LINE_WEBGL",t[t.LINE_WEBGL=6913]="LINE_WEBGL",t[t.FILL_WEBGL=6914]="FILL_WEBGL",t[t.MAX_CLIP_DISTANCES_WEBGL=3378]="MAX_CLIP_DISTANCES_WEBGL",t[t.MAX_CULL_DISTANCES_WEBGL=33529]="MAX_CULL_DISTANCES_WEBGL",t[t.MAX_COMBINED_CLIP_AND_CULL_DISTANCES_WEBGL=33530]="MAX_COMBINED_CLIP_AND_CULL_DISTANCES_WEBGL",t[t.CLIP_DISTANCE0_WEBGL=12288]="CLIP_DISTANCE0_WEBGL",t[t.CLIP_DISTANCE1_WEBGL=12289]="CLIP_DISTANCE1_WEBGL",t[t.CLIP_DISTANCE2_WEBGL=12290]="CLIP_DISTANCE2_WEBGL",t[t.CLIP_DISTANCE3_WEBGL=12291]="CLIP_DISTANCE3_WEBGL",t[t.CLIP_DISTANCE4_WEBGL=12292]="CLIP_DISTANCE4_WEBGL",t[t.CLIP_DISTANCE5_WEBGL=12293]="CLIP_DISTANCE5_WEBGL",t[t.CLIP_DISTANCE6_WEBGL=12294]="CLIP_DISTANCE6_WEBGL",t[t.CLIP_DISTANCE7_WEBGL=12295]="CLIP_DISTANCE7_WEBGL",t[t.POLYGON_OFFSET_CLAMP_EXT=36379]="POLYGON_OFFSET_CLAMP_EXT",t[t.LOWER_LEFT_EXT=36001]="LOWER_LEFT_EXT",t[t.UPPER_LEFT_EXT=36002]="UPPER_LEFT_EXT",t[t.NEGATIVE_ONE_TO_ONE_EXT=37726]="NEGATIVE_ONE_TO_ONE_EXT",t[t.ZERO_TO_ONE_EXT=37727]="ZERO_TO_ONE_EXT",t[t.CLIP_ORIGIN_EXT=37724]="CLIP_ORIGIN_EXT",t[t.CLIP_DEPTH_MODE_EXT=37725]="CLIP_DEPTH_MODE_EXT",t[t.SRC1_COLOR_WEBGL=35065]="SRC1_COLOR_WEBGL",t[t.SRC1_ALPHA_WEBGL=34185]="SRC1_ALPHA_WEBGL",t[t.ONE_MINUS_SRC1_COLOR_WEBGL=35066]="ONE_MINUS_SRC1_COLOR_WEBGL",t[t.ONE_MINUS_SRC1_ALPHA_WEBGL=35067]="ONE_MINUS_SRC1_ALPHA_WEBGL",t[t.MAX_DUAL_SOURCE_DRAW_BUFFERS_WEBGL=35068]="MAX_DUAL_SOURCE_DRAW_BUFFERS_WEBGL",t[t.MIRROR_CLAMP_TO_EDGE_EXT=34627]="MIRROR_CLAMP_TO_EDGE_EXT"})(la||(la={}));const ib={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,35725:null,36006:null,36007:null,34229:null,34964:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32926:!1,32928:!1,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],36389:null,36662:null,36663:null,35053:null,35055:null,35723:4352,36010:null,35977:!1,3333:4,3317:4,37440:!1,37441:!1,37443:37444,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},zt=(t,e,r)=>e?t.enable(r):t.disable(r),QT=(t,e,r)=>t.hint(r,e),Fr=(t,e,r)=>t.pixelStorei(r,e),JT=(t,e,r)=>{const n=r===36006?36009:36008;return t.bindFramebuffer(n,e)},Rl=(t,e,r)=>{const i={34964:34962,36662:36662,36663:36663,35053:35051,35055:35052}[r];t.bindBuffer(i,e)};function em(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}const az={3042:zt,32773:(t,e)=>t.blendColor(...e),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(t,e)=>t.clearColor(...e),3107:(t,e)=>t.colorMask(...e),2884:zt,2885:(t,e)=>t.cullFace(e),2929:zt,2931:(t,e)=>t.clearDepth(e),2932:(t,e)=>t.depthFunc(e),2928:(t,e)=>t.depthRange(...e),2930:(t,e)=>t.depthMask(e),3024:zt,35723:QT,35725:(t,e)=>t.useProgram(e),36007:(t,e)=>t.bindRenderbuffer(36161,e),36389:(t,e)=>{var r;return(r=t.bindTransformFeedback)==null?void 0:r.call(t,36386,e)},34229:(t,e)=>t.bindVertexArray(e),36006:JT,36010:JT,34964:Rl,36662:Rl,36663:Rl,35053:Rl,35055:Rl,2886:(t,e)=>t.frontFace(e),33170:QT,2849:(t,e)=>t.lineWidth(e),32823:zt,32824:"polygonOffset",10752:"polygonOffset",35977:zt,32926:zt,32928:zt,32938:"sampleCoverage",32939:"sampleCoverage",3089:zt,3088:(t,e)=>t.scissor(...e),2960:zt,2961:(t,e)=>t.clearStencil(e),2968:(t,e)=>t.stencilMaskSeparate(1028,e),36005:(t,e)=>t.stencilMaskSeparate(1029,e),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(t,e)=>t.viewport(...e),34383:zt,10754:zt,12288:zt,12289:zt,12290:zt,12291:zt,12292:zt,12293:zt,12294:zt,12295:zt,3333:Fr,3317:Fr,37440:Fr,37441:Fr,37443:Fr,3330:Fr,3332:Fr,3331:Fr,3314:Fr,32878:Fr,3316:Fr,3315:Fr,32877:Fr,framebuffer:(t,e)=>{const r=e&&"handle"in e?e.handle:e;return t.bindFramebuffer(36160,r)},blend:(t,e)=>e?t.enable(3042):t.disable(3042),blendColor:(t,e)=>t.blendColor(...e),blendEquation:(t,e)=>{const r=typeof e=="number"?[e,e]:e;t.blendEquationSeparate(...r)},blendFunc:(t,e)=>{const r=(e==null?void 0:e.length)===2?[...e,...e]:e;t.blendFuncSeparate(...r)},clearColor:(t,e)=>t.clearColor(...e),clearDepth:(t,e)=>t.clearDepth(e),clearStencil:(t,e)=>t.clearStencil(e),colorMask:(t,e)=>t.colorMask(...e),cull:(t,e)=>e?t.enable(2884):t.disable(2884),cullFace:(t,e)=>t.cullFace(e),depthTest:(t,e)=>e?t.enable(2929):t.disable(2929),depthFunc:(t,e)=>t.depthFunc(e),depthMask:(t,e)=>t.depthMask(e),depthRange:(t,e)=>t.depthRange(...e),dither:(t,e)=>e?t.enable(3024):t.disable(3024),derivativeHint:(t,e)=>{t.hint(35723,e)},frontFace:(t,e)=>t.frontFace(e),mipmapHint:(t,e)=>t.hint(33170,e),lineWidth:(t,e)=>t.lineWidth(e),polygonOffsetFill:(t,e)=>e?t.enable(32823):t.disable(32823),polygonOffset:(t,e)=>t.polygonOffset(...e),sampleCoverage:(t,e)=>t.sampleCoverage(e[0],e[1]||!1),scissorTest:(t,e)=>e?t.enable(3089):t.disable(3089),scissor:(t,e)=>t.scissor(...e),stencilTest:(t,e)=>e?t.enable(2960):t.disable(2960),stencilMask:(t,e)=>{e=em(e)?e:[e,e];const[r,n]=e;t.stencilMaskSeparate(1028,r),t.stencilMaskSeparate(1029,n)},stencilFunc:(t,e)=>{e=em(e)&&e.length===3?[...e,...e]:e;const[r,n,i,s,o,l]=e;t.stencilFuncSeparate(1028,r,n,i),t.stencilFuncSeparate(1029,s,o,l)},stencilOp:(t,e)=>{e=em(e)&&e.length===3?[...e,...e]:e;const[r,n,i,s,o,l]=e;t.stencilOpSeparate(1028,r,n,i),t.stencilOpSeparate(1029,s,o,l)},viewport:(t,e)=>t.viewport(...e)};function At(t,e,r){return e[t]!==void 0?e[t]:r[t]}const lz={blendEquation:(t,e,r)=>t.blendEquationSeparate(At(32777,e,r),At(34877,e,r)),blendFunc:(t,e,r)=>t.blendFuncSeparate(At(32969,e,r),At(32968,e,r),At(32971,e,r),At(32970,e,r)),polygonOffset:(t,e,r)=>t.polygonOffset(At(32824,e,r),At(10752,e,r)),sampleCoverage:(t,e,r)=>t.sampleCoverage(At(32938,e,r),At(32939,e,r)),stencilFuncFront:(t,e,r)=>t.stencilFuncSeparate(1028,At(2962,e,r),At(2967,e,r),At(2963,e,r)),stencilFuncBack:(t,e,r)=>t.stencilFuncSeparate(1029,At(34816,e,r),At(36003,e,r),At(36004,e,r)),stencilOpFront:(t,e,r)=>t.stencilOpSeparate(1028,At(2964,e,r),At(2965,e,r),At(2966,e,r)),stencilOpBack:(t,e,r)=>t.stencilOpSeparate(1029,At(34817,e,r),At(34818,e,r),At(34819,e,r))},eE={enable:(t,e)=>t({[e]:!0}),disable:(t,e)=>t({[e]:!1}),pixelStorei:(t,e,r)=>t({[e]:r}),hint:(t,e,r)=>t({[e]:r}),useProgram:(t,e)=>t({35725:e}),bindRenderbuffer:(t,e,r)=>t({36007:r}),bindTransformFeedback:(t,e,r)=>t({36389:r}),bindVertexArray:(t,e)=>t({34229:e}),bindFramebuffer:(t,e,r)=>{switch(e){case 36160:return t({36006:r,36010:r});case 36009:return t({36006:r});case 36008:return t({36010:r});default:return null}},bindBuffer:(t,e,r)=>{const n={34962:[34964],36662:[36662],36663:[36663],35051:[35053],35052:[35055]}[e];return n?t({[n]:r}):{valueChanged:!0}},blendColor:(t,e,r,n,i)=>t({32773:new Float32Array([e,r,n,i])}),blendEquation:(t,e)=>t({32777:e,34877:e}),blendEquationSeparate:(t,e,r)=>t({32777:e,34877:r}),blendFunc:(t,e,r)=>t({32969:e,32968:r,32971:e,32970:r}),blendFuncSeparate:(t,e,r,n,i)=>t({32969:e,32968:r,32971:n,32970:i}),clearColor:(t,e,r,n,i)=>t({3106:new Float32Array([e,r,n,i])}),clearDepth:(t,e)=>t({2931:e}),clearStencil:(t,e)=>t({2961:e}),colorMask:(t,e,r,n,i)=>t({3107:[e,r,n,i]}),cullFace:(t,e)=>t({2885:e}),depthFunc:(t,e)=>t({2932:e}),depthRange:(t,e,r)=>t({2928:new Float32Array([e,r])}),depthMask:(t,e)=>t({2930:e}),frontFace:(t,e)=>t({2886:e}),lineWidth:(t,e)=>t({2849:e}),polygonOffset:(t,e,r)=>t({32824:e,10752:r}),sampleCoverage:(t,e,r)=>t({32938:e,32939:r}),scissor:(t,e,r,n,i)=>t({3088:new Int32Array([e,r,n,i])}),stencilMask:(t,e)=>t({2968:e,36005:e}),stencilMaskSeparate:(t,e,r)=>t({[e===1028?2968:36005]:r}),stencilFunc:(t,e,r,n)=>t({2962:e,2967:r,2963:n,34816:e,36003:r,36004:n}),stencilFuncSeparate:(t,e,r,n,i)=>t({[e===1028?2962:34816]:r,[e===1028?2967:36003]:n,[e===1028?2963:36004]:i}),stencilOp:(t,e,r,n)=>t({2964:e,2965:r,2966:n,34817:e,34818:r,34819:n}),stencilOpSeparate:(t,e,r,n,i)=>t({[e===1028?2964:34817]:r,[e===1028?2965:34818]:n,[e===1028?2966:34819]:i}),viewport:(t,e,r,n,i)=>t({2978:[e,r,n,i]})},Mn=(t,e)=>t.isEnabled(e),tE={3042:Mn,2884:Mn,2929:Mn,3024:Mn,32823:Mn,32926:Mn,32928:Mn,3089:Mn,2960:Mn,35977:Mn},cz=new Set([34016,36388,36387,35983,35368,34965,35739,35738,3074,34853,34854,34855,34856,34857,34858,34859,34860,34861,34862,34863,34864,34865,34866,34867,34868,35097,32873,35869,32874,34068]);function Na(t,e){if(fz(e))return;const r={};for(const i in e){const s=Number(i),o=az[i];o&&(typeof o=="string"?r[o]=!0:o(t,e[i],s))}const n=t.state&&t.state.cache;if(n)for(const i in r){const s=lz[i];s(t,e,n)}}function kM(t,e=ib){if(typeof e=="number"){const i=e,s=tE[i];return s?s(t,i):t.getParameter(i)}const r=Array.isArray(e)?e:Object.keys(e),n={};for(const i of r){const s=tE[i];n[i]=s?s(t,Number(i)):t.getParameter(Number(i))}return n}function uz(t){Na(t,ib)}function fz(t){for(const e in t)return!1;return!0}function hz(t,e){if(t===e)return!0;const r=Array.isArray(t)||ArrayBuffer.isView(t),n=Array.isArray(e)||ArrayBuffer.isView(e);if(r&&n&&t.length===e.length){for(let i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0}return!1}class Rs{constructor(e,r){T(this,"gl");T(this,"program",null);T(this,"stateStack",[]);T(this,"enable",!0);T(this,"cache",null);T(this,"log");T(this,"initialized",!1);this.gl=e,this.log=(r==null?void 0:r.log)||(()=>{}),this._updateCache=this._updateCache.bind(this),Object.seal(this)}static get(e){return e.state}push(e={}){this.stateStack.push({})}pop(){const e=this.stateStack[this.stateStack.length-1];Na(this.gl,e),this.stateStack.pop()}trackState(e,r){if(this.cache=r.copyState?kM(e):Object.assign({},ib),this.initialized)throw new Error("WebGLStateTracker");this.initialized=!0,this.gl.state=this,pz(e);for(const n in eE){const i=eE[n];dz(e,n,i)}rE(e,"getParameter"),rE(e,"isEnabled")}_updateCache(e){let r=!1,n;const i=this.stateStack.length>0?this.stateStack[this.stateStack.length-1]:null;for(const s in e){const o=e[s],l=this.cache[s];hz(o,l)||(r=!0,n=l,i&&!(s in i)&&(i[s]=l),this.cache[s]=o)}return{valueChanged:r,oldValue:n}}}function rE(t,e){const r=t[e].bind(t);t[e]=function(i){if(i===void 0||cz.has(i))return r(i);const s=Rs.get(t);return i in s.cache||(s.cache[i]=r(i)),s.enable?s.cache[i]:r(i)},Object.defineProperty(t[e],"name",{value:`${e}-from-cache`,configurable:!1})}function dz(t,e,r){if(!t[e])return;const n=t[e].bind(t);t[e]=function(...s){const o=Rs.get(t),{valueChanged:l,oldValue:u}=r(o._updateCache,...s);return l&&n(...s),u},Object.defineProperty(t[e],"name",{value:`${e}-to-cache`,configurable:!1})}function pz(t){const e=t.useProgram.bind(t);t.useProgram=function(n){const i=Rs.get(t);i.program!==n&&(e(n),i.program=n)}}function gz(t,e,r){let n="";const i={preserveDrawingBuffer:!0,...r};let s=null;if(s||(s=t.getContext("webgl2",i)),i.failIfMajorPerformanceCaveat&&(n||(n="Only software GPU is available. Set `failIfMajorPerformanceCaveat: false` to allow.")),!s&&!r.failIfMajorPerformanceCaveat&&(i.failIfMajorPerformanceCaveat=!1,s=t.getContext("webgl2",i),s.luma||(s.luma={}),s.luma.softwareRenderer=!0),s||(s=t.getContext("webgl",{}),s&&(s=null,n||(n="Your browser only supports WebGL1"))),!s)throw n||(n="Your browser does not support WebGL"),new Error(`Failed to create WebGL context: ${n}`);const{onContextLost:o,onContextRestored:l}=e;return t.addEventListener("webglcontextlost",u=>o(u),!1),t.addEventListener("webglcontextrestored",u=>l(u),!1),s.luma||(s.luma={}),s}function Ca(t,e,r){return r[e]===void 0&&(r[e]=t.getExtension(e)||null),r[e]}function mz(t,e){const r=t.getParameter(7936),n=t.getParameter(7937);Ca(t,"WEBGL_debug_renderer_info",e);const i=e.WEBGL_debug_renderer_info,s=t.getParameter(i?i.UNMASKED_VENDOR_WEBGL:7936),o=t.getParameter(i?i.UNMASKED_RENDERER_WEBGL:7937),l=s||r,u=o||n,f=t.getParameter(7938),d=NM(l,u),g=_z(l,u),m=yz(l,u);return{type:"webgl",gpu:d,gpuType:m,gpuBackend:g,vendor:l,renderer:u,version:f,shadingLanguage:"glsl",shadingLanguageVersion:300}}function NM(t,e){return/NVIDIA/i.exec(t)||/NVIDIA/i.exec(e)?"nvidia":/INTEL/i.exec(t)||/INTEL/i.exec(e)?"intel":/Apple/i.exec(t)||/Apple/i.exec(e)?"apple":/AMD/i.exec(t)||/AMD/i.exec(e)||/ATI/i.exec(t)||/ATI/i.exec(e)?"amd":/SwiftShader/i.exec(t)||/SwiftShader/i.exec(e)?"software":"unknown"}function _z(t,e){return/Metal/i.exec(t)||/Metal/i.exec(e)?"metal":/ANGLE/i.exec(t)||/ANGLE/i.exec(e)?"opengl":"unknown"}function yz(t,e){if(/SwiftShader/i.exec(t)||/SwiftShader/i.exec(e))return"cpu";switch(NM(t,e)){case"intel":return"integrated";case"software":return"cpu";case"unknown":return"unknown";default:return"discrete"}}function FM(t){switch(t){case"uint8":return 5121;case"sint8":return 5120;case"unorm8":return 5121;case"snorm8":return 5120;case"uint16":return 5123;case"sint16":return 5122;case"unorm16":return 5123;case"snorm16":return 5122;case"uint32":return 5125;case"sint32":return 5124;case"float16":return 5131;case"float32":return 5126}throw new Error(String(t))}const Ul="WEBGL_compressed_texture_s3tc",zl="WEBGL_compressed_texture_s3tc_srgb",ca="EXT_texture_compression_rgtc",ua="EXT_texture_compression_bptc",vz="WEBGL_compressed_texture_etc",bz="WEBGL_compressed_texture_astc",wz="WEBGL_compressed_texture_etc1",Sz="WEBGL_compressed_texture_pvrtc",xz="WEBGL_compressed_texture_atc",nE="EXT_texture_norm16",iE="EXT_render_snorm",Tz="EXT_color_buffer_float",sb={"float32-renderable-webgl":["EXT_color_buffer_float"],"float16-renderable-webgl":["EXT_color_buffer_half_float"],"rgb9e5ufloat-renderable-webgl":["WEBGL_render_shared_exponent"],"snorm8-renderable-webgl":[iE],"norm16-renderable-webgl":[nE],"snorm16-renderable-webgl":[nE,iE],"float32-filterable":["OES_texture_float_linear"],"float16-filterable-webgl":["OES_texture_half_float_linear"],"texture-filterable-anisotropic-webgl":["EXT_texture_filter_anisotropic"],"texture-blend-float-webgl":["EXT_float_blend"],"texture-compression-bc":[Ul,zl,ca,ua],"texture-compression-bc5-webgl":[ca],"texture-compression-bc7-webgl":[ua],"texture-compression-etc2":[vz],"texture-compression-astc":[bz],"texture-compression-etc1-webgl":[wz],"texture-compression-pvrtc-webgl":[Sz],"texture-compression-atc-webgl":[xz]};function Ez(t){return t in sb}function Az(t,e,r){return(sb[e]||[]).every(i=>Ca(t,i,r))}const ob={r8unorm:{gl:33321,rb:!0},r8snorm:{gl:36756},r8uint:{gl:33330,rb:!0},r8sint:{gl:33329,rb:!0},rg8unorm:{gl:33323,rb:!0},rg8snorm:{gl:36757},rg8uint:{gl:33336,rb:!0},rg8sint:{gl:33335,rb:!0},r16uint:{gl:33332,rb:!0},r16sint:{gl:33331,rb:!0},r16float:{gl:33325,rb:!0},"r16unorm-webgl":{gl:33322,rb:!0},"r16snorm-webgl":{gl:36760},"rgba4unorm-webgl":{gl:32854,rb:!0},"rgb565unorm-webgl":{gl:36194,rb:!0},"rgb5a1unorm-webgl":{gl:32855,rb:!0},"rgb8unorm-webgl":{gl:32849},"rgb8snorm-webgl":{gl:36758},rgba8unorm:{gl:32856},"rgba8unorm-srgb":{gl:35907},rgba8snorm:{gl:36759},rgba8uint:{gl:36220},rgba8sint:{gl:36238},bgra8unorm:{},"bgra8unorm-srgb":{},rg16uint:{gl:33338},rg16sint:{gl:33337},rg16float:{gl:33327,rb:!0},"rg16unorm-webgl":{gl:33324},"rg16snorm-webgl":{gl:36761},r32uint:{gl:33334,rb:!0},r32sint:{gl:33333,rb:!0},r32float:{gl:33326},rgb9e5ufloat:{gl:35901},rg11b10ufloat:{gl:35898,rb:!0},rgb10a2unorm:{gl:32857,rb:!0},"rgb10a2uint-webgl":{gl:36975,rb:!0},"rgb16unorm-webgl":{gl:32852},"rgb16snorm-webgl":{gl:36762},rg32uint:{gl:33340,rb:!0},rg32sint:{gl:33339,rb:!0},rg32float:{gl:33328,rb:!0},rgba16uint:{gl:36214,rb:!0},rgba16sint:{gl:36232,rb:!0},rgba16float:{gl:34842},"rgba16unorm-webgl":{gl:32859,rb:!0},"rgba16snorm-webgl":{gl:36763},"rgb32float-webgl":{gl:34837,x:Tz,dataFormat:6407,types:[5126]},rgba32uint:{gl:36208,rb:!0},rgba32sint:{gl:36226,rb:!0},rgba32float:{gl:34836,rb:!0},stencil8:{gl:36168,rb:!0},depth16unorm:{gl:33189,dataFormat:6402,types:[5123],rb:!0},depth24plus:{gl:33190,dataFormat:6402,types:[5125]},depth32float:{gl:36012,dataFormat:6402,types:[5126],rb:!0},"depth24plus-stencil8":{gl:35056,rb:!0,depthTexture:!0,dataFormat:34041,types:[34042]},"depth32float-stencil8":{gl:36013,dataFormat:34041,types:[36269],rb:!0},"bc1-rgb-unorm-webgl":{gl:33776,x:Ul},"bc1-rgb-unorm-srgb-webgl":{gl:35916,x:zl},"bc1-rgba-unorm":{gl:33777,x:Ul},"bc1-rgba-unorm-srgb":{gl:35916,x:zl},"bc2-rgba-unorm":{gl:33778,x:Ul},"bc2-rgba-unorm-srgb":{gl:35918,x:zl},"bc3-rgba-unorm":{gl:33779,x:Ul},"bc3-rgba-unorm-srgb":{gl:35919,x:zl},"bc4-r-unorm":{gl:36283,x:ca},"bc4-r-snorm":{gl:36284,x:ca},"bc5-rg-unorm":{gl:36285,x:ca},"bc5-rg-snorm":{gl:36286,x:ca},"bc6h-rgb-ufloat":{gl:36495,x:ua},"bc6h-rgb-float":{gl:36494,x:ua},"bc7-rgba-unorm":{gl:36492,x:ua},"bc7-rgba-unorm-srgb":{gl:36493,x:ua},"etc2-rgb8unorm":{gl:37492},"etc2-rgb8unorm-srgb":{gl:37494},"etc2-rgb8a1unorm":{gl:37496},"etc2-rgb8a1unorm-srgb":{gl:37497},"etc2-rgba8unorm":{gl:37493},"etc2-rgba8unorm-srgb":{gl:37495},"eac-r11unorm":{gl:37488},"eac-r11snorm":{gl:37489},"eac-rg11unorm":{gl:37490},"eac-rg11snorm":{gl:37491},"astc-4x4-unorm":{gl:37808},"astc-4x4-unorm-srgb":{gl:37840},"astc-5x4-unorm":{gl:37809},"astc-5x4-unorm-srgb":{gl:37841},"astc-5x5-unorm":{gl:37810},"astc-5x5-unorm-srgb":{gl:37842},"astc-6x5-unorm":{gl:37811},"astc-6x5-unorm-srgb":{gl:37843},"astc-6x6-unorm":{gl:37812},"astc-6x6-unorm-srgb":{gl:37844},"astc-8x5-unorm":{gl:37813},"astc-8x5-unorm-srgb":{gl:37845},"astc-8x6-unorm":{gl:37814},"astc-8x6-unorm-srgb":{gl:37846},"astc-8x8-unorm":{gl:37815},"astc-8x8-unorm-srgb":{gl:37847},"astc-10x5-unorm":{gl:37819},"astc-10x5-unorm-srgb":{gl:37851},"astc-10x6-unorm":{gl:37817},"astc-10x6-unorm-srgb":{gl:37849},"astc-10x8-unorm":{gl:37818},"astc-10x8-unorm-srgb":{gl:37850},"astc-10x10-unorm":{gl:37819},"astc-10x10-unorm-srgb":{gl:37851},"astc-12x10-unorm":{gl:37820},"astc-12x10-unorm-srgb":{gl:37852},"astc-12x12-unorm":{gl:37821},"astc-12x12-unorm-srgb":{gl:37853},"pvrtc-rgb4unorm-webgl":{gl:35840},"pvrtc-rgba4unorm-webgl":{gl:35842},"pvrtc-rbg2unorm-webgl":{gl:35841},"pvrtc-rgba2unorm-webgl":{gl:35843},"etc1-rbg-unorm-webgl":{gl:36196},"atc-rgb-unorm-webgl":{gl:35986},"atc-rgba-unorm-webgl":{gl:35986},"atc-rgbai-unorm-webgl":{gl:34798}};function Cz(t,e,r){let n=e.create;const i=ob[e.format];return(i==null?void 0:i.gl)===void 0&&(n=!1),i!=null&&i.x&&(n=n&&!!Ca(t,i.x,r)),{format:e.format,create:n&&e.create,render:n&&e.render,filter:n&&e.filter,blend:n&&e.blend,store:n&&e.store}}function DM(t){var i;const e=ob[t],r=Mz(t),n=Xv(t);return{internalFormat:r,format:(e==null?void 0:e.dataFormat)||Pz(n.channels,n.integer,n.normalized,r),type:n.dataType?FM(n.dataType):((i=e==null?void 0:e.types)==null?void 0:i[0])||5121,compressed:n.compressed||!1}}function Rz(t){switch(Xv(t).attachment){case"depth":return 36096;case"stencil":return 36128;case"depth-stencil":return 33306;default:throw new Error(`Not a depth stencil format: ${t}`)}}function Pz(t,e,r,n){if(n===6408||n===6407)return n;switch(t){case"r":return e&&!r?36244:6403;case"rg":return e&&!r?33320:33319;case"rgb":return e&&!r?36248:6407;case"rgba":return e&&!r?36249:6408;case"bgra":throw new Error("bgra pixels not supported by WebGL");default:return 6408}}function Mz(t){const e=ob[t],r=e==null?void 0:e.gl;if(r===void 0)throw new Error(`Unsupported texture format ${t}`);return r}const sE={"depth-clip-control":"EXT_depth_clamp","timer-query-webgl":"EXT_disjoint_timer_query_webgl2","compilation-status-async-webgl":"KHR_parallel_shader_compile","polygon-mode-webgl":"WEBGL_polygon_mode","provoking-vertex-webgl":"WEBGL_provoking_vertex","shader-clip-cull-distance-webgl":"WEBGL_clip_cull_distance","shader-noperspective-interpolation-webgl":"NV_shader_noperspective_interpolation","shader-conservative-depth-webgl":"EXT_conservative_depth"};class Iz extends zD{constructor(r,n,i){super([],i);T(this,"gl");T(this,"extensions");T(this,"testedFeatures",new Set);this.gl=r,this.extensions=n,Ca(r,"EXT_color_buffer_float",n)}*[Symbol.iterator](){const r=this.getFeatures();for(const n of r)this.has(n)&&(yield n);return[]}has(r){var n;return(n=this.disabledFeatures)!=null&&n[r]?!1:(this.testedFeatures.has(r)||(this.testedFeatures.add(r),Ez(r)&&Az(this.gl,r,this.extensions)&&this.features.add(r),this.getWebGLFeature(r)&&this.features.add(r)),this.features.has(r))}initializeFeatures(){const r=this.getFeatures().filter(n=>n!=="polygon-mode-webgl");for(const n of r)this.has(n)}getFeatures(){return[...Object.keys(sE),...Object.keys(sb)]}getWebGLFeature(r){const n=sE[r];return typeof n=="string"?!!Ca(this.gl,n,this.extensions):!!n}}class Oz extends UD{constructor(r){super();T(this,"gl");T(this,"limits",{});this.gl=r}get maxTextureDimension1D(){return 0}get maxTextureDimension2D(){return this.getParameter(3379)}get maxTextureDimension3D(){return this.getParameter(32883)}get maxTextureArrayLayers(){return this.getParameter(35071)}get maxBindGroups(){return 0}get maxDynamicUniformBuffersPerPipelineLayout(){return 0}get maxDynamicStorageBuffersPerPipelineLayout(){return 0}get maxSampledTexturesPerShaderStage(){return this.getParameter(35660)}get maxSamplersPerShaderStage(){return this.getParameter(35661)}get maxStorageBuffersPerShaderStage(){return 0}get maxStorageTexturesPerShaderStage(){return 0}get maxUniformBuffersPerShaderStage(){return this.getParameter(35375)}get maxUniformBufferBindingSize(){return this.getParameter(35376)}get maxStorageBufferBindingSize(){return 0}get minUniformBufferOffsetAlignment(){return this.getParameter(35380)}get minStorageBufferOffsetAlignment(){return 0}get maxVertexBuffers(){return 16}get maxVertexAttributes(){return this.getParameter(34921)}get maxVertexBufferArrayStride(){return 2048}get maxInterStageShaderComponents(){return this.getParameter(35659)}get maxComputeWorkgroupStorageSize(){return 0}get maxComputeInvocationsPerWorkgroup(){return 0}get maxComputeWorkgroupSizeX(){return 0}get maxComputeWorkgroupSizeY(){return 0}get maxComputeWorkgroupSizeZ(){return 0}get maxComputeWorkgroupsPerDimension(){return 0}getParameter(r){return this.limits[r]===void 0&&(this.limits[r]=this.gl.getParameter(r)),this.limits[r]||0}}class ec extends oh{constructor(r,n){super(r,n);T(this,"device");T(this,"gl");T(this,"handle");T(this,"colorAttachments",[]);T(this,"depthStencilAttachment",null);const i=n.handle===null;this.device=r,this.gl=r.gl,this.handle=this.props.handle||i?this.props.handle:this.gl.createFramebuffer(),i||(r.setSpectorMetadata(this.handle,{id:this.props.id,props:this.props}),this.autoCreateAttachmentTextures(),this.updateAttachments())}destroy(){super.destroy(),!this.destroyed&&this.handle!==null&&this.gl.deleteFramebuffer(this.handle)}updateAttachments(){const r=this.gl.bindFramebuffer(36160,this.handle);for(let n=0;n<this.colorAttachments.length;++n){const i=this.colorAttachments[n];if(i){const s=36064+n;this._attachTextureView(s,i)}}if(this.depthStencilAttachment){const n=Rz(this.depthStencilAttachment.props.format);this._attachTextureView(n,this.depthStencilAttachment)}if(this.device.props.debug){const n=this.gl.checkFramebufferStatus(36160);if(n!==36053)throw new Error(`Framebuffer ${Nz(n)}`)}this.gl.bindFramebuffer(36160,r)}_attachTextureView(r,n){const{gl:i}=this.device,{texture:s}=n,o=n.props.baseMipLevel,l=n.props.baseArrayLayer;switch(i.bindTexture(s.glTarget,s.handle),s.glTarget){case 35866:case 32879:i.framebufferTextureLayer(36160,r,s.handle,o,l);break;case 34067:const u=kz(l);i.framebufferTexture2D(36160,r,u,s.handle,o);break;case 3553:i.framebufferTexture2D(36160,r,3553,s.handle,o);break;default:throw new Error("Illegal texture type")}i.bindTexture(s.glTarget,null)}}function kz(t){return t<34069?t+34069:t}function Nz(t){switch(t){case 36053:return"success";case 36054:return"Mismatched attachments";case 36055:return"No attachments";case 36057:return"Height/width mismatch";case 36061:return"Unsupported or split attachments";case 36182:return"Samples mismatch";default:return`${t}`}}class Fz extends Oy{constructor(r,n){super(n);T(this,"device");T(this,"format","rgba8unorm");T(this,"depthStencilFormat","depth24plus");T(this,"presentationSize");T(this,"_framebuffer",null);this.device=r,this.presentationSize=[-1,-1],this._setAutoCreatedCanvasId(`${this.device.id}-canvas`),this.update()}get[Symbol.toStringTag](){return"WebGLCanvasContext"}getCurrentFramebuffer(){return this.update(),this._framebuffer=this._framebuffer||new ec(this.device,{handle:null}),this._framebuffer}update(){const r=this.getPixelSize();(r[0]!==this.presentationSize[0]||r[1]!==this.presentationSize[1])&&(this.presentationSize=r,this.resize())}resize(r){if(this.device.gl&&this.canvas){const n=this.getDevicePixelRatio(r==null?void 0:r.useDevicePixels);this.setDevicePixelRatio(n,r);return}}commit(){}}async function BM(t,e){const r=document.getElementsByTagName("head")[0];if(!r)throw new Error("loadScript");const n=document.createElement("script");return n.setAttribute("type","text/javascript"),n.setAttribute("src",t),new Promise((i,s)=>{n.onload=i,n.onerror=o=>s(new Error(`Unable to load script '${t}': ${o}`)),r.appendChild(n)})}const Dz=1;let st=null,oE=!1;const ab={debugSpectorJS:fe.get("debug-spectorjs"),debugSpectorJSUrl:"https://cdn.jsdelivr.net/npm/spectorjs@0.9.30/dist/spector.bundle.js",gl:void 0};async function Bz(t){if(!globalThis.SPECTOR)try{await BM(t.debugSpectorJSUrl||ab.debugSpectorJSUrl)}catch(e){fe.warn(String(e))}}function Lz(t){var e;if(t={...ab,...t},!t.debugSpectorJS)return null;if(!st&&globalThis.SPECTOR&&!((e=globalThis.luma)!=null&&e.spector)){fe.probe(Dz,"SPECTOR found and initialized. Start with `luma.spector.displayUI()`")();const{Spector:r}=globalThis.SPECTOR;st=new r,globalThis.luma&&(globalThis.luma.spector=st)}if(!st)return null;if(oE||(oE=!0,st.spyCanvases(),st==null||st.onCaptureStarted.add(r=>fe.info("Spector capture started:",r)()),st==null||st.onCapture.add(r=>{fe.info("Spector capture complete:",r)(),st==null||st.getResultUI(),st==null||st.resultView.display(),st==null||st.resultView.addCapture(r)})),t.gl){const r=t.gl,n=r.device;st==null||st.startCapture(t.gl,500),r.device=n,new Promise(i=>setTimeout(i,2e3)).then(i=>{fe.info("Spector capture stopped after 2 seconds")(),st==null||st.stopCapture()})}return st}const Uz="https://unpkg.com/webgl-debug@2.0.1/index.js";function LM(t){return t.luma=t.luma||{},t.luma}async function zz(){zs()&&!globalThis.WebGLDebugUtils&&(globalThis.global=globalThis.global||globalThis,globalThis.global.module={},await BM(Uz))}function $z(t,e={}){return e.debugWebGL||e.traceWebGL?jz(t,e):Vz(t)}function Vz(t){const e=LM(t);return e.realContext?e.realContext:t}function jz(t,e){if(!globalThis.WebGLDebugUtils)return fe.warn("webgl-debug not loaded")(),t;const r=LM(t);if(r.debugContext)return r.debugContext;globalThis.WebGLDebugUtils.init({...la,...t});const n=globalThis.WebGLDebugUtils.makeDebugContext(t,Hz.bind(null,e),Wz.bind(null,e));for(const o in la)!(o in n)&&typeof la[o]=="number"&&(n[o]=la[o]);class i{}Object.setPrototypeOf(n,Object.getPrototypeOf(t)),Object.setPrototypeOf(i,n);const s=Object.create(i);return r.realContext=t,r.debugContext=s,s.debug=!0,s}function aE(t,e){e=Array.from(e).map(n=>n===void 0?"undefined":n);let r=globalThis.WebGLDebugUtils.glFunctionArgsToString(t,e);return r=`${r.slice(0,100)}${r.length>100?"...":""}`,`gl.${t}(${r})`}function Hz(t,e,r,n){n=Array.from(n).map(l=>l===void 0?"undefined":l);const i=globalThis.WebGLDebugUtils.glEnumToString(e),s=globalThis.WebGLDebugUtils.glFunctionArgsToString(r,n),o=`${i} in gl.${r}(${s})`;fe.error(o)();debugger}function Wz(t,e,r){let n="";fe.level>=1&&(n=aE(e,r),t.traceWebGL&&fe.log(1,n)());for(const i of r)if(i===void 0){n=n||aE(e,r);debugger}}const tm={};function qz(t="id"){tm[t]=tm[t]||1;const e=tm[t]++;return`${t}-${e}`}class tc extends It{constructor(r,n={}){super(r,n);T(this,"device");T(this,"gl");T(this,"handle");T(this,"glTarget");T(this,"glUsage");T(this,"glIndexType",5123);T(this,"byteLength");T(this,"bytesUsed");this.device=r,this.gl=this.device.gl;const i=typeof n=="object"?n.handle:void 0;this.handle=i||this.gl.createBuffer(),r.setSpectorMetadata(this.handle,{...this.props,data:typeof this.props.data}),this.glTarget=Xz(this.props.usage),this.glUsage=Kz(this.props.usage),this.glIndexType=this.props.indexType==="uint32"?5125:5123,n.data?this._initWithData(n.data,n.byteOffset,n.byteLength):this._initWithByteLength(n.byteLength||0)}_initWithData(r,n=0,i=r.byteLength+n){const s=this.glTarget;this.gl.bindBuffer(s,this.handle),this.gl.bufferData(s,i,this.glUsage),this.gl.bufferSubData(s,n,r),this.gl.bindBuffer(s,null),this.bytesUsed=i,this.byteLength=i,this._setDebugData(r,n,i),this.trackAllocatedMemory(i)}_initWithByteLength(r){let n=r;r===0&&(n=new Float32Array(0));const i=this.glTarget;return this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,n,this.glUsage),this.gl.bindBuffer(i,null),this.bytesUsed=r,this.byteLength=r,this._setDebugData(null,0,r),this.trackAllocatedMemory(r),this}destroy(){!this.destroyed&&this.handle&&(this.removeStats(),this.trackDeallocatedMemory(),this.gl.deleteBuffer(this.handle),this.destroyed=!0,this.handle=null)}write(r,n=0){this.gl.bindBuffer(36663,this.handle),this.gl.bufferSubData(36663,n,r),this.gl.bindBuffer(36663,null),this._setDebugData(r,n,r.byteLength)}async readAsync(r=0,n){return this.readSyncWebGL(r,n)}readSyncWebGL(r=0,n){n=n??this.byteLength-r;const i=new Uint8Array(n),s=0;return this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,r,i,s,n),this.gl.bindBuffer(36662,null),this._setDebugData(i,r,n),i}}function Xz(t){return t&It.INDEX?34963:t&It.VERTEX?34962:t&It.UNIFORM?35345:34962}function Kz(t){return t&It.INDEX||t&It.VERTEX?35044:t&It.UNIFORM?35048:35044}function Yz(t){const e=t.split(/\r?\n/),r=[];for(const n of e){if(n.length<=1)continue;const i=n.split(":");if(i.length===2){const[g,m]=i;r.push({message:m.trim(),type:lE(g),lineNum:0,linePos:0});continue}const[s,o,l,...u]=i;let f=parseInt(l,10);isNaN(f)&&(f=0);let d=parseInt(o,10);isNaN(d)&&(d=0),r.push({message:u.join(":").trim(),type:lE(s),lineNum:f,linePos:d})}return r}function lE(t){const e=["warning","error","info"],r=t.toLowerCase();return e.includes(r)?r:"info"}class Zz extends ih{constructor(r,n){super(r,n);T(this,"device");T(this,"handle");switch(this.device=r,this.props.stage){case"vertex":this.handle=this.props.handle||this.device.gl.createShader(35633);break;case"fragment":this.handle=this.props.handle||this.device.gl.createShader(35632);break;default:throw new Error(this.props.stage)}this._compile(this.source)}destroy(){this.handle&&(this.removeStats(),this.device.gl.deleteShader(this.handle),this.destroyed=!0)}get asyncCompilationStatus(){return this._waitForCompilationComplete().then(()=>this.compilationStatus)}async getCompilationInfo(){return await this._waitForCompilationComplete(),this.getCompilationInfoSync()}getCompilationInfoSync(){const r=this.device.gl.getShaderInfoLog(this.handle);return r?Yz(r):[]}getTranslatedSource(){const n=this.device.getExtension("WEBGL_debug_shaders").WEBGL_debug_shaders;return(n==null?void 0:n.getTranslatedShaderSource(this.handle))||null}async _compile(r){r=r.startsWith("#version ")?r:`#version 300 es
${r}`;const{gl:n}=this.device;if(n.shaderSource(this.handle,r),n.compileShader(this.handle),!this.device.props.debug){this.compilationStatus="pending";return}if(!this.device.features.has("compilation-status-async-webgl")){if(this._getCompilationStatus(),this.debugShader(),this.compilationStatus==="error")throw new Error(`GLSL compilation errors in ${this.props.stage} shader ${this.props.id}`);return}fe.once(1,"Shader compilation is asynchronous")(),await this._waitForCompilationComplete(),fe.info(2,`Shader ${this.id} - async compilation complete: ${this.compilationStatus}`)(),this._getCompilationStatus(),this.debugShader()}async _waitForCompilationComplete(){const r=async s=>await new Promise(o=>setTimeout(o,s));if(!this.device.features.has("compilation-status-async-webgl")){await r(10);return}const{gl:i}=this.device;for(;;){if(i.getShaderParameter(this.handle,37297))return;await r(10)}}_getCompilationStatus(){this.compilationStatus=this.device.gl.getShaderParameter(this.handle,35713)?"success":"error"}}function Gz(t,e,r,n){if(t7(e))return n(t);const i=t;i.pushState();try{return Qz(t,e),Na(i.gl,r),n(t)}finally{i.popState()}}function Qz(t,e){const r=t,{gl:n}=r;if(e.cullMode)switch(e.cullMode){case"none":n.disable(2884);break;case"front":n.enable(2884),n.cullFace(1028);break;case"back":n.enable(2884),n.cullFace(1029);break}if(e.frontFace&&n.frontFace(Ps("frontFace",e.frontFace,{ccw:2305,cw:2304})),e.unclippedDepth&&t.features.has("depth-clip-control")&&n.enable(34383),e.depthBias!==void 0&&(n.enable(32823),n.polygonOffset(e.depthBias,e.depthBiasSlopeScale||0)),e.provokingVertex&&t.features.has("provoking-vertex-webgl")){const s=r.getExtension("WEBGL_provoking_vertex").WEBGL_provoking_vertex,o=Ps("provokingVertex",e.provokingVertex,{first:36429,last:36430});s==null||s.provokingVertexWEBGL(o)}if((e.polygonMode||e.polygonOffsetLine)&&t.features.has("polygon-mode-webgl")){if(e.polygonMode){const s=r.getExtension("WEBGL_polygon_mode").WEBGL_polygon_mode,o=Ps("polygonMode",e.polygonMode,{fill:6914,line:6913});s==null||s.polygonModeWEBGL(1028,o),s==null||s.polygonModeWEBGL(1029,o)}e.polygonOffsetLine&&n.enable(10754)}if(t.features.has("shader-clip-cull-distance-webgl")&&(e.clipDistance0&&n.enable(12288),e.clipDistance1&&n.enable(12289),e.clipDistance2&&n.enable(12290),e.clipDistance3&&n.enable(12291),e.clipDistance4&&n.enable(12292),e.clipDistance5&&n.enable(12293),e.clipDistance6&&n.enable(12294),e.clipDistance7&&n.enable(12295)),e.depthWriteEnabled!==void 0&&n.depthMask(e7("depthWriteEnabled",e.depthWriteEnabled)),e.depthCompare&&(e.depthCompare!=="always"?n.enable(2929):n.disable(2929),n.depthFunc(sv("depthCompare",e.depthCompare))),e.stencilWriteMask){const i=e.stencilWriteMask;n.stencilMaskSeparate(1028,i),n.stencilMaskSeparate(1029,i)}if(e.stencilReadMask&&fe.warn("stencilReadMask not supported under WebGL"),e.stencilCompare){const i=e.stencilReadMask||4294967295,s=sv("depthCompare",e.stencilCompare);e.stencilCompare!=="always"?n.enable(2960):n.disable(2960),n.stencilFuncSeparate(1028,s,0,i),n.stencilFuncSeparate(1029,s,0,i)}if(e.stencilPassOperation&&e.stencilFailOperation&&e.stencilDepthFailOperation){const i=rm("stencilPassOperation",e.stencilPassOperation),s=rm("stencilFailOperation",e.stencilFailOperation),o=rm("stencilDepthFailOperation",e.stencilDepthFailOperation);n.stencilOpSeparate(1028,s,o,i),n.stencilOpSeparate(1029,s,o,i)}switch(e.blend){case!0:n.enable(3042);break;case!1:n.disable(3042);break}if(e.blendColorOperation||e.blendAlphaOperation){const i=cE("blendColorOperation",e.blendColorOperation||"add"),s=cE("blendAlphaOperation",e.blendAlphaOperation||"add");n.blendEquationSeparate(i,s);const o=lf("blendColorSrcFactor",e.blendColorSrcFactor||"one"),l=lf("blendColorDstFactor",e.blendColorDstFactor||"zero"),u=lf("blendAlphaSrcFactor",e.blendAlphaSrcFactor||"one"),f=lf("blendAlphaDstFactor",e.blendAlphaDstFactor||"zero");n.blendFuncSeparate(o,l,u,f)}}function sv(t,e){return Ps(t,e,{never:512,less:513,equal:514,"less-equal":515,greater:516,"not-equal":517,"greater-equal":518,always:519})}function rm(t,e){return Ps(t,e,{keep:7680,zero:0,replace:7681,invert:5386,"increment-clamp":7682,"decrement-clamp":7683,"increment-wrap":34055,"decrement-wrap":34056})}function cE(t,e){return Ps(t,e,{add:32774,subtract:32778,"reverse-subtract":32779,min:32775,max:32776})}function lf(t,e){return Ps(t,e,{one:1,zero:0,"src-color":768,"one-minus-src-color":769,"dst-color":774,"one-minus-dst-color":775,"src-alpha":770,"one-minus-src-alpha":771,"dst-alpha":772,"one-minus-dst-alpha":773,"src-alpha-saturated":776,"constant-color":32769,"one-minus-constant-color":32770,"constant-alpha":32771,"one-minus-constant-alpha":32772})}function Jz(t,e){return`Illegal parameter ${e} for ${t}`}function Ps(t,e,r){if(!(e in r))throw new Error(Jz(t,e));return r[e]}function e7(t,e){return e}function t7(t){let e=!0;for(const r in t){e=!1;break}return e}function UM(t){const e={};return t.addressModeU&&(e[10242]=nm(t.addressModeU)),t.addressModeV&&(e[10243]=nm(t.addressModeV)),t.addressModeW&&(e[32882]=nm(t.addressModeW)),t.magFilter&&(e[10240]=ov(t.magFilter)),(t.minFilter||t.mipmapFilter)&&(e[10241]=r7(t.minFilter||"linear",t.mipmapFilter)),t.lodMinClamp!==void 0&&(e[33082]=t.lodMinClamp),t.lodMaxClamp!==void 0&&(e[33083]=t.lodMaxClamp),t.type==="comparison-sampler"&&(e[34892]=34894),t.compare&&(e[34893]=sv("compare",t.compare)),t.maxAnisotropy&&(e[34046]=t.maxAnisotropy),e}function nm(t){switch(t){case"clamp-to-edge":return 33071;case"repeat":return 10497;case"mirror-repeat":return 33648}}function ov(t){switch(t){case"nearest":return 9728;case"linear":return 9729}}function r7(t,e="none"){if(!e)return ov(t);switch(e){case"none":return ov(t);case"nearest":return t==="nearest"?9984:9986;case"linear":return t==="nearest"?9985:9987}}class av extends sh{constructor(r,n){super(r,n);T(this,"device");T(this,"handle");T(this,"parameters");this.device=r,this.parameters=UM(n),this.handle=this.handle||this.device.gl.createSampler(),this._setSamplerParameters(this.parameters)}destroy(){this.handle&&(this.device.gl.deleteSampler(this.handle),this.handle=void 0)}toString(){return`Sampler(${this.id},${JSON.stringify(this.props)})`}_setSamplerParameters(r){for(const[n,i]of Object.entries(r)){const s=Number(n);switch(s){case 33082:case 33083:this.device.gl.samplerParameterf(this.handle,s,i);break;default:this.device.gl.samplerParameteri(this.handle,s,i);break}}}}class fa extends nh{constructor(r,n){super(r,{...Pt.defaultProps,...n});T(this,"device");T(this,"gl");T(this,"handle");T(this,"texture");this.device=r,this.gl=this.device.gl,this.handle=null,this.texture=n.texture}}const n7="Failed to deduce GL constant from typed array";function i7(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:return 5121;case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(n7)}}function s7(t,e){const{clamped:r=!0}=e;switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return r?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function zM(t){switch(t){case 6406:case 33326:case 6403:case 36244:return 1;case 33339:case 33340:case 33328:case 33320:case 33319:return 2;case 6407:case 36248:case 34837:return 3;case 6408:case 36249:case 34836:return 4;default:return 0}}function o7(t){switch(t){case 5121:return 1;case 33635:case 32819:case 32820:return 2;case 5126:return 4;default:return 0}}function mh(t,e,r){if(a7(e))return r(t);const{nocatch:n=!0}=e,i=Rs.get(t);i.push(),Na(t,e);let s;if(n)s=r(t),i.pop();else try{s=r(t)}finally{i.pop()}return s}function a7(t){for(const e in t)return!1;return!0}function l7(t,e,r){const{dimension:n,width:i,height:s,depth:o=0}=r,{glInternalFormat:l}=r,u=r.glTarget;switch(n){case"2d-array":case"3d":t.texStorage3D(u,e,l,i,s,o);break;default:t.texStorage2D(u,e,l,i,s)}}function uE(t,e,r,n){const{width:i,height:s}=n,{dimension:o,depth:l=0,mipLevel:u=0}=n,{x:f=0,y:d=0,z:g=0}=n,{glFormat:m,glType:y}=n,w=$M(n.glTarget,o,l),b=n.flipY?{37440:!0}:{};mh(t,b,()=>{switch(o){case"2d-array":case"3d":t.bindTexture(w,e),t.texSubImage3D(w,u,f,d,g,i,s,l,m,y,r),t.bindTexture(w,null);break;case"2d":case"cube":t.bindTexture(w,e),t.texSubImage2D(w,u,f,d,i,s,m,y,r),t.bindTexture(w,null);break;default:throw new Error(o)}})}function fE(t,e,r){const{dimension:n,width:i,height:s,depth:o=0,mipLevel:l=0,byteOffset:u=0}=r,{x:f=0,y:d=0,z:g=0}=r,{glFormat:m,glType:y,compressed:w}=r,b=$M(r.glTarget,n,o);switch(n){case"2d-array":case"3d":w?t.compressedTexSubImage3D(b,l,f,d,g,i,s,o,m,e,u):t.texSubImage3D(b,l,f,d,g,i,s,o,m,y,e,u);break;case"2d":case"cube":w?t.compressedTexSubImage2D(b,l,f,d,i,s,m,e,u):t.texSubImage2D(b,l,f,d,i,s,m,y,e,u);break;default:throw new Error(n)}}function c7(t){switch(t){case"1d":break;case"2d":return 3553;case"3d":return 32879;case"cube":return 34067;case"2d-array":return 35866}throw new Error(t)}function $M(t,e,r){return e==="cube"?34069+r:t}function u7(t,e){var E;const{sourceX:r=0,sourceY:n=0,sourceAttachment:i=0}=e||{};let{target:s=null,sourceWidth:o,sourceHeight:l,sourceDepth:u,sourceFormat:f,sourceType:d}=e||{};const{framebuffer:g,deleteFramebuffer:m}=VM(t),{gl:y,handle:w}=g;o||(o=g.width),l||(l=g.height);const b=(E=g.colorAttachments[i])==null?void 0:E.texture;if(!b)throw new Error(`Invalid framebuffer attachment ${i}`);u=(b==null?void 0:b.depth)||1,f||(f=(b==null?void 0:b.glFormat)||6408),d||(d=(b==null?void 0:b.glType)||5121),s=d7(s,d,f,o,l),d=d||i7(s);const S=y.bindFramebuffer(36160,w);return y.readBuffer(36064+i),y.readPixels(r,n,o,l,f,d,s),y.readBuffer(36064),y.bindFramebuffer(36160,S||null),m&&g.destroy(),s}function f7(t,e){const{target:r,sourceX:n=0,sourceY:i=0,sourceFormat:s=6408,targetByteOffset:o=0}=e||{};let{sourceWidth:l,sourceHeight:u,sourceType:f}=e||{};const{framebuffer:d,deleteFramebuffer:g}=VM(t);l=l||d.width,u=u||d.height;const m=d;f=f||5121;let y=r;if(!y){const b=zM(s),S=o7(f),E=o+l*u*b*S;y=m.device.createBuffer({byteLength:E})}const w=t.device.createCommandEncoder();return w.copyTextureToBuffer({sourceTexture:t,width:l,height:u,origin:[n,i],destinationBuffer:y,byteOffset:o}),w.destroy(),g&&d.destroy(),y}function VM(t){return t instanceof oh?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:h7(t),deleteFramebuffer:!0}}function h7(t,e){const{device:r,width:n,height:i,id:s}=t;return r.createFramebuffer({...e,id:`framebuffer-for-${s}`,width:n,height:i,colorAttachments:[t]})}function d7(t,e,r,n,i,s){if(t)return t;e||(e=5121);const o=s7(e,{clamped:!1}),l=zM(r);return new o(n*i*l)}class rc extends Pt{constructor(r,n){super(r,n);T(this,"device");T(this,"gl");T(this,"handle");T(this,"sampler");T(this,"view");T(this,"mipmaps");T(this,"compressed");T(this,"glTarget");T(this,"glFormat");T(this,"glType");T(this,"glInternalFormat");T(this,"textureUnit",0);const i={...this.props};i.data=n.data,this.device=r,this.gl=this.device.gl,this.glTarget=c7(this.props.dimension);const s=DM(this.props.format);this.glInternalFormat=s.internalFormat,this.glFormat=s.format,this.glType=s.type,this.compressed=s.compressed,this.mipmaps=!!this.props.mipmaps,this._initialize(i),Object.seal(this)}_initialize(r){this.handle=this.props.handle||this.gl.createTexture(),this.device.setSpectorMetadata(this.handle,{...this.props,data:r.data});let{width:n,height:i}=r;if(!n||!i){const s=Pt.getTextureDataSize(r.data);n=(s==null?void 0:s.width)||1,i=(s==null?void 0:s.height)||1}if(this.width=n,this.height=i,this.depth=r.depth,this.setSampler(r.sampler),this.view=new fa(this.device,{...this.props,texture:this}),this.bind(),l7(this.gl,this.mipLevels,this),r.data)switch(r.dimension){case"1d":this.setTexture1DData(r.data);break;case"2d":this.setTexture2DData(r.data);break;case"3d":this.setTexture3DData(r.data);break;case"cube":this.setTextureCubeData(r.data);break;case"2d-array":this.setTextureArrayData(r.data);break;case"cube-array":this.setTextureCubeArrayData(r.data);break;default:throw new Error(r.dimension)}this.mipmaps&&this.generateMipmap()}destroy(){this.handle&&(this.gl.deleteTexture(this.handle),this.removeStats(),this.trackDeallocatedMemory("Texture"),this.destroyed=!0)}createView(r){return new fa(this.device,{...r,texture:this})}setSampler(r={}){let n;r instanceof av?(this.sampler=r,n=r.props):(this.sampler=new av(this.device,r),n=r);const i=UM(n);this._setSamplerParameters(i)}generateMipmap(r){if(!(!(this.device.isTextureFormatRenderable(this.props.format)&&this.device.isTextureFormatFilterable(this.props.format))&&(fe.warn(`${this} is not renderable or filterable, may not be able to generate mipmaps`)(),!(r!=null&&r.force))))try{this.gl.bindTexture(this.glTarget,this.handle),this.gl.generateMipmap(this.glTarget)}catch(i){fe.warn(`Error generating mipmap for ${this}: ${i.message}`)()}finally{this.gl.bindTexture(this.glTarget,null)}}copyExternalImage(r){const n=Pt.getExternalImageSize(r.image),i={...Pt.defaultCopyExternalImageOptions,...n,...r},{image:s,depth:o,mipLevel:l,x:u,y:f,z:d,flipY:g}=i;let{width:m,height:y}=i;const{dimension:w,glTarget:b,glFormat:S,glInternalFormat:E,glType:k}=this;if(m=Math.min(m,this.width-u),y=Math.min(y,this.height-f),r.sourceX||r.sourceY)throw new Error("WebGL does not support sourceX/sourceY)");return uE(this.device.gl,this.handle,s,{dimension:w,mipLevel:l,x:u,y:f,z:d,width:m,height:y,depth:o,glFormat:S,glInternalFormat:E,glType:k,glTarget:b,flipY:g}),{width:i.width,height:i.height}}setTexture1DData(r){throw new Error("setTexture1DData not supported in WebGL.")}setTexture2DData(r,n=0){this.bind();const i=Pt.normalizeTextureData(r,this);i.length>1&&this.props.mipmaps!==!1&&fe.warn(`Texture ${this.id} mipmap and multiple LODs.`)();for(let s=0;s<i.length;s++){const o=i[s];this._setMipLevel(n,s,o)}this.unbind()}setTexture3DData(r){if(this.props.dimension!=="3d")throw new Error(this.id);ArrayBuffer.isView(r)&&(this.bind(),fE(this.device.gl,r,this),this.unbind())}setTextureCubeData(r,n=0){if(this.props.dimension!=="cube")throw new Error(this.id);for(const i of Pt.CubeFaces)this.setTextureCubeFaceData(r[i],i)}setTextureArrayData(r){throw this.props.dimension!=="2d-array"?new Error(this.id):new Error("setTextureArrayData not implemented.")}setTextureCubeArrayData(r){throw new Error("setTextureCubeArrayData not supported in WebGL2.")}setTextureCubeFaceData(r,n,i=0){Array.isArray(r)&&r.length>1&&this.props.mipmaps!==!1&&fe.warn(`${this.id} has mipmap and multiple LODs.`)();const s=Pt.CubeFaces.indexOf(n);this.setTexture2DData(r,s)}update(){throw new Error("Texture.update() not implemented. Use ExternalTexture")}setImageDataForFace(r){const{face:n,width:i,height:s,pixels:o,data:l,format:u=6408,type:f=5121}=r,{gl:d}=this,g=o||l;this.bind(),g instanceof Promise?g.then(m=>this.setImageDataForFace(Object.assign({},r,{face:n,data:m,pixels:m}))):this.width||this.height?d.texImage2D(n,0,u,i,s,0,u,f,g):d.texImage2D(n,0,u,u,f,g)}_getImageDataMap(r){for(let n=0;n<Pt.CubeFaces.length;++n){const i=Pt.CubeFaces[n];r[i]&&(r[34069+n]=r[i],delete r[i])}return r}_setSamplerParameters(r){fe.log(1,`${this.id} sampler parameters`,this.device.getGLKeys(r))(),this.gl.bindTexture(this.glTarget,this.handle);for(const[n,i]of Object.entries(r)){const s=Number(n),o=i;switch(s){case 33082:case 33083:this.gl.texParameterf(this.glTarget,s,o);break;case 10241:this.gl.texParameteri(this.glTarget,s,o);break;case 10242:case 10243:this.gl.texParameteri(this.glTarget,s,o);break;case 34046:this.device.features.has("texture-filterable-anisotropic-webgl")&&this.gl.texParameteri(this.glTarget,s,o);break;default:this.gl.texParameteri(this.glTarget,s,o);break}}this.gl.bindTexture(this.glTarget,null)}_setMipLevel(r,n,i,s=this.glTarget){if(Pt.isExternalImage(i)){uE(this.device.gl,this.handle,i,{...this,depth:r,mipLevel:n,glTarget:s,flipY:this.props.flipY});return}if(Pt.isTextureLevelData(i)){fE(this.device.gl,i.data,{...this,depth:r,mipLevel:n,glTarget:s});return}throw new Error("Texture: invalid image data")}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(r){const{gl:n}=this;return r!==void 0&&(this.textureUnit=r,n.activeTexture(33984+r)),n.bindTexture(this.glTarget,this.handle),r}unbind(r){const{gl:n}=this;return r!==void 0&&(this.textureUnit=r,n.activeTexture(33984+r)),n.bindTexture(this.glTarget,null),r}}const p7=[1,2,4,8];class g7 extends ky{constructor(r,n){var s;super(r,n);T(this,"device");T(this,"glParameters");this.device=r;let i;if(!((s=n==null?void 0:n.parameters)!=null&&s.viewport))if(n!=null&&n.framebuffer){const{width:o,height:l}=n.framebuffer;i=[0,0,o,l]}else{const[o,l]=r.getCanvasContext().getDrawingBufferSize();i=[0,0,o,l]}if(this.device.pushState(),this.setParameters({viewport:i,...this.props.parameters}),this.props.framebuffer){const o=this.props.framebuffer.colorAttachments.map((l,u)=>36064+u);this.device.gl.drawBuffers(o)}else this.device.gl.drawBuffers([1029]);this.clear()}end(){this.device.popState()}pushDebugGroup(r){}popDebugGroup(){}insertDebugMarker(r){}setParameters(r={}){const n={...this.glParameters};n.framebuffer=this.props.framebuffer||null,this.props.depthReadOnly&&(n.depthMask=!this.props.depthReadOnly),n.stencilMask=this.props.stencilReadOnly?0:1,n[35977]=this.props.discard,r.viewport&&(r.viewport.length>=6?(n.viewport=r.viewport.slice(0,4),n.depthRange=[r.viewport[4],r.viewport[5]]):n.viewport=r.viewport),r.scissorRect&&(n.scissorTest=!0,n.scissor=r.scissorRect),r.blendConstant&&(n.blendColor=r.blendConstant),r.stencilReference&&(console.warn("RenderPassParameters.stencilReference not yet implemented in WebGL"),r[2967]=r.stencilReference),r.colorMask&&(n.colorMask=p7.map(i=>!!(i&r.colorMask))),this.glParameters=n,Na(this.device.gl,n)}beginOcclusionQuery(r){const n=this.props.occlusionQuerySet;n==null||n.beginOcclusionQuery()}endOcclusionQuery(){const r=this.props.occlusionQuerySet;r==null||r.endOcclusionQuery()}clear(){const r={...this.glParameters};let n=0;this.props.clearColors&&this.props.clearColors.forEach((i,s)=>{i&&this.clearColorBuffer(s,i)}),this.props.clearColor!==!1&&this.props.clearColors===void 0&&(n|=16384,r.clearColor=this.props.clearColor),this.props.clearDepth!==!1&&(n|=256,r.clearDepth=this.props.clearDepth),this.props.clearStencil!==!1&&(n|=1024,r.clearStencil=this.props.clearStencil),n!==0&&mh(this.device.gl,r,()=>{this.device.gl.clear(n)})}clearColorBuffer(r=0,n=[0,0,0,0]){mh(this.device.gl,{framebuffer:this.props.framebuffer},()=>{switch(n.constructor){case Int8Array:case Int16Array:case Int32Array:this.device.gl.clearBufferiv(6144,r,n);break;case Uint8Array:case Uint8ClampedArray:case Uint16Array:case Uint32Array:this.device.gl.clearBufferuiv(6144,r,n);break;case Float32Array:this.device.gl.clearBufferfv(6144,r,n);break;default:throw new Error("clearColorBuffer: color must be typed array")}})}}function m7(t){return _7.includes(t)}const _7=[35678,35680,35679,35682,36289,36292,36293,36298,36299,36300,36303,36306,36307,36308,36311],jM={5126:[5126,1,"float","f32","float32"],35664:[5126,2,"vec2","vec2<f32>","float32x2"],35665:[5126,3,"vec3","vec3<f32>","float32x3"],35666:[5126,4,"vec4","vec4<f32>","float32x4"],5124:[5124,1,"int","i32","sint32"],35667:[5124,2,"ivec2","vec2<i32>","sint32x2"],35668:[5124,3,"ivec3","vec3<i32>","sint32x3"],35669:[5124,4,"ivec4","vec4<i32>","sint32x4"],5125:[5125,1,"uint","u32","uint32"],36294:[5125,2,"uvec2","vec2<u32>","uint32x2"],36295:[5125,3,"uvec3","vec3<u32>","uint32x3"],36296:[5125,4,"uvec4","vec4<u32>","uint32x4"],35670:[5126,1,"bool","f32","float32"],35671:[5126,2,"bvec2","vec2<f32>","float32x2"],35672:[5126,3,"bvec3","vec3<f32>","float32x3"],35673:[5126,4,"bvec4","vec4<f32>","float32x4"],35674:[5126,8,"mat2","mat2x2<f32>"],35685:[5126,8,"mat2x3","mat2x3<f32>"],35686:[5126,8,"mat2x4","mat2x4<f32>"],35687:[5126,12,"mat3x2","mat3x2<f32>"],35675:[5126,12,"mat3","mat3x3<f32>"],35688:[5126,12,"mat3x4","mat3x4<f32>"],35689:[5126,16,"mat4x2","mat4x2<f32>"],35690:[5126,16,"mat4x3","mat4x3<f32>"],35676:[5126,16,"mat4","mat4x4<f32>"]};function HM(t){const e=jM[t];if(!e)throw new Error("uniform");const[r,n,,i]=e;return{format:i,components:n,glType:r}}function y7(t){const e=jM[t];if(!e)throw new Error("attribute");const[,r,,n,i]=e;return{attributeType:n,vertexFormat:i,components:r}}function v7(t,e){const r={attributes:[],bindings:[]};r.attributes=b7(t,e);const n=x7(t,e);for(const l of n){const u=l.uniforms.map(f=>({name:f.name,format:f.format,byteOffset:f.byteOffset,byteStride:f.byteStride,arrayLength:f.arrayLength}));r.bindings.push({type:"uniform",name:l.name,group:0,location:l.location,visibility:(l.vertex?1:0)&(l.fragment?2:0),minBindingSize:l.byteLength,uniforms:u})}const i=S7(t,e);let s=0;for(const l of i)if(m7(l.type)){const{viewDimension:u,sampleType:f}=E7(l.type);r.bindings.push({type:"texture",name:l.name,group:0,location:s,viewDimension:u,sampleType:f}),l.textureUnit=s,s+=1}i.length&&(r.uniforms=i);const o=w7(t,e);return o!=null&&o.length&&(r.varyings=o),r}function b7(t,e){const r=[],n=t.getProgramParameter(e,35721);for(let i=0;i<n;i++){const s=t.getActiveAttrib(e,i);if(!s)throw new Error("activeInfo");const{name:o,type:l}=s,u=t.getAttribLocation(e,o);if(u>=0){const{attributeType:f}=y7(l),d=/instance/i.test(o)?"instance":"vertex";r.push({name:o,location:u,stepMode:d,type:f})}}return r.sort((i,s)=>i.location-s.location),r}function w7(t,e){const r=[],n=t.getProgramParameter(e,35971);for(let i=0;i<n;i++){const s=t.getTransformFeedbackVarying(e,i);if(!s)throw new Error("activeInfo");const{name:o,type:l,size:u}=s,{glType:f,components:d}=HM(l),g={location:i,name:o,type:f,size:u*d};r.push(g)}return r.sort((i,s)=>i.location-s.location),r}function S7(t,e){const r=[],n=t.getProgramParameter(e,35718);for(let i=0;i<n;i++){const s=t.getActiveUniform(e,i);if(!s)throw new Error("activeInfo");const{name:o,size:l,type:u}=s,{name:f,isArray:d}=A7(o);let g=t.getUniformLocation(e,f);const m={location:g,name:f,size:l,type:u,isArray:d};if(r.push(m),m.size>1)for(let y=0;y<m.size;y++){const w=`${f}[${y}]`;g=t.getUniformLocation(e,w);const b={...m,name:w,location:g};r.push(b)}}return r}function x7(t,e){const r=(s,o)=>t.getActiveUniformBlockParameter(e,s,o),n=[],i=t.getProgramParameter(e,35382);for(let s=0;s<i;s++){const o={name:t.getActiveUniformBlockName(e,s)||"",location:r(s,35391),byteLength:r(s,35392),vertex:r(s,35396),fragment:r(s,35398),uniformCount:r(s,35394),uniforms:[]},l=r(s,35395)||[],u=t.getActiveUniforms(e,l,35383),f=t.getActiveUniforms(e,l,35384),d=t.getActiveUniforms(e,l,35387),g=t.getActiveUniforms(e,l,35388);for(let m=0;m<o.uniformCount;++m){const y=t.getActiveUniform(e,l[m]);if(!y)throw new Error("activeInfo");o.uniforms.push({name:y.name,format:HM(u[m]).format,type:u[m],arrayLength:f[m],byteOffset:d[m],byteStride:g[m]})}n.push(o)}return n.sort((s,o)=>s.location-o.location),n}const T7={35678:["2d","float"],35680:["cube","float"],35679:["3d","float"],35682:["3d","depth"],36289:["2d-array","float"],36292:["2d-array","depth"],36293:["cube","float"],36298:["2d","sint"],36299:["3d","sint"],36300:["cube","sint"],36303:["2d-array","uint"],36306:["2d","uint"],36307:["3d","uint"],36308:["cube","uint"],36311:["2d-array","uint"]};function E7(t){const e=T7[t];if(!e)throw new Error("sampler");const[r,n]=e;return{viewDimension:r,sampleType:n}}function A7(t){if(t[t.length-1]!=="]")return{name:t,length:1,isArray:!1};const r=/([^[]*)(\[[0-9]+\])?/.exec(t);if(!r||r.length<2)throw new Error(`Failed to parse GLSL uniform name ${t}`);return{name:r[1],length:r[2]?1:0,isArray:!!r[2]}}function C7(t,e,r,n){const i=t;let s=n;s===!0&&(s=1),s===!1&&(s=0);const o=typeof s=="number"?[s]:s;switch(r){case 35678:case 35680:case 35679:case 35682:case 36289:case 36292:case 36293:case 36298:case 36299:case 36300:case 36303:case 36306:case 36307:case 36308:case 36311:if(typeof n!="number")throw new Error("samplers must be set to integers");return t.uniform1i(e,n);case 5126:return t.uniform1fv(e,o);case 35664:return t.uniform2fv(e,o);case 35665:return t.uniform3fv(e,o);case 35666:return t.uniform4fv(e,o);case 5124:return t.uniform1iv(e,o);case 35667:return t.uniform2iv(e,o);case 35668:return t.uniform3iv(e,o);case 35669:return t.uniform4iv(e,o);case 35670:return t.uniform1iv(e,o);case 35671:return t.uniform2iv(e,o);case 35672:return t.uniform3iv(e,o);case 35673:return t.uniform4iv(e,o);case 5125:return i.uniform1uiv(e,o,1);case 36294:return i.uniform2uiv(e,o,2);case 36295:return i.uniform3uiv(e,o,3);case 36296:return i.uniform4uiv(e,o,4);case 35674:return t.uniformMatrix2fv(e,!1,o);case 35675:return t.uniformMatrix3fv(e,!1,o);case 35676:return t.uniformMatrix4fv(e,!1,o);case 35685:return i.uniformMatrix2x3fv(e,!1,o);case 35686:return i.uniformMatrix2x4fv(e,!1,o);case 35687:return i.uniformMatrix3x2fv(e,!1,o);case 35688:return i.uniformMatrix3x4fv(e,!1,o);case 35689:return i.uniformMatrix4x2fv(e,!1,o);case 35690:return i.uniformMatrix4x3fv(e,!1,o)}throw new Error("Illegal uniform")}function R7(t){return xM(t)!==null||typeof t=="number"||typeof t=="boolean"}function P7(t){const e={bindings:{},uniforms:{}};return Object.keys(t).forEach(r=>{const n=t[r];R7(n)?e.uniforms[r]=n:e.bindings[r]=n}),e}function M7(t){switch(t){case"point-list":return 0;case"line-list":return 1;case"line-strip":return 3;case"triangle-list":return 4;case"triangle-strip":return 5;default:throw new Error(t)}}function I7(t){switch(t){case"point-list":return 0;case"line-list":return 1;case"line-strip":return 1;case"triangle-list":return 4;case"triangle-strip":return 4;default:throw new Error(t)}}const hE=4;class O7 extends wa{constructor(r,n){super(r,n);T(this,"device");T(this,"handle");T(this,"vs");T(this,"fs");T(this,"introspectedLayout");T(this,"uniforms",{});T(this,"bindings",{});T(this,"varyings",null);T(this,"_uniformCount",0);T(this,"_uniformSetters",{});this.device=r,this.handle=this.props.handle||this.device.gl.createProgram(),this.device.setSpectorMetadata(this.handle,{id:this.props.id}),this.vs=n.vs,this.fs=n.fs;const{varyings:i,bufferMode:s=35981}=n;i&&i.length>0&&(this.varyings=i,this.device.gl.transformFeedbackVaryings(this.handle,i,s)),this._linkShaders(),fe.time(1,`RenderPipeline ${this.id} - shaderLayout introspection`)(),this.introspectedLayout=v7(this.device.gl,this.handle),fe.timeEnd(1,`RenderPipeline ${this.id} - shaderLayout introspection`)(),this.shaderLayout=k7(this.introspectedLayout,n.shaderLayout)}destroy(){this.handle&&(this.device.gl.deleteProgram(this.handle),this.destroyed=!0)}setBindings(r,n){for(const[i,s]of Object.entries(r)){const o=this.shaderLayout.bindings.find(l=>l.name===i)||this.shaderLayout.bindings.find(l=>l.name===`${i}Uniforms`);if(!o){const l=this.shaderLayout.bindings.map(u=>`"${u.name}"`).join(", ");n!=null&&n.disableWarnings||fe.warn(`No binding "${i}" in render pipeline "${this.id}", expected one of ${l}`,s)();continue}switch(s||fe.warn(`Unsetting binding "${i}" in render pipeline "${this.id}"`)(),o.type){case"uniform":if(!(s instanceof tc)&&!(s.buffer instanceof tc))throw new Error("buffer value");break;case"texture":if(!(s instanceof fa||s instanceof rc||s instanceof ec))throw new Error("texture value");break;case"sampler":fe.warn(`Ignoring sampler ${i}`)();break;default:throw new Error(o.type)}this.bindings[i]=s}}draw(r){var S;const{renderPass:n,parameters:i=this.props.parameters,topology:s=this.props.topology,vertexArray:o,vertexCount:l,instanceCount:u,isInstanced:f=!1,firstVertex:d=0,transformFeedback:g}=r,m=M7(s),y=!!o.indexBuffer,w=(S=o.indexBuffer)==null?void 0:S.glIndexType;if(this.linkStatus!=="success")return fe.info(2,`RenderPipeline:${this.id}.draw() aborted - waiting for shader linking`)(),!1;if(!this._areTexturesRenderable())return fe.info(2,`RenderPipeline:${this.id}.draw() aborted - textures not yet loaded`)(),!1;this.device.gl.useProgram(this.handle),o.bindBeforeRender(n),g&&g.begin(this.props.topology),this._applyBindings(),this._applyUniforms();const b=n;return Gz(this.device,i,b.glParameters,()=>{y&&f?this.device.gl.drawElementsInstanced(m,l||0,w,d,u||0):y?this.device.gl.drawElements(m,l||0,w,d):f?this.device.gl.drawArraysInstanced(m,d,l||0,u||0):this.device.gl.drawArrays(m,d,l||0),g&&g.end()}),o.unbindAfterRender(n),!0}setUniformsWebGL(r){const{bindings:n}=P7(r);Object.keys(n).forEach(i=>{fe.warn(`Unsupported value "${JSON.stringify(n[i])}" used in setUniforms() for key ${i}. Use setBindings() instead?`)()}),Object.assign(this.uniforms,r)}async _linkShaders(){const{gl:r}=this.device;if(r.attachShader(this.handle,this.vs.handle),r.attachShader(this.handle,this.fs.handle),fe.time(hE,`linkProgram for ${this.id}`)(),r.linkProgram(this.handle),fe.timeEnd(hE,`linkProgram for ${this.id}`)(),fe.level,!this.device.features.has("compilation-status-async-webgl")){const i=this._getLinkStatus();this._reportLinkStatus(i);return}fe.once(1,"RenderPipeline linking is asynchronous")(),await this._waitForLinkComplete(),fe.info(2,`RenderPipeline ${this.id} - async linking complete: ${this.linkStatus}`)();const n=this._getLinkStatus();this._reportLinkStatus(n)}async _reportLinkStatus(r){var n;switch(r){case"success":return;default:switch(this.vs.compilationStatus){case"error":throw this.vs.debugShader(),new Error(`Error during compilation of shader ${this.vs.id}`);case"pending":this.vs.asyncCompilationStatus.then(()=>this.vs.debugShader());break}switch((n=this.fs)==null?void 0:n.compilationStatus){case"error":throw this.fs.debugShader(),new Error(`Error during compilation of shader ${this.fs.id}`);case"pending":this.fs.asyncCompilationStatus.then(()=>this.fs.debugShader());break}const i=this.device.gl.getProgramInfoLog(this.handle);throw new Error(`Error during ${r}: ${i}`)}}_getLinkStatus(){const{gl:r}=this.device;return r.getProgramParameter(this.handle,35714)?(r.validateProgram(this.handle),r.getProgramParameter(this.handle,35715)?(this.linkStatus="success","success"):(this.linkStatus="error","validation")):(this.linkStatus="error","linking")}async _waitForLinkComplete(){const r=async s=>await new Promise(o=>setTimeout(o,s));if(!this.device.features.has("compilation-status-async-webgl")){await r(10);return}const{gl:i}=this.device;for(;;){if(i.getProgramParameter(this.handle,37297))return;await r(10)}}_areTexturesRenderable(){let r=!0;for(const n of this.shaderLayout.bindings)!this.bindings[n.name]&&!this.bindings[n.name.replace(/Uniforms$/,"")]&&(fe.warn(`Binding ${n.name} not found in ${this.id}`)(),r=!1);return r}_applyBindings(){if(this.linkStatus!=="success")return;const{gl:r}=this.device;r.useProgram(this.handle);let n=0,i=0;for(const s of this.shaderLayout.bindings){const o=this.bindings[s.name]||this.bindings[s.name.replace(/Uniforms$/,"")];if(!o)throw new Error(`No value for binding ${s.name} in ${this.id}`);switch(s.type){case"uniform":const{name:l}=s,u=r.getUniformBlockIndex(this.handle,l);if(u===4294967295)throw new Error(`Invalid uniform block name ${l}`);r.uniformBlockBinding(this.handle,i,u),o instanceof tc?r.bindBufferBase(35345,i,o.handle):r.bindBufferRange(35345,i,o.buffer.handle,o.offset||0,o.size||o.buffer.byteLength-o.offset),i+=1;break;case"texture":if(!(o instanceof fa||o instanceof rc||o instanceof ec))throw new Error("texture");let f;if(o instanceof fa)f=o.texture;else if(o instanceof rc)f=o;else if(o instanceof ec&&o.colorAttachments[0]instanceof fa)fe.warn("Passing framebuffer in texture binding may be deprecated. Use fbo.colorAttachments[0] instead")(),f=o.colorAttachments[0].texture;else throw new Error("No texture");r.activeTexture(33984+n),r.bindTexture(f.glTarget,f.handle),n+=1;break;case"sampler":break;case"storage":case"read-only-storage":throw new Error(`binding type '${s.type}' not supported in WebGL`)}}}_applyUniforms(){for(const r of this.shaderLayout.uniforms||[]){const{name:n,location:i,type:s,textureUnit:o}=r,l=this.uniforms[n]??o;l!==void 0&&C7(this.device.gl,i,s,l)}}}function k7(t,e){const r={...t,attributes:t.attributes.map(n=>({...n}))};for(const n of(e==null?void 0:e.attributes)||[]){const i=r.attributes.find(s=>s.name===n.name);i?(i.type=n.type||i.type,i.stepMode=n.stepMode||i.stepMode):fe.warn(`shader layout attribute ${n.name} not present in shader`)}return r}class N7 extends Fy{constructor(r){super(r,{});T(this,"device");T(this,"commands",[]);this.device=r}submitCommands(r=this.commands){for(const n of r)switch(n.name){case"copy-buffer-to-buffer":F7(this.device,n.options);break;case"copy-buffer-to-texture":D7(this.device,n.options);break;case"copy-texture-to-buffer":B7(this.device,n.options);break;case"copy-texture-to-texture":L7(this.device,n.options);break;default:throw new Error(n.name)}}}function F7(t,e){const r=e.sourceBuffer,n=e.destinationBuffer;t.gl.bindBuffer(36662,r.handle),t.gl.bindBuffer(36663,n.handle),t.gl.copyBufferSubData(36662,36663,e.sourceOffset??0,e.destinationOffset??0,e.size),t.gl.bindBuffer(36662,null),t.gl.bindBuffer(36663,null)}function D7(t,e){throw new Error("Not implemented")}function B7(t,e){const{sourceTexture:r,mipLevel:n=0,aspect:i="all",width:s=e.sourceTexture.width,height:o=e.sourceTexture.height,depthOrArrayLayers:l=0,origin:u=[0,0],destinationBuffer:f,byteOffset:d=0,bytesPerRow:g,rowsPerImage:m}=e;if(i!=="all")throw new Error("aspect not supported in WebGL");if(n!==0||l!==0||g||m)throw new Error("not implemented");const{framebuffer:y,destroyFramebuffer:w}=WM(r);let b;try{const S=f,E=s||y.width,k=o||y.height,C=DM(y.colorAttachments[0].texture.props.format),P=C.format,M=C.type;t.gl.bindBuffer(35051,S.handle),b=t.gl.bindFramebuffer(36160,y.handle),t.gl.readPixels(u[0],u[1],E,k,P,M,d)}finally{t.gl.bindBuffer(35051,null),b!==void 0&&t.gl.bindFramebuffer(36160,b),w&&y.destroy()}}function L7(t,e){const{sourceTexture:r,destinationMipLevel:n=0,origin:i=[0,0],destinationOrigin:s=[0,0],destinationTexture:o}=e;let{width:l=e.destinationTexture.width,height:u=e.destinationTexture.height}=e;const{framebuffer:f,destroyFramebuffer:d}=WM(r),[g,m]=i,[y,w,b]=s,S=t.gl.bindFramebuffer(36160,f.handle);let E=null,k;if(o instanceof rc)E=o,l=Number.isFinite(l)?l:E.width,u=Number.isFinite(u)?u:E.height,E.bind(0),k=E.glTarget;else throw new Error("invalid destination");switch(k){case 3553:case 34067:t.gl.copyTexSubImage2D(k,n,y,w,g,m,l,u);break;case 35866:case 32879:t.gl.copyTexSubImage3D(k,n,y,w,b,g,m,l,u);break}E&&E.unbind(),t.gl.bindFramebuffer(36160,S),d&&f.destroy()}function WM(t){if(t instanceof Pt){const{width:e,height:r,id:n}=t;return{framebuffer:t.device.createFramebuffer({id:`framebuffer-for-${n}`,width:e,height:r,colorAttachments:[t]}),destroyFramebuffer:!0}}return{framebuffer:t,destroyFramebuffer:!1}}class U7 extends Ny{constructor(r,n){super(r,n);T(this,"device");T(this,"commandBuffer");this.device=r,this.commandBuffer=new N7(r)}destroy(){}finish(){this.commandBuffer.submitCommands()}copyBufferToBuffer(r){this.commandBuffer.commands.push({name:"copy-buffer-to-buffer",options:r})}copyBufferToTexture(r){this.commandBuffer.commands.push({name:"copy-buffer-to-texture",options:r})}copyTextureToBuffer(r){this.commandBuffer.commands.push({name:"copy-texture-to-buffer",options:r})}copyTextureToTexture(r){this.commandBuffer.commands.push({name:"copy-texture-to-texture",options:r})}pushDebugGroup(r){}popDebugGroup(){}insertDebugMarker(r){}resolveQuerySet(r,n,i){}}function z7(t){const{target:e,source:r,start:n=0,count:i=1}=t,s=r.length,o=i*s;let l=0;for(let u=n;l<s;l++)e[u++]=r[l];for(;l<o;)l<o-l?(e.copyWithin(n+l,n,n+l),l*=2):(e.copyWithin(n+l,n,n+o-l),l=o);return t.target}class lb extends Dy{constructor(r,n){super(r,n);T(this,"device");T(this,"handle");T(this,"buffer",null);T(this,"bufferValue",null);this.device=r,this.handle=this.device.gl.createVertexArray()}get[Symbol.toStringTag](){return"VertexArray"}static isConstantAttributeZeroSupported(r){return SF()==="Chrome"}destroy(){var r;super.destroy(),this.buffer&&((r=this.buffer)==null||r.destroy()),this.handle&&(this.device.gl.deleteVertexArray(this.handle),this.handle=void 0)}setIndexBuffer(r){const n=r;if(n&&n.glTarget!==34963)throw new Error("Use .setBuffer()");this.device.gl.bindVertexArray(this.handle),this.device.gl.bindBuffer(34963,n?n.handle:null),this.indexBuffer=n,this.device.gl.bindVertexArray(null)}setBuffer(r,n){const i=n;if(i.glTarget===34963)throw new Error("Use .setIndexBuffer()");const{size:s,type:o,stride:l,offset:u,normalized:f,integer:d,divisor:g}=this._getAccessor(r);this.device.gl.bindVertexArray(this.handle),this.device.gl.bindBuffer(34962,i.handle),d?this.device.gl.vertexAttribIPointer(r,s,o,l,u):this.device.gl.vertexAttribPointer(r,s,o,f,l,u),this.device.gl.bindBuffer(34962,null),this.device.gl.enableVertexAttribArray(r),this.device.gl.vertexAttribDivisor(r,g||0),this.attributes[r]=i,this.device.gl.bindVertexArray(null)}setConstantWebGL(r,n){this._enable(r,!1),this.attributes[r]=n}bindBeforeRender(){this.device.gl.bindVertexArray(this.handle),this._applyConstantAttributes()}unbindAfterRender(){this.device.gl.bindVertexArray(null)}_applyConstantAttributes(){for(let r=0;r<this.maxVertexAttributes;++r){const n=this.attributes[r];ArrayBuffer.isView(n)&&this.device.setConstantAttributeWebGL(r,n)}}_getAccessor(r){const n=this.attributeInfos[r];if(!n)throw new Error(`Unknown attribute location ${r}`);const i=FM(n.bufferDataType);return{size:n.bufferComponents,type:i,stride:n.byteStride,offset:n.byteOffset,normalized:n.normalized,integer:n.integer,divisor:n.stepMode==="instance"?1:0}}_enable(r,n=!0){const s=lb.isConstantAttributeZeroSupported(this.device)||r!==0;(n||s)&&(r=Number(r),this.device.gl.bindVertexArray(this.handle),n?this.device.gl.enableVertexAttribArray(r):this.device.gl.disableVertexAttribArray(r),this.device.gl.bindVertexArray(null))}getConstantBuffer(r,n){const i=$7(n),s=i.byteLength*r,o=i.length*r;if(this.buffer&&s!==this.buffer.byteLength)throw new Error(`Buffer size is immutable, byte length ${s} !== ${this.buffer.byteLength}.`);let l=!this.buffer;if(this.buffer=this.buffer||this.device.createBuffer({byteLength:s}),l=l||!V7(i,this.bufferValue),l){const u=gB(n.constructor,o);z7({target:u,source:i,start:0,count:o}),this.buffer.write(u),this.bufferValue=n}return this.buffer}}function $7(t){return Array.isArray(t)?new Float32Array(t):t}function V7(t,e){if(!t||!e||t.length!==e.length||t.constructor!==e.constructor)return!1;for(let r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0}class j7 extends By{constructor(r,n){super(r,n);T(this,"device");T(this,"gl");T(this,"handle");T(this,"layout");T(this,"buffers",{});T(this,"unusedBuffers",{});T(this,"bindOnUse",!0);T(this,"_bound",!1);this.device=r,this.gl=r.gl,this.handle=this.props.handle||this.gl.createTransformFeedback(),this.layout=this.props.layout,n.buffers&&this.setBuffers(n.buffers),Object.seal(this)}destroy(){this.gl.deleteTransformFeedback(this.handle),super.destroy()}begin(r="point-list"){this.gl.bindTransformFeedback(36386,this.handle),this.bindOnUse&&this._bindBuffers(),this.gl.beginTransformFeedback(I7(r))}end(){this.gl.endTransformFeedback(),this.bindOnUse&&this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null)}setBuffers(r){this.buffers={},this.unusedBuffers={},this.bind(()=>{for(const n in r)this.setBuffer(n,r[n])})}setBuffer(r,n){const i=this._getVaryingIndex(r),{buffer:s,byteLength:o,byteOffset:l}=this._getBufferRange(n);if(i<0){this.unusedBuffers[r]=s,fe.warn(`${this.id} unusedBuffers varying buffer ${r}`)();return}this.buffers[i]={buffer:s,byteLength:o,byteOffset:l},this.bindOnUse||this._bindBuffer(i,s,l,o)}getBuffer(r){if(dE(r))return this.buffers[r]||null;const n=this._getVaryingIndex(r);return n>=0?this.buffers[n]:null}bind(r=this.handle){if(typeof r!="function")return this.gl.bindTransformFeedback(36386,r),this;let n;return this._bound?n=r():(this.gl.bindTransformFeedback(36386,this.handle),this._bound=!0,n=r(),this._bound=!1,this.gl.bindTransformFeedback(36386,null)),n}unbind(){this.bind(null)}_getBufferRange(r){if(r instanceof tc)return{buffer:r,byteOffset:0,byteLength:r.byteLength};const{buffer:n,byteOffset:i=0,byteLength:s=r.buffer.byteLength}=r;return{buffer:n,byteOffset:i,byteLength:s}}_getVaryingIndex(r){if(dE(r))return Number(r);for(const n of this.layout.varyings)if(r===n.name)return n.location;return-1}_bindBuffers(){for(const r in this.buffers){const{buffer:n,byteLength:i,byteOffset:s}=this._getBufferRange(this.buffers[r]);this._bindBuffer(Number(r),n,s,i)}}_unbindBuffers(){for(const r in this.buffers)this.gl.bindBufferBase(35982,Number(r),null)}_bindBuffer(r,n,i=0,s){const o=n&&n.handle;!o||s===void 0?this.gl.bindBufferBase(35982,r,o):this.gl.bindBufferRange(35982,r,o,i,s)}}function dE(t){return typeof t=="number"?Number.isInteger(t):/^\d+$/.test(t)}class H7 extends Ly{constructor(r,n){super(r,n);T(this,"device");T(this,"handle");T(this,"target",null);T(this,"_queryPending",!1);T(this,"_pollingPromise",null);if(this.device=r,n.count>1)throw new Error("WebGL QuerySet can only have one value");this.handle=this.device.gl.createQuery(),Object.seal(this)}get[Symbol.toStringTag](){return"Query"}destroy(){this.device.gl.deleteQuery(this.handle)}beginTimestampQuery(){return this._begin(35007)}endTimestampQuery(){this._end()}beginOcclusionQuery(r){return this._begin(r!=null&&r.conservative?36202:35887)}endOcclusionQuery(){this._end()}beginTransformFeedbackQuery(){return this._begin(35976)}endTransformFeedbackQuery(){this._end()}async resolveQuery(){return[await this.pollQuery()]}_begin(r){this._queryPending||(this.target=r,this.device.gl.beginQuery(this.target,this.handle))}_end(){this._queryPending||this.target&&(this.device.gl.endQuery(this.target),this.target=null,this._queryPending=!0)}isResultAvailable(){if(!this._queryPending)return!1;const r=this.device.gl.getQueryParameter(this.handle,34919);return r&&(this._queryPending=!1),r}isTimerDisjoint(){return this.device.gl.getParameter(36795)}getResult(){return this.device.gl.getQueryParameter(this.handle,34918)}getTimerMilliseconds(){return this.getResult()/1e6}pollQuery(r=Number.POSITIVE_INFINITY){if(this._pollingPromise)return this._pollingPromise;let n=0;return this._pollingPromise=new Promise((i,s)=>{const o=()=>{this.isResultAvailable()?(i(this.getResult()),this._pollingPromise=null):n++>r?(s("Timed out"),this._pollingPromise=null):requestAnimationFrame(o)};requestAnimationFrame(o)}),this._pollingPromise}}class $i extends Es{constructor(r){var g,m;super({...r,id:r.id||qz("webgl-device")});T(this,"type","webgl");T(this,"handle");T(this,"features");T(this,"limits");T(this,"info");T(this,"canvasContext");T(this,"lost");T(this,"_resolveContextLost");T(this,"gl");T(this,"debug",!1);T(this,"_canvasSizeInfo",{clientWidth:0,clientHeight:0,devicePixelRatio:1});T(this,"_extensions",{});T(this,"_polyfilled",!1);T(this,"spectorJS");T(this,"renderPass",null);T(this,"_constants");if(!r.createCanvasContext)throw new Error("WebGLDevice requires props.createCanvasContext to be set");const n=r.createCanvasContext===!0?{}:r.createCanvasContext;let i=(m=(g=n.canvas)==null?void 0:g.gl)==null?void 0:m.device;if(i)throw new Error(`WebGL context already attached to device ${i.id}`);this.canvasContext=new Fz(this,n),this.lost=new Promise(y=>{this._resolveContextLost=y});const s={...r.webgl};n.alphaMode==="premultiplied"&&(s.premultipliedAlpha=!0),r.powerPreference!==void 0&&(s.powerPreference=r.powerPreference);const l=this.props._handle||gz(this.canvasContext.canvas,{onContextLost:y=>{var w;return(w=this._resolveContextLost)==null?void 0:w.call(this,{reason:"destroyed",message:"Entered sleep mode, or too many apps or browser tabs are using the GPU."})},onContextRestored:y=>console.log("WebGL context restored")},s);if(!l)throw new Error("WebGL context creation failed");if(i=l.device,i)throw new Error(`WebGL context already attached to device ${i.id}`);this.handle=l,this.gl=l,this.spectorJS=Lz({...this.props,gl:this.handle}),this.gl.device=this,this.gl._version=2,this.info=mz(this.gl,this._extensions),this.limits=new Oz(this.gl),this.features=new Iz(this.gl,this._extensions,this.props._disabledFeatures),this.props._initializeFeatures&&this.features.initializeFeatures(),n.autoResize!==!1&&this.canvasContext.resize(),new Rs(this.gl,{log:(...y)=>fe.log(1,...y)()}).trackState(this.gl,{copyState:!1});const f=r.debugWebGL||r.debug,d=r.debugWebGL;f&&(this.gl=$z(this.gl,{debugWebGL:f,traceWebGL:d}),fe.warn("WebGL debug mode activated. Performance reduced.")(),r.debugWebGL&&(fe.level=Math.max(fe.level,1)))}destroy(){}get isLost(){return this.gl.isContextLost()}createCanvasContext(r){throw new Error("WebGL only supports a single canvas")}createBuffer(r){const n=this._normalizeBufferProps(r);return new tc(this,n)}createTexture(r){return new rc(this,r)}createExternalTexture(r){throw new Error("createExternalTexture() not implemented")}createSampler(r){return new av(this,r)}createShader(r){return new Zz(this,r)}createFramebuffer(r){return new ec(this,r)}createVertexArray(r){return new lb(this,r)}createTransformFeedback(r){return new j7(this,r)}createQuerySet(r){return new H7(this,r)}createRenderPipeline(r){return new O7(this,r)}beginRenderPass(r){return new g7(this,r)}createComputePipeline(r){throw new Error("ComputePipeline not supported in WebGL")}beginComputePass(r){throw new Error("ComputePass not supported in WebGL")}createCommandEncoder(r={}){return new U7(this,r)}submit(){var r;(r=this.renderPass)==null||r.end(),this.renderPass=null}readPixelsToArrayWebGL(r,n){return u7(r,n)}readPixelsToBufferWebGL(r,n){return f7(r,n)}setParametersWebGL(r){Na(this.gl,r)}getParametersWebGL(r){return kM(this.gl,r)}withParametersWebGL(r,n){return mh(this.gl,r,n)}resetWebGL(){fe.warn("WebGLDevice.resetWebGL is deprecated, use only for debugging")(),uz(this.gl)}_getDeviceSpecificTextureFormatCapabilities(r){return Cz(this.gl,r,this._extensions)}loseDevice(){var s;let r=!1;const i=this.getExtension("WEBGL_lose_context").WEBGL_lose_context;return i&&(r=!0,i.loseContext()),(s=this._resolveContextLost)==null||s.call(this,{reason:"destroyed",message:"Application triggered context loss"}),r}pushState(){Rs.get(this.gl).push()}popState(){Rs.get(this.gl).pop()}setSpectorMetadata(r,n){r.__SPECTOR_Metadata=n}getGLKey(r,n){const i=Number(r);for(const s in this.gl)if(this.gl[s]===i)return`GL.${s}`;return n!=null&&n.emptyIfUnknown?"":String(r)}getGLKeys(r){const n={emptyIfUnknown:!0};return Object.entries(r).reduce((i,[s,o])=>(i[`${s}:${this.getGLKey(s,n)}`]=`${o}:${this.getGLKey(o,n)}`,i),{})}setConstantAttributeWebGL(r,n){const i=this.limits.maxVertexAttributes;this._constants=this._constants||new Array(i).fill(null);const s=this._constants[r];switch(s&&K7(s,n)&&fe.info(1,`setConstantAttributeWebGL(${r}) could have been skipped, value unchanged`)(),this._constants[r]=n,n.constructor){case Float32Array:W7(this,r,n);break;case Int32Array:q7(this,r,n);break;case Uint32Array:X7(this,r,n);break;default:throw new Error("constant")}}getExtension(r){return Ca(this.gl,r,this._extensions),this._extensions}}function W7(t,e,r){switch(r.length){case 1:t.gl.vertexAttrib1fv(e,r);break;case 2:t.gl.vertexAttrib2fv(e,r);break;case 3:t.gl.vertexAttrib3fv(e,r);break;case 4:t.gl.vertexAttrib4fv(e,r);break}}function q7(t,e,r){t.gl.vertexAttribI4iv(e,r)}function X7(t,e,r){t.gl.vertexAttribI4uiv(e,r)}function K7(t,e){if(!t||!e||t.length!==e.length||t.constructor!==e.constructor)return!1;for(let r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0}const Y7={WEBGL_depth_texture:{UNSIGNED_INT_24_8_WEBGL:34042},OES_element_index_uint:{},OES_texture_float:{},OES_texture_half_float:{HALF_FLOAT_OES:5131},EXT_color_buffer_float:{},OES_standard_derivatives:{FRAGMENT_SHADER_DERIVATIVE_HINT_OES:35723},EXT_frag_depth:{},EXT_blend_minmax:{MIN_EXT:32775,MAX_EXT:32776},EXT_shader_texture_lod:{}},Z7=t=>({drawBuffersWEBGL(e){return t.drawBuffers(e)},COLOR_ATTACHMENT0_WEBGL:36064,COLOR_ATTACHMENT1_WEBGL:36065,COLOR_ATTACHMENT2_WEBGL:36066,COLOR_ATTACHMENT3_WEBGL:36067}),G7=t=>({VERTEX_ARRAY_BINDING_OES:34229,createVertexArrayOES(){return t.createVertexArray()},deleteVertexArrayOES(e){return t.deleteVertexArray(e)},isVertexArrayOES(e){return t.isVertexArray(e)},bindVertexArrayOES(e){return t.bindVertexArray(e)}}),Q7=t=>({VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE:35070,drawArraysInstancedANGLE(...e){return t.drawArraysInstanced(...e)},drawElementsInstancedANGLE(...e){return t.drawElementsInstanced(...e)},vertexAttribDivisorANGLE(...e){return t.vertexAttribDivisor(...e)}});function J7(t=!0){const e=HTMLCanvasElement.prototype;if(!t&&e.originalGetContext){e.getContext=e.originalGetContext,e.originalGetContext=void 0;return}e.originalGetContext=e.getContext,e.getContext=function(r,n){if(r==="webgl"||r==="experimental-webgl"){const i=this.originalGetContext("webgl2",n);return i instanceof HTMLElement&&e$(i),i}return this.originalGetContext(r,n)}}function e$(t){t.getExtension("EXT_color_buffer_float");const e={...Y7,WEBGL_disjoint_timer_query:t.getExtension("EXT_disjoint_timer_query_webgl2"),WEBGL_draw_buffers:Z7(t),OES_vertex_array_object:G7(t),ANGLE_instanced_arrays:Q7(t)},r=t.getExtension;t.getExtension=function(i){const s=r.call(t,i);return s||(i in e?e[i]:null)};const n=t.getSupportedExtensions;t.getSupportedExtensions=function(){const i=n.apply(t)||[];return i==null?void 0:i.concat(Object.keys(e))}}const cf=1;class t$ extends WD{constructor(){super();T(this,"type","webgl");Es.defaultProps={...Es.defaultProps,...ab},$i.adapter=this}isSupported(){return typeof WebGL2RenderingContext<"u"}enforceWebGL2(r){J7(r)}async attach(r){if(r instanceof $i)return r;if((r==null?void 0:r.device)instanceof Es)return r.device;if(!r$(r))throw new Error("Invalid WebGL2RenderingContext");return new $i({_handle:r,createCanvasContext:{canvas:r.canvas,autoResize:!1}})}async create(r={}){fe.groupCollapsed(cf,"WebGLDevice created")();const n=[];(r.debugWebGL||r.debug)&&n.push(zz()),r.debugSpectorJS&&n.push(Bz(r));const i=await Promise.allSettled(n);for(const l of i)l.status==="rejected"&&fe.error(`Failed to initialize debug libraries ${l.reason}`)();const s=new $i(r),o=`Created ${s.type}${s.debug?" debug":""} context: ${s.info.vendor}, ${s.info.renderer} for canvas: ${s.canvasContext.id}`;return fe.probe(cf,o)(),fe.table(cf,s.info)(),fe.groupEnd(cf)(),s}}function r$(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:!!(t&&Number.isFinite(t._version))}const pE=new t$;function ki(){}const n$=({isDragging:t})=>t?"grabbing":"grab",qM={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,parameters:{},parent:null,device:null,deviceProps:{type:"webgl"},gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,widgets:[],onDeviceInitialized:ki,onWebGLInitialized:ki,onResize:ki,onViewStateChange:ki,onInteractionStateChange:ki,onBeforeRender:ki,onAfterRender:ki,onLoad:ki,onError:t=>je.error(t.message,t.cause)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:n$,getTooltip:null,debug:!1,drawPickingColors:!1};let cb=class{constructor(e){this.width=0,this.height=0,this.userData={},this.device=null,this.canvas=null,this.viewManager=null,this.layerManager=null,this.effectManager=null,this.deckRenderer=null,this.deckPicker=null,this.eventManager=null,this.widgetManager=null,this.tooltip=null,this.animationLoop=null,this.cursorState={isHovering:!1,isDragging:!1},this.stats=new Ac({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this._lastPointerDownInfo=null,this._onPointerMove=n=>{const{_pickRequest:i}=this;if(n.type==="pointerleave")i.x=-1,i.y=-1,i.radius=0;else{if(n.leftButton||n.rightButton)return;{const s=n.offsetCenter;if(!s)return;i.x=s.x,i.y=s.y,i.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:i.x,y:i.y}),i.event=n},this._onEvent=n=>{const i=Yy[n.type],s=n.offsetCenter;if(!i||!s||!this.layerManager)return;const o=this.layerManager.getLayers(),l=this.deckPicker.getLastPickedObject({x:s.x,y:s.y,layers:o,viewports:this.getViewports(s)},this._lastPointerDownInfo),{layer:u}=l,f=u&&(u[i]||u.props[i]),d=this.props[i];let g=!1;f&&(g=f.call(u,l,n)),g||(d==null||d(l,n),this.widgetManager.onEvent(l,n))},this._onPointerDown=n=>{const i=n.offsetCenter,s=this._pick("pickObject","pickObject Time",{x:i.x,y:i.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=s.result[0]||s.emptyInfo},this.props={...qM,...e},e=this.props,e.viewState&&e.initialViewState&&je.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),this.viewState=this.props.initialViewState,e.device&&(this.device=e.device);let r=this.device;!r&&e.gl&&(e.gl instanceof WebGLRenderingContext&&je.error("WebGL1 context not supported.")(),r=pE.attach(e.gl)),r||(r=Iy.createDevice({type:"best-available",adapters:[pE],...e.deviceProps,createCanvasContext:{canvas:this._createCanvas(e),useDevicePixels:this.props.useDevicePixels,autoResize:!1}})),this.animationLoop=this._createAnimationLoop(r,e),this.setProps(e),e._typedArrayManagerProps&&Ea.setOptions(e._typedArrayManagerProps),this.animationLoop.start()}finalize(){var e,r,n,i,s,o,l,u,f,d;(e=this.animationLoop)==null||e.stop(),(r=this.animationLoop)==null||r.destroy(),this.animationLoop=null,this._lastPointerDownInfo=null,(n=this.layerManager)==null||n.finalize(),this.layerManager=null,(i=this.viewManager)==null||i.finalize(),this.viewManager=null,(s=this.effectManager)==null||s.finalize(),this.effectManager=null,(o=this.deckRenderer)==null||o.finalize(),this.deckRenderer=null,(l=this.deckPicker)==null||l.finalize(),this.deckPicker=null,(u=this.eventManager)==null||u.destroy(),this.eventManager=null,(f=this.widgetManager)==null||f.finalize(),this.widgetManager=null,!this.props.canvas&&!this.props.device&&!this.props.gl&&this.canvas&&((d=this.canvas.parentElement)==null||d.removeChild(this.canvas),this.canvas=null)}setProps(e){var n;this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&je.removed("onLayerHover","onHover")(),"onLayerClick"in e&&je.removed("onLayerClick","onClick")(),e.initialViewState&&!mn(this.props.initialViewState,e.initialViewState,3)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);const r=Object.create(this.props);Object.assign(r,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),(n=this.animationLoop)==null||n.setProps(r),this.layerManager&&(this.viewManager.setProps(r),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(r),this.effectManager.setProps(r),this.deckRenderer.setProps(r),this.deckPicker.setProps(r),this.widgetManager.setProps(r)),this.stats.get("setProps Time").timeEnd()}needsRedraw(e={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let r=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);const n=this.viewManager.needsRedraw(e),i=this.layerManager.needsRedraw(e),s=this.effectManager.needsRedraw(e),o=this.deckRenderer.needsRedraw(e);return r=r||n||i||s||o,r}redraw(e){if(!this.layerManager)return;let r=this.needsRedraw({clearRedrawFlags:!0});r=e||r,r&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(r):this._drawLayers(r))}get isInitialized(){return this.viewManager!==null}getViews(){return ir(this.viewManager),this.viewManager.views}getViewports(e){return ir(this.viewManager),this.viewManager.getViewports(e)}getCanvas(){return this.canvas}pickObject(e){const r=this._pick("pickObject","pickObject Time",e).result;return r.length?r[0]:null}pickMultipleObjects(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}pickObjects(e){return this._pick("pickObjects","pickObjects Time",e)}_addResources(e,r=!1){for(const n in e)this.layerManager.resourceManager.add({resourceId:n,data:e[n],forceUpdate:r})}_removeResources(e){for(const r of e)this.layerManager.resourceManager.remove(r)}_addDefaultEffect(e){this.effectManager.addDefaultEffect(e)}_addDefaultShaderModule(e){this.layerManager.addDefaultShaderModule(e)}_removeDefaultShaderModule(e){var r;(r=this.layerManager)==null||r.removeDefaultShaderModule(e)}_pick(e,r,n){ir(this.deckPicker);const{stats:i}=this;i.get("Pick Count").incrementCount(),i.get(r).timeStart();const s=this.deckPicker[e]({layers:this.layerManager.getLayers(n),views:this.viewManager.getViews(),viewports:this.getViewports(n),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...n});return i.get(r).timeEnd(),s}_createCanvas(e){let r=e.canvas;return typeof r=="string"&&(r=document.getElementById(r),ir(r)),r||(r=document.createElement("canvas"),r.id=e.id||"deckgl-overlay",(e.parent||document.body).appendChild(r)),Object.assign(r.style,e.style),r}_setCanvasSize(e){var i;if(!this.canvas)return;const{width:r,height:n}=e;if(r||r===0){const s=Number.isFinite(r)?`${r}px`:r;this.canvas.style.width=s}if(n||n===0){const s=Number.isFinite(n)?`${n}px`:n;this.canvas.style.position=((i=e.style)==null?void 0:i.position)||"absolute",this.canvas.style.height=s}}_updateCanvasSize(){var i,s;const{canvas:e}=this;if(!e)return;const r=e.clientWidth??e.width,n=e.clientHeight??e.height;(r!==this.width||n!==this.height)&&(this.width=r,this.height=n,(i=this.viewManager)==null||i.setProps({width:r,height:n}),(s=this.layerManager)==null||s.activateViewport(this.getViewports()[0]),this.props.onResize({width:r,height:n}))}_createAnimationLoop(e,r){const{gl:n,onError:i,useDevicePixels:s}=r;return new lU({device:e,useDevicePixels:s,autoResizeDrawingBuffer:!n,autoResizeViewport:!1,onInitialize:o=>this._setDevice(o.device),onRender:this._onRenderFrame.bind(this),onError:i})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){const{views:e}=this.props,r=Array.isArray(e)?e:e?[e]:[new MM({id:"default-view"})];return r.length&&this.props.controller&&(r[0].props.controller=this.props.controller),r}_onContextLost(){const{onError:e}=this.props;this.animationLoop&&e&&e(new Error("WebGL context is lost"))}_pickAndCallback(){var r,n,i;const{_pickRequest:e}=this;if(e.event){const{result:s,emptyInfo:o}=this._pick("pickObject","pickObject Time",e);this.cursorState.isHovering=s.length>0;let l=o,u=!1;for(const f of s)l=f,u=((r=f.layer)==null?void 0:r.onHover(f,e.event))||u;u||((i=(n=this.props).onHover)==null||i.call(n,l,e.event),this.widgetManager.onHover(l,e.event)),e.event=null}}_updateCursor(){const e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.cursorState))}_setDevice(e){var i,s;if(this.device=e,!this.animationLoop)return;this.canvas||(this.canvas=(i=this.device.canvasContext)==null?void 0:i.canvas),this.device instanceof $i&&this.device.setParametersWebGL({blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onDeviceInitialized(this.device),this.device instanceof $i&&this.props.onWebGLInitialized(this.device.gl);const r=new SM;r.play(),this.animationLoop.attachTimeline(r),this.eventManager=new H8(this.props.parent||this.canvas,{touchAction:this.props.touchAction,recognizers:Object.keys(FT).map(o=>{var y;const[l,u,f,d]=FT[o],g=(y=this.props.eventRecognizerOptions)==null?void 0:y[o],m={...u,...g,event:o};return{recognizer:new l(m),recognizeWith:f,requestFailure:d}}),events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const o in Yy)this.eventManager.on(o,this._onEvent);this.viewManager=new OU({timeline:r,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const n=this.viewManager.getViewports()[0];this.layerManager=new IU(this.device,{deck:this,stats:this.stats,viewport:n,timeline:r}),this.effectManager=new qU({deck:this,device:this.device}),this.deckRenderer=new YU(this.device),this.deckPicker=new tz(this.device),this.widgetManager=new iz({deck:this,parentElement:(s=this.canvas)==null?void 0:s.parentElement}),this.widgetManager.addDefault(new oz),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(e,r){var o;const{device:n,gl:i}=this.layerManager.context;this.props.onBeforeRender({device:n,gl:i});const s={target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",effects:this.effectManager.getEffects(),...r};(o=this.deckRenderer)==null||o.renderLayers(s),s.pass==="screen"&&this.widgetManager.onRedraw({viewports:s.viewports,layers:s.layers}),this.props.onAfterRender({device:n,gl:i})}_onRenderFrame(){this._getFrameStats(),this._metricsCounter++%60===0&&(this._getMetrics(),this.stats.reset(),je.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(e){const r=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState={...this.viewState,[e.viewId]:r},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(e){this.cursorState.isDragging=e.isDragging||!1,this.props.onInteractionStateChange(e)}_getFrameStats(){const{stats:e}=this;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();const r=this.animationLoop.stats;e.get("GPU Time").addTime(r.get("GPU Time").lastTiming),e.get("CPU Time").addTime(r.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:e,stats:r}=this;e.fps=r.get("frameRate").getHz(),e.setPropsTime=r.get("setProps Time").time,e.updateAttributesTime=r.get("Update Attributes").time,e.framesRedrawn=r.get("Redraw Count").count,e.pickTime=r.get("pickObject Time").time+r.get("pickMultipleObjects Time").time+r.get("pickObjects Time").time,e.pickCount=r.get("Pick Count").count,e.gpuTime=r.get("GPU Time").time,e.cpuTime=r.get("CPU Time").time,e.gpuTimePerFrame=r.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=r.get("CPU Time").getAverageTime();const n=Iy.stats.get("Memory Usage");e.bufferMemory=n.get("Buffer Memory").count,e.textureMemory=n.get("Texture Memory").count,e.renderbufferMemory=n.get("Renderbuffer Memory").count,e.gpuMemory=n.get("GPU Memory").count}};cb.defaultProps=qM;cb.VERSION=Z6;function i$(t){switch(t){case"float64":return Float64Array;case"uint8":case"unorm8":return Uint8ClampedArray;default:return PP(t)}}const s$=RP;function uf(t,e){return{attribute:t,format:e.size>1?`${e.type}x${e.size}`:e.type,byteOffset:e.offset||0}}function Ss(t){return t.stride||t.size*t.bytesPerElement}function o$(t,e){return t.type===e.type&&t.size===e.size&&Ss(t)===Ss(e)&&(t.offset||0)===(e.offset||0)}function lv(t,e){e.offset&&je.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const r=Ss(t),n=e.vertexOffset!==void 0?e.vertexOffset:t.vertexOffset||0,i=e.elementOffset||0,s=n*r+i*t.bytesPerElement+(t.offset||0);return{...e,offset:s,stride:r}}function a$(t,e){const r=lv(t,e);return{high:r,low:{...r,offset:r.offset+t.size*4}}}class l${constructor(e,r,n){this._buffer=null,this.device=e,this.id=r.id||"",this.size=r.size||1;const i=r.logicalType||r.type,s=i==="float64";let{defaultValue:o}=r;o=Number.isFinite(o)?[o]:o||new Array(this.size).fill(0);let l;s?l="float32":!i&&r.isIndexed?l="uint32":l=i||"float32";let u=i$(i||l);this.doublePrecision=s,s&&r.fp64===!1&&(u=Float32Array),this.value=null,this.settings={...r,defaultType:u,defaultValue:o,logicalType:i,type:l,normalized:l.includes("norm"),size:this.size,bytesPerElement:u.BYTES_PER_ELEMENT},this.state={...n,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1}}get isConstant(){return this.state.constant}get buffer(){return this._buffer}get byteOffset(){const e=this.getAccessor();return e.vertexOffset?e.vertexOffset*Ss(e):0}get numInstances(){return this.state.numInstances}set numInstances(e){this.state.numInstances=e}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),Ea.release(this.state.allocatedValue)}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(e=this.id,r=null){const n={};if(this.state.constant){const i=this.value;if(r){const s=lv(this.getAccessor(),r),o=s.offset/i.BYTES_PER_ELEMENT,l=s.size||this.size;n[e]=i.subarray(o,o+l)}else n[e]=i}else n[e]=this.getBuffer();return this.doublePrecision&&(this.value instanceof Float64Array?n[`${e}64Low`]=n[e]:n[`${e}64Low`]=new Float32Array(this.size)),n}_getBufferLayout(e=this.id,r=null){const n=this.getAccessor(),i=[],s={name:this.id,byteStride:Ss(n),attributes:i};if(this.doublePrecision){const o=a$(n,r||{});i.push(uf(e,{...n,...o.high}),uf(`${e}64Low`,{...n,...o.low}))}else if(r){const o=lv(n,r);i.push(uf(e,{...n,...o}))}else i.push(uf(e,n));return s}setAccessor(e){this.state.bufferAccessor=e}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let e=null;if(this.state.constant&&this.value){const r=Array.from(this.value);e=[r,r]}else{const{value:r,numInstances:n,size:i}=this,s=n*i;if(r&&s&&r.length>=s){const o=new Array(i).fill(1/0),l=new Array(i).fill(-1/0);for(let u=0;u<s;)for(let f=0;f<i;f++){const d=r[u++];d<o[f]&&(o[f]=d),d>l[f]&&(l[f]=d)}e=[o,l]}}return this.state.bounds=e,e}setData(e){const{state:r}=this;let n;ArrayBuffer.isView(e)?n={value:e}:e instanceof It?n={buffer:e}:n=e;const i={...this.settings,...n};if(ArrayBuffer.isView(n.value)){if(!n.type)if(this.doublePrecision&&n.value instanceof Float64Array)i.type="float32";else{const o=s$(n.value);i.type=i.normalized?o.replace("int","norm"):o}i.bytesPerElement=n.value.BYTES_PER_ELEMENT,i.stride=Ss(i)}if(r.bounds=null,n.constant){let s=n.value;if(s=this._normalizeValue(s,[],0),this.settings.normalized&&(s=this.normalizeConstant(s)),!(!r.constant||!this._areValuesEqual(s,this.value)))return!1;r.externalBuffer=null,r.constant=!0,this.value=ArrayBuffer.isView(s)?s:new Float32Array(s)}else if(n.buffer){const s=n.buffer;r.externalBuffer=s,r.constant=!1,this.value=n.value||null}else if(n.value){this._checkExternalBuffer(n);let s=n.value;r.externalBuffer=null,r.constant=!1,this.value=s;let{buffer:o}=this;const l=Ss(i),u=(i.vertexOffset||0)*l;if(this.doublePrecision&&s instanceof Float64Array&&(s=Yg(s,i)),this.settings.isIndexed){const d=this.settings.defaultType;s.constructor!==d&&(s=new d(s))}const f=s.byteLength+u+l*2;(!o||o.byteLength<f)&&(o=this._createBuffer(f)),o.write(s,u)}return this.setAccessor(i),!0}updateSubBuffer(e={}){this.state.bounds=null;const r=this.value,{startOffset:n=0,endOffset:i}=e;this.buffer.write(this.doublePrecision&&r instanceof Float64Array?Yg(r,{size:this.size,startIndex:n,endIndex:i}):r.subarray(n,i),n*r.BYTES_PER_ELEMENT+this.byteOffset)}allocate(e,r=!1){const{state:n}=this,i=n.allocatedValue,s=Ea.allocate(i,e+1,{size:this.size,type:this.settings.defaultType,copy:r});this.value=s;const{byteOffset:o}=this;let{buffer:l}=this;return(!l||l.byteLength<s.byteLength+o)&&(l=this._createBuffer(s.byteLength+o),r&&i&&l.write(i instanceof Float64Array?Yg(i,this):i,o)),n.allocatedValue=s,n.constant=!1,n.externalBuffer=null,this.setAccessor(this.settings),!0}_checkExternalBuffer(e){const{value:r}=e;if(!ArrayBuffer.isView(r))throw new Error(`Attribute ${this.id} value is not TypedArray`);const n=this.settings.defaultType;let i=!1;if(this.doublePrecision&&(i=r.BYTES_PER_ELEMENT<4),i)throw new Error(`Attribute ${this.id} does not support ${r.constructor.name}`);!(r instanceof n)&&this.settings.normalized&&!("normalized"in e)&&je.warn(`Attribute ${this.id} is normalized`)()}normalizeConstant(e){switch(this.settings.type){case"snorm8":return new Float32Array(e).map(r=>(r+128)/255*2-1);case"snorm16":return new Float32Array(e).map(r=>(r+32768)/65535*2-1);case"unorm8":return new Float32Array(e).map(r=>r/255);case"unorm16":return new Float32Array(e).map(r=>r/65535);default:return e}}_normalizeValue(e,r,n){const{defaultValue:i,size:s}=this.settings;if(Number.isFinite(e))return r[n]=e,r;if(!e){let o=s;for(;--o>=0;)r[n+o]=i[o];return r}switch(s){case 4:r[n+3]=Number.isFinite(e[3])?e[3]:i[3];case 3:r[n+2]=Number.isFinite(e[2])?e[2]:i[2];case 2:r[n+1]=Number.isFinite(e[1])?e[1]:i[1];case 1:r[n+0]=Number.isFinite(e[0])?e[0]:i[0];break;default:let o=s;for(;--o>=0;)r[n+o]=Number.isFinite(e[o])?e[o]:i[o]}return r}_areValuesEqual(e,r){if(!e||!r)return!1;const{size:n}=this;for(let i=0;i<n;i++)if(e[i]!==r[i])return!1;return!0}_createBuffer(e){var i;this._buffer&&this._buffer.destroy();const{isIndexed:r,type:n}=this.settings;return this._buffer=this.device.createBuffer({...(i=this._buffer)==null?void 0:i.props,id:this.id,usage:r?It.INDEX:It.VERTEX,indexType:r?n:void 0,byteLength:e}),this._buffer}}const gE=[],mE=[];function id(t,e=0,r=1/0){let n=gE;const i={index:-1,data:t,target:[]};return t?typeof t[Symbol.iterator]=="function"?n=t:t.length>0&&(mE.length=t.length,n=mE):n=gE,(e>0||Number.isFinite(r))&&(n=(Array.isArray(n)?n:Array.from(n)).slice(e,r),i.index=e-1),{iterable:n,objectInfo:i}}function XM(t){return t&&t[Symbol.asyncIterator]}function KM(t,e){const{size:r,stride:n,offset:i,startIndices:s,nested:o}=e,l=t.BYTES_PER_ELEMENT,u=n?n/l:r,f=i?i/l:0,d=Math.floor((t.length-f)/u);return(g,{index:m,target:y})=>{if(!s){const E=m*u+f;for(let k=0;k<r;k++)y[k]=t[E+k];return y}const w=s[m],b=s[m+1]||d;let S;if(o){S=new Array(b-w);for(let E=w;E<b;E++){const k=E*u+f;y=new Array(r);for(let C=0;C<r;C++)y[C]=t[k+C];S[E-w]=y}}else if(u===r)S=t.subarray(w*r+f,b*r+f);else{S=new t.constructor((b-w)*r);let E=0;for(let k=w;k<b;k++){const C=k*u+f;for(let P=0;P<r;P++)S[E++]=t[C+P]}}return S}}const c$=[],Bf=[[0,1/0]];function u$(t,e){if(t===Bf||(e[0]<0&&(e[0]=0),e[0]>=e[1]))return t;const r=[],n=t.length;let i=0;for(let s=0;s<n;s++){const o=t[s];o[1]<e[0]?(r.push(o),i=s+1):o[0]>e[1]?r.push(o):e=[Math.min(o[0],e[0]),Math.max(o[1],e[1])]}return r.splice(i,0,e),r}const f$={interpolation:{duration:0,easing:t=>t},spring:{stiffness:.05,damping:.5}};function YM(t,e){if(!t)return null;Number.isFinite(t)&&(t={type:"interpolation",duration:t});const r=t.type||"interpolation";return{...f$[r],...e,...t,type:r}}class ZM extends l${constructor(e,r){super(e,r,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,layoutChanged:!1,updateRanges:Bf}),this.constant=!1,this.settings.update=r.update||(r.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(e){this.state.startIndices=e}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:e=!1}={}){const r=this.state.needsRedraw;return this.state.needsRedraw=r&&!e,r}layoutChanged(){return this.state.layoutChanged}setAccessor(e){var r;(r=this.state).layoutChanged||(r.layoutChanged=!o$(e,this.getAccessor())),super.setAccessor(e)}getUpdateTriggers(){const{accessor:e}=this.settings;return[this.id].concat(typeof e!="function"&&e||[])}supportsTransition(){return!!this.settings.transition}getTransitionSetting(e){if(!e||!this.supportsTransition())return null;const{accessor:r}=this.settings,n=this.settings.transition,i=Array.isArray(r)?e[r.find(s=>e[s])]:e[r];return YM(i,n)}setNeedsUpdate(e=this.id,r){if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),r){const{startRow:n=0,endRow:i=1/0}=r;this.state.updateRanges=u$(this.state.updateRanges,[n,i])}else this.state.updateRanges=Bf}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=c$}setNeedsRedraw(e=this.id){this.state.needsRedraw=this.state.needsRedraw||e}allocate(e){const{state:r,settings:n}=this;return n.noAlloc?!1:n.update?(super.allocate(e,r.updateRanges!==Bf),!0):!1}updateBuffer({numInstances:e,data:r,props:n,context:i}){if(!this.needsUpdate())return!1;const{state:{updateRanges:s},settings:{update:o,noAlloc:l}}=this;let u=!0;if(o){for(const[f,d]of s)o.call(i,this,{data:r,startRow:f,endRow:d,props:n,numInstances:e});if(this.value)if(this.constant||!this.buffer||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[f,d]of s){const g=Number.isFinite(f)?this.getVertexOffset(f):0,m=Number.isFinite(d)?this.getVertexOffset(d):l||!Number.isFinite(e)?this.value.length:e*this.size;super.updateSubBuffer({startOffset:g,endOffset:m})}this._checkAttributeArray()}else u=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),u}setConstantValue(e){return e===void 0||typeof e=="function"?!1:(this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(e){const{state:r}=this;return e?(this.clearNeedsUpdate(),r.lastExternalBuffer===e||(r.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(r.lastExternalBuffer=null,!1)}setBinaryValue(e,r=null){const{state:n,settings:i}=this;if(!e)return n.binaryValue=null,n.binaryAccessor=null,!1;if(i.noAlloc)return!1;if(n.binaryValue===e)return this.clearNeedsUpdate(),!0;if(n.binaryValue=e,this.setNeedsRedraw(),i.transform||r!==this.startIndices){ArrayBuffer.isView(e)&&(e={value:e});const o=e;ir(ArrayBuffer.isView(o.value),`invalid ${i.accessor}`);const l=!!o.size&&o.size!==this.size;return n.binaryAccessor=KM(o.value,{size:o.size||this.size,stride:o.stride,offset:o.offset,startIndices:r,nested:l}),!1}return this.clearNeedsUpdate(),this.setData(e),!0}getVertexOffset(e){const{startIndices:r}=this;return(r?e<r.length?r[e]:this.numInstances:e)*this.size}getValue(){const e=this.settings.shaderAttributes,r=super.getValue();if(!e)return r;for(const n in e)Object.assign(r,super.getValue(n,e[n]));return r}getBufferLayout(e){this.state.layoutChanged=!1;const r=this.settings.shaderAttributes,n=super._getBufferLayout(),{stepMode:i}=this.settings;if(i==="dynamic"?n.stepMode=e?e.isInstanced?"instance":"vertex":"instance":n.stepMode=i??"vertex",!r)return n;for(const s in r){const o=super._getBufferLayout(s,r[s]);n.attributes.push(...o.attributes)}return n}_autoUpdater(e,{data:r,startRow:n,endRow:i,props:s,numInstances:o}){if(e.constant)return;const{settings:l,state:u,value:f,size:d,startIndices:g}=e,{accessor:m,transform:y}=l,w=u.binaryAccessor||(typeof m=="function"?m:s[m]);ir(typeof w=="function",`accessor "${m}" is not a function`);let b=e.getVertexOffset(n);const{iterable:S,objectInfo:E}=id(r,n,i);for(const k of S){E.index++;let C=w(k,E);if(y&&(C=y.call(this,C)),g){const P=(E.index<g.length-1?g[E.index+1]:o)-g[E.index];if(C&&Array.isArray(C[0])){let M=b;for(const D of C)e._normalizeValue(D,f,M),M+=d}else C&&C.length>d?f.set(C,b):(e._normalizeValue(C,E.target,0),AU({target:f,source:E.target,start:b,count:P}));b+=P*d}else e._normalizeValue(C,f,b),b+=d}}_validateAttributeUpdaters(){const{settings:e}=this;if(!(e.noAlloc||typeof e.update=="function"))throw new Error(`Attribute ${this.id} missing update or accessor`)}_checkAttributeArray(){const{value:e}=this,r=Math.min(4,this.size);if(e&&e.length>=r){let n=!0;switch(r){case 4:n=n&&Number.isFinite(e[3]);case 3:n=n&&Number.isFinite(e[2]);case 2:n=n&&Number.isFinite(e[1]);case 1:n=n&&Number.isFinite(e[0]);break;default:n=!1}if(!n)throw new Error(`Illegal attribute generated for ${this.id}`)}}}function im(t){const{source:e,target:r,start:n=0,size:i,getData:s}=t,o=t.end||r.length,l=e.length,u=o-n;if(l>u){r.set(e.subarray(0,u),n);return}if(r.set(e,n),!s)return;let f=l;for(;f<u;){const d=s(f,e);for(let g=0;g<i;g++)r[n+f]=d[g]||0,f++}}function h$({source:t,target:e,size:r,getData:n,sourceStartIndices:i,targetStartIndices:s}){if(!i||!s)return im({source:t,target:e,size:r,getData:n}),e;let o=0,l=0;const u=n&&((d,g)=>n(d+l,g)),f=Math.min(i.length,s.length);for(let d=1;d<f;d++){const g=i[d]*r,m=s[d]*r;im({source:t.subarray(o,g),target:e,start:l,end:m,size:r,getData:u}),o=g,l=m}return l<e.length&&im({source:[],target:e,start:l,size:r,getData:u}),e}function d$(t){const{device:e,settings:r,value:n}=t,i=new ZM(e,r);return i.setData({value:n instanceof Float64Array?new Float64Array(0):new Float32Array(0),normalized:r.normalized}),i}function GM(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error(`No defined attribute type for size "${t}"`)}}function QM(t){switch(t){case 1:return"float32";case 2:return"float32x2";case 3:return"float32x3";case 4:return"float32x4";default:throw new Error("invalid type size")}}function JM(t){t.push(t.shift())}function p$(t,e){const{doublePrecision:r,settings:n,value:i,size:s}=t,o=r&&i instanceof Float64Array?2:1;let l=0;const{shaderAttributes:u}=t.settings;if(u)for(const f of Object.values(u))l=Math.max(l,f.vertexOffset??0);return(n.noAlloc?i.length:(e+l)*s)*o}function eI({device:t,source:e,target:r}){return(!r||r.byteLength<e.byteLength)&&(r==null||r.destroy(),r=t.createBuffer({byteLength:e.byteLength,usage:e.usage})),r}function tI({device:t,buffer:e,attribute:r,fromLength:n,toLength:i,fromStartIndices:s,getData:o=l=>l}){const l=r.doublePrecision&&r.value instanceof Float64Array?2:1,u=r.size*l,f=r.byteOffset,d=r.settings.bytesPerElement<4?f/r.settings.bytesPerElement*4:f,g=r.startIndices,m=s&&g,y=r.isConstant;if(!m&&e&&n>=i)return e;const w=r.value instanceof Float64Array?Float32Array:r.value.constructor,b=y?r.value:new w(r.getBuffer().readSyncWebGL(f,i*w.BYTES_PER_ELEMENT).buffer);if(r.settings.normalized&&!y){const C=o;o=(P,M)=>r.normalizeConstant(C(P,M))}const S=y?(C,P)=>o(b,P):(C,P)=>o(b.subarray(C+f,C+f+u),P),E=e?new Float32Array(e.readSyncWebGL(d,n*4).buffer):new Float32Array(0),k=new Float32Array(i);return h$({source:E,target:k,sourceStartIndices:s,targetStartIndices:g,size:u,getData:S}),(!e||e.byteLength<k.byteLength+d)&&(e==null||e.destroy(),e=t.createBuffer({byteLength:k.byteLength+d,usage:35050})),e.write(k,d),e}class rI{constructor({device:e,attribute:r,timeline:n}){this.buffers=[],this.currentLength=0,this.device=e,this.transition=new nd(n),this.attribute=r,this.attributeInTransition=d$(r),this.currentStartIndices=r.startIndices}get inProgress(){return this.transition.inProgress}start(e,r,n=1/0){this.settings=e,this.currentStartIndices=this.attribute.startIndices,this.currentLength=p$(this.attribute,r),this.transition.start({...e,duration:n})}update(){const e=this.transition.update();return e&&this.onUpdate(),e}setBuffer(e){this.attributeInTransition.setData({buffer:e,normalized:this.attribute.settings.normalized,value:this.attributeInTransition.value})}cancel(){this.transition.cancel()}delete(){this.cancel();for(const e of this.buffers)e.destroy();this.buffers.length=0}}class g$ extends rI{constructor({device:e,attribute:r,timeline:n}){super({device:e,attribute:r,timeline:n}),this.type="interpolation",this.transform=v$(e,r)}start(e,r){const n=this.currentLength,i=this.currentStartIndices;if(super.start(e,r,e.duration),e.duration<=0){this.transition.cancel();return}const{buffers:s,attribute:o}=this;JM(s),s[0]=tI({device:this.device,buffer:s[0],attribute:o,fromLength:n,toLength:this.currentLength,fromStartIndices:i,getData:e.enter}),s[1]=eI({device:this.device,source:s[0],target:s[1]}),this.setBuffer(s[1]);const{transform:l}=this,u=l.model;let f=Math.floor(this.currentLength/o.size);nI(o)&&(f/=2),u.setVertexCount(f),o.isConstant?(u.setAttributes({aFrom:s[0]}),u.setConstantAttributes({aTo:o.value})):u.setAttributes({aFrom:s[0],aTo:o.getBuffer()}),l.transformFeedback.setBuffers({vCurrent:s[1]})}onUpdate(){const{duration:e,easing:r}=this.settings,{time:n}=this.transition;let i=n/e;r&&(i=r(i));const{model:s}=this.transform,o={time:i};s.shaderInputs.setProps({interpolation:o}),this.transform.run({discard:!0})}delete(){super.delete(),this.transform.destroy()}}const m$=`uniform interpolationUniforms {
  float time;
} interpolation;
`,_E={name:"interpolation",vs:m$,uniformTypes:{time:"f32"}},_$=`#version 300 es
#define SHADER_NAME interpolation-transition-vertex-shader

in ATTRIBUTE_TYPE aFrom;
in ATTRIBUTE_TYPE aTo;
out ATTRIBUTE_TYPE vCurrent;

void main(void) {
  vCurrent = mix(aFrom, aTo, interpolation.time);
  gl_Position = vec4(0.0);
}
`,y$=`#version 300 es
#define SHADER_NAME interpolation-transition-vertex-shader

in ATTRIBUTE_TYPE aFrom;
in ATTRIBUTE_TYPE aFrom64Low;
in ATTRIBUTE_TYPE aTo;
in ATTRIBUTE_TYPE aTo64Low;
out ATTRIBUTE_TYPE vCurrent;
out ATTRIBUTE_TYPE vCurrent64Low;

vec2 mix_fp64(vec2 a, vec2 b, float x) {
  vec2 range = sub_fp64(b, a);
  return sum_fp64(a, mul_fp64(range, vec2(x, 0.0)));
}

void main(void) {
  for (int i=0; i<ATTRIBUTE_SIZE; i++) {
    vec2 value = mix_fp64(vec2(aFrom[i], aFrom64Low[i]), vec2(aTo[i], aTo64Low[i]), interpolation.time);
    vCurrent[i] = value.x;
    vCurrent64Low[i] = value.y;
  }
  gl_Position = vec4(0.0);
}
`;function nI(t){return t.doublePrecision&&t.value instanceof Float64Array}function v$(t,e){const r=e.size,n=GM(r),i=QM(r),s=e.getBufferLayout();return nI(e)?new hc(t,{vs:y$,bufferLayout:[{name:"aFrom",byteStride:8*r,attributes:[{attribute:"aFrom",format:i,byteOffset:0},{attribute:"aFrom64Low",format:i,byteOffset:4*r}]},{name:"aTo",byteStride:8*r,attributes:[{attribute:"aTo",format:i,byteOffset:0},{attribute:"aTo64Low",format:i,byteOffset:4*r}]}],modules:[DL,_E],defines:{ATTRIBUTE_TYPE:n,ATTRIBUTE_SIZE:r},moduleSettings:{},varyings:["vCurrent","vCurrent64Low"],bufferMode:35980,disableWarnings:!0}):new hc(t,{vs:_$,bufferLayout:[{name:"aFrom",format:i},{name:"aTo",format:s.attributes[0].format}],modules:[_E],defines:{ATTRIBUTE_TYPE:n},varyings:["vCurrent"],disableWarnings:!0})}class b$ extends rI{constructor({device:e,attribute:r,timeline:n}){super({device:e,attribute:r,timeline:n}),this.type="spring",this.texture=A$(e),this.framebuffer=C$(e,this.texture),this.transform=E$(e,r)}start(e,r){const n=this.currentLength,i=this.currentStartIndices;super.start(e,r);const{buffers:s,attribute:o}=this;for(let u=0;u<2;u++)s[u]=tI({device:this.device,buffer:s[u],attribute:o,fromLength:n,toLength:this.currentLength,fromStartIndices:i,getData:e.enter});s[2]=eI({device:this.device,source:s[0],target:s[2]}),this.setBuffer(s[1]);const{model:l}=this.transform;l.setVertexCount(Math.floor(this.currentLength/o.size)),o.isConstant?l.setConstantAttributes({aTo:o.value}):l.setAttributes({aTo:o.getBuffer()})}onUpdate(){const{buffers:e,transform:r,framebuffer:n,transition:i}=this,s=this.settings;r.model.setAttributes({aPrev:e[0],aCur:e[1]}),r.transformFeedback.setBuffers({vNext:e[2]});const o={stiffness:s.stiffness,damping:s.damping};r.model.shaderInputs.setProps({spring:o}),r.run({framebuffer:n,discard:!1,parameters:{viewport:[0,0,1,1]},clearColor:[0,0,0,0]}),JM(e),this.setBuffer(e[1]),this.device.readPixelsToArrayWebGL(n)[0]>0||i.end()}delete(){super.delete(),this.transform.destroy(),this.texture.destroy(),this.framebuffer.destroy()}}const w$=`uniform springUniforms {
  float damping;
  float stiffness;
} spring;
`,S$={name:"spring",vs:w$,uniformTypes:{damping:"f32",stiffness:"f32"}},x$=`#version 300 es
#define SHADER_NAME spring-transition-vertex-shader

#define EPSILON 0.00001

in ATTRIBUTE_TYPE aPrev;
in ATTRIBUTE_TYPE aCur;
in ATTRIBUTE_TYPE aTo;
out ATTRIBUTE_TYPE vNext;
out float vIsTransitioningFlag;

ATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {
  ATTRIBUTE_TYPE velocity = cur - prev;
  ATTRIBUTE_TYPE delta = dest - cur;
  ATTRIBUTE_TYPE force = delta * spring.stiffness;
  ATTRIBUTE_TYPE resistance = velocity * spring.damping;
  return force - resistance + velocity + cur;
}

void main(void) {
  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;
  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;

  vNext = getNextValue(aCur, aPrev, aTo);
  gl_Position = vec4(0, 0, 0, 1);
  gl_PointSize = 100.0;
}
`,T$=`#version 300 es
#define SHADER_NAME spring-transition-is-transitioning-fragment-shader

in float vIsTransitioningFlag;

out vec4 fragColor;

void main(void) {
  if (vIsTransitioningFlag == 0.0) {
    discard;
  }
  fragColor = vec4(1.0);
}`;function E$(t,e){const r=GM(e.size),n=QM(e.size);return new hc(t,{vs:x$,fs:T$,bufferLayout:[{name:"aPrev",format:n},{name:"aCur",format:n},{name:"aTo",format:e.getBufferLayout().attributes[0].format}],varyings:["vNext"],modules:[S$],defines:{ATTRIBUTE_TYPE:r},parameters:{depthCompare:"always",blendColorOperation:"max",blendColorSrcFactor:"one",blendColorDstFactor:"one",blendAlphaOperation:"max",blendAlphaSrcFactor:"one",blendAlphaDstFactor:"one"}})}function A$(t){return t.createTexture({data:new Uint8Array(4),format:"rgba8unorm",mipmaps:!1,width:1,height:1})}function C$(t,e){return t.createFramebuffer({id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,colorAttachments:[e]})}const R$={interpolation:g$,spring:b$};class P${constructor(e,{id:r,timeline:n}){if(!e)throw new Error("AttributeTransitionManager is constructed without device");this.id=r,this.device=e,this.timeline=n,this.transitions={},this.needsRedraw=!1,this.numInstances=1}finalize(){for(const e in this.transitions)this._removeTransition(e)}update({attributes:e,transitions:r,numInstances:n}){this.numInstances=n||1;for(const i in e){const s=e[i],o=s.getTransitionSetting(r);o&&this._updateAttribute(i,s,o)}for(const i in this.transitions){const s=e[i];(!s||!s.getTransitionSetting(r))&&this._removeTransition(i)}}hasAttribute(e){const r=this.transitions[e];return r&&r.inProgress}getAttributes(){const e={};for(const r in this.transitions){const n=this.transitions[r];n.inProgress&&(e[r]=n.attributeInTransition)}return e}run(){if(this.numInstances===0)return!1;for(const r in this.transitions)this.transitions[r].update()&&(this.needsRedraw=!0);const e=this.needsRedraw;return this.needsRedraw=!1,e}_removeTransition(e){this.transitions[e].delete(),delete this.transitions[e]}_updateAttribute(e,r,n){const i=this.transitions[e];let s=!i||i.type!==n.type;if(s){i&&this._removeTransition(e);const o=R$[n.type];o?this.transitions[e]=new o({attribute:r,timeline:this.timeline,device:this.device}):(je.error(`unsupported transition type '${n.type}'`)(),s=!1)}(s||r.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(n,this.numInstances))}}const yE="attributeManager.invalidate",M$="attributeManager.updateStart",I$="attributeManager.updateEnd",O$="attribute.updateStart",k$="attribute.allocate",N$="attribute.updateEnd";class F${constructor(e,{id:r="attribute-manager",stats:n,timeline:i}={}){this.mergeBoundsMemoized=Pc(Y9),this.id=r,this.device=e,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=n,this.attributeTransitionManager=new P$(e,{id:`${r}-transitions`,timeline:i}),Object.seal(this)}finalize(){for(const e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(e={clearRedrawFlags:!1}){const r=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,r&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(e){this._add(e)}addInstanced(e){this._add(e,{stepMode:"instance"})}remove(e){for(const r of e)this.attributes[r]!==void 0&&(this.attributes[r].delete(),delete this.attributes[r])}invalidate(e,r){const n=this._invalidateTrigger(e,r);dr(yE,this,e,n)}invalidateAll(e){for(const r in this.attributes)this.attributes[r].setNeedsUpdate(r,e);dr(yE,this,"all")}update({data:e,numInstances:r,startIndices:n=null,transitions:i,props:s={},buffers:o={},context:l={}}){let u=!1;dr(M$,this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const f in this.attributes){const d=this.attributes[f],g=d.settings.accessor;d.startIndices=n,d.numInstances=r,s[f]&&je.removed(`props.${f}`,`data.attributes.${f}`)(),d.setExternalBuffer(o[f])||d.setBinaryValue(typeof g=="string"?o[g]:void 0,e.startIndices)||typeof g=="string"&&!o[g]&&d.setConstantValue(s[g])||d.needsUpdate()&&(u=!0,this._updateAttribute({attribute:d,numInstances:r,data:e,props:s,context:l})),this.needsRedraw=this.needsRedraw||d.needsRedraw()}u&&dr(I$,this,r),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:r,transitions:i})}updateTransition(){const{attributeTransitionManager:e}=this,r=e.run();return this.needsRedraw=this.needsRedraw||r,r}getAttributes(){return{...this.attributes,...this.attributeTransitionManager.getAttributes()}}getBounds(e){const r=e.map(n=>{var i;return(i=this.attributes[n])==null?void 0:i.getBounds()});return this.mergeBoundsMemoized(r)}getChangedAttributes(e={clearChangedFlags:!1}){const{attributes:r,attributeTransitionManager:n}=this,i={...n.getAttributes()};for(const s in r){const o=r[s];o.needsRedraw(e)&&!n.hasAttribute(s)&&(i[s]=o)}return i}getBufferLayouts(e){return Object.values(this.getAttributes()).map(r=>r.getBufferLayout(e))}_add(e,r){for(const n in e){const i=e[n],s={...i,id:n,size:i.isIndexed&&1||i.size||1,...r};this.attributes[n]=new ZM(this.device,s)}this._mapUpdateTriggersToAttributes()}_mapUpdateTriggersToAttributes(){const e={};for(const r in this.attributes)this.attributes[r].getUpdateTriggers().forEach(i=>{e[i]||(e[i]=[]),e[i].push(r)});this.updateTriggers=e}_invalidateTrigger(e,r){const{attributes:n,updateTriggers:i}=this,s=i[e];return s&&s.forEach(o=>{const l=n[o];l&&l.setNeedsUpdate(l.id,r)}),s}_updateAttribute(e){const{attribute:r,numInstances:n}=e;if(dr(O$,r),r.constant){r.setConstantValue(r.value);return}r.allocate(n)&&dr(k$,r,n),r.updateBuffer(e)&&(this.needsRedraw=!0,dr(N$,r,n))}}class D$ extends nd{get value(){return this._value}_onUpdate(){const{time:e,settings:{fromValue:r,toValue:n,duration:i,easing:s}}=this,o=s(e/i);this._value=As(r,n,o)}}const vE=1e-5;function bE(t,e,r,n,i){const s=e-t,l=(r-e)*i,u=-s*n;return l+u+s+e}function B$(t,e,r,n,i){if(Array.isArray(r)){const s=[];for(let o=0;o<r.length;o++)s[o]=bE(t[o],e[o],r[o],n,i);return s}return bE(t,e,r,n,i)}function wE(t,e){if(Array.isArray(t)){let r=0;for(let n=0;n<t.length;n++){const i=t[n]-e[n];r+=i*i}return Math.sqrt(r)}return Math.abs(t-e)}class L$ extends nd{get value(){return this._currValue}_onUpdate(){const{fromValue:e,toValue:r,damping:n,stiffness:i}=this.settings,{_prevValue:s=e,_currValue:o=e}=this;let l=B$(s,o,r,n,i);const u=wE(l,r),f=wE(l,o);u<vE&&f<vE&&(l=r,this.end()),this._prevValue=o,this._currValue=l}}const U$={interpolation:D$,spring:L$};class z${constructor(e){this.transitions=new Map,this.timeline=e}get active(){return this.transitions.size>0}add(e,r,n,i){const{transitions:s}=this;if(s.has(e)){const u=s.get(e),{value:f=u.settings.fromValue}=u;r=f,this.remove(e)}if(i=YM(i),!i)return;const o=U$[i.type];if(!o){je.error(`unsupported transition type '${i.type}'`)();return}const l=new o(this.timeline);l.start({...i,fromValue:r,toValue:n}),s.set(e,l)}remove(e){const{transitions:r}=this;r.has(e)&&(r.get(e).cancel(),r.delete(e))}update(){const e={};for(const[r,n]of this.transitions)n.update(),e[r]=n.value,n.inProgress||this.remove(r);return e}clear(){for(const e of this.transitions.keys())this.remove(e)}}function $$(t){const e=t[ji];for(const r in e){const n=e[r],{validate:i}=n;if(i&&!i(t[r],n))throw new Error(`Invalid prop ${r}: ${t[r]}`)}}function V$(t,e){const r=iI({newProps:t,oldProps:e,propTypes:t[ji],ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),n=H$(t,e);let i=!1;return n||(i=W$(t,e)),{dataChanged:n,propsChanged:r,updateTriggersChanged:i,extensionsChanged:q$(t,e),transitionsChanged:j$(t,e)}}function j$(t,e){if(!t.transitions)return!1;const r={},n=t[ji];let i=!1;for(const s in t.transitions){const o=n[s],l=o&&o.type;(l==="number"||l==="color"||l==="array")&&cv(t[s],e[s],o)&&(r[s]=!0,i=!0)}return i?r:!1}function iI({newProps:t,oldProps:e,ignoreProps:r={},propTypes:n={},triggerName:i="props"}){if(e===t)return!1;if(typeof t!="object"||t===null)return`${i} changed shallowly`;if(typeof e!="object"||e===null)return`${i} changed shallowly`;for(const s of Object.keys(t))if(!(s in r)){if(!(s in e))return`${i}.${s} added`;const o=cv(t[s],e[s],n[s]);if(o)return`${i}.${s} ${o}`}for(const s of Object.keys(e))if(!(s in r)){if(!(s in t))return`${i}.${s} dropped`;if(!Object.hasOwnProperty.call(t,s)){const o=cv(t[s],e[s],n[s]);if(o)return`${i}.${s} ${o}`}}return!1}function cv(t,e,r){let n=r&&r.equal;return n&&!n(t,e,r)||!n&&(n=t&&e&&t.equals,n&&!n.call(t,e))?"changed deeply":!n&&e!==t?"changed shallowly":null}function H$(t,e){if(e===null)return"oldProps is null, initial diff";let r=!1;const{dataComparator:n,_dataDiff:i}=t;return n?n(t.data,e.data)||(r="Data comparator detected a change"):t.data!==e.data&&(r="A new data container was supplied"),r&&i&&(r=i(t.data,e.data)||r),r}function W$(t,e){if(e===null)return{all:!0};if("all"in t.updateTriggers&&SE(t,e,"all"))return{all:!0};const r={};let n=!1;for(const i in t.updateTriggers)i!=="all"&&SE(t,e,i)&&(r[i]=!0,n=!0);return n?r:!1}function q$(t,e){if(e===null)return!0;const r=e.extensions,{extensions:n}=t;if(n===r)return!1;if(!r||!n||n.length!==r.length)return!0;for(let i=0;i<n.length;i++)if(!n[i].equals(r[i]))return!0;return!1}function SE(t,e,r){let n=t.updateTriggers[r];n=n??{};let i=e.updateTriggers[r];return i=i??{},iI({oldProps:i,newProps:n,triggerName:r})}const X$="count(): argument not an object",K$="count(): argument not a container";function Y$(t){if(!G$(t))throw new Error(X$);if(typeof t.count=="function")return t.count();if(Number.isFinite(t.size))return t.size;if(Number.isFinite(t.length))return t.length;if(Z$(t))return Object.keys(t).length;throw new Error(K$)}function Z$(t){return t!==null&&typeof t=="object"&&t.constructor===Object}function G$(t){return t!==null&&typeof t=="object"}function xE(t,e){if(!e)return t;const r={...t,...e};if("defines"in e&&(r.defines={...t.defines,...e.defines}),"modules"in e&&(r.modules=(t.modules||[]).concat(e.modules),e.modules.some(n=>n.name==="project64"))){const n=r.modules.findIndex(i=>i.name==="project32");n>=0&&r.modules.splice(n,1)}if("inject"in e)if(!t.inject)r.inject=e.inject;else{const n={...t.inject};for(const i in e.inject)n[i]=(n[i]||"")+e.inject[i];r.inject=n}return r}const Q$={minFilter:"linear",mipmapFilter:"linear",magFilter:"linear",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"},uv={};function J$(t,e,r,n){if(r instanceof Pt)return r;r.constructor&&r.constructor.name!=="Object"&&(r={data:r});let i=null;r.compressed&&(i={minFilter:"linear",mipmapFilter:r.data.length>1?"nearest":"linear"});const s=e.createTexture({...r,sampler:{...Q$,...i,...n},mipmaps:!0});return uv[s.id]=t,s}function eV(t,e){!e||!(e instanceof Pt)||uv[e.id]===t&&(e.delete(),delete uv[e.id])}const tV={boolean:{validate(t,e){return!0},equal(t,e,r){return!!t==!!e}},number:{validate(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},color:{validate(t,e){return e.optional&&!t||fv(t)&&(t.length===3||t.length===4)},equal(t,e,r){return mn(t,e,1)}},accessor:{validate(t,e){const r=_h(t);return r==="function"||r===_h(e.value)},equal(t,e,r){return typeof e=="function"?!0:mn(t,e,1)}},array:{validate(t,e){return e.optional&&!t||fv(t)},equal(t,e,r){const{compare:n}=r,i=Number.isInteger(n)?n:n?1:0;return n?mn(t,e,i):t===e}},object:{equal(t,e,r){if(r.ignore)return!0;const{compare:n}=r,i=Number.isInteger(n)?n:n?1:0;return n?mn(t,e,i):t===e}},function:{validate(t,e){return e.optional&&!t||typeof t=="function"},equal(t,e,r){return!r.compare&&r.ignore!==!1||t===e}},data:{transform:(t,e,r)=>{if(!t)return t;const{dataTransform:n}=r.props;return n?n(t):typeof t.shape=="string"&&t.shape.endsWith("-table")&&Array.isArray(t.data)?t.data:t}},image:{transform:(t,e,r)=>{const n=r.context;return!n||!n.device?null:J$(r.id,n.device,t,{...e.parameters,...r.props.textureParameters})},release:(t,e,r)=>{eV(r.id,t)}}};function rV(t){const e={},r={},n={};for(const[i,s]of Object.entries(t)){const o=s==null?void 0:s.deprecatedFor;if(o)n[i]=Array.isArray(o)?o:[o];else{const l=nV(i,s);e[i]=l,r[i]=l.value}}return{propTypes:e,defaultProps:r,deprecatedProps:n}}function nV(t,e){switch(_h(e)){case"object":return Pl(t,e);case"array":return Pl(t,{type:"array",value:e,compare:!1});case"boolean":return Pl(t,{type:"boolean",value:e});case"number":return Pl(t,{type:"number",value:e});case"function":return Pl(t,{type:"function",value:e,compare:!0});default:return{name:t,type:"unknown",value:e}}}function Pl(t,e){return"type"in e?{name:t,...tV[e.type],...e}:"value"in e?{name:t,type:_h(e.value),...e}:{name:t,type:"object",value:e}}function fv(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function _h(t){return fv(t)?"array":t===null?"null":typeof t}function iV(t,e){let r;for(let s=e.length-1;s>=0;s--){const o=e[s];"extensions"in o&&(r=o.extensions)}const n=hv(t.constructor,r),i=Object.create(n);i[gh]=t,i[ks]={},i[zi]={};for(let s=0;s<e.length;++s){const o=e[s];for(const l in o)i[l]=o[l]}return Object.freeze(i),i}const sV="_mergedDefaultProps";function hv(t,e){if(!(t instanceof sd.constructor))return{};let r=sV;if(e)for(const i of e){const s=i.constructor;s&&(r+=`:${s.extensionName||s.name}`)}const n=sI(t,r);return n||(t[r]=oV(t,e||[]))}function oV(t,e){if(!t.prototype)return null;const n=Object.getPrototypeOf(t),i=hv(n),s=sI(t,"defaultProps")||{},o=rV(s),l=Object.assign(Object.create(null),i,o.defaultProps),u=Object.assign(Object.create(null),i==null?void 0:i[ji],o.propTypes),f=Object.assign(Object.create(null),i==null?void 0:i[Jg],o.deprecatedProps);for(const d of e){const g=hv(d.constructor);g&&(Object.assign(l,g),Object.assign(u,g[ji]),Object.assign(f,g[Jg]))}return aV(l,t),cV(l,u),lV(l,f),l[ji]=u,l[Jg]=f,e.length===0&&!ub(t,"_propTypes")&&(t._propTypes=u),l}function aV(t,e){const r=fV(e);Object.defineProperties(t,{id:{writable:!0,value:r}})}function lV(t,e){for(const r in e)Object.defineProperty(t,r,{enumerable:!1,set(n){const i=`${this.id}: ${r}`;for(const s of e[r])ub(this,s)||(this[s]=n);je.deprecated(i,e[r].join("/"))()}})}function cV(t,e){const r={},n={};for(const i in e){const s=e[i],{name:o,value:l}=s;s.async&&(r[o]=l,n[o]=uV(o))}t[_a]=r,t[ks]={},Object.defineProperties(t,n)}function uV(t){return{enumerable:!0,set(e){typeof e=="string"||e instanceof Promise||XM(e)?this[ks][t]=e:this[zi][t]=e},get(){if(this[zi]){if(t in this[zi])return this[zi][t]||this[_a][t];if(t in this[ks]){const e=this[gh]&&this[gh].internalState;if(e&&e.hasAsyncProp(t))return e.getAsyncProp(t)||this[_a][t]}}return this[_a][t]}}}function ub(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function sI(t,e){return ub(t,e)&&t[e]}function fV(t){const e=t.componentName;return e||je.warn(`${t.name}.componentName not specified`)(),e||t.name}let hV=0;class sd{constructor(...e){this.props=iV(this,e),this.id=this.props.id,this.count=hV++}clone(e){const{props:r}=this,n={};for(const i in r[_a])i in r[zi]?n[i]=r[zi][i]:i in r[ks]&&(n[i]=r[ks][i]);return new this.constructor({...r,...n,...e})}}sd.componentName="Component";sd.defaultProps={};const dV=Object.freeze({});class pV{constructor(e){this.component=e,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const e in this.asyncProps){const r=this.asyncProps[e];r&&r.type&&r.type.release&&r.type.release(r.resolvedValue,r.type,this.component)}this.asyncProps={},this.component=null,this.resetOldProps()}getOldProps(){return this.oldAsyncProps||this.oldProps||dV}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component?this.component.props:null}hasAsyncProp(e){return e in this.asyncProps}getAsyncProp(e){const r=this.asyncProps[e];return r&&r.resolvedValue}isAsyncPropLoading(e){if(e){const r=this.asyncProps[e];return!!(r&&r.pendingLoadCount>0&&r.pendingLoadCount!==r.resolvedLoadCount)}for(const r in this.asyncProps)if(this.isAsyncPropLoading(r))return!0;return!1}reloadAsyncProp(e,r){this._watchPromise(e,Promise.resolve(r))}setAsyncProps(e){this.component=e[gh]||this.component;const r=e[zi]||{},n=e[ks]||e,i=e[_a]||{};for(const s in r){const o=r[s];this._createAsyncPropData(s,i[s]),this._updateAsyncProp(s,o),r[s]=this.getAsyncProp(s)}for(const s in n){const o=n[s];this._createAsyncPropData(s,i[s]),this._updateAsyncProp(s,o)}}_fetch(e,r){return null}_onResolve(e,r){}_onError(e,r){}_updateAsyncProp(e,r){if(this._didAsyncInputValueChange(e,r)){if(typeof r=="string"&&(r=this._fetch(e,r)),r instanceof Promise){this._watchPromise(e,r);return}if(XM(r)){this._resolveAsyncIterable(e,r);return}this._setPropValue(e,r)}}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const e in this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}}_didAsyncInputValueChange(e,r){const n=this.asyncProps[e];return r===n.resolvedValue||r===n.lastValue?!1:(n.lastValue=r,!0)}_setPropValue(e,r){this._freezeAsyncOldProps();const n=this.asyncProps[e];n&&(r=this._postProcessValue(n,r),n.resolvedValue=r,n.pendingLoadCount++,n.resolvedLoadCount=n.pendingLoadCount)}_setAsyncPropValue(e,r,n){const i=this.asyncProps[e];i&&n>=i.resolvedLoadCount&&r!==void 0&&(this._freezeAsyncOldProps(),i.resolvedValue=r,i.resolvedLoadCount=n,this.onAsyncPropUpdated(e,r))}_watchPromise(e,r){const n=this.asyncProps[e];if(n){n.pendingLoadCount++;const i=n.pendingLoadCount;r.then(s=>{this.component&&(s=this._postProcessValue(n,s),this._setAsyncPropValue(e,s,i),this._onResolve(e,s))}).catch(s=>{this._onError(e,s)})}}async _resolveAsyncIterable(e,r){if(e!=="data"){this._setPropValue(e,r);return}const n=this.asyncProps[e];if(!n)return;n.pendingLoadCount++;const i=n.pendingLoadCount;let s=[],o=0;for await(const l of r){if(!this.component)return;const{dataTransform:u}=this.component.props;u?s=u(l,s):s=s.concat(l),Object.defineProperty(s,"__diff",{enumerable:!1,value:[{startRow:o,endRow:s.length}]}),o=s.length,this._setAsyncPropValue(e,s,i)}this._onResolve(e,s)}_postProcessValue(e,r){const n=e.type;return n&&this.component&&(n.release&&n.release(e.resolvedValue,n,this.component),n.transform)?n.transform(r,n,this.component):r}_createAsyncPropData(e,r){if(!this.asyncProps[e]){const i=this.component&&this.component.props[ji];this.asyncProps[e]={type:i&&i[e],lastValue:null,resolvedValue:r,pendingLoadCount:0,resolvedLoadCount:0}}}}class gV extends pV{constructor({attributeManager:e,layer:r}){super(r),this.attributeManager=e,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}_fetch(e,r){const n=this.layer,i=n==null?void 0:n.props.fetch;return i?i(r,{propName:e,layer:n}):super._fetch(e,r)}_onResolve(e,r){const n=this.layer;if(n){const i=n.props.onDataLoad;e==="data"&&i&&i(r,{propName:e,layer:n})}}_onError(e,r){const n=this.layer;n&&n.raiseError(r,`loading ${e} of ${this.layer}`)}}const mV="layer.changeFlag",_V="layer.initialize",yV="layer.update",vV="layer.finalize",bV="layer.matched",TE=2**24-1,wV=Object.freeze([]),SV=Pc(({oldViewport:t,viewport:e})=>t.equals(e));let fn=new Uint8ClampedArray(0);const xV={data:{type:"data",value:wV,async:!0},dataComparator:{type:"function",value:null,optional:!0},_dataDiff:{type:"function",value:t=>t&&t.__diff,optional:!0},dataTransform:{type:"function",value:null,optional:!0},onDataLoad:{type:"function",value:null,optional:!0},onError:{type:"function",value:null,optional:!0},fetch:{type:"function",value:(t,{propName:e,layer:r,loaders:n,loadOptions:i,signal:s})=>{const{resourceManager:o}=r.context;i=i||r.getLoadOptions(),n=n||r.props.loaders,s&&(i={...i,fetch:{...i==null?void 0:i.fetch,signal:s}});let l=o.contains(t);return!l&&!i&&(o.add({resourceId:t,data:ac(t,n),persistent:!1}),l=!0),l?o.subscribe({resourceId:t,onChange:u=>{var f;return(f=r.internalState)==null?void 0:f.reloadAsyncProp(e,u)},consumerId:r.id,requestId:e}):ac(t,n,i)}},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:"draw",onHover:{type:"function",value:null,optional:!0},onClick:{type:"function",value:null,optional:!0},onDragStart:{type:"function",value:null,optional:!0},onDrag:{type:"function",value:null,optional:!0},onDragEnd:{type:"function",value:null,optional:!0},coordinateSystem:We.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:2},loadOptions:{type:"object",value:null,optional:!0,ignore:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,ignore:!0},getPolygonOffset:{type:"function",value:({layerIndex:t})=>[0,-t*100]},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class zn extends sd{constructor(){super(...arguments),this.internalState=null,this.lifecycle=Vo.NO_STATE,this.parent=null}static get componentName(){return Object.prototype.hasOwnProperty.call(this,"layerName")?this.layerName:""}get root(){let e=this;for(;e.parent;)e=e.parent;return e}toString(){return`${this.constructor.layerName||this.constructor.name}({id: '${this.props.id}'})`}project(e){ir(this.internalState);const r=this.internalState.viewport||this.context.viewport,n=wM(e,{viewport:r,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[i,s,o]=_M(n,r.pixelProjectionMatrix);return e.length===2?[i,s]:[i,s,o]}unproject(e){return ir(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(e)}projectPosition(e,r){ir(this.internalState);const n=this.internalState.viewport||this.context.viewport;return tU(e,{viewport:n,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...r})}get isComposite(){return!1}get isDrawable(){return!0}setState(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return this.internalState?!this.internalState.isAsyncPropLoading():!1}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){const e=this.state;return e&&(e.models||e.model&&[e.model])||[]}setShaderModuleProps(...e){for(const r of this.getModels())r.shaderInputs.setProps(...e)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:e}=this.props;return e===We.DEFAULT||e===We.LNGLAT||e===We.CARTESIAN}onHover(e,r){return this.props.onHover&&this.props.onHover(e,r)||!1}onClick(e,r){return this.props.onClick&&this.props.onClick(e,r)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(e,r=[]){return r[0]=e+1&255,r[1]=e+1>>8&255,r[2]=e+1>>8>>8&255,r}decodePickingColor(e){ir(e instanceof Uint8Array);const[r,n,i]=e;return r+n*256+i*65536-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&this.state.numInstances!==void 0?this.state.numInstances:Y$(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var e;return(e=this.getAttributeManager())==null?void 0:e.getBounds(["positions","instancePositions"])}getShaders(e){e=xE(e,{disableWarnings:!0,modules:this.context.defaultShaderModules});for(const r of this.props.extensions)e=xE(e,r.getShaders.call(this,r));return e}shouldUpdateState(e){return e.changeFlags.propsOrDataChanged}updateState(e){const r=this.getAttributeManager(),{dataChanged:n}=e.changeFlags;if(n&&r)if(Array.isArray(n))for(const i of n)r.invalidateAll(i);else r.invalidateAll();if(r){const{props:i}=e,s=this.internalState.hasPickingBuffer,o=Number.isInteger(i.highlightedObjectIndex)||i.pickable||i.extensions.some(l=>l.getNeedsPickingBuffer.call(this,l));if(s!==o){this.internalState.hasPickingBuffer=o;const{pickingColors:l,instancePickingColors:u}=r.attributes,f=l||u;f&&(o&&f.constant&&(f.constant=!1,r.invalidate(f.id)),!f.value&&!o&&(f.constant=!0,f.value=[0,0,0]))}}}finalizeState(e){for(const n of this.getModels())n.destroy();const r=this.getAttributeManager();r&&r.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(e){for(const r of this.getModels())r.draw(e.renderPass)}getPickingInfo({info:e,mode:r,sourceLayer:n}){const{index:i}=e;return i>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[i]),e}raiseError(e,r){var n,i,s,o;r&&(e=new Error(`${r}: ${e.message}`,{cause:e})),(i=(n=this.props).onError)!=null&&i.call(n,e)||(o=(s=this.context)==null?void 0:s.onError)==null||o.call(s,e,this)}getNeedsRedraw(e={clearRedrawFlags:!1}){return this._getNeedsRedraw(e)}needsUpdate(){return this.internalState?this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()):!1}hasUniformTransition(){var e;return((e=this.internalState)==null?void 0:e.uniformTransitions.active)||!1}activateViewport(e){if(!this.internalState)return;const r=this.internalState.viewport;this.internalState.viewport=e,(!r||!SV({oldViewport:r,viewport:e}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(e="all"){const r=this.getAttributeManager();r&&(e==="all"?r.invalidateAll():r.invalidate(e))}updateAttributes(e){let r=!1;for(const n in e)e[n].layoutChanged()&&(r=!0);for(const n of this.getModels())this._setModelAttributes(n,e,r)}_updateAttributes(){const e=this.getAttributeManager();if(!e)return;const r=this.props,n=this.getNumInstances(),i=this.getStartIndices();e.update({data:r.data,numInstances:n,startIndices:i,props:r,transitions:r.transitions,buffers:r.data.attributes,context:this});const s=e.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(s)}_updateAttributeTransition(){const e=this.getAttributeManager();e&&e.updateTransition()}_updateUniformTransition(){const{uniformTransitions:e}=this.internalState;if(e.active){const r=e.update(),n=Object.create(this.props);for(const i in r)Object.defineProperty(n,i,{value:r[i]});return n}return this.props}calculateInstancePickingColors(e,{numInstances:r}){if(e.constant)return;const n=Math.floor(fn.length/4);if(this.internalState.usesPickingColorCache=!0,n<r){r>TE&&je.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),fn=Ea.allocate(fn,r,{size:4,copy:!0,maxCount:Math.max(r,TE)});const i=Math.floor(fn.length/4),s=[0,0,0];for(let o=n;o<i;o++)this.encodePickingColor(o,s),fn[o*4+0]=s[0],fn[o*4+1]=s[1],fn[o*4+2]=s[2],fn[o*4+3]=0}e.value=fn.subarray(0,r*4)}_setModelAttributes(e,r,n=!1){var l;if(!Object.keys(r).length)return;if(n){const u=this.getAttributeManager();e.setBufferLayout(u.getBufferLayouts(e)),r=u.getAttributes()}const i=((l=e.userData)==null?void 0:l.excludeAttributes)||{},s={},o={};for(const u in r){if(i[u])continue;const f=r[u].getValue();for(const d in f){const g=f[d];g instanceof It?r[u].settings.isIndexed?e.setIndexBuffer(g):s[d]=g:g&&(o[d]=g)}}e.setAttributes(s),e.setConstantAttributes(o)}disablePickingIndex(e){const r=this.props.data;if(!("attributes"in r)){this._disablePickingIndex(e);return}const{pickingColors:n,instancePickingColors:i}=this.getAttributeManager().attributes,s=n||i,o=s&&r.attributes&&r.attributes[s.id];if(o&&o.value){const l=o.value,u=this.encodePickingColor(e);for(let f=0;f<r.length;f++){const d=s.getVertexOffset(f);l[d]===u[0]&&l[d+1]===u[1]&&l[d+2]===u[2]&&this._disablePickingIndex(f)}}else this._disablePickingIndex(e)}_disablePickingIndex(e){const{pickingColors:r,instancePickingColors:n}=this.getAttributeManager().attributes,i=r||n;if(!i)return;const s=i.getVertexOffset(e),o=i.getVertexOffset(e+1);i.buffer.write(new Uint8Array(o-s),s)}restorePickingColors(){const{pickingColors:e,instancePickingColors:r}=this.getAttributeManager().attributes,n=e||r;n&&(this.internalState.usesPickingColorCache&&n.value.buffer!==fn.buffer&&(n.value=fn.subarray(0,n.value.length)),n.updateSubBuffer({startOffset:0}))}_initialize(){ir(!this.internalState),ir(Number.isFinite(this.props.coordinateSystem)),dr(_V,this);const e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:"uint8",size:4,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new gV({attributeManager:e,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(je.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),e)}),this.internalState.uniformTransitions=new z$(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const r of this.props.extensions)r.initializeState.call(this,this.context,r);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(e){dr(bV,this,this===e);const{state:r,internalState:n}=e;this!==e&&(this.internalState=n,this.state=r,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const e=this.needsUpdate();if(dr(yV,this,e),!e)return;const r=this.props,n=this.context,i=this.internalState,s=n.viewport,o=this._updateUniformTransition();i.propsInTransition=o,n.viewport=i.viewport||s,this.props=o;try{const l=this._getUpdateParams(),u=this.getModels();if(n.device)this.updateState(l);else try{this.updateState(l)}catch{}for(const d of this.props.extensions)d.updateState.call(this,l,d);this.setNeedsRedraw(),this._updateAttributes();const f=this.getModels()[0]!==u[0];this._postUpdate(l,f)}finally{n.viewport=s,this.props=r,this._clearChangeFlags(),i.needsUpdate=!1,i.resetOldProps()}}_finalize(){dr(vV,this),this.finalizeState(this.context);for(const e of this.props.extensions)e.finalizeState.call(this,this.context,e)}_drawLayer({renderPass:e,shaderModuleProps:r=null,uniforms:n={},parameters:i={}}){this._updateAttributeTransition();const s=this.props,o=this.context;this.props=this.internalState.propsInTransition||s;try{r&&this.setShaderModuleProps(r);const{getPolygonOffset:l}=this.props,u=l&&l(n)||[0,0];o.device instanceof $i&&o.device.setParametersWebGL({polygonOffset:u});for(const f of this.getModels())f.setParameters(i);if(o.device instanceof $i)o.device.withParametersWebGL(i,()=>{const f={renderPass:e,shaderModuleProps:r,uniforms:n,parameters:i,context:o};for(const d of this.props.extensions)d.draw.call(this,f,d);this.draw(f)});else{const f={renderPass:e,shaderModuleProps:r,uniforms:n,parameters:i,context:o};for(const d of this.props.extensions)d.draw.call(this,f,d);this.draw(f)}}finally{this.props=s}}getChangeFlags(){var e;return(e=this.internalState)==null?void 0:e.changeFlags}setChangeFlags(e){if(!this.internalState)return;const{changeFlags:r}=this.internalState;for(const i in e)if(e[i]){let s=!1;switch(i){case"dataChanged":const o=e[i],l=r[i];o&&Array.isArray(l)&&(r.dataChanged=Array.isArray(o)?l.concat(o):o,s=!0);default:r[i]||(r[i]=e[i],s=!0)}s&&dr(mV,this,i,e)}const n=!!(r.dataChanged||r.updateTriggersChanged||r.propsChanged||r.extensionsChanged);r.propsOrDataChanged=n,r.somethingChanged=n||r.viewportChanged||r.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(e,r){var i;const n=V$(e,r);if(n.updateTriggersChanged)for(const s in n.updateTriggersChanged)n.updateTriggersChanged[s]&&this.invalidateAttribute(s);if(n.transitionsChanged)for(const s in n.transitionsChanged)this.internalState.uniformTransitions.add(s,r[s],e[s],(i=e.transitions)==null?void 0:i[s]);return this.setChangeFlags(n)}validateProps(){$$(this.props)}updateAutoHighlight(e){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(e)}_updateAutoHighlight(e){const r={highlightedObjectColor:e.picked?e.color:null},{highlightColor:n}=this.props;e.picked&&typeof n=="function"&&(r.highlightColor=n(e)),this.setShaderModuleProps({picking:r}),this.setNeedsRedraw()}_getAttributeManager(){const e=this.context;return new F$(e.device,{id:this.props.id,stats:e.stats,timeline:e.timeline})}_postUpdate(e,r){const{props:n,oldProps:i}=e,s=this.state.model;s!=null&&s.isInstanced&&s.setInstanceCount(this.getNumInstances());const{autoHighlight:o,highlightedObjectIndex:l,highlightColor:u}=n;if(r||i.autoHighlight!==o||i.highlightedObjectIndex!==l||i.highlightColor!==u){const f={};Array.isArray(u)&&(f.highlightColor=u),(r||i.autoHighlight!==o||l!==i.highlightedObjectIndex)&&(f.highlightedObjectColor=Number.isFinite(l)&&l>=0?this.encodePickingColor(l):null),this.setShaderModuleProps({picking:f})}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(e){if(!this.internalState)return!1;let r=!1;r=r||this.internalState.needsRedraw&&this.id;const n=this.getAttributeManager(),i=n?n.getNeedsRedraw(e):!1;if(r=r||i,r)for(const s of this.props.extensions)s.onNeedsRedraw.call(this,s);return this.internalState.needsRedraw=this.internalState.needsRedraw&&!e.clearRedrawFlags,r}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}zn.defaultProps=xV;zn.layerName="Layer";const TV="compositeLayer.renderLayers";class od extends zn{get isComposite(){return!0}get isDrawable(){return!1}get isLoaded(){return super.isLoaded&&this.getSubLayers().every(e=>e.isLoaded)}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(e){}setState(e){super.setState(e),this.setNeedsUpdate()}getPickingInfo({info:e}){const{object:r}=e;return r&&r.__source&&r.__source.parent&&r.__source.parent.id===this.id&&(e.object=r.__source.object,e.index=r.__source.index),e}filterSubLayer(e){return!0}shouldRenderSubLayer(e,r){return r&&r.length}getSubLayerClass(e,r){const{_subLayerProps:n}=this.props;return n&&n[e]&&n[e].type||r}getSubLayerRow(e,r,n){return e.__source={parent:this,object:r,index:n},e}getSubLayerAccessor(e){if(typeof e=="function"){const r={index:-1,data:this.props.data,target:[]};return(n,i)=>n&&n.__source?(r.index=n.__source.index,e(n.__source.object,r)):e(n,i)}return e}getSubLayerProps(e={}){var q;const{opacity:r,pickable:n,visible:i,parameters:s,getPolygonOffset:o,highlightedObjectIndex:l,autoHighlight:u,highlightColor:f,coordinateSystem:d,coordinateOrigin:g,wrapLongitude:m,positionFormat:y,modelMatrix:w,extensions:b,fetch:S,operation:E,_subLayerProps:k}=this.props,C={id:"",updateTriggers:{},opacity:r,pickable:n,visible:i,parameters:s,getPolygonOffset:o,highlightedObjectIndex:l,autoHighlight:u,highlightColor:f,coordinateSystem:d,coordinateOrigin:g,wrapLongitude:m,positionFormat:y,modelMatrix:w,extensions:b,fetch:S,operation:E},P=k&&e.id&&k[e.id],M=P&&P.updateTriggers,D=e.id||"sublayer";if(P){const ee=this.props[ji],J=e.type?e.type._propTypes:{};for(const A in P){const X=J[A]||ee[A];X&&X.type==="accessor"&&(P[A]=this.getSubLayerAccessor(P[A]))}}Object.assign(C,e,P),C.id=`${this.props.id}-${D}`,C.updateTriggers={all:(q=this.props.updateTriggers)==null?void 0:q.all,...e.updateTriggers,...M};for(const ee of b){const J=ee.getSubLayerProps.call(this,ee);J&&Object.assign(C,J,{updateTriggers:Object.assign(C.updateTriggers,J.updateTriggers)})}return C}_updateAutoHighlight(e){for(const r of this.getSubLayers())r.updateAutoHighlight(e)}_getAttributeManager(){return null}_postUpdate(e,r){let n=this.internalState.subLayers;const i=!n||this.needsUpdate();if(i){const s=this.renderLayers();n=rd(s,Boolean),this.internalState.subLayers=n}dr(TV,this,i,n);for(const s of n)s.parent=this}}od.layerName="CompositeLayer";const ff=Math.PI/180,EE=180/Math.PI,Lf=6370972,ha=256;function EV(){const t=ha/Lf,e=Math.PI/180*ha;return{unitsPerMeter:[t,t,t],unitsPerMeter2:[0,0,0],metersPerUnit:[1/t,1/t,1/t],unitsPerDegree:[e,e,t],unitsPerDegree2:[0,0,0],degreesPerUnit:[1/e,1/e,1/t]}}class AV extends Hs{constructor(e={}){const{longitude:r=0,zoom:n=0,nearZMultiplier:i=.5,farZMultiplier:s=1,resolution:o=10}=e;let{latitude:l=0,height:u,altitude:f=1.5,fovy:d}=e;l=Math.max(Math.min(l,Qy),-85.051129),u=u||1,d?f=tb(d):d=fc(f);const g=1/Math.PI/Math.cos(l*Math.PI/180),m=Math.pow(2,n)*g,y=e.nearZ??i,w=e.farZ??(f+ha*2*m/u)*s,b=new or().lookAt({eye:[0,-f,0],up:[0,0,1]});b.rotateX(l*ff),b.rotateZ(-r*ff),b.scale(m/u),super({...e,height:u,viewMatrix:b,longitude:r,latitude:l,zoom:n,distanceScales:EV(),fovy:d,focalDistance:f,near:y,far:w}),this.scale=m,this.latitude=l,this.longitude=r,this.resolution=o}get projectionMode(){return pn.GLOBE}getDistanceScales(){return this.distanceScales}getBounds(e={}){const r={targetZ:e.z||0},n=this.unproject([0,this.height/2],r),i=this.unproject([this.width/2,0],r),s=this.unproject([this.width,this.height/2],r),o=this.unproject([this.width/2,this.height],r);return s[0]<this.longitude&&(s[0]+=360),n[0]>this.longitude&&(n[0]-=360),[Math.min(n[0],s[0],i[0],o[0]),Math.min(n[1],s[1],i[1],o[1]),Math.max(n[0],s[0],i[0],o[0]),Math.max(n[1],s[1],i[1],o[1])]}unproject(e,{topLeft:r=!0,targetZ:n}={}){const[i,s,o]=e,l=r?s:this.height-s,{pixelUnprojectionMatrix:u}=this;let f;if(Number.isFinite(o))f=sm(u,[i,l,o,1]);else{const y=sm(u,[i,l,-1,1]),w=sm(u,[i,l,1,1]),b=((n||0)/Lf+1)*ha,S=$g(XP([],y,w)),E=$g(y),k=$g(w),P=4*((4*E*k-(S-E-k)**2)/16)/S,M=Math.sqrt(E-P),D=Math.sqrt(Math.max(0,b*b-P)),q=(M-D)/Math.sqrt(S);f=E5([],y,w,q)}const[d,g,m]=this.unprojectPosition(f);return Number.isFinite(o)?[d,g,m]:Number.isFinite(n)?[d,g,n]:[d,g]}projectPosition(e){const[r,n,i=0]=e,s=r*ff,o=n*ff,l=Math.cos(o),u=(i/Lf+1)*ha;return[Math.sin(s)*l*u,-Math.cos(s)*l*u,Math.sin(o)*u]}unprojectPosition(e){const[r,n,i]=e,s=KP(e),o=Math.asin(i/s),u=Math.atan2(r,-n)*EE,f=o*EE,d=(s/ha-1)*Lf;return[u,f,d]}projectFlat(e){return e}unprojectFlat(e){return e}panByPosition(e,r){const n=this.unproject(r);return{longitude:e[0]-n[0]+this.longitude,latitude:e[1]-n[1]+this.latitude}}}function sm(t,e){const r=Ia([],e,t);return Qv(r,r,1/r[3]),r}const CV=new or().lookAt({eye:[0,0,1]});function RV({width:t,height:e,near:r,far:n,padding:i}){let s=-t/2,o=t/2,l=-e/2,u=e/2;if(i){const{left:f=0,right:d=0,top:g=0,bottom:m=0}=i,y=Mt((f+t-d)/2,0,t)-t/2,w=Mt((g+e-m)/2,0,e)-e/2;s-=y,o-=y,l+=w,u+=w}return new or().ortho({left:s,right:o,bottom:l,top:u,near:r,far:n})}class PV extends Hs{constructor(e){const{width:r,height:n,near:i=.1,far:s=1e3,zoom:o=0,target:l=[0,0,0],padding:u=null,flipY:f=!0}=e,d=Array.isArray(o)?o[0]:o,g=Array.isArray(o)?o[1]:o,m=Math.min(d,g),y=Math.pow(2,m);let w;if(d!==g){const b=Math.pow(2,d),S=Math.pow(2,g);w={unitsPerMeter:[b/y,S/y,1],metersPerUnit:[y/b,y/S,1]}}super({...e,longitude:void 0,position:l,viewMatrix:CV.clone().scale([y,y*(f?-1:1),y]),projectionMatrix:RV({width:r||1,height:n||1,padding:u,near:i,far:s}),zoom:m,distanceScales:w})}projectFlat([e,r]){const{unitsPerMeter:n}=this.distanceScales;return[e*n[0],r*n[1]]}unprojectFlat([e,r]){const{metersPerUnit:n}=this.distanceScales;return[e*n[0],r*n[1]]}panByPosition(e,r){const n=ed(r,this.pixelUnprojectionMatrix),i=this.projectFlat(e),s=fh([],i,UP([],n)),o=fh([],this.center,s);return{target:this.unprojectFlat(o)}}}class MV extends PM{constructor(e){const{width:r,height:n,rotationX:i=0,rotationOrbit:s=0,target:o=[0,0,0],zoom:l=0,minRotationX:u=-90,maxRotationX:f=90,minZoom:d=-1/0,maxZoom:g=1/0,startPanPosition:m,startRotatePos:y,startRotationX:w,startRotationOrbit:b,startZoomPosition:S,startZoom:E}=e;super({width:r,height:n,rotationX:i,rotationOrbit:s,target:o,zoom:l,minRotationX:u,maxRotationX:f,minZoom:d,maxZoom:g},{startPanPosition:m,startRotatePos:y,startRotationX:w,startRotationOrbit:b,startZoomPosition:S,startZoom:E}),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanPosition:this._unproject(e)})}pan({pos:e,startPosition:r}){const n=this.getState().startPanPosition||r;if(!n)return this;const s=this.makeViewport(this.getViewportProps()).panByPosition(n,e);return this._getUpdatedState(s)}panEnd(){return this._getUpdatedState({startPanPosition:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startRotationX:this.getViewportProps().rotationX,startRotationOrbit:this.getViewportProps().rotationOrbit})}rotate({pos:e,deltaAngleX:r=0,deltaAngleY:n=0}){const{startRotatePos:i,startRotationX:s,startRotationOrbit:o}=this.getState(),{width:l,height:u}=this.getViewportProps();if(!i||s===void 0||o===void 0)return this;let f;if(e){let d=(e[0]-i[0])/l;const g=(e[1]-i[1])/u;(s<-90||s>90)&&(d*=-1),f={rotationX:s+g*180,rotationOrbit:o+d*180}}else f={rotationX:s+n,rotationOrbit:o+r};return this._getUpdatedState(f)}rotateEnd(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}shortestPathFrom(e){const r=e.getViewportProps(),n={...this.getViewportProps()},{rotationOrbit:i}=n;return Math.abs(i-r.rotationOrbit)>180&&(n.rotationOrbit=i<0?i+360:i-360),n}zoomStart({pos:e}){return this._getUpdatedState({startZoomPosition:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:r,scale:n}){let{startZoom:i,startZoomPosition:s}=this.getState();if(s||(i=this.getViewportProps().zoom,s=this._unproject(r)||this._unproject(e)),!s)return this;const o=this._calculateNewZoom({scale:n,startZoom:i}),l=this.makeViewport({...this.getViewportProps(),zoom:o});return this._getUpdatedState({zoom:o,...l.panByPosition(s,e)})}zoomEnd(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}zoomIn(e=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:e})})}zoomOut(e=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/e})})}moveLeft(e=50){return this._panFromCenter([-e,0])}moveRight(e=50){return this._panFromCenter([e,0])}moveUp(e=50){return this._panFromCenter([0,-e])}moveDown(e=50){return this._panFromCenter([0,e])}rotateLeft(e=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit-e})}rotateRight(e=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit+e})}rotateUp(e=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX-e})}rotateDown(e=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX+e})}_unproject(e){const r=this.makeViewport(this.getViewportProps());return e&&r.unproject(e)}_calculateNewZoom({scale:e,startZoom:r}){const{maxZoom:n,minZoom:i}=this.getViewportProps();r===void 0&&(r=this.getViewportProps().zoom);const s=r+Math.log2(e);return Mt(s,i,n)}_panFromCenter(e){const{width:r,height:n,target:i}=this.getViewportProps();return this.pan({startPosition:i,pos:[r/2+e[0],n/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}applyConstraints(e){const{maxZoom:r,minZoom:n,zoom:i,maxRotationX:s,minRotationX:o,rotationOrbit:l}=e;return e.zoom=Array.isArray(i)?[Mt(i[0],n,r),Mt(i[1],n,r)]:Mt(i,n,r),e.rotationX=Mt(e.rotationX,o,s),(l<-180||l>180)&&(e.rotationOrbit=W9(l+180,360)-180),e}}class IV extends MV{constructor(e){super(e),this.zoomAxis=e.zoomAxis||"all"}_calculateNewZoom({scale:e,startZoom:r}){const{maxZoom:n,minZoom:i}=this.getViewportProps();r===void 0&&(r=this.getViewportProps().zoom);let s=Math.log2(e);if(Array.isArray(r)){let[o,l]=r;switch(this.zoomAxis){case"X":o=Mt(o+s,i,n);break;case"Y":l=Mt(l+s,i,n);break;default:let u=Math.min(o+s,l+s);u<i&&(s+=i-u),u=Math.max(o+s,l+s),u>n&&(s+=n-u),o+=s,l+=s}return[o,l]}return Mt(r+s,i,n)}}class OV extends RM{constructor(){super(...arguments),this.ControllerState=IV,this.transition={transitionDuration:300,transitionInterpolator:new nb(["target","zoom"])},this.dragMode="pan"}_onPanRotate(){return!1}}class oI extends Ns{constructor(e={}){super(e)}getViewportType(){return PV}get ControllerType(){return OV}}oI.displayName="OrthographicView";class aI{constructor(e){this.indexStarts=[0],this.vertexStarts=[0],this.vertexCount=0,this.instanceCount=0;const{attributes:r={}}=e;this.typedArrayManager=Ea,this.attributes={},this._attributeDefs=r,this.opts=e,this.updateGeometry(e)}updateGeometry(e){Object.assign(this.opts,e);const{data:r,buffers:n={},getGeometry:i,geometryBuffer:s,positionFormat:o,dataChanged:l,normalize:u=!0}=this.opts;if(this.data=r,this.getGeometry=i,this.positionSize=s&&s.size||(o==="XY"?2:3),this.buffers=n,this.normalize=u,s&&(ir(r.startIndices),this.getGeometry=this.getGeometryFromBuffer(s),u||(n.vertexPositions=s)),this.geometryBuffer=n.vertexPositions,Array.isArray(l))for(const f of l)this._rebuildGeometry(f);else this._rebuildGeometry()}updatePartialGeometry({startRow:e,endRow:r}){this._rebuildGeometry({startRow:e,endRow:r})}getGeometryFromBuffer(e){const r=e.value||e;return ArrayBuffer.isView(r)?KM(r,{size:this.positionSize,offset:e.offset,stride:e.stride,startIndices:this.data.startIndices}):null}_allocate(e,r){const{attributes:n,buffers:i,_attributeDefs:s,typedArrayManager:o}=this;for(const l in s)if(l in i)o.release(n[l]),n[l]=null;else{const u=s[l];u.copy=r,n[l]=o.allocate(n[l],e,u)}}_forEachGeometry(e,r,n){const{data:i,getGeometry:s}=this,{iterable:o,objectInfo:l}=id(i,r,n);for(const u of o){l.index++;const f=s?s(u,l):null;e(f,l.index)}}_rebuildGeometry(e){if(!this.data)return;let{indexStarts:r,vertexStarts:n,instanceCount:i}=this;const{data:s,geometryBuffer:o}=this,{startRow:l=0,endRow:u=1/0}=e||{},f={};if(e||(r=[0],n=[0]),this.normalize||!o)this._forEachGeometry((g,m)=>{const y=g&&this.normalizeGeometry(g);f[m]=y,n[m+1]=n[m]+(y?this.getGeometrySize(y):0)},l,u),i=n[n.length-1];else if(n=s.startIndices,i=n[s.length]||0,ArrayBuffer.isView(o))i=i||o.length/this.positionSize;else if(o instanceof It){const g=this.positionSize*4;i=i||o.byteLength/g}else if(o.buffer){const g=o.stride||this.positionSize*4;i=i||o.buffer.byteLength/g}else if(o.value){const g=o.value,m=o.stride/g.BYTES_PER_ELEMENT||this.positionSize;i=i||g.length/m}this._allocate(i,!!e),this.indexStarts=r,this.vertexStarts=n,this.instanceCount=i;const d={};this._forEachGeometry((g,m)=>{const y=f[m]||g;d.vertexStart=n[m],d.indexStart=r[m];const w=m<n.length-1?n[m+1]:i;d.geometrySize=w-n[m],d.geometryIndex=m,this.updateGeometryAttributes(y,d)},l,u),this.vertexCount=r[r.length-1]}}const kV=new Uint32Array([0,2,1,0,3,2]),NV=new Float32Array([0,1,0,0,1,0,1,1]);function FV(t,e){if(!e)return DV(t);const r=Math.max(Math.abs(t[0][0]-t[3][0]),Math.abs(t[1][0]-t[2][0])),n=Math.max(Math.abs(t[1][1]-t[0][1]),Math.abs(t[2][1]-t[3][1])),i=Math.ceil(r/e)+1,s=Math.ceil(n/e)+1,o=(i-1)*(s-1)*6,l=new Uint32Array(o),u=new Float32Array(i*s*2),f=new Float64Array(i*s*3);let d=0,g=0;for(let m=0;m<i;m++){const y=m/(i-1);for(let w=0;w<s;w++){const b=w/(s-1),S=BV(t,y,b);f[d*3+0]=S[0],f[d*3+1]=S[1],f[d*3+2]=S[2]||0,u[d*2+0]=y,u[d*2+1]=1-b,m>0&&w>0&&(l[g++]=d-s,l[g++]=d-s-1,l[g++]=d-1,l[g++]=d-s,l[g++]=d-1,l[g++]=d),d++}}return{vertexCount:o,positions:f,indices:l,texCoords:u}}function DV(t){const e=new Float64Array(12);for(let r=0;r<t.length;r++)e[r*3+0]=t[r][0],e[r*3+1]=t[r][1],e[r*3+2]=t[r][2]||0;return{vertexCount:6,positions:e,indices:kV,texCoords:NV}}function BV(t,e,r){return As(As(t[0],t[1],r),As(t[3],t[2],r),e)}const AE=`uniform bitmapUniforms {
  vec4 bounds;
  float coordinateConversion;
  float desaturate;
  vec3 tintColor;
  vec4 transparentColor;
} bitmap;
`,LV={name:"bitmap",vs:AE,fs:AE,uniformTypes:{bounds:"vec4<f32>",coordinateConversion:"f32",desaturate:"f32",tintColor:"vec3<f32>",transparentColor:"vec4<f32>"}},UV=`#version 300 es
#define SHADER_NAME bitmap-layer-vertex-shader

in vec2 texCoords;
in vec3 positions;
in vec3 positions64Low;

out vec2 vTexCoord;
out vec2 vTexPos;

const vec3 pickingColor = vec3(1.0, 0.0, 0.0);

void main(void) {
  geometry.worldPosition = positions;
  geometry.uv = texCoords;
  geometry.pickingColor = pickingColor;

  gl_Position = project_position_to_clipspace(positions, positions64Low, vec3(0.0), geometry.position);
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  vTexCoord = texCoords;

  if (bitmap.coordinateConversion < -0.5) {
    vTexPos = geometry.position.xy + project.commonOrigin.xy;
  } else if (bitmap.coordinateConversion > 0.5) {
    vTexPos = geometry.worldPosition.xy;
  }

  vec4 color = vec4(0.0);
  DECKGL_FILTER_COLOR(color, geometry);
}
`,zV=`
vec3 packUVsIntoRGB(vec2 uv) {
  // Extract the top 8 bits. We want values to be truncated down so we can add a fraction
  vec2 uv8bit = floor(uv * 256.);

  // Calculate the normalized remainders of u and v parts that do not fit into 8 bits
  // Scale and clamp to 0-1 range
  vec2 uvFraction = fract(uv * 256.);
  vec2 uvFraction4bit = floor(uvFraction * 16.);

  // Remainder can be encoded in blue channel, encode as 4 bits for pixel coordinates
  float fractions = uvFraction4bit.x + uvFraction4bit.y * 16.;

  return vec3(uv8bit, fractions) / 255.;
}
`,$V=`#version 300 es
#define SHADER_NAME bitmap-layer-fragment-shader

#ifdef GL_ES
precision highp float;
#endif

uniform sampler2D bitmapTexture;

in vec2 vTexCoord;
in vec2 vTexPos;

out vec4 fragColor;

/* projection utils */
const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / PI / 2.0;

// from degrees to Web Mercator
vec2 lnglat_to_mercator(vec2 lnglat) {
  float x = lnglat.x;
  float y = clamp(lnglat.y, -89.9, 89.9);
  return vec2(
    radians(x) + PI,
    PI + log(tan(PI * 0.25 + radians(y) * 0.5))
  ) * WORLD_SCALE;
}

// from Web Mercator to degrees
vec2 mercator_to_lnglat(vec2 xy) {
  xy /= WORLD_SCALE;
  return degrees(vec2(
    xy.x - PI,
    atan(exp(xy.y - PI)) * 2.0 - PI * 0.5
  ));
}
/* End projection utils */

// apply desaturation
vec3 color_desaturate(vec3 color) {
  float luminance = (color.r + color.g + color.b) * 0.333333333;
  return mix(color, vec3(luminance), bitmap.desaturate);
}

// apply tint
vec3 color_tint(vec3 color) {
  return color * bitmap.tintColor;
}

// blend with background color
vec4 apply_opacity(vec3 color, float alpha) {
  if (bitmap.transparentColor.a == 0.0) {
    return vec4(color, alpha);
  }
  float blendedAlpha = alpha + bitmap.transparentColor.a * (1.0 - alpha);
  float highLightRatio = alpha / blendedAlpha;
  vec3 blendedRGB = mix(bitmap.transparentColor.rgb, color, highLightRatio);
  return vec4(blendedRGB, blendedAlpha);
}

vec2 getUV(vec2 pos) {
  return vec2(
    (pos.x - bitmap.bounds[0]) / (bitmap.bounds[2] - bitmap.bounds[0]),
    (pos.y - bitmap.bounds[3]) / (bitmap.bounds[1] - bitmap.bounds[3])
  );
}

${zV}

void main(void) {
  vec2 uv = vTexCoord;
  if (bitmap.coordinateConversion < -0.5) {
    vec2 lnglat = mercator_to_lnglat(vTexPos);
    uv = getUV(lnglat);
  } else if (bitmap.coordinateConversion > 0.5) {
    vec2 commonPos = lnglat_to_mercator(vTexPos);
    uv = getUV(commonPos);
  }
  vec4 bitmapColor = texture(bitmapTexture, uv);

  fragColor = apply_opacity(color_tint(color_desaturate(bitmapColor.rgb)), bitmapColor.a * layer.opacity);

  geometry.uv = uv;
  DECKGL_FILTER_COLOR(fragColor, geometry);

  if (bool(picking.isActive) && !bool(picking.isAttribute)) {
    // Since instance information is not used, we can use picking color for pixel index
    fragColor.rgb = packUVsIntoRGB(uv);
  }
}
`,VV={image:{type:"image",value:null,async:!0},bounds:{type:"array",value:[1,0,0,1],compare:!0},_imageCoordinateSystem:We.DEFAULT,desaturate:{type:"number",min:0,max:1,value:0},transparentColor:{type:"color",value:[0,0,0,0]},tintColor:{type:"color",value:[255,255,255]},textureParameters:{type:"object",ignore:!0,value:null}};class fb extends zn{getShaders(){return super.getShaders({vs:UV,fs:$V,modules:[Oa,ka,LV]})}initializeState(){const e=this.getAttributeManager();e.remove(["instancePickingColors"]);const r=!0;e.add({indices:{size:1,isIndexed:!0,update:n=>n.value=this.state.mesh.indices,noAlloc:r},positions:{size:3,type:"float64",fp64:this.use64bitPositions(),update:n=>n.value=this.state.mesh.positions,noAlloc:r},texCoords:{size:2,update:n=>n.value=this.state.mesh.texCoords,noAlloc:r}})}updateState({props:e,oldProps:r,changeFlags:n}){var s;const i=this.getAttributeManager();if(n.extensionsChanged&&((s=this.state.model)==null||s.destroy(),this.state.model=this._getModel(),i.invalidateAll()),e.bounds!==r.bounds){const o=this.state.mesh,l=this._createMesh();this.state.model.setVertexCount(l.vertexCount);for(const u in l)o&&o[u]!==l[u]&&i.invalidate(u);this.setState({mesh:l,...this._getCoordinateUniforms()})}else e._imageCoordinateSystem!==r._imageCoordinateSystem&&this.setState(this._getCoordinateUniforms())}getPickingInfo(e){const{image:r}=this.props,n=e.info;if(!n.color||!r)return n.bitmap=null,n;const{width:i,height:s}=r;n.index=0;const o=jV(n.color);return n.bitmap={size:{width:i,height:s},uv:o,pixel:[Math.floor(o[0]*i),Math.floor(o[1]*s)]},n}disablePickingIndex(){this.setState({disablePicking:!0})}restorePickingColors(){this.setState({disablePicking:!1})}_updateAutoHighlight(e){super._updateAutoHighlight({...e,color:this.encodePickingColor(0)})}_createMesh(){const{bounds:e}=this.props;let r=e;return CE(e)&&(r=[[e[0],e[1]],[e[0],e[3]],[e[2],e[3]],[e[2],e[1]]]),FV(r,this.context.viewport.resolution)}_getModel(){return new en(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),topology:"triangle-list",isInstanced:!1})}draw(e){const{shaderModuleProps:r}=e,{model:n,coordinateConversion:i,bounds:s,disablePicking:o}=this.state,{image:l,desaturate:u,transparentColor:f,tintColor:d}=this.props;if(!(r.picking.isActive&&o)&&l&&n){const g={bitmapTexture:l,bounds:s,coordinateConversion:i,desaturate:u,tintColor:d.slice(0,3).map(m=>m/255),transparentColor:f.map(m=>m/255)};n.shaderInputs.setProps({bitmap:g}),n.draw(this.context.renderPass)}}_getCoordinateUniforms(){const{LNGLAT:e,CARTESIAN:r,DEFAULT:n}=We;let{_imageCoordinateSystem:i}=this.props;if(i!==n){const{bounds:s}=this.props;if(!CE(s))throw new Error("_imageCoordinateSystem only supports rectangular bounds");const o=this.context.viewport.resolution?e:r;if(i=i===e?e:r,i===e&&o===r)return{coordinateConversion:-1,bounds:s};if(i===r&&o===e){const l=Wi([s[0],s[1]]),u=Wi([s[2],s[3]]);return{coordinateConversion:1,bounds:[l[0],l[1],u[0],u[1]]}}}return{coordinateConversion:0,bounds:[0,0,0,0]}}}fb.layerName="BitmapLayer";fb.defaultProps=VV;function jV(t){const[e,r,n]=t,i=(n&240)/256,s=(n&15)/16;return[(e+s)/256,(r+i)/256]}function CE(t){return Number.isFinite(t[0])}const RE=`uniform iconUniforms {
  float sizeScale;
  vec2 iconsTextureDim;
  float sizeMinPixels;
  float sizeMaxPixels;
  bool billboard;
  highp int sizeUnits;
  float alphaCutoff;
} icon;
`,HV={name:"icon",vs:RE,fs:RE,uniformTypes:{sizeScale:"f32",iconsTextureDim:"vec2<f32>",sizeMinPixels:"f32",sizeMaxPixels:"f32",billboard:"f32",sizeUnits:"i32",alphaCutoff:"f32"}},WV=`#version 300 es
#define SHADER_NAME icon-layer-vertex-shader
in vec2 positions;
in vec3 instancePositions;
in vec3 instancePositions64Low;
in float instanceSizes;
in float instanceAngles;
in vec4 instanceColors;
in vec3 instancePickingColors;
in vec4 instanceIconFrames;
in float instanceColorModes;
in vec2 instanceOffsets;
in vec2 instancePixelOffset;
out float vColorMode;
out vec4 vColor;
out vec2 vTextureCoords;
out vec2 uv;
vec2 rotate_by_angle(vec2 vertex, float angle) {
float angle_radian = angle * PI / 180.0;
float cos_angle = cos(angle_radian);
float sin_angle = sin(angle_radian);
mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
return rotationMatrix * vertex;
}
void main(void) {
geometry.worldPosition = instancePositions;
geometry.uv = positions;
geometry.pickingColor = instancePickingColors;
uv = positions;
vec2 iconSize = instanceIconFrames.zw;
float sizePixels = clamp(
project_size_to_pixel(instanceSizes * icon.sizeScale, icon.sizeUnits),
icon.sizeMinPixels, icon.sizeMaxPixels
);
float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;
vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;
pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;
pixelOffset += instancePixelOffset;
pixelOffset.y *= -1.0;
if (icon.billboard)  {
gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
vec3 offset = vec3(pixelOffset, 0.0);
DECKGL_FILTER_SIZE(offset, geometry);
gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
} else {
vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
DECKGL_FILTER_SIZE(offset_common, geometry);
gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
}
vTextureCoords = mix(
instanceIconFrames.xy,
instanceIconFrames.xy + iconSize,
(positions.xy + 1.0) / 2.0
) / icon.iconsTextureDim;
vColor = instanceColors;
DECKGL_FILTER_COLOR(vColor, geometry);
vColorMode = instanceColorModes;
}
`,qV=`#version 300 es
#define SHADER_NAME icon-layer-fragment-shader
precision highp float;
uniform sampler2D iconsTexture;
in float vColorMode;
in vec4 vColor;
in vec2 vTextureCoords;
in vec2 uv;
out vec4 fragColor;
void main(void) {
geometry.uv = uv;
vec4 texColor = texture(iconsTexture, vTextureCoords);
vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);
float a = texColor.a * layer.opacity * vColor.a;
if (a < icon.alphaCutoff) {
discard;
}
fragColor = vec4(color, a);
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,XV=1024,KV=4,PE=()=>{},ME={minFilter:"linear",mipmapFilter:"linear",magFilter:"linear",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"},YV={x:0,y:0,width:0,height:0};function ZV(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function GV(t,e,r,n){const i=Math.min(r/e.width,n/e.height),s=Math.floor(e.width*i),o=Math.floor(e.height*i);return i===1?{image:e,width:s,height:o}:(t.canvas.height=o,t.canvas.width=s,t.clearRect(0,0,s,o),t.drawImage(e,0,0,e.width,e.height,0,0,s,o),{image:t.canvas,width:s,height:o})}function dc(t){return t&&(t.id||t.url)}function QV(t,e,r,n){const{width:i,height:s,device:o}=t,l=o.createTexture({format:"rgba8unorm",width:e,height:r,sampler:n,mipmaps:!0}),u=o.createCommandEncoder();return u.copyTextureToTexture({sourceTexture:t,destinationTexture:l,width:i,height:s}),u.finish(),t.destroy(),l}function IE(t,e,r){for(let n=0;n<e.length;n++){const{icon:i,xOffset:s}=e[n],o=dc(i);t[o]={...i,x:s,y:r}}}function JV({icons:t,buffer:e,mapping:r={},xOffset:n=0,yOffset:i=0,rowHeight:s=0,canvasWidth:o}){let l=[];for(let u=0;u<t.length;u++){const f=t[u],d=dc(f);if(!r[d]){const{height:g,width:m}=f;n+m+e>o&&(IE(r,l,i),n=0,i=s+i+e,s=0,l=[]),l.push({icon:f,xOffset:n}),n=n+m+e,s=Math.max(s,g)}}return l.length>0&&IE(r,l,i),{mapping:r,rowHeight:s,xOffset:n,yOffset:i,canvasWidth:o,canvasHeight:ZV(s+i+e)}}function ej(t,e,r){if(!t||!e)return null;r=r||{};const n={},{iterable:i,objectInfo:s}=id(t);for(const o of i){s.index++;const l=e(o,s),u=dc(l);if(!l)throw new Error("Icon is missing.");if(!l.url)throw new Error("Icon url is missing.");!n[u]&&(!r[u]||l.url!==r[u].url)&&(n[u]={...l,source:o,sourceIndex:s.index})}return n}class tj{constructor(e,{onUpdate:r=PE,onError:n=PE}){this._loadOptions=null,this._texture=null,this._externalTexture=null,this._mapping={},this._samplerParameters=null,this._pendingCount=0,this._autoPacking=!1,this._xOffset=0,this._yOffset=0,this._rowHeight=0,this._buffer=KV,this._canvasWidth=XV,this._canvasHeight=0,this._canvas=null,this.device=e,this.onUpdate=r,this.onError=n}finalize(){var e;(e=this._texture)==null||e.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(e){const r=this._autoPacking?dc(e):e;return this._mapping[r]||YV}setProps({loadOptions:e,autoPacking:r,iconAtlas:n,iconMapping:i,textureParameters:s}){var o;e&&(this._loadOptions=e),r!==void 0&&(this._autoPacking=r),i&&(this._mapping=i),n&&((o=this._texture)==null||o.delete(),this._texture=null,this._externalTexture=n),s&&(this._samplerParameters=s)}get isLoaded(){return this._pendingCount===0}packIcons(e,r){if(!this._autoPacking||typeof document>"u")return;const n=Object.values(ej(e,r,this._mapping)||{});if(n.length>0){const{mapping:i,xOffset:s,yOffset:o,rowHeight:l,canvasHeight:u}=JV({icons:n,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=l,this._mapping=i,this._xOffset=s,this._yOffset=o,this._canvasHeight=u,this._texture||(this._texture=this.device.createTexture({format:"rgba8unorm",width:this._canvasWidth,height:this._canvasHeight,sampler:this._samplerParameters||ME,mipmaps:!0})),this._texture.height!==this._canvasHeight&&(this._texture=QV(this._texture,this._canvasWidth,this._canvasHeight,this._samplerParameters||ME)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(n)}}_loadIcons(e){const r=this._canvas.getContext("2d",{willReadFrequently:!0});for(const n of e)this._pendingCount++,ac(n.url,this._loadOptions).then(i=>{var w;const s=dc(n),o=this._mapping[s],{x:l,y:u,width:f,height:d}=o,{image:g,width:m,height:y}=GV(r,i,f,d);(w=this._texture)==null||w.copyExternalImage({image:g,x:l+(f-m)/2,y:u+(d-y)/2,width:m,height:y}),o.width=m,o.height=y,this._texture.generateMipmap(),this.onUpdate()}).catch(i=>{this.onError({url:n.url,source:n.source,sourceIndex:n.sourceIndex,loadOptions:this._loadOptions,error:i})}).finally(()=>{this._pendingCount--})}}const lI=[0,0,0,255],rj={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:t=>t.position},getIcon:{type:"accessor",value:t=>t.icon},getColor:{type:"accessor",value:lI},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,optional:!0},textureParameters:{type:"object",ignore:!0,value:null}};class ad extends zn{getShaders(){return super.getShaders({vs:WV,fs:qV,modules:[Oa,ka,HV]})}initializeState(){this.state={iconManager:new tj(this.context.device,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:"float64",fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:"uint8",accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:"unorm8",transition:!0,accessor:"getColor",defaultValue:lI},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(e){var y;super.updateState(e);const{props:r,oldProps:n,changeFlags:i}=e,s=this.getAttributeManager(),{iconAtlas:o,iconMapping:l,data:u,getIcon:f,textureParameters:d}=r,{iconManager:g}=this.state;if(typeof o=="string")return;const m=o||this.internalState.isAsyncPropLoading("iconAtlas");g.setProps({loadOptions:r.loadOptions,autoPacking:!m,iconAtlas:o,iconMapping:m?l:null,textureParameters:d}),m?n.iconMapping!==r.iconMapping&&s.invalidate("getIcon"):(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getIcon))&&g.packIcons(u,f),i.extensionsChanged&&((y=this.state.model)==null||y.destroy(),this.state.model=this._getModel(),s.invalidateAll())}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(e){super.finalizeState(e),this.state.iconManager.finalize()}draw({uniforms:e}){const{sizeScale:r,sizeMinPixels:n,sizeMaxPixels:i,sizeUnits:s,billboard:o,alphaCutoff:l}=this.props,{iconManager:u}=this.state,f=u.getTexture();if(f){const d=this.state.model,g={iconsTexture:f,iconsTextureDim:[f.width,f.height],sizeUnits:Os[s],sizeScale:r,sizeMinPixels:n,sizeMaxPixels:i,billboard:o,alphaCutoff:l};d.shaderInputs.setProps({icon:g}),d.draw(this.context.renderPass)}}_getModel(){const e=[-1,-1,1,-1,-1,1,1,1];return new en(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new Aa({topology:"triangle-strip",attributes:{positions:{size:2,value:new Float32Array(e)}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(e){var n;const r=(n=this.getCurrentLayer())==null?void 0:n.props.onIconError;r?r(e):je.error(e.error.message)()}getInstanceOffset(e){const{width:r,height:n,anchorX:i=r/2,anchorY:s=n/2}=this.state.iconManager.getIconMapping(e);return[r/2-i,n/2-s]}getInstanceColorMode(e){return this.state.iconManager.getIconMapping(e).mask?1:0}getInstanceIconFrame(e){const{x:r,y:n,width:i,height:s}=this.state.iconManager.getIconMapping(e);return[r,n,i,s]}}ad.defaultProps=rj;ad.layerName="IconLayer";const OE=`uniform scatterplotUniforms {
  float radiusScale;
  float radiusMinPixels;
  float radiusMaxPixels;
  float lineWidthScale;
  float lineWidthMinPixels;
  float lineWidthMaxPixels;
  float stroked;
  bool filled;
  bool antialiasing;
  bool billboard;
  highp int radiusUnits;
  highp int lineWidthUnits;
} scatterplot;
`,nj={name:"scatterplot",vs:OE,fs:OE,uniformTypes:{radiusScale:"f32",radiusMinPixels:"f32",radiusMaxPixels:"f32",lineWidthScale:"f32",lineWidthMinPixels:"f32",lineWidthMaxPixels:"f32",stroked:"f32",filled:"f32",antialiasing:"f32",billboard:"f32",radiusUnits:"i32",lineWidthUnits:"i32"}},ij=`#version 300 es
#define SHADER_NAME scatterplot-layer-vertex-shader
in vec3 positions;
in vec3 instancePositions;
in vec3 instancePositions64Low;
in float instanceRadius;
in float instanceLineWidths;
in vec4 instanceFillColors;
in vec4 instanceLineColors;
in vec3 instancePickingColors;
out vec4 vFillColor;
out vec4 vLineColor;
out vec2 unitPosition;
out float innerUnitRadius;
out float outerRadiusPixels;
void main(void) {
geometry.worldPosition = instancePositions;
outerRadiusPixels = clamp(
project_size_to_pixel(scatterplot.radiusScale * instanceRadius, scatterplot.radiusUnits),
scatterplot.radiusMinPixels, scatterplot.radiusMaxPixels
);
float lineWidthPixels = clamp(
project_size_to_pixel(scatterplot.lineWidthScale * instanceLineWidths, scatterplot.lineWidthUnits),
scatterplot.lineWidthMinPixels, scatterplot.lineWidthMaxPixels
);
outerRadiusPixels += scatterplot.stroked * lineWidthPixels / 2.0;
float edgePadding = scatterplot.antialiasing ? (outerRadiusPixels + SMOOTH_EDGE_RADIUS) / outerRadiusPixels : 1.0;
unitPosition = edgePadding * positions.xy;
geometry.uv = unitPosition;
geometry.pickingColor = instancePickingColors;
innerUnitRadius = 1.0 - scatterplot.stroked * lineWidthPixels / outerRadiusPixels;
if (scatterplot.billboard) {
gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
vec3 offset = edgePadding * positions * outerRadiusPixels;
DECKGL_FILTER_SIZE(offset, geometry);
gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
} else {
vec3 offset = edgePadding * positions * project_pixel_size(outerRadiusPixels);
DECKGL_FILTER_SIZE(offset, geometry);
gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
}
vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * layer.opacity);
DECKGL_FILTER_COLOR(vFillColor, geometry);
vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * layer.opacity);
DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,sj=`#version 300 es
#define SHADER_NAME scatterplot-layer-fragment-shader
precision highp float;
in vec4 vFillColor;
in vec4 vLineColor;
in vec2 unitPosition;
in float innerUnitRadius;
in float outerRadiusPixels;
out vec4 fragColor;
void main(void) {
geometry.uv = unitPosition;
float distToCenter = length(unitPosition) * outerRadiusPixels;
float inCircle = scatterplot.antialiasing ?
smoothedge(distToCenter, outerRadiusPixels) :
step(distToCenter, outerRadiusPixels);
if (inCircle == 0.0) {
discard;
}
if (scatterplot.stroked > 0.5) {
float isLine = scatterplot.antialiasing ?
smoothedge(innerUnitRadius * outerRadiusPixels, distToCenter) :
step(innerUnitRadius * outerRadiusPixels, distToCenter);
if (scatterplot.filled) {
fragColor = mix(vFillColor, vLineColor, isLine);
} else {
if (isLine == 0.0) {
discard;
}
fragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);
}
} else if (scatterplot.filled == false) {
discard;
} else {
fragColor = vFillColor;
}
fragColor.a *= inCircle;
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,kE=[0,0,0,255],oj={radiusUnits:"meters",radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,billboard:!1,antialiasing:!0,getPosition:{type:"accessor",value:t=>t.position},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:kE},getLineColor:{type:"accessor",value:kE},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}};class hb extends zn{getShaders(){return super.getShaders({vs:ij,fs:sj,modules:[Oa,ka,nj]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:"float64",fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,type:"unorm8",accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,type:"unorm8",accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){var r;super.updateState(e),e.changeFlags.extensionsChanged&&((r=this.state.model)==null||r.destroy(),this.state.model=this._getModel(),this.getAttributeManager().invalidateAll())}draw({uniforms:e}){const{radiusUnits:r,radiusScale:n,radiusMinPixels:i,radiusMaxPixels:s,stroked:o,filled:l,billboard:u,antialiasing:f,lineWidthUnits:d,lineWidthScale:g,lineWidthMinPixels:m,lineWidthMaxPixels:y}=this.props,w={stroked:o,filled:l,billboard:u,antialiasing:f,radiusUnits:Os[r],radiusScale:n,radiusMinPixels:i,radiusMaxPixels:s,lineWidthUnits:Os[d],lineWidthScale:g,lineWidthMinPixels:m,lineWidthMaxPixels:y},b=this.state.model;b.shaderInputs.setProps({scatterplot:w}),b.draw(this.context.renderPass)}_getModel(){const e=[-1,-1,0,1,-1,0,-1,1,0,1,1,0];return new en(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new Aa({topology:"triangle-strip",attributes:{positions:{size:3,value:new Float32Array(e)}}}),isInstanced:!0})}}hb.defaultProps=oj;hb.layerName="ScatterplotLayer";const cI={CLOCKWISE:1,COUNTER_CLOCKWISE:-1};function uI(t,e,r={}){return aj(t,r)!==e?(cj(t,r),!0):!1}function aj(t,e={}){return Math.sign(lj(t,e))}const NE={x:0,y:1,z:2};function lj(t,e={}){const{start:r=0,end:n=t.length,plane:i="xy"}=e,s=e.size||2;let o=0;const l=NE[i[0]],u=NE[i[1]];for(let f=r,d=n-s;f<n;f+=s)o+=(t[f+l]-t[d+l])*(t[f+u]+t[d+u]),d=f;return o/2}function cj(t,e){const{start:r=0,end:n=t.length,size:i=2}=e,s=(n-r)/i,o=Math.floor(s/2);for(let l=0;l<o;++l){const u=r+l*i,f=r+(s-1-l)*i;for(let d=0;d<i;++d){const g=t[u+d];t[u+d]=t[f+d],t[f+d]=g}}}function _n(t,e){const r=e.length,n=t.length;if(n>0){let i=!0;for(let s=0;s<r;s++)if(t[n-r+s]!==e[s]){i=!1;break}if(i)return!1}for(let i=0;i<r;i++)t[n+i]=e[i];return!0}function dv(t,e){const r=e.length;for(let n=0;n<r;n++)t[n]=e[n]}function pc(t,e,r,n,i=[]){const s=n+e*r;for(let o=0;o<r;o++)i[o]=t[s+o];return i}function pv(t,e,r,n,i=[]){let s,o;if(r&8)s=(n[3]-t[1])/(e[1]-t[1]),o=3;else if(r&4)s=(n[1]-t[1])/(e[1]-t[1]),o=1;else if(r&2)s=(n[2]-t[0])/(e[0]-t[0]),o=2;else if(r&1)s=(n[0]-t[0])/(e[0]-t[0]),o=0;else return null;for(let l=0;l<t.length;l++)i[l]=(o&1)===l?n[o]:s*(e[l]-t[l])+t[l];return i}function Uf(t,e){let r=0;return t[0]<e[0]?r|=1:t[0]>e[2]&&(r|=2),t[1]<e[1]?r|=4:t[1]>e[3]&&(r|=8),r}function fI(t,e){const{size:r=2,broken:n=!1,gridResolution:i=10,gridOffset:s=[0,0],startIndex:o=0,endIndex:l=t.length}=e||{},u=(l-o)/r;let f=[];const d=[f],g=pc(t,0,r,o);let m,y;const w=dI(g,i,s,[]),b=[];_n(f,g);for(let S=1;S<u;S++){for(m=pc(t,S,r,o,m),y=Uf(m,w);y;){pv(g,m,y,w,b);const E=Uf(b,w);E&&(pv(g,b,E,w,b),y=E),_n(f,b),dv(g,b),fj(w,i,y),n&&f.length>r&&(f=[],d.push(f),_n(f,g)),y=Uf(m,w)}_n(f,m),dv(g,m)}return n?d:d[0]}const FE=0,uj=1;function hI(t,e=null,r){if(!t.length)return[];const{size:n=2,gridResolution:i=10,gridOffset:s=[0,0],edgeTypes:o=!1}=r||{},l=[],u=[{pos:t,types:o?new Array(t.length/n).fill(uj):null,holes:e||[]}],f=[[],[]];let d=[];for(;u.length;){const{pos:g,types:m,holes:y}=u.shift();hj(g,n,y[0]||g.length,f),d=dI(f[0],i,s,d);const w=Uf(f[1],d);if(w){let b=DE(g,m,n,0,y[0]||g.length,d,w);const S={pos:b[0].pos,types:b[0].types,holes:[]},E={pos:b[1].pos,types:b[1].types,holes:[]};u.push(S,E);for(let k=0;k<y.length;k++)b=DE(g,m,n,y[k],y[k+1]||g.length,d,w),b[0]&&(S.holes.push(S.pos.length),S.pos=hf(S.pos,b[0].pos),o&&(S.types=hf(S.types,b[0].types))),b[1]&&(E.holes.push(E.pos.length),E.pos=hf(E.pos,b[1].pos),o&&(E.types=hf(E.types,b[1].types)))}else{const b={positions:g};o&&(b.edgeTypes=m),y.length&&(b.holeIndices=y),l.push(b)}}return l}function DE(t,e,r,n,i,s,o){const l=(i-n)/r,u=[],f=[],d=[],g=[],m=[];let y,w,b;const S=pc(t,l-1,r,n);let E=Math.sign(o&8?S[1]-s[3]:S[0]-s[2]),k=e&&e[l-1],C=0,P=0;for(let M=0;M<l;M++)y=pc(t,M,r,n,y),w=Math.sign(o&8?y[1]-s[3]:y[0]-s[2]),b=e&&e[n/r+M],w&&E&&E!==w&&(pv(S,y,o,s,m),_n(u,m)&&d.push(k),_n(f,m)&&g.push(k)),w<=0?(_n(u,y)&&d.push(b),C-=w):d.length&&(d[d.length-1]=FE),w>=0?(_n(f,y)&&g.push(b),P+=w):g.length&&(g[g.length-1]=FE),dv(S,y),E=w,k=b;return[C?{pos:u,types:e&&d}:null,P?{pos:f,types:e&&g}:null]}function dI(t,e,r,n){const i=Math.floor((t[0]-r[0])/e)*e+r[0],s=Math.floor((t[1]-r[1])/e)*e+r[1];return n[0]=i,n[1]=s,n[2]=i+e,n[3]=s+e,n}function fj(t,e,r){r&8?(t[1]+=e,t[3]+=e):r&4?(t[1]-=e,t[3]-=e):r&2?(t[0]+=e,t[2]+=e):r&1&&(t[0]-=e,t[2]-=e)}function hj(t,e,r,n){let i=1/0,s=-1/0,o=1/0,l=-1/0;for(let u=0;u<r;u+=e){const f=t[u],d=t[u+1];i=f<i?f:i,s=f>s?f:s,o=d<o?d:o,l=d>l?d:l}return n[0][0]=i,n[0][1]=o,n[1][0]=s,n[1][1]=l,n}function hf(t,e){for(let r=0;r<e.length;r++)t.push(e[r]);return t}const dj=85.051129;function pj(t,e){const{size:r=2,startIndex:n=0,endIndex:i=t.length,normalize:s=!0}=e,o=t.slice(n,i);pI(o,r,0,i-n);const l=fI(o,{size:r,broken:!0,gridResolution:360,gridOffset:[-180,-180]});if(s)for(const u of l)gI(u,r);return l}function gj(t,e=null,r){const{size:n=2,normalize:i=!0,edgeTypes:s=!1}=r;e=e||[];const o=[],l=[];let u=0,f=0;for(let g=0;g<=e.length;g++){const m=e[g]||t.length,y=f,w=mj(t,n,u,m);for(let b=w;b<m;b++)o[f++]=t[b];for(let b=u;b<w;b++)o[f++]=t[b];pI(o,n,y,f),_j(o,n,y,f,r==null?void 0:r.maxLatitude),u=m,l[g]=f}l.pop();const d=hI(o,l,{size:n,gridResolution:360,gridOffset:[-180,-180],edgeTypes:s});if(i)for(const g of d)gI(g.positions,n);return d}function mj(t,e,r,n){let i=-1,s=-1;for(let o=r+1;o<n;o+=e){const l=Math.abs(t[o]);l>i&&(i=l,s=o-1)}return s}function _j(t,e,r,n,i=dj){const s=t[r],o=t[n-e];if(Math.abs(s-o)>180){const l=pc(t,0,e,r);l[0]+=Math.round((o-s)/360)*360,_n(t,l),l[1]=Math.sign(l[1])*i,_n(t,l),l[0]=s,_n(t,l)}}function pI(t,e,r,n){let i=t[0],s;for(let o=r;o<n;o+=e){s=t[o];const l=s-i;(l>180||l<-180)&&(s-=Math.round(l/360)*360),t[o]=i=s}}function gI(t,e){let r;const n=t.length/e;for(let s=0;s<n&&(r=t[s*e],(r+180)%360===0);s++);const i=-Math.round(r/360)*360;if(i!==0)for(let s=0;s<n;s++)t[s*e]+=i}function yj(t,e,r,n){let i;if(Array.isArray(t[0])){const s=t.length*e;i=new Array(s);for(let o=0;o<t.length;o++)for(let l=0;l<e;l++)i[o*e+l]=t[o][l]||0}else i=t;return r?fI(i,{size:e,gridResolution:r}):n?pj(i,{size:e}):i}const vj=1,bj=2,om=4;class wj extends aI{constructor(e){super({...e,attributes:{positions:{size:3,padding:18,initialize:!0,type:e.fp64?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray}}})}get(e){return this.attributes[e]}getGeometryFromBuffer(e){return this.normalize?super.getGeometryFromBuffer(e):null}normalizeGeometry(e){return this.normalize?yj(e,this.positionSize,this.opts.resolution,this.opts.wrapLongitude):e}getGeometrySize(e){if(BE(e)){let n=0;for(const i of e)n+=this.getGeometrySize(i);return n}const r=this.getPathLength(e);return r<2?0:this.isClosed(e)?r<3?0:r+2:r}updateGeometryAttributes(e,r){if(r.geometrySize!==0)if(e&&BE(e))for(const n of e){const i=this.getGeometrySize(n);r.geometrySize=i,this.updateGeometryAttributes(n,r),r.vertexStart+=i}else this._updateSegmentTypes(e,r),this._updatePositions(e,r)}_updateSegmentTypes(e,r){const n=this.attributes.segmentTypes,i=e?this.isClosed(e):!1,{vertexStart:s,geometrySize:o}=r;n.fill(0,s,s+o),i?(n[s]=om,n[s+o-2]=om):(n[s]+=vj,n[s+o-2]+=bj),n[s+o-1]=om}_updatePositions(e,r){const{positions:n}=this.attributes;if(!n||!e)return;const{vertexStart:i,geometrySize:s}=r,o=new Array(3);for(let l=i,u=0;u<s;l++,u++)this.getPointOnPath(e,u,o),n[l*3]=o[0],n[l*3+1]=o[1],n[l*3+2]=o[2]}getPathLength(e){return e.length/this.positionSize}getPointOnPath(e,r,n=[]){const{positionSize:i}=this;r*i>=e.length&&(r+=1-e.length/i);const s=r*i;return n[0]=e[s],n[1]=e[s+1],n[2]=i===3&&e[s+2]||0,n}isClosed(e){if(!this.normalize)return!!this.opts.loop;const{positionSize:r}=this,n=e.length-r;return e[0]===e[n]&&e[1]===e[n+1]&&(r===2||e[2]===e[n+2])}}function BE(t){return Array.isArray(t[0])}const LE=`uniform pathUniforms {
  float widthScale;
  float widthMinPixels;
  float widthMaxPixels;
  float jointType;
  float capType;
  float miterLimit;
  bool billboard;
  highp int widthUnits;
} path;
`,Sj={name:"path",vs:LE,fs:LE,uniformTypes:{widthScale:"f32",widthMinPixels:"f32",widthMaxPixels:"f32",jointType:"f32",capType:"f32",miterLimit:"f32",billboard:"f32",widthUnits:"i32"}},xj=`#version 300 es
#define SHADER_NAME path-layer-vertex-shader
in vec2 positions;
in float instanceTypes;
in vec3 instanceStartPositions;
in vec3 instanceEndPositions;
in vec3 instanceLeftPositions;
in vec3 instanceRightPositions;
in vec3 instanceLeftPositions64Low;
in vec3 instanceStartPositions64Low;
in vec3 instanceEndPositions64Low;
in vec3 instanceRightPositions64Low;
in float instanceStrokeWidths;
in vec4 instanceColors;
in vec3 instancePickingColors;
uniform float opacity;
out vec4 vColor;
out vec2 vCornerOffset;
out float vMiterLength;
out vec2 vPathPosition;
out float vPathLength;
out float vJointType;
const float EPSILON = 0.001;
const vec3 ZERO_OFFSET = vec3(0.0);
float flipIfTrue(bool flag) {
return -(float(flag) * 2. - 1.);
}
vec3 getLineJoinOffset(
vec3 prevPoint, vec3 currPoint, vec3 nextPoint,
vec2 width
) {
bool isEnd = positions.x > 0.0;
float sideOfPath = positions.y;
float isJoint = float(sideOfPath == 0.0);
vec3 deltaA3 = (currPoint - prevPoint);
vec3 deltaB3 = (nextPoint - currPoint);
mat3 rotationMatrix;
bool needsRotation = !path.billboard && project_needs_rotation(currPoint, rotationMatrix);
if (needsRotation) {
deltaA3 = deltaA3 * rotationMatrix;
deltaB3 = deltaB3 * rotationMatrix;
}
vec2 deltaA = deltaA3.xy / width;
vec2 deltaB = deltaB3.xy / width;
float lenA = length(deltaA);
float lenB = length(deltaB);
vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);
vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);
vec2 perpA = vec2(-dirA.y, dirA.x);
vec2 perpB = vec2(-dirB.y, dirB.x);
vec2 tangent = dirA + dirB;
tangent = length(tangent) > 0. ? normalize(tangent) : perpA;
vec2 miterVec = vec2(-tangent.y, tangent.x);
vec2 dir = isEnd ? dirA : dirB;
vec2 perp = isEnd ? perpA : perpB;
float L = isEnd ? lenA : lenB;
float sinHalfA = abs(dot(miterVec, perp));
float cosHalfA = abs(dot(dirA, miterVec));
float turnDirection = flipIfTrue(dirA.x * dirB.y >= dirA.y * dirB.x);
float cornerPosition = sideOfPath * turnDirection;
float miterSize = 1.0 / max(sinHalfA, EPSILON);
miterSize = mix(
min(miterSize, max(lenA, lenB) / max(cosHalfA, EPSILON)),
miterSize,
step(0.0, cornerPosition)
);
vec2 offsetVec = mix(miterVec * miterSize, perp, step(0.5, cornerPosition))
* (sideOfPath + isJoint * turnDirection);
bool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));
bool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));
bool isCap = isStartCap || isEndCap;
if (isCap) {
offsetVec = mix(perp * sideOfPath, dir * path.capType * 4.0 * flipIfTrue(isStartCap), isJoint);
vJointType = path.capType;
} else {
vJointType = path.jointType;
}
vPathLength = L;
vCornerOffset = offsetVec;
vMiterLength = dot(vCornerOffset, miterVec * turnDirection);
vMiterLength = isCap ? isJoint : vMiterLength;
vec2 offsetFromStartOfPath = vCornerOffset + deltaA * float(isEnd);
vPathPosition = vec2(
dot(offsetFromStartOfPath, perp),
dot(offsetFromStartOfPath, dir)
);
geometry.uv = vPathPosition;
float isValid = step(instanceTypes, 3.5);
vec3 offset = vec3(offsetVec * width * isValid, 0.0);
if (needsRotation) {
offset = rotationMatrix * offset;
}
return offset;
}
void clipLine(inout vec4 position, vec4 refPosition) {
if (position.w < EPSILON) {
float r = (EPSILON - refPosition.w) / (position.w - refPosition.w);
position = refPosition + (position - refPosition) * r;
}
}
void main() {
geometry.pickingColor = instancePickingColors;
vColor = vec4(instanceColors.rgb, instanceColors.a * layer.opacity);
float isEnd = positions.x;
vec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);
vec3 prevPosition64Low = mix(instanceLeftPositions64Low, instanceStartPositions64Low, isEnd);
vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);
vec3 currPosition64Low = mix(instanceStartPositions64Low, instanceEndPositions64Low, isEnd);
vec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);
vec3 nextPosition64Low = mix(instanceEndPositions64Low, instanceRightPositions64Low, isEnd);
geometry.worldPosition = currPosition;
vec2 widthPixels = vec2(clamp(
project_size_to_pixel(instanceStrokeWidths * path.widthScale, path.widthUnits),
path.widthMinPixels, path.widthMaxPixels) / 2.0);
vec3 width;
if (path.billboard) {
vec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64Low, ZERO_OFFSET);
vec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64Low, ZERO_OFFSET, geometry.position);
vec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64Low, ZERO_OFFSET);
clipLine(prevPositionScreen, currPositionScreen);
clipLine(nextPositionScreen, currPositionScreen);
clipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));
width = vec3(widthPixels, 0.0);
DECKGL_FILTER_SIZE(width, geometry);
vec3 offset = getLineJoinOffset(
prevPositionScreen.xyz / prevPositionScreen.w,
currPositionScreen.xyz / currPositionScreen.w,
nextPositionScreen.xyz / nextPositionScreen.w,
project_pixel_size_to_clipspace(width.xy)
);
DECKGL_FILTER_GL_POSITION(currPositionScreen, geometry);
gl_Position = vec4(currPositionScreen.xyz + offset * currPositionScreen.w, currPositionScreen.w);
} else {
prevPosition = project_position(prevPosition, prevPosition64Low);
currPosition = project_position(currPosition, currPosition64Low);
nextPosition = project_position(nextPosition, nextPosition64Low);
width = vec3(project_pixel_size(widthPixels), 0.0);
DECKGL_FILTER_SIZE(width, geometry);
vec3 offset = getLineJoinOffset(prevPosition, currPosition, nextPosition, width.xy);
geometry.position = vec4(currPosition + offset, 1.0);
gl_Position = project_common_position_to_clipspace(geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
}
DECKGL_FILTER_COLOR(vColor, geometry);
}
`,Tj=`#version 300 es
#define SHADER_NAME path-layer-fragment-shader
precision highp float;
in vec4 vColor;
in vec2 vCornerOffset;
in float vMiterLength;
in vec2 vPathPosition;
in float vPathLength;
in float vJointType;
out vec4 fragColor;
void main(void) {
geometry.uv = vPathPosition;
if (vPathPosition.y < 0.0 || vPathPosition.y > vPathLength) {
if (vJointType > 0.5 && length(vCornerOffset) > 1.0) {
discard;
}
if (vJointType < 0.5 && vMiterLength > path.miterLimit + 1.0) {
discard;
}
}
fragColor = vColor;
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,mI=[0,0,0,255],Ej={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},jointRounded:!1,capRounded:!1,miterLimit:{type:"number",min:0,value:4},billboard:!1,_pathType:null,getPath:{type:"accessor",value:t=>t.path},getColor:{type:"accessor",value:mI},getWidth:{type:"accessor",value:1},rounded:{deprecatedFor:["jointRounded","capRounded"]}},am={enter:(t,e)=>e.length?e.subarray(e.length-t.length):t};class db extends zn{getShaders(){return super.getShaders({vs:xj,fs:Tj,modules:[Oa,ka,Sj]})}get wrapLongitude(){return!1}getBounds(){var e;return(e=this.getAttributeManager())==null?void 0:e.getBounds(["vertexPositions"])}initializeState(){this.getAttributeManager().addInstanced({vertexPositions:{size:3,vertexOffset:1,type:"float64",fp64:this.use64bitPositions(),transition:am,accessor:"getPath",update:this.calculatePositions,noAlloc:!0,shaderAttributes:{instanceLeftPositions:{vertexOffset:0},instanceStartPositions:{vertexOffset:1},instanceEndPositions:{vertexOffset:2},instanceRightPositions:{vertexOffset:3}}},instanceTypes:{size:1,type:"uint8",update:this.calculateSegmentTypes,noAlloc:!0},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:am,defaultValue:1},instanceColors:{size:this.props.colorFormat.length,type:"unorm8",accessor:"getColor",transition:am,defaultValue:mI},instancePickingColors:{size:4,type:"uint8",accessor:(n,{index:i,target:s})=>this.encodePickingColor(n&&n.__source?n.__source.index:i,s)}}),this.setState({pathTesselator:new wj({fp64:this.use64bitPositions()})})}updateState(e){var o;super.updateState(e);const{props:r,changeFlags:n}=e,i=this.getAttributeManager();if(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPath)){const{pathTesselator:l}=this.state,u=r.data.attributes||{};l.updateGeometry({data:r.data,geometryBuffer:u.getPath,buffers:u,normalize:!r._pathType,loop:r._pathType==="loop",getGeometry:r.getPath,positionFormat:r.positionFormat,wrapLongitude:r.wrapLongitude,resolution:this.context.viewport.resolution,dataChanged:n.dataChanged}),this.setState({numInstances:l.instanceCount,startIndices:l.vertexStarts}),n.dataChanged||i.invalidateAll()}n.extensionsChanged&&((o=this.state.model)==null||o.destroy(),this.state.model=this._getModel(),i.invalidateAll())}getPickingInfo(e){const r=super.getPickingInfo(e),{index:n}=r,i=this.props.data;return i[0]&&i[0].__source&&(r.object=i.find(s=>s.__source.index===n)),r}disablePickingIndex(e){const r=this.props.data;if(r[0]&&r[0].__source)for(let n=0;n<r.length;n++)r[n].__source.index===e&&this._disablePickingIndex(n);else super.disablePickingIndex(e)}draw({uniforms:e}){const{jointRounded:r,capRounded:n,billboard:i,miterLimit:s,widthUnits:o,widthScale:l,widthMinPixels:u,widthMaxPixels:f}=this.props,d=this.state.model,g={jointType:Number(r),capType:Number(n),billboard:i,widthUnits:Os[o],widthScale:l,miterLimit:s,widthMinPixels:u,widthMaxPixels:f};d.shaderInputs.setProps({path:g}),d.draw(this.context.renderPass)}_getModel(){const e=[0,1,2,1,4,2,1,3,4,3,5,4],r=[0,0,0,-1,0,1,1,-1,1,1,1,0];return new en(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new Aa({topology:"triangle-list",attributes:{indices:new Uint16Array(e),positions:{value:new Float32Array(r),size:2}}}),isInstanced:!0})}calculatePositions(e){const{pathTesselator:r}=this.state;e.startIndices=r.vertexStarts,e.value=r.get("positions")}calculateSegmentTypes(e){const{pathTesselator:r}=this.state;e.startIndices=r.vertexStarts,e.value=r.get("segmentTypes")}}db.defaultProps=Ej;db.layerName="PathLayer";var df={exports:{}},UE;function Aj(){if(UE)return df.exports;UE=1,df.exports=t,df.exports.default=t;function t(F,z,O){O=O||2;var $=z&&z.length,j=$?z[0]*O:F.length,R=e(F,0,j,O,!0),L=[];if(!R||R.next===R.prev)return L;var se,ue,he,we,Te,me,Oe;if($&&(R=u(F,z,R,O)),F.length>80*O){se=he=F[0],ue=we=F[1];for(var Ne=O;Ne<j;Ne+=O)Te=F[Ne],me=F[Ne+1],Te<se&&(se=Te),me<ue&&(ue=me),Te>he&&(he=Te),me>we&&(we=me);Oe=Math.max(he-se,we-ue),Oe=Oe!==0?32767/Oe:0}return n(R,L,O,se,ue,Oe,0),L}function e(F,z,O,$,j){var R,L;if(j===xe(F,z,O,$)>0)for(R=z;R<O;R+=$)L=te(R,F[R],F[R+1],L);else for(R=O-$;R>=z;R-=$)L=te(R,F[R],F[R+1],L);return L&&P(L,L.next)&&(Q(L),L=L.next),L}function r(F,z){if(!F)return F;z||(z=F);var O=F,$;do if($=!1,!O.steiner&&(P(O,O.next)||C(O.prev,O,O.next)===0)){if(Q(O),O=z=O.prev,O===O.next)break;$=!0}else O=O.next;while($||O!==z);return z}function n(F,z,O,$,j,R,L){if(F){!L&&R&&y(F,$,j,R);for(var se=F,ue,he;F.prev!==F.next;){if(ue=F.prev,he=F.next,R?s(F,$,j,R):i(F)){z.push(ue.i/O|0),z.push(F.i/O|0),z.push(he.i/O|0),Q(F),F=he.next,se=he.next;continue}if(F=he,F===se){L?L===1?(F=o(r(F),z,O),n(F,z,O,$,j,R,2)):L===2&&l(F,z,O,$,j,R):n(r(F),z,O,$,j,R,1);break}}}}function i(F){var z=F.prev,O=F,$=F.next;if(C(z,O,$)>=0)return!1;for(var j=z.x,R=O.x,L=$.x,se=z.y,ue=O.y,he=$.y,we=j<R?j<L?j:L:R<L?R:L,Te=se<ue?se<he?se:he:ue<he?ue:he,me=j>R?j>L?j:L:R>L?R:L,Oe=se>ue?se>he?se:he:ue>he?ue:he,Ne=$.next;Ne!==z;){if(Ne.x>=we&&Ne.x<=me&&Ne.y>=Te&&Ne.y<=Oe&&E(j,se,R,ue,L,he,Ne.x,Ne.y)&&C(Ne.prev,Ne,Ne.next)>=0)return!1;Ne=Ne.next}return!0}function s(F,z,O,$){var j=F.prev,R=F,L=F.next;if(C(j,R,L)>=0)return!1;for(var se=j.x,ue=R.x,he=L.x,we=j.y,Te=R.y,me=L.y,Oe=se<ue?se<he?se:he:ue<he?ue:he,Ne=we<Te?we<me?we:me:Te<me?Te:me,Tt=se>ue?se>he?se:he:ue>he?ue:he,vt=we>Te?we>me?we:me:Te>me?Te:me,nt=b(Oe,Ne,z,O,$),Dt=b(Tt,vt,z,O,$),ve=F.prevZ,ze=F.nextZ;ve&&ve.z>=nt&&ze&&ze.z<=Dt;){if(ve.x>=Oe&&ve.x<=Tt&&ve.y>=Ne&&ve.y<=vt&&ve!==j&&ve!==L&&E(se,we,ue,Te,he,me,ve.x,ve.y)&&C(ve.prev,ve,ve.next)>=0||(ve=ve.prevZ,ze.x>=Oe&&ze.x<=Tt&&ze.y>=Ne&&ze.y<=vt&&ze!==j&&ze!==L&&E(se,we,ue,Te,he,me,ze.x,ze.y)&&C(ze.prev,ze,ze.next)>=0))return!1;ze=ze.nextZ}for(;ve&&ve.z>=nt;){if(ve.x>=Oe&&ve.x<=Tt&&ve.y>=Ne&&ve.y<=vt&&ve!==j&&ve!==L&&E(se,we,ue,Te,he,me,ve.x,ve.y)&&C(ve.prev,ve,ve.next)>=0)return!1;ve=ve.prevZ}for(;ze&&ze.z<=Dt;){if(ze.x>=Oe&&ze.x<=Tt&&ze.y>=Ne&&ze.y<=vt&&ze!==j&&ze!==L&&E(se,we,ue,Te,he,me,ze.x,ze.y)&&C(ze.prev,ze,ze.next)>=0)return!1;ze=ze.nextZ}return!0}function o(F,z,O){var $=F;do{var j=$.prev,R=$.next.next;!P(j,R)&&M(j,$,$.next,R)&&J(j,R)&&J(R,j)&&(z.push(j.i/O|0),z.push($.i/O|0),z.push(R.i/O|0),Q($),Q($.next),$=F=R),$=$.next}while($!==F);return r($)}function l(F,z,O,$,j,R){var L=F;do{for(var se=L.next.next;se!==L.prev;){if(L.i!==se.i&&k(L,se)){var ue=X(L,se);L=r(L,L.next),ue=r(ue,ue.next),n(L,z,O,$,j,R,0),n(ue,z,O,$,j,R,0);return}se=se.next}L=L.next}while(L!==F)}function u(F,z,O,$){var j=[],R,L,se,ue,he;for(R=0,L=z.length;R<L;R++)se=z[R]*$,ue=R<L-1?z[R+1]*$:F.length,he=e(F,se,ue,$,!1),he===he.next&&(he.steiner=!0),j.push(S(he));for(j.sort(f),R=0;R<j.length;R++)O=d(j[R],O);return O}function f(F,z){return F.x-z.x}function d(F,z){var O=g(F,z);if(!O)return z;var $=X(O,F);return r($,$.next),r(O,O.next)}function g(F,z){var O=z,$=F.x,j=F.y,R=-1/0,L;do{if(j<=O.y&&j>=O.next.y&&O.next.y!==O.y){var se=O.x+(j-O.y)*(O.next.x-O.x)/(O.next.y-O.y);if(se<=$&&se>R&&(R=se,L=O.x<O.next.x?O:O.next,se===$))return L}O=O.next}while(O!==z);if(!L)return null;var ue=L,he=L.x,we=L.y,Te=1/0,me;O=L;do $>=O.x&&O.x>=he&&$!==O.x&&E(j<we?$:R,j,he,we,j<we?R:$,j,O.x,O.y)&&(me=Math.abs(j-O.y)/($-O.x),J(O,F)&&(me<Te||me===Te&&(O.x>L.x||O.x===L.x&&m(L,O)))&&(L=O,Te=me)),O=O.next;while(O!==ue);return L}function m(F,z){return C(F.prev,F,z.prev)<0&&C(z.next,F,F.next)<0}function y(F,z,O,$){var j=F;do j.z===0&&(j.z=b(j.x,j.y,z,O,$)),j.prevZ=j.prev,j.nextZ=j.next,j=j.next;while(j!==F);j.prevZ.nextZ=null,j.prevZ=null,w(j)}function w(F){var z,O,$,j,R,L,se,ue,he=1;do{for(O=F,F=null,R=null,L=0;O;){for(L++,$=O,se=0,z=0;z<he&&(se++,$=$.nextZ,!!$);z++);for(ue=he;se>0||ue>0&&$;)se!==0&&(ue===0||!$||O.z<=$.z)?(j=O,O=O.nextZ,se--):(j=$,$=$.nextZ,ue--),R?R.nextZ=j:F=j,j.prevZ=R,R=j;O=$}R.nextZ=null,he*=2}while(L>1);return F}function b(F,z,O,$,j){return F=(F-O)*j|0,z=(z-$)*j|0,F=(F|F<<8)&16711935,F=(F|F<<4)&252645135,F=(F|F<<2)&858993459,F=(F|F<<1)&1431655765,z=(z|z<<8)&16711935,z=(z|z<<4)&252645135,z=(z|z<<2)&858993459,z=(z|z<<1)&1431655765,F|z<<1}function S(F){var z=F,O=F;do(z.x<O.x||z.x===O.x&&z.y<O.y)&&(O=z),z=z.next;while(z!==F);return O}function E(F,z,O,$,j,R,L,se){return(j-L)*(z-se)>=(F-L)*(R-se)&&(F-L)*($-se)>=(O-L)*(z-se)&&(O-L)*(R-se)>=(j-L)*($-se)}function k(F,z){return F.next.i!==z.i&&F.prev.i!==z.i&&!ee(F,z)&&(J(F,z)&&J(z,F)&&A(F,z)&&(C(F.prev,F,z.prev)||C(F,z.prev,z))||P(F,z)&&C(F.prev,F,F.next)>0&&C(z.prev,z,z.next)>0)}function C(F,z,O){return(z.y-F.y)*(O.x-z.x)-(z.x-F.x)*(O.y-z.y)}function P(F,z){return F.x===z.x&&F.y===z.y}function M(F,z,O,$){var j=q(C(F,z,O)),R=q(C(F,z,$)),L=q(C(O,$,F)),se=q(C(O,$,z));return!!(j!==R&&L!==se||j===0&&D(F,O,z)||R===0&&D(F,$,z)||L===0&&D(O,F,$)||se===0&&D(O,z,$))}function D(F,z,O){return z.x<=Math.max(F.x,O.x)&&z.x>=Math.min(F.x,O.x)&&z.y<=Math.max(F.y,O.y)&&z.y>=Math.min(F.y,O.y)}function q(F){return F>0?1:F<0?-1:0}function ee(F,z){var O=F;do{if(O.i!==F.i&&O.next.i!==F.i&&O.i!==z.i&&O.next.i!==z.i&&M(O,O.next,F,z))return!0;O=O.next}while(O!==F);return!1}function J(F,z){return C(F.prev,F,F.next)<0?C(F,z,F.next)>=0&&C(F,F.prev,z)>=0:C(F,z,F.prev)<0||C(F,F.next,z)<0}function A(F,z){var O=F,$=!1,j=(F.x+z.x)/2,R=(F.y+z.y)/2;do O.y>R!=O.next.y>R&&O.next.y!==O.y&&j<(O.next.x-O.x)*(R-O.y)/(O.next.y-O.y)+O.x&&($=!$),O=O.next;while(O!==F);return $}function X(F,z){var O=new ie(F.i,F.x,F.y),$=new ie(z.i,z.x,z.y),j=F.next,R=z.prev;return F.next=z,z.prev=F,O.next=j,j.prev=O,$.next=O,O.prev=$,R.next=$,$.prev=R,$}function te(F,z,O,$){var j=new ie(F,z,O);return $?(j.next=$.next,j.prev=$,$.next.prev=j,$.next=j):(j.prev=j,j.next=j),j}function Q(F){F.next.prev=F.prev,F.prev.next=F.next,F.prevZ&&(F.prevZ.nextZ=F.nextZ),F.nextZ&&(F.nextZ.prevZ=F.prevZ)}function ie(F,z,O){this.i=F,this.x=z,this.y=O,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}t.deviation=function(F,z,O,$){var j=z&&z.length,R=j?z[0]*O:F.length,L=Math.abs(xe(F,0,R,O));if(j)for(var se=0,ue=z.length;se<ue;se++){var he=z[se]*O,we=se<ue-1?z[se+1]*O:F.length;L-=Math.abs(xe(F,he,we,O))}var Te=0;for(se=0;se<$.length;se+=3){var me=$[se]*O,Oe=$[se+1]*O,Ne=$[se+2]*O;Te+=Math.abs((F[me]-F[Ne])*(F[Oe+1]-F[me+1])-(F[me]-F[Oe])*(F[Ne+1]-F[me+1]))}return L===0&&Te===0?0:Math.abs((Te-L)/L)};function xe(F,z,O,$){for(var j=0,R=z,L=O-$;R<O;R+=$)j+=(F[L]-F[R])*(F[R+1]+F[L+1]),L=R;return j}return t.flatten=function(F){for(var z=F[0][0].length,O={vertices:[],holes:[],dimensions:z},$=0,j=0;j<F.length;j++){for(var R=0;R<F[j].length;R++)for(var L=0;L<z;L++)O.vertices.push(F[j][R][L]);j>0&&($+=F[j-1].length,O.holes.push($))}return O},df.exports}var Cj=Aj();const Rj=Ma(Cj),pf=cI.CLOCKWISE,zE=cI.COUNTER_CLOCKWISE,Vi={isClosed:!0};function Pj(t){if(t=t&&t.positions||t,!Array.isArray(t)&&!ArrayBuffer.isView(t))throw new Error("invalid polygon")}function $l(t){return"positions"in t?t.positions:t}function zf(t){return"holeIndices"in t?t.holeIndices:null}function Mj(t){return Array.isArray(t[0])}function Ij(t){return t.length>=1&&t[0].length>=2&&Number.isFinite(t[0][0])}function Oj(t){const e=t[0],r=t[t.length-1];return e[0]===r[0]&&e[1]===r[1]&&e[2]===r[2]}function kj(t,e,r,n){for(let i=0;i<e;i++)if(t[r+i]!==t[n-e+i])return!1;return!0}function $E(t,e,r,n,i){let s=e;const o=r.length;for(let l=0;l<o;l++)for(let u=0;u<n;u++)t[s++]=r[l][u]||0;if(!Oj(r))for(let l=0;l<n;l++)t[s++]=r[0][l]||0;return Vi.start=e,Vi.end=s,Vi.size=n,uI(t,i,Vi),s}function VE(t,e,r,n,i=0,s,o){s=s||r.length;const l=s-i;if(l<=0)return e;let u=e;for(let f=0;f<l;f++)t[u++]=r[i+f];if(!kj(r,n,i,s))for(let f=0;f<n;f++)t[u++]=r[i+f];return Vi.start=e,Vi.end=u,Vi.size=n,uI(t,o,Vi),u}function Nj(t,e){Pj(t);const r=[],n=[];if("positions"in t){const{positions:i,holeIndices:s}=t;if(s){let o=0;for(let l=0;l<=s.length;l++)o=VE(r,o,i,e,s[l-1],s[l],l===0?pf:zE),n.push(o);return n.pop(),{positions:r,holeIndices:n}}t=i}if(!Mj(t))return VE(r,0,t,e,0,r.length,pf),r;if(!Ij(t)){let i=0;for(const[s,o]of t.entries())i=$E(r,i,o,e,s===0?pf:zE),n.push(i);return n.pop(),{positions:r,holeIndices:n}}return $E(r,0,t,e,pf),r}function lm(t,e,r){const n=t.length/3;let i=0;for(let s=0;s<n;s++){const o=(s+1)%n;i+=t[s*3+e]*t[o*3+r],i-=t[o*3+e]*t[s*3+r]}return Math.abs(i/2)}function jE(t,e,r,n){const i=t.length/3;for(let s=0;s<i;s++){const o=s*3,l=t[o+0],u=t[o+1],f=t[o+2];t[o+e]=l,t[o+r]=u,t[o+n]=f}}function Fj(t,e,r,n){let i=zf(t);i&&(i=i.map(l=>l/e));let s=$l(t);const o=n&&e===3;if(r){const l=s.length;s=s.slice();const u=[];for(let f=0;f<l;f+=e){u[0]=s[f],u[1]=s[f+1],o&&(u[2]=s[f+2]);const d=r(u);s[f]=d[0],s[f+1]=d[1],o&&(s[f+2]=d[2])}}if(o){const l=lm(s,0,1),u=lm(s,0,2),f=lm(s,1,2);if(!l&&!u&&!f)return[];l>u&&l>f||(u>f?(r||(s=s.slice()),jE(s,0,2,1)):(r||(s=s.slice()),jE(s,2,0,1)))}return Rj(s,i,e)}class Dj extends aI{constructor(e){const{fp64:r,IndexType:n=Uint32Array}=e;super({...e,attributes:{positions:{size:3,type:r?Float64Array:Float32Array},vertexValid:{type:Uint16Array,size:1},indices:{type:n,size:1}}})}get(e){const{attributes:r}=this;return e==="indices"?r.indices&&r.indices.subarray(0,this.vertexCount):r[e]}updateGeometry(e){super.updateGeometry(e);const r=this.buffers.indices;if(r)this.vertexCount=(r.value||r).length;else if(this.data&&!this.getGeometry)throw new Error("missing indices buffer")}normalizeGeometry(e){if(this.normalize){const r=Nj(e,this.positionSize);return this.opts.resolution?hI($l(r),zf(r),{size:this.positionSize,gridResolution:this.opts.resolution,edgeTypes:!0}):this.opts.wrapLongitude?gj($l(r),zf(r),{size:this.positionSize,maxLatitude:86,edgeTypes:!0}):r}return e}getGeometrySize(e){if(HE(e)){let r=0;for(const n of e)r+=this.getGeometrySize(n);return r}return $l(e).length/this.positionSize}getGeometryFromBuffer(e){return this.normalize||!this.buffers.indices?super.getGeometryFromBuffer(e):null}updateGeometryAttributes(e,r){if(e&&HE(e))for(const n of e){const i=this.getGeometrySize(n);r.geometrySize=i,this.updateGeometryAttributes(n,r),r.vertexStart+=i,r.indexStart=this.indexStarts[r.geometryIndex+1]}else{const n=e;this._updateIndices(n,r),this._updatePositions(n,r),this._updateVertexValid(n,r)}}_updateIndices(e,{geometryIndex:r,vertexStart:n,indexStart:i}){const{attributes:s,indexStarts:o,typedArrayManager:l}=this;let u=s.indices;if(!u||!e)return;let f=i;const d=Fj(e,this.positionSize,this.opts.preproject,this.opts.full3d);u=l.allocate(u,i+d.length,{copy:!0});for(let g=0;g<d.length;g++)u[f++]=d[g]+n;o[r+1]=i+d.length,s.indices=u}_updatePositions(e,{vertexStart:r,geometrySize:n}){const{attributes:{positions:i},positionSize:s}=this;if(!i||!e)return;const o=$l(e);for(let l=r,u=0;u<n;l++,u++){const f=o[u*s],d=o[u*s+1],g=s>2?o[u*s+2]:0;i[l*3]=f,i[l*3+1]=d,i[l*3+2]=g}}_updateVertexValid(e,{vertexStart:r,geometrySize:n}){const{positionSize:i}=this,s=this.attributes.vertexValid,o=e&&zf(e);if(e&&e.edgeTypes?s.set(e.edgeTypes,r):s.fill(1,r,r+n),o)for(let l=0;l<o.length;l++)s[r+o[l]/i-1]=0;s[r+n-1]=0}}function HE(t){return Array.isArray(t)&&t.length>0&&!Number.isFinite(t[0])}const WE=`uniform solidPolygonUniforms {
  bool extruded;
  bool isWireframe;
  float elevationScale;
} solidPolygon;
`,Bj={name:"solidPolygon",vs:WE,fs:WE,uniformTypes:{extruded:"f32",isWireframe:"f32",elevationScale:"f32"}},_I=`in vec4 fillColors;
in vec4 lineColors;
in vec3 pickingColors;
out vec4 vColor;
struct PolygonProps {
vec3 positions;
vec3 positions64Low;
vec3 normal;
float elevations;
};
vec3 project_offset_normal(vec3 vector) {
if (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {
return normalize(vector * project.commonUnitsPerWorldUnit);
}
return project_normal(vector);
}
void calculatePosition(PolygonProps props) {
vec3 pos = props.positions;
vec3 pos64Low = props.positions64Low;
vec3 normal = props.normal;
vec4 colors = solidPolygon.isWireframe ? lineColors : fillColors;
geometry.worldPosition = props.positions;
geometry.pickingColor = pickingColors;
if (solidPolygon.extruded) {
pos.z += props.elevations * solidPolygon.elevationScale;
}
gl_Position = project_position_to_clipspace(pos, pos64Low, vec3(0.), geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
if (solidPolygon.extruded) {
#ifdef IS_SIDE_VERTEX
normal = project_offset_normal(normal);
#else
normal = project_normal(normal);
#endif
geometry.normal = normal;
vec3 lightColor = lighting_getLightColor(colors.rgb, project.cameraPosition, geometry.position.xyz, geometry.normal);
vColor = vec4(lightColor, colors.a * layer.opacity);
} else {
vColor = vec4(colors.rgb, colors.a * layer.opacity);
}
DECKGL_FILTER_COLOR(vColor, geometry);
}
`,Lj=`#version 300 es
#define SHADER_NAME solid-polygon-layer-vertex-shader
in vec3 vertexPositions;
in vec3 vertexPositions64Low;
in float elevations;
${_I}
void main(void) {
PolygonProps props;
props.positions = vertexPositions;
props.positions64Low = vertexPositions64Low;
props.elevations = elevations;
props.normal = vec3(0.0, 0.0, 1.0);
calculatePosition(props);
}
`,Uj=`#version 300 es
#define SHADER_NAME solid-polygon-layer-vertex-shader-side
#define IS_SIDE_VERTEX
in vec2 positions;
in vec3 vertexPositions;
in vec3 nextVertexPositions;
in vec3 vertexPositions64Low;
in vec3 nextVertexPositions64Low;
in float elevations;
in float instanceVertexValid;
${_I}
void main(void) {
if(instanceVertexValid < 0.5){
gl_Position = vec4(0.);
return;
}
PolygonProps props;
vec3 pos;
vec3 pos64Low;
vec3 nextPos;
vec3 nextPos64Low;
#if RING_WINDING_ORDER_CW == 1
pos = vertexPositions;
pos64Low = vertexPositions64Low;
nextPos = nextVertexPositions;
nextPos64Low = nextVertexPositions64Low;
#else
pos = nextVertexPositions;
pos64Low = nextVertexPositions64Low;
nextPos = vertexPositions;
nextPos64Low = vertexPositions64Low;
#endif
props.positions = mix(pos, nextPos, positions.x);
props.positions64Low = mix(pos64Low, nextPos64Low, positions.x);
props.normal = vec3(
pos.y - nextPos.y + (pos64Low.y - nextPos64Low.y),
nextPos.x - pos.x + (nextPos64Low.x - pos64Low.x),
0.0);
props.elevations = elevations * positions.y;
calculatePosition(props);
}
`,zj=`#version 300 es
#define SHADER_NAME solid-polygon-layer-fragment-shader
precision highp float;
in vec4 vColor;
out vec4 fragColor;
void main(void) {
fragColor = vColor;
geometry.uv = vec2(0.);
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,yh=[0,0,0,255],$j={filled:!0,extruded:!1,wireframe:!1,_normalize:!0,_windingOrder:"CW",_full3d:!1,elevationScale:{type:"number",min:0,value:1},getPolygon:{type:"accessor",value:t=>t.polygon},getElevation:{type:"accessor",value:1e3},getFillColor:{type:"accessor",value:yh},getLineColor:{type:"accessor",value:yh},material:!0},gf={enter:(t,e)=>e.length?e.subarray(e.length-t.length):t};class pb extends zn{getShaders(e){return super.getShaders({vs:e==="top"?Lj:Uj,fs:zj,defines:{RING_WINDING_ORDER_CW:!this.props._normalize&&this.props._windingOrder==="CCW"?0:1},modules:[Oa,nM,ka,Bj]})}get wrapLongitude(){return!1}getBounds(){var e;return(e=this.getAttributeManager())==null?void 0:e.getBounds(["vertexPositions"])}initializeState(){const{viewport:e}=this.context;let{coordinateSystem:r}=this.props;const{_full3d:n}=this.props;e.isGeospatial&&r===We.DEFAULT&&(r=We.LNGLAT);let i;r===We.LNGLAT&&(n?i=e.projectPosition.bind(e):i=e.projectFlat.bind(e)),this.setState({numInstances:0,polygonTesselator:new Dj({preproject:i,fp64:this.use64bitPositions(),IndexType:Uint32Array})});const s=this.getAttributeManager(),o=!0;s.remove(["instancePickingColors"]),s.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:o},vertexPositions:{size:3,type:"float64",stepMode:"dynamic",fp64:this.use64bitPositions(),transition:gf,accessor:"getPolygon",update:this.calculatePositions,noAlloc:o,shaderAttributes:{nextVertexPositions:{vertexOffset:1}}},instanceVertexValid:{size:1,type:"uint16",stepMode:"instance",update:this.calculateVertexValid,noAlloc:o},elevations:{size:1,stepMode:"dynamic",transition:gf,accessor:"getElevation"},fillColors:{size:this.props.colorFormat.length,type:"unorm8",stepMode:"dynamic",transition:gf,accessor:"getFillColor",defaultValue:yh},lineColors:{size:this.props.colorFormat.length,type:"unorm8",stepMode:"dynamic",transition:gf,accessor:"getLineColor",defaultValue:yh},pickingColors:{size:4,type:"uint8",stepMode:"dynamic",accessor:(l,{index:u,target:f})=>this.encodePickingColor(l&&l.__source?l.__source.index:u,f)}})}getPickingInfo(e){const r=super.getPickingInfo(e),{index:n}=r,i=this.props.data;return i[0]&&i[0].__source&&(r.object=i.find(s=>s.__source.index===n)),r}disablePickingIndex(e){const r=this.props.data;if(r[0]&&r[0].__source)for(let n=0;n<r.length;n++)r[n].__source.index===e&&this._disablePickingIndex(n);else super.disablePickingIndex(e)}draw({uniforms:e}){const{extruded:r,filled:n,wireframe:i,elevationScale:s}=this.props,{topModel:o,sideModel:l,wireframeModel:u,polygonTesselator:f}=this.state,d={extruded:!!r,elevationScale:s,isWireframe:!1};u&&i&&(u.setInstanceCount(f.instanceCount-1),u.shaderInputs.setProps({solidPolygon:{...d,isWireframe:!0}}),u.draw(this.context.renderPass)),l&&n&&(l.setInstanceCount(f.instanceCount-1),l.shaderInputs.setProps({solidPolygon:d}),l.draw(this.context.renderPass)),o&&n&&(o.setVertexCount(f.vertexCount),o.shaderInputs.setProps({solidPolygon:d}),o.draw(this.context.renderPass))}updateState(e){var l;super.updateState(e),this.updateGeometry(e);const{props:r,oldProps:n,changeFlags:i}=e,s=this.getAttributeManager();(i.extensionsChanged||r.filled!==n.filled||r.extruded!==n.extruded)&&((l=this.state.models)==null||l.forEach(u=>u.destroy()),this.setState(this._getModels()),s.invalidateAll())}updateGeometry({props:e,oldProps:r,changeFlags:n}){if(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPolygon)){const{polygonTesselator:s}=this.state,o=e.data.attributes||{};s.updateGeometry({data:e.data,normalize:e._normalize,geometryBuffer:o.getPolygon,buffers:o,getGeometry:e.getPolygon,positionFormat:e.positionFormat,wrapLongitude:e.wrapLongitude,resolution:this.context.viewport.resolution,fp64:this.use64bitPositions(),dataChanged:n.dataChanged,full3d:e._full3d}),this.setState({numInstances:s.instanceCount,startIndices:s.vertexStarts}),n.dataChanged||this.getAttributeManager().invalidateAll()}}_getModels(){const{id:e,filled:r,extruded:n}=this.props;let i,s,o;if(r){const l=this.getShaders("top");l.defines.NON_INSTANCED_MODEL=1;const u=this.getAttributeManager().getBufferLayouts({isInstanced:!1});i=new en(this.context.device,{...l,id:`${e}-top`,topology:"triangle-list",bufferLayout:u,isIndexed:!0,userData:{excludeAttributes:{instanceVertexValid:!0}}})}if(n){const l=this.getAttributeManager().getBufferLayouts({isInstanced:!0});s=new en(this.context.device,{...this.getShaders("side"),id:`${e}-side`,bufferLayout:l,geometry:new Aa({topology:"triangle-strip",attributes:{positions:{size:2,value:new Float32Array([1,0,0,0,1,1,0,1])}}}),isInstanced:!0,userData:{excludeAttributes:{indices:!0}}}),o=new en(this.context.device,{...this.getShaders("side"),id:`${e}-wireframe`,bufferLayout:l,geometry:new Aa({topology:"line-strip",attributes:{positions:{size:2,value:new Float32Array([1,0,0,0,0,1,1,1])}}}),isInstanced:!0,userData:{excludeAttributes:{indices:!0}}})}return{models:[s,o,i].filter(Boolean),topModel:i,sideModel:s,wireframeModel:o}}calculateIndices(e){const{polygonTesselator:r}=this.state;e.startIndices=r.indexStarts,e.value=r.get("indices")}calculatePositions(e){const{polygonTesselator:r}=this.state;e.startIndices=r.vertexStarts,e.value=r.get("positions")}calculateVertexValid(e){e.value=this.state.polygonTesselator.get("vertexValid")}}pb.defaultProps=$j;pb.layerName="SolidPolygonLayer";function Vj({data:t,getIndex:e,dataRange:r,replace:n}){const{startRow:i=0,endRow:s=1/0}=r,o=t.length;let l=o,u=o;for(let m=0;m<o;m++){const y=e(t[m]);if(l>m&&y>=i&&(l=m),y>=s){u=m;break}}let f=l;const g=u-l!==n.length?t.slice(u):void 0;for(let m=0;m<n.length;m++)t[f++]=n[m];if(g){for(let m=0;m<g.length;m++)t[f++]=g[m];t.length=f}return{startRow:l,endRow:l+n.length}}function jj(t,e){if(!t)return null;const r="startIndices"in t?t.startIndices[e]:e,n=t.featureIds.value[r];return r!==-1?Hj(t,n,r):null}function Hj(t,e,r){const n={properties:{...t.properties[e]}};for(const i in t.numericProps)n.properties[i]=t.numericProps[i].value[r];return n}function Wj(t,e){const r={points:null,lines:null,polygons:null};for(const n in r){const i=t[n].globalFeatureIds.value;r[n]=new Uint8ClampedArray(i.length*4);const s=[];for(let o=0;o<i.length;o++)e(i[o],s),r[n][o*4+0]=s[0],r[n][o*4+1]=s[1],r[n][o*4+2]=s[2],r[n][o*4+3]=255}return r}const qE=`uniform sdfUniforms {
  float gamma;
  bool enabled;
  float buffer;
  float outlineBuffer;
  vec4 outlineColor;
} sdf;
`,qj={name:"sdf",vs:qE,fs:qE,uniformTypes:{gamma:"f32",enabled:"f32",buffer:"f32",outlineBuffer:"f32",outlineColor:"vec4<f32>"}},Xj=`#version 300 es
#define SHADER_NAME multi-icon-layer-fragment-shader
precision highp float;
uniform sampler2D iconsTexture;
in vec4 vColor;
in vec2 vTextureCoords;
in vec2 uv;
out vec4 fragColor;
void main(void) {
geometry.uv = uv;
if (!bool(picking.isActive)) {
float alpha = texture(iconsTexture, vTextureCoords).a;
vec4 color = vColor;
if (sdf.enabled) {
float distance = alpha;
alpha = smoothstep(sdf.buffer - sdf.gamma, sdf.buffer + sdf.gamma, distance);
if (sdf.outlineBuffer > 0.0) {
float inFill = alpha;
float inBorder = smoothstep(sdf.outlineBuffer - sdf.gamma, sdf.outlineBuffer + sdf.gamma, distance);
color = mix(sdf.outlineColor, vColor, inFill);
alpha = inBorder;
}
}
float a = alpha * color.a;
if (a < icon.alphaCutoff) {
discard;
}
fragColor = vec4(color.rgb, a * layer.opacity);
}
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,cm=192/256,XE=[],Kj={getIconOffsets:{type:"accessor",value:t=>t.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}};class gb extends ad{getShaders(){const e=super.getShaders();return{...e,modules:[...e.modules,qj],fs:Xj}}initializeState(){super.initializeState(),this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:"uint8",size:3,accessor:(r,{index:n,target:i})=>this.encodePickingColor(n,i)}})}updateState(e){super.updateState(e);const{props:r,oldProps:n}=e;let{outlineColor:i}=r;i!==n.outlineColor&&(i=i.map(s=>s/255),i[3]=Number.isFinite(i[3])?i[3]:1,this.setState({outlineColor:i})),!r.sdf&&r.outlineWidth&&je.warn(`${this.id}: fontSettings.sdf is required to render outline`)()}draw(e){const{sdf:r,smoothing:n,outlineWidth:i}=this.props,{outlineColor:s}=this.state,o=i?Math.max(n,cm*(1-i)):-1,l=this.state.model,u={buffer:cm,outlineBuffer:o,gamma:n,enabled:!!r,outlineColor:s};if(l.shaderInputs.setProps({sdf:u}),super.draw(e),r&&i){const{iconManager:f}=this.state;f.getTexture()&&(l.shaderInputs.setProps({sdf:{...u,outlineBuffer:cm}}),l.draw(this.context.renderPass))}}getInstanceOffset(e){return e?Array.from(e).flatMap(r=>super.getInstanceOffset(r)):XE}getInstanceColorMode(e){return 1}getInstanceIconFrame(e){return e?Array.from(e).flatMap(r=>super.getInstanceIconFrame(r)):XE}}gb.defaultProps=Kj;gb.layerName="MultiIconLayer";const vh=1e20;class Yj{constructor({fontSize:e=24,buffer:r=3,radius:n=8,cutoff:i=.25,fontFamily:s="sans-serif",fontWeight:o="normal",fontStyle:l="normal"}={}){this.buffer=r,this.cutoff=i,this.radius=n;const u=this.size=e+r*4,f=this._createCanvas(u),d=this.ctx=f.getContext("2d",{willReadFrequently:!0});d.font=`${l} ${o} ${e}px ${s}`,d.textBaseline="alphabetic",d.textAlign="left",d.fillStyle="black",this.gridOuter=new Float64Array(u*u),this.gridInner=new Float64Array(u*u),this.f=new Float64Array(u),this.z=new Float64Array(u+1),this.v=new Uint16Array(u)}_createCanvas(e){const r=document.createElement("canvas");return r.width=r.height=e,r}draw(e){const{width:r,actualBoundingBoxAscent:n,actualBoundingBoxDescent:i,actualBoundingBoxLeft:s,actualBoundingBoxRight:o}=this.ctx.measureText(e),l=Math.ceil(n),u=0,f=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(o-s))),d=Math.min(this.size-this.buffer,l+Math.ceil(i)),g=f+2*this.buffer,m=d+2*this.buffer,y=Math.max(g*m,0),w=new Uint8ClampedArray(y),b={data:w,width:g,height:m,glyphWidth:f,glyphHeight:d,glyphTop:l,glyphLeft:u,glyphAdvance:r};if(f===0||d===0)return b;const{ctx:S,buffer:E,gridInner:k,gridOuter:C}=this;S.clearRect(E,E,f,d),S.fillText(e,E,E+l);const P=S.getImageData(E,E,f,d);C.fill(vh,0,y),k.fill(0,0,y);for(let M=0;M<d;M++)for(let D=0;D<f;D++){const q=P.data[4*(M*f+D)+3]/255;if(q===0)continue;const ee=(M+E)*g+D+E;if(q===1)C[ee]=0,k[ee]=vh;else{const J=.5-q;C[ee]=J>0?J*J:0,k[ee]=J<0?J*J:0}}KE(C,0,0,g,m,g,this.f,this.v,this.z),KE(k,E,E,f,d,g,this.f,this.v,this.z);for(let M=0;M<y;M++){const D=Math.sqrt(C[M])-Math.sqrt(k[M]);w[M]=Math.round(255-255*(D/this.radius+this.cutoff))}return b}}function KE(t,e,r,n,i,s,o,l,u){for(let f=e;f<e+n;f++)YE(t,r*s+f,s,i,o,l,u);for(let f=r;f<r+i;f++)YE(t,f*s+e,1,n,o,l,u)}function YE(t,e,r,n,i,s,o){s[0]=0,o[0]=-1e20,o[1]=vh,i[0]=t[e];for(let l=1,u=0,f=0;l<n;l++){i[l]=t[e+l*r];const d=l*l;do{const g=s[u];f=(i[l]-i[g]+d-g*g)/(l-g)/2}while(f<=o[u]&&--u>-1);u++,s[u]=l,o[u]=f,o[u+1]=vh}for(let l=0,u=0;l<n;l++){for(;o[u+1]<l;)u++;const f=s[u],d=l-f;t[e+l*r]=i[f]+d*d}}const Zj=32,Gj=[];function Qj(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function Jj({characterSet:t,getFontWidth:e,fontHeight:r,buffer:n,maxCanvasWidth:i,mapping:s={},xOffset:o=0,yOffset:l=0}){let u=0,f=o;const d=r+n*2;for(const g of t)if(!s[g]){const m=e(g);f+m+n*2>i&&(f=0,u++),s[g]={x:f+n,y:l+u*d+n,width:m,height:d,layoutWidth:m,layoutHeight:r},f+=m+n*2}return{mapping:s,xOffset:f,yOffset:l+u*d,canvasHeight:Qj(l+(u+1)*d)}}function yI(t,e,r,n){var s;let i=0;for(let o=e;o<r;o++){const l=t[o];i+=((s=n[l])==null?void 0:s.layoutWidth)||0}return i}function vI(t,e,r,n,i,s){let o=e,l=0;for(let u=e;u<r;u++){const f=yI(t,u,u+1,i);l+f>n&&(o<u&&s.push(u),o=u,l=0),l+=f}return l}function eH(t,e,r,n,i,s){let o=e,l=e,u=e,f=0;for(let d=e;d<r;d++)if((t[d]===" "||t[d+1]===" "||d+1===r)&&(u=d+1),u>l){let g=yI(t,l,u,i);f+g>n&&(o<l&&(s.push(l),o=l,f=0),g>n&&(g=vI(t,l,u,n,i,s),o=s[s.length-1])),l=u,f+=g}return f}function tH(t,e,r,n,i=0,s){s===void 0&&(s=t.length);const o=[];return e==="break-all"?vI(t,i,s,r,n,o):eH(t,i,s,r,n,o),o}function rH(t,e,r,n,i,s){let o=0,l=0;for(let u=e;u<r;u++){const f=t[u],d=n[f];d?(l||(l=d.layoutHeight),i[u]=o+d.layoutWidth/2,o+=d.layoutWidth):(je.warn(`Missing character: ${f} (${f.codePointAt(0)})`)(),i[u]=o,o+=Zj)}s[0]=o,s[1]=l}function nH(t,e,r,n,i){var S;const s=Array.from(t),o=s.length,l=new Array(o),u=new Array(o),f=new Array(o),d=(r==="break-word"||r==="break-all")&&isFinite(n)&&n>0,g=[0,0],m=[0,0];let y=0,w=0,b=0;for(let E=0;E<=o;E++){const k=s[E];if((k===`
`||E===o)&&(b=E),b>w){const C=d?tH(s,r,n,i,w,b):Gj;for(let P=0;P<=C.length;P++){const M=P===0?w:C[P-1],D=P<C.length?C[P]:b;rH(s,M,D,i,l,m);for(let q=M;q<D;q++){const ee=s[q],J=((S=i[ee])==null?void 0:S.layoutOffsetY)||0;u[q]=y+m[1]/2+J,f[q]=m[0]}y=y+m[1]*e,g[0]=Math.max(g[0],m[0])}w=b}k===`
`&&(l[w]=0,u[w]=0,f[w]=0,w++)}return g[1]=y,{x:l,y:u,rowWidth:f,size:g}}function iH({value:t,length:e,stride:r,offset:n,startIndices:i,characterSet:s}){const o=t.BYTES_PER_ELEMENT,l=r?r/o:1,u=n?n/o:0,f=i[e]||Math.ceil((t.length-u)/l),d=s&&new Set,g=new Array(e);let m=t;if(l>1||u>0){const y=t.constructor;m=new y(f);for(let w=0;w<f;w++)m[w]=t[w*l+u]}for(let y=0;y<e;y++){const w=i[y],b=i[y+1]||f,S=m.subarray(w,b);g[y]=String.fromCodePoint.apply(null,S),d&&S.forEach(d.add,d)}if(d)for(const y of d)s.add(String.fromCodePoint(y));return{texts:g,characterCount:f}}class bI{constructor(e=5){this._cache={},this._order=[],this.limit=e}get(e){const r=this._cache[e];return r&&(this._deleteOrder(e),this._appendOrder(e)),r}set(e,r){this._cache[e]?(this.delete(e),this._cache[e]=r,this._appendOrder(e)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[e]=r,this._appendOrder(e))}delete(e){this._cache[e]&&(delete this._cache[e],this._deleteOrder(e))}_deleteOrder(e){const r=this._order.indexOf(e);r>=0&&this._order.splice(r,1)}_appendOrder(e){this._order.push(e)}}function sH(){const t=[];for(let e=32;e<128;e++)t.push(String.fromCharCode(e));return t}const ya={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:sH(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1},ZE=1024,GE=.9,QE=1.2,wI=3;let bh=new bI(wI);function oH(t,e){let r;typeof e=="string"?r=new Set(Array.from(e)):r=new Set(e);const n=bh.get(t);if(!n)return r;for(const i in n.mapping)r.has(i)&&r.delete(i);return r}function aH(t,e){for(let r=0;r<t.length;r++)e.data[4*r+3]=t[r]}function JE(t,e,r,n){t.font=`${n} ${r}px ${e}`,t.fillStyle="#000",t.textBaseline="alphabetic",t.textAlign="left"}function lH(t){je.assert(Number.isFinite(t)&&t>=wI,"Invalid cache limit"),bh=new bI(t)}class cH{constructor(){this.props={...ya}}get atlas(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){const{fontSize:e,buffer:r}=this.props;return(e*QE+r*2)/e}setProps(e={}){Object.assign(this.props,e),this._key=this._getKey();const r=oH(this._key,this.props.characterSet),n=bh.get(this._key);if(n&&r.size===0){this._atlas!==n&&(this._atlas=n);return}const i=this._generateFontAtlas(r,n);this._atlas=i,bh.set(this._key,i)}_generateFontAtlas(e,r){const{fontFamily:n,fontWeight:i,fontSize:s,buffer:o,sdf:l,radius:u,cutoff:f}=this.props;let d=r&&r.data;d||(d=document.createElement("canvas"),d.width=ZE);const g=d.getContext("2d",{willReadFrequently:!0});JE(g,n,s,i);const{mapping:m,canvasHeight:y,xOffset:w,yOffset:b}=Jj({getFontWidth:S=>g.measureText(S).width,fontHeight:s*QE,buffer:o,characterSet:e,maxCanvasWidth:ZE,...r&&{mapping:r.mapping,xOffset:r.xOffset,yOffset:r.yOffset}});if(d.height!==y){const S=g.getImageData(0,0,d.width,d.height);d.height=y,g.putImageData(S,0,0)}if(JE(g,n,s,i),l){const S=new Yj({fontSize:s,buffer:o,radius:u,cutoff:f,fontFamily:n,fontWeight:`${i}`});for(const E of e){const{data:k,width:C,height:P,glyphTop:M}=S.draw(E);m[E].width=C,m[E].layoutOffsetY=s*GE-M;const D=g.createImageData(C,P);aH(k,D),g.putImageData(D,m[E].x,m[E].y)}}else for(const S of e)g.fillText(S,m[S].x,m[S].y+o+s*GE);return{xOffset:w,yOffset:b,mapping:m,data:d,width:d.width,height:d.height}}_getKey(){const{fontFamily:e,fontWeight:r,fontSize:n,buffer:i,sdf:s,radius:o,cutoff:l}=this.props;return s?`${e} ${r} ${n} ${i} ${o} ${l}`:`${e} ${r} ${n} ${i}`}}const eA=`uniform textBackgroundUniforms {
  bool billboard;
  float sizeScale;
  float sizeMinPixels;
  float sizeMaxPixels;
  vec4 padding;
  highp int sizeUnits;
  bool stroked;
} textBackground;
`,uH={name:"textBackground",vs:eA,fs:eA,uniformTypes:{billboard:"f32",sizeScale:"f32",sizeMinPixels:"f32",sizeMaxPixels:"f32",padding:"vec4<f32>",sizeUnits:"i32",stroked:"f32"}},fH=`#version 300 es
#define SHADER_NAME text-background-layer-vertex-shader
in vec2 positions;
in vec3 instancePositions;
in vec3 instancePositions64Low;
in vec4 instanceRects;
in float instanceSizes;
in float instanceAngles;
in vec2 instancePixelOffsets;
in float instanceLineWidths;
in vec4 instanceFillColors;
in vec4 instanceLineColors;
in vec3 instancePickingColors;
out vec4 vFillColor;
out vec4 vLineColor;
out float vLineWidth;
out vec2 uv;
out vec2 dimensions;
vec2 rotate_by_angle(vec2 vertex, float angle) {
float angle_radian = radians(angle);
float cos_angle = cos(angle_radian);
float sin_angle = sin(angle_radian);
mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
return rotationMatrix * vertex;
}
void main(void) {
geometry.worldPosition = instancePositions;
geometry.uv = positions;
geometry.pickingColor = instancePickingColors;
uv = positions;
vLineWidth = instanceLineWidths;
float sizePixels = clamp(
project_size_to_pixel(instanceSizes * textBackground.sizeScale, textBackground.sizeUnits),
textBackground.sizeMinPixels, textBackground.sizeMaxPixels
);
dimensions = instanceRects.zw * sizePixels + textBackground.padding.xy + textBackground.padding.zw;
vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-textBackground.padding.xy, textBackground.padding.zw, positions);
pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);
pixelOffset += instancePixelOffsets;
pixelOffset.y *= -1.0;
if (textBackground.billboard)  {
gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
vec3 offset = vec3(pixelOffset, 0.0);
DECKGL_FILTER_SIZE(offset, geometry);
gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
} else {
vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
DECKGL_FILTER_SIZE(offset_common, geometry);
gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
}
vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * layer.opacity);
DECKGL_FILTER_COLOR(vFillColor, geometry);
vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * layer.opacity);
DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,hH=`#version 300 es
#define SHADER_NAME text-background-layer-fragment-shader
precision highp float;
in vec4 vFillColor;
in vec4 vLineColor;
in float vLineWidth;
in vec2 uv;
in vec2 dimensions;
out vec4 fragColor;
void main(void) {
geometry.uv = uv;
vec2 pixelPosition = uv * dimensions;
if (textBackground.stroked) {
float distToEdge = min(
min(pixelPosition.x, dimensions.x - pixelPosition.x),
min(pixelPosition.y, dimensions.y - pixelPosition.y)
);
float isBorder = smoothedge(distToEdge, vLineWidth);
fragColor = mix(vFillColor, vLineColor, isBorder);
} else {
fragColor = vFillColor;
}
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,dH={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:t=>t.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}};class mb extends zn{getShaders(){return super.getShaders({vs:fH,fs:hH,modules:[Oa,ka,uH]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:"float64",fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,type:"unorm8",accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,type:"unorm8",accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){var n;super.updateState(e);const{changeFlags:r}=e;r.extensionsChanged&&((n=this.state.model)==null||n.destroy(),this.state.model=this._getModel(),this.getAttributeManager().invalidateAll())}draw({uniforms:e}){const{billboard:r,sizeScale:n,sizeUnits:i,sizeMinPixels:s,sizeMaxPixels:o,getLineWidth:l}=this.props;let{padding:u}=this.props;u.length<4&&(u=[u[0],u[1],u[0],u[1]]);const f=this.state.model,d={billboard:r,stroked:!!l,padding:u,sizeUnits:Os[i],sizeScale:n,sizeMinPixels:s,sizeMaxPixels:o};f.shaderInputs.setProps({textBackground:d}),f.draw(this.context.renderPass)}_getModel(){const e=[0,0,1,0,0,1,1,1];return new en(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new Aa({topology:"triangle-strip",vertexCount:4,attributes:{positions:{size:2,value:new Float32Array(e)}}}),isInstanced:!0})}}mb.defaultProps=dH;mb.layerName="TextBackgroundLayer";const tA={start:1,middle:0,end:-1},rA={top:1,center:0,bottom:-1},um=[0,0,0,255],pH=1,gH={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:um},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:ya.characterSet},fontFamily:ya.fontFamily,fontWeight:ya.fontWeight,lineHeight:pH,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:um},fontSettings:{type:"object",value:{},compare:1},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:t=>t.text},getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:um},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}};class _b extends od{constructor(){super(...arguments),this.getBoundingRect=(e,r)=>{let{size:[n,i]}=this.transformParagraph(e,r);const{fontSize:s}=this.state.fontAtlasManager.props;n/=s,i/=s;const{getTextAnchor:o,getAlignmentBaseline:l}=this.props,u=tA[typeof o=="function"?o(e,r):o],f=rA[typeof l=="function"?l(e,r):l];return[(u-1)*n/2,(f-1)*i/2,n,i]},this.getIconOffsets=(e,r)=>{const{getTextAnchor:n,getAlignmentBaseline:i}=this.props,{x:s,y:o,rowWidth:l,size:[u,f]}=this.transformParagraph(e,r),d=tA[typeof n=="function"?n(e,r):n],g=rA[typeof i=="function"?i(e,r):i],m=s.length,y=new Array(m*2);let w=0;for(let b=0;b<m;b++){const S=(1-d)*(u-l[b])/2;y[w++]=(d-1)*u/2+S+s[b],y[w++]=(g-1)*f/2+o[b]}return y}}initializeState(){this.state={styleVersion:0,fontAtlasManager:new cH},this.props.maxWidth>0&&je.warn("v8.9 breaking change: TextLayer maxWidth is now relative to text size")()}updateState(e){const{props:r,oldProps:n,changeFlags:i}=e;(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getText))&&this._updateText(),(this._updateFontAtlas()||r.lineHeight!==n.lineHeight||r.wordBreak!==n.wordBreak||r.maxWidth!==n.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo({info:e}){return e.object=e.index>=0?this.props.data[e.index]:null,e}_updateFontAtlas(){const{fontSettings:e,fontFamily:r,fontWeight:n}=this.props,{fontAtlasManager:i,characterSet:s}=this.state,o={...e,characterSet:s,fontFamily:r,fontWeight:n};if(!i.mapping)return i.setProps(o),!0;for(const l in o)if(o[l]!==i.props[l])return i.setProps(o),!0;return!1}_updateText(){var u;const{data:e,characterSet:r}=this.props,n=(u=e.attributes)==null?void 0:u.getText;let{getText:i}=this.props,s=e.startIndices,o;const l=r==="auto"&&new Set;if(n&&s){const{texts:f,characterCount:d}=iH({...ArrayBuffer.isView(n)?{value:n}:n,length:e.length,startIndices:s,characterSet:l});o=d,i=(g,{index:m})=>f[m]}else{const{iterable:f,objectInfo:d}=id(e);s=[0],o=0;for(const g of f){d.index++;const m=Array.from(i(g,d)||"");l&&m.forEach(l.add,l),o+=m.length,s.push(o)}}this.setState({getText:i,startIndices:s,numInstances:o,characterSet:l||r})}transformParagraph(e,r){const{fontAtlasManager:n}=this.state,i=n.mapping,s=this.state.getText,{wordBreak:o,lineHeight:l,maxWidth:u}=this.props,f=s(e,r)||"";return nH(f,l,o,u*n.props.fontSize,i)}renderLayers(){const{startIndices:e,numInstances:r,getText:n,fontAtlasManager:{scale:i,atlas:s,mapping:o},styleVersion:l}=this.state,{data:u,_dataDiff:f,getPosition:d,getColor:g,getSize:m,getAngle:y,getPixelOffset:w,getBackgroundColor:b,getBorderColor:S,getBorderWidth:E,backgroundPadding:k,background:C,billboard:P,fontSettings:M,outlineWidth:D,outlineColor:q,sizeScale:ee,sizeUnits:J,sizeMinPixels:A,sizeMaxPixels:X,transitions:te,updateTriggers:Q}=this.props,ie=this.getSubLayerClass("characters",gb),xe=this.getSubLayerClass("background",mb);return[C&&new xe({getFillColor:b,getLineColor:S,getLineWidth:E,padding:k,getPosition:d,getSize:m,getAngle:y,getPixelOffset:w,billboard:P,sizeScale:ee,sizeUnits:J,sizeMinPixels:A,sizeMaxPixels:X,transitions:te&&{getPosition:te.getPosition,getAngle:te.getAngle,getSize:te.getSize,getFillColor:te.getBackgroundColor,getLineColor:te.getBorderColor,getLineWidth:te.getBorderWidth,getPixelOffset:te.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:Q.getPosition,getAngle:Q.getAngle,getSize:Q.getSize,getFillColor:Q.getBackgroundColor,getLineColor:Q.getBorderColor,getLineWidth:Q.getBorderWidth,getPixelOffset:Q.getPixelOffset,getBoundingRect:{getText:Q.getText,getTextAnchor:Q.getTextAnchor,getAlignmentBaseline:Q.getAlignmentBaseline,styleVersion:l}}}),{data:u.attributes&&u.attributes.background?{length:u.length,attributes:u.attributes.background}:u,_dataDiff:f,autoHighlight:!1,getBoundingRect:this.getBoundingRect}),new ie({sdf:M.sdf,smoothing:Number.isFinite(M.smoothing)?M.smoothing:ya.smoothing,outlineWidth:D/(M.radius||ya.radius),outlineColor:q,iconAtlas:s,iconMapping:o,getPosition:d,getColor:g,getSize:m,getAngle:y,getPixelOffset:w,billboard:P,sizeScale:ee*i,sizeUnits:J,sizeMinPixels:A*i,sizeMaxPixels:X*i,transitions:te&&{getPosition:te.getPosition,getAngle:te.getAngle,getColor:te.getColor,getSize:te.getSize,getPixelOffset:te.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{all:Q.getText,getPosition:Q.getPosition,getAngle:Q.getAngle,getColor:Q.getColor,getSize:Q.getSize,getPixelOffset:Q.getPixelOffset,getIconOffsets:{getTextAnchor:Q.getTextAnchor,getAlignmentBaseline:Q.getAlignmentBaseline,styleVersion:l}}}),{data:u,_dataDiff:f,startIndices:e,numInstances:r,getIconOffsets:this.getIconOffsets,getIcon:n})]}static set fontAtlasCacheLimit(e){lH(e)}}_b.defaultProps=gH;_b.layerName="TextLayer";const $f={circle:{type:hb,props:{filled:"filled",stroked:"stroked",lineWidthMaxPixels:"lineWidthMaxPixels",lineWidthMinPixels:"lineWidthMinPixels",lineWidthScale:"lineWidthScale",lineWidthUnits:"lineWidthUnits",pointRadiusMaxPixels:"radiusMaxPixels",pointRadiusMinPixels:"radiusMinPixels",pointRadiusScale:"radiusScale",pointRadiusUnits:"radiusUnits",pointAntialiasing:"antialiasing",pointBillboard:"billboard",getFillColor:"getFillColor",getLineColor:"getLineColor",getLineWidth:"getLineWidth",getPointRadius:"getRadius"}},icon:{type:ad,props:{iconAtlas:"iconAtlas",iconMapping:"iconMapping",iconSizeMaxPixels:"sizeMaxPixels",iconSizeMinPixels:"sizeMinPixels",iconSizeScale:"sizeScale",iconSizeUnits:"sizeUnits",iconAlphaCutoff:"alphaCutoff",iconBillboard:"billboard",getIcon:"getIcon",getIconAngle:"getAngle",getIconColor:"getColor",getIconPixelOffset:"getPixelOffset",getIconSize:"getSize"}},text:{type:_b,props:{textSizeMaxPixels:"sizeMaxPixels",textSizeMinPixels:"sizeMinPixels",textSizeScale:"sizeScale",textSizeUnits:"sizeUnits",textBackground:"background",textBackgroundPadding:"backgroundPadding",textFontFamily:"fontFamily",textFontWeight:"fontWeight",textLineHeight:"lineHeight",textMaxWidth:"maxWidth",textOutlineColor:"outlineColor",textOutlineWidth:"outlineWidth",textWordBreak:"wordBreak",textCharacterSet:"characterSet",textBillboard:"billboard",textFontSettings:"fontSettings",getText:"getText",getTextAngle:"getAngle",getTextColor:"getColor",getTextPixelOffset:"getPixelOffset",getTextSize:"getSize",getTextAnchor:"getTextAnchor",getTextAlignmentBaseline:"getAlignmentBaseline",getTextBackgroundColor:"getBackgroundColor",getTextBorderColor:"getBorderColor",getTextBorderWidth:"getBorderWidth"}}},Vf={type:db,props:{lineWidthUnits:"widthUnits",lineWidthScale:"widthScale",lineWidthMinPixels:"widthMinPixels",lineWidthMaxPixels:"widthMaxPixels",lineJointRounded:"jointRounded",lineCapRounded:"capRounded",lineMiterLimit:"miterLimit",lineBillboard:"billboard",getLineColor:"getColor",getLineWidth:"getWidth"}},gv={type:pb,props:{extruded:"extruded",filled:"filled",wireframe:"wireframe",elevationScale:"elevationScale",material:"material",_full3d:"_full3d",getElevation:"getElevation",getFillColor:"getFillColor",getLineColor:"getLineColor"}};function Ml({type:t,props:e}){const r={};for(const n in e)r[n]=t.defaultProps[e[n]];return r}function fm(t,e){const{transitions:r,updateTriggers:n}=t.props,i={updateTriggers:{},transitions:r&&{getPosition:r.geometry}};for(const s in e){const o=e[s];let l=t.props[s];s.startsWith("get")&&(l=t.getSubLayerAccessor(l),i.updateTriggers[o]=n[s],r&&(i.transitions[o]=r[s])),i[o]=l}return i}function mH(t){if(Array.isArray(t))return t;switch(je.assert(t.type,"GeoJSON does not have type"),t.type){case"Feature":return[t];case"FeatureCollection":return je.assert(Array.isArray(t.features),"GeoJSON does not have features array"),t.features;default:return[{geometry:t}]}}function nA(t,e,r={}){const n={pointFeatures:[],lineFeatures:[],polygonFeatures:[],polygonOutlineFeatures:[]},{startRow:i=0,endRow:s=t.length}=r;for(let o=i;o<s;o++){const l=t[o],{geometry:u}=l;if(u)if(u.type==="GeometryCollection"){je.assert(Array.isArray(u.geometries),"GeoJSON does not have geometries array");const{geometries:f}=u;for(let d=0;d<f.length;d++){const g=f[d];iA(g,n,e,l,o)}}else iA(u,n,e,l,o)}return n}function iA(t,e,r,n,i){const{type:s,coordinates:o}=t,{pointFeatures:l,lineFeatures:u,polygonFeatures:f,polygonOutlineFeatures:d}=e;if(!yH(s,o)){je.warn(`${s} coordinates are malformed`)();return}switch(s){case"Point":l.push(r({geometry:t},n,i));break;case"MultiPoint":o.forEach(g=>{l.push(r({geometry:{type:"Point",coordinates:g}},n,i))});break;case"LineString":u.push(r({geometry:t},n,i));break;case"MultiLineString":o.forEach(g=>{u.push(r({geometry:{type:"LineString",coordinates:g}},n,i))});break;case"Polygon":f.push(r({geometry:t},n,i)),o.forEach(g=>{d.push(r({geometry:{type:"LineString",coordinates:g}},n,i))});break;case"MultiPolygon":o.forEach(g=>{f.push(r({geometry:{type:"Polygon",coordinates:g}},n,i)),g.forEach(m=>{d.push(r({geometry:{type:"LineString",coordinates:m}},n,i))})});break}}const _H={Point:1,MultiPoint:2,LineString:2,MultiLineString:3,Polygon:3,MultiPolygon:4};function yH(t,e){let r=_H[t];for(je.assert(r,`Unknown GeoJSON type ${t}`);e&&--r>0;)e=e[0];return e&&Number.isFinite(e[0])}function SI(){return{points:{},lines:{},polygons:{},polygonsOutline:{}}}function mf(t){return t.geometry.coordinates}function vH(t,e){const r=SI(),{pointFeatures:n,lineFeatures:i,polygonFeatures:s,polygonOutlineFeatures:o}=t;return r.points.data=n,r.points._dataDiff=e.pointFeatures&&(()=>e.pointFeatures),r.points.getPosition=mf,r.lines.data=i,r.lines._dataDiff=e.lineFeatures&&(()=>e.lineFeatures),r.lines.getPath=mf,r.polygons.data=s,r.polygons._dataDiff=e.polygonFeatures&&(()=>e.polygonFeatures),r.polygons.getPolygon=mf,r.polygonsOutline.data=o,r.polygonsOutline._dataDiff=e.polygonOutlineFeatures&&(()=>e.polygonOutlineFeatures),r.polygonsOutline.getPath=mf,r}function bH(t,e){const r=SI(),{points:n,lines:i,polygons:s}=t,o=Wj(t,e);return r.points.data={length:n.positions.value.length/n.positions.size,attributes:{...n.attributes,getPosition:n.positions,instancePickingColors:{size:4,value:o.points}},properties:n.properties,numericProps:n.numericProps,featureIds:n.featureIds},r.lines.data={length:i.pathIndices.value.length-1,startIndices:i.pathIndices.value,attributes:{...i.attributes,getPath:i.positions,instancePickingColors:{size:4,value:o.lines}},properties:i.properties,numericProps:i.numericProps,featureIds:i.featureIds},r.lines._pathType="open",r.polygons.data={length:s.polygonIndices.value.length-1,startIndices:s.polygonIndices.value,attributes:{...s.attributes,getPolygon:s.positions,pickingColors:{size:4,value:o.polygons}},properties:s.properties,numericProps:s.numericProps,featureIds:s.featureIds},r.polygons._normalize=!1,s.triangles&&(r.polygons.data.attributes.indices=s.triangles.value),r.polygonsOutline.data={length:s.primitivePolygonIndices.value.length-1,startIndices:s.primitivePolygonIndices.value,attributes:{...s.attributes,getPath:s.positions,instancePickingColors:{size:4,value:o.polygons}},properties:s.properties,numericProps:s.numericProps,featureIds:s.featureIds},r.polygonsOutline._pathType="open",r}const wH=["points","linestrings","polygons"],SH={...Ml($f.circle),...Ml($f.icon),...Ml($f.text),...Ml(Vf),...Ml(gv),stroked:!0,filled:!0,extruded:!1,wireframe:!1,_full3d:!1,iconAtlas:{type:"object",value:null},iconMapping:{type:"object",value:{}},getIcon:{type:"accessor",value:t=>t.properties.icon},getText:{type:"accessor",value:t=>t.properties.text},pointType:"circle",getRadius:{deprecatedFor:"getPointRadius"}};class yb extends od{initializeState(){this.state={layerProps:{},features:{},featuresDiff:{}}}updateState({props:e,changeFlags:r}){if(!r.dataChanged)return;const{data:n}=this.props,i=n&&"points"in n&&"polygons"in n&&"lines"in n;this.setState({binary:i}),i?this._updateStateBinary({props:e,changeFlags:r}):this._updateStateJSON({props:e,changeFlags:r})}_updateStateBinary({props:e,changeFlags:r}){const n=bH(e.data,this.encodePickingColor);this.setState({layerProps:n})}_updateStateJSON({props:e,changeFlags:r}){const n=mH(e.data),i=this.getSubLayerRow.bind(this);let s={};const o={};if(Array.isArray(r.dataChanged)){const u=this.state.features;for(const f in u)s[f]=u[f].slice(),o[f]=[];for(const f of r.dataChanged){const d=nA(n,i,f);for(const g in u)o[g].push(Vj({data:s[g],getIndex:m=>m.__source.index,dataRange:f,replace:d[g]}))}}else s=nA(n,i);const l=vH(s,o);this.setState({features:s,featuresDiff:o,layerProps:l})}getPickingInfo(e){const r=super.getPickingInfo(e),{index:n,sourceLayer:i}=r;return r.featureType=wH.find(s=>i.id.startsWith(`${this.id}-${s}-`)),n>=0&&i.id.startsWith(`${this.id}-points-text`)&&this.state.binary&&(r.index=this.props.data.points.globalFeatureIds.value[n]),r}_updateAutoHighlight(e){const r=`${this.id}-points-`,n=e.featureType==="points";for(const i of this.getSubLayers())i.id.startsWith(r)===n&&i.updateAutoHighlight(e)}_renderPolygonLayer(){var o;const{extruded:e,wireframe:r}=this.props,{layerProps:n}=this.state,i="polygons-fill",s=this.shouldRenderSubLayer(i,(o=n.polygons)==null?void 0:o.data)&&this.getSubLayerClass(i,gv.type);if(s){const l=fm(this,gv.props),u=e&&r;return u||delete l.getLineColor,l.updateTriggers.lineColors=u,new s(l,this.getSubLayerProps({id:i,updateTriggers:l.updateTriggers}),n.polygons)}return null}_renderLineLayers(){var u,f;const{extruded:e,stroked:r}=this.props,{layerProps:n}=this.state,i="polygons-stroke",s="linestrings",o=!e&&r&&this.shouldRenderSubLayer(i,(u=n.polygonsOutline)==null?void 0:u.data)&&this.getSubLayerClass(i,Vf.type),l=this.shouldRenderSubLayer(s,(f=n.lines)==null?void 0:f.data)&&this.getSubLayerClass(s,Vf.type);if(o||l){const d=fm(this,Vf.props);return[o&&new o(d,this.getSubLayerProps({id:i,updateTriggers:d.updateTriggers}),n.polygonsOutline),l&&new l(d,this.getSubLayerProps({id:s,updateTriggers:d.updateTriggers}),n.lines)]}return null}_renderPointLayers(){var l;const{pointType:e}=this.props,{layerProps:r,binary:n}=this.state;let{highlightedObjectIndex:i}=this.props;!n&&Number.isFinite(i)&&(i=r.points.data.findIndex(u=>u.__source.index===i));const s=new Set(e.split("+")),o=[];for(const u of s){const f=`points-${u}`,d=$f[u],g=d&&this.shouldRenderSubLayer(f,(l=r.points)==null?void 0:l.data)&&this.getSubLayerClass(f,d.type);if(g){const m=fm(this,d.props);let y=r.points;if(u==="text"&&n){const{instancePickingColors:w,...b}=y.data.attributes;y={...y,data:{...y.data,attributes:b}}}o.push(new g(m,this.getSubLayerProps({id:f,updateTriggers:m.updateTriggers,highlightedObjectIndex:i}),y))}}return o}renderLayers(){const{extruded:e}=this.props,r=this._renderPolygonLayer(),n=this._renderLineLayers(),i=this._renderPointLayers();return[!e&&r,n,i,e&&r]}getSubLayerAccessor(e){const{binary:r}=this.state;return!r||typeof e!="function"?super.getSubLayerAccessor(e):(n,i)=>{const{data:s,index:o}=i,l=jj(s,o);return e(l,i)}}}yb.layerName="GeoJsonLayer";yb.defaultProps=SH;class xH{constructor(e){this.index=e,this.isVisible=!1,this.isSelected=!1,this.parent=null,this.children=[],this.content=null,this._loader=void 0,this._abortController=null,this._loaderId=0,this._isLoaded=!1,this._isCancelled=!1,this._needsReload=!1}get bbox(){return this._bbox}set bbox(e){this._bbox||(this._bbox=e,"west"in e?this.boundingBox=[[e.west,e.south],[e.east,e.north]]:this.boundingBox=[[e.left,e.top],[e.right,e.bottom]])}get data(){return this.isLoading&&this._loader?this._loader.then(()=>this.data):this.content}get isLoaded(){return this._isLoaded&&!this._needsReload}get isLoading(){return!!this._loader&&!this._isCancelled}get needsReload(){return this._needsReload||this._isCancelled}get byteLength(){const e=this.content?this.content.byteLength:0;return Number.isFinite(e)||console.error("byteLength not defined in tile data"),e}async _loadData({getData:e,requestScheduler:r,onLoad:n,onError:i}){const{index:s,id:o,bbox:l,userData:u,zoom:f}=this,d=this._loaderId;this._abortController=new AbortController;const{signal:g}=this._abortController,m=await r.scheduleRequest(this,b=>b.isSelected?1:-1);if(!m){this._isCancelled=!0;return}if(this._isCancelled){m.done();return}let y=null,w;try{y=await e({index:s,id:o,bbox:l,userData:u,zoom:f,signal:g})}catch(b){w=b||!0}finally{m.done()}if(d===this._loaderId){if(this._loader=void 0,this.content=y,this._isCancelled&&!y){this._isLoaded=!1;return}this._isLoaded=!0,this._isCancelled=!1,w?i(w,this):n(this)}}loadData(e){return this._isLoaded=!1,this._isCancelled=!1,this._needsReload=!1,this._loaderId++,this._loader=this._loadData(e),this._loader}setNeedsReload(){this.isLoading&&(this.abort(),this._loader=void 0),this._needsReload=!0}abort(){var e;this.isLoaded||(this._isCancelled=!0,(e=this._abortController)==null||e.abort())}}const pr={OUTSIDE:-1,INTERSECTING:0,INSIDE:1},sA=new ye,TH=new ye;class vb{constructor(e=[0,0,0],r=[0,0,0],n){n=n||sA.copy(e).add(r).scale(.5),this.center=new ye(n),this.halfDiagonal=new ye(r).subtract(this.center),this.minimum=new ye(e),this.maximum=new ye(r)}clone(){return new vb(this.minimum,this.maximum,this.center)}equals(e){return this===e||!!e&&this.minimum.equals(e.minimum)&&this.maximum.equals(e.maximum)}transform(e){return this.center.transformAsPoint(e),this.halfDiagonal.transform(e),this.minimum.transform(e),this.maximum.transform(e),this}intersectPlane(e){const{halfDiagonal:r}=this,n=TH.from(e.normal),i=r.x*Math.abs(n.x)+r.y*Math.abs(n.y)+r.z*Math.abs(n.z),s=this.center.dot(n)+e.distance;return s-i>0?pr.INSIDE:s+i<0?pr.OUTSIDE:pr.INTERSECTING}distanceTo(e){return Math.sqrt(this.distanceSquaredTo(e))}distanceSquaredTo(e){const r=sA.from(e).subtract(this.center),{halfDiagonal:n}=this;let i=0,s;return s=Math.abs(r.x)-n.x,s>0&&(i+=s*s),s=Math.abs(r.y)-n.y,s>0&&(i+=s*s),s=Math.abs(r.z)-n.z,s>0&&(i+=s*s),i}}const Il=new ye,oA=new ye;class bb{constructor(e=[0,0,0],r=0){this.radius=-0,this.center=new ye,this.fromCenterRadius(e,r)}fromCenterRadius(e,r){return this.center.from(e),this.radius=r,this}fromCornerPoints(e,r){return r=Il.from(r),this.center=new ye().from(e).add(r).scale(.5),this.radius=this.center.distance(r),this}equals(e){return this===e||!!e&&this.center.equals(e.center)&&this.radius===e.radius}clone(){return new bb(this.center,this.radius)}union(e){const r=this.center,n=this.radius,i=e.center,s=e.radius,o=Il.copy(i).subtract(r),l=o.magnitude();if(n>=l+s)return this.clone();if(s>=l+n)return e.clone();const u=(n+l+s)*.5;return oA.copy(o).scale((-n+u)/l).add(r),this.center.copy(oA),this.radius=u,this}expand(e){const n=Il.from(e).subtract(this.center).magnitude();return n>this.radius&&(this.radius=n),this}transform(e){this.center.transform(e);const r=W5(Il,e);return this.radius=Math.max(r[0],Math.max(r[1],r[2]))*this.radius,this}distanceSquaredTo(e){const r=this.distanceTo(e);return r*r}distanceTo(e){const n=Il.from(e).subtract(this.center);return Math.max(0,n.len()-this.radius)}intersectPlane(e){const r=this.center,n=this.radius,s=e.normal.dot(r)+e.distance;return s<-n?pr.OUTSIDE:s<n?pr.INTERSECTING:pr.INSIDE}}const EH=new ye,AH=new ye,_f=new ye,yf=new ye,vf=new ye,CH=new ye,RH=new ye,Zn={COLUMN0ROW0:0,COLUMN0ROW1:1,COLUMN0ROW2:2,COLUMN1ROW0:3,COLUMN1ROW1:4,COLUMN1ROW2:5,COLUMN2ROW0:6,COLUMN2ROW1:7,COLUMN2ROW2:8};class wb{constructor(e=[0,0,0],r=[0,0,0,0,0,0,0,0,0]){this.center=new ye().from(e),this.halfAxes=new sr(r)}get halfSize(){const e=this.halfAxes.getColumn(0),r=this.halfAxes.getColumn(1),n=this.halfAxes.getColumn(2);return[new ye(e).len(),new ye(r).len(),new ye(n).len()]}get quaternion(){const e=this.halfAxes.getColumn(0),r=this.halfAxes.getColumn(1),n=this.halfAxes.getColumn(2),i=new ye(e).normalize(),s=new ye(r).normalize(),o=new ye(n).normalize();return new _T().fromMatrix3(new sr([...i,...s,...o]))}fromCenterHalfSizeQuaternion(e,r,n){const i=new _T(n),s=new sr().fromQuaternion(i);return s[0]=s[0]*r[0],s[1]=s[1]*r[0],s[2]=s[2]*r[0],s[3]=s[3]*r[1],s[4]=s[4]*r[1],s[5]=s[5]*r[1],s[6]=s[6]*r[2],s[7]=s[7]*r[2],s[8]=s[8]*r[2],this.center=new ye().from(e),this.halfAxes=s,this}clone(){return new wb(this.center,this.halfAxes)}equals(e){return this===e||!!e&&this.center.equals(e.center)&&this.halfAxes.equals(e.halfAxes)}getBoundingSphere(e=new bb){const r=this.halfAxes,n=r.getColumn(0,_f),i=r.getColumn(1,yf),s=r.getColumn(2,vf),o=EH.copy(n).add(i).add(s);return e.center.copy(this.center),e.radius=o.magnitude(),e}intersectPlane(e){const r=this.center,n=e.normal,i=this.halfAxes,s=n.x,o=n.y,l=n.z,u=Math.abs(s*i[Zn.COLUMN0ROW0]+o*i[Zn.COLUMN0ROW1]+l*i[Zn.COLUMN0ROW2])+Math.abs(s*i[Zn.COLUMN1ROW0]+o*i[Zn.COLUMN1ROW1]+l*i[Zn.COLUMN1ROW2])+Math.abs(s*i[Zn.COLUMN2ROW0]+o*i[Zn.COLUMN2ROW1]+l*i[Zn.COLUMN2ROW2]),f=n.dot(r)+e.distance;return f<=-u?pr.OUTSIDE:f>=u?pr.INSIDE:pr.INTERSECTING}distanceTo(e){return Math.sqrt(this.distanceSquaredTo(e))}distanceSquaredTo(e){const r=AH.from(e).subtract(this.center),n=this.halfAxes,i=n.getColumn(0,_f),s=n.getColumn(1,yf),o=n.getColumn(2,vf),l=i.magnitude(),u=s.magnitude(),f=o.magnitude();i.normalize(),s.normalize(),o.normalize();let d=0,g;return g=Math.abs(r.dot(i))-l,g>0&&(d+=g*g),g=Math.abs(r.dot(s))-u,g>0&&(d+=g*g),g=Math.abs(r.dot(o))-f,g>0&&(d+=g*g),d}computePlaneDistances(e,r,n=[-0,-0]){let i=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;const o=this.center,l=this.halfAxes,u=l.getColumn(0,_f),f=l.getColumn(1,yf),d=l.getColumn(2,vf),g=CH.copy(u).add(f).add(d).add(o),m=RH.copy(g).subtract(e);let y=r.dot(m);return i=Math.min(y,i),s=Math.max(y,s),g.copy(o).add(u).add(f).subtract(d),m.copy(g).subtract(e),y=r.dot(m),i=Math.min(y,i),s=Math.max(y,s),g.copy(o).add(u).subtract(f).add(d),m.copy(g).subtract(e),y=r.dot(m),i=Math.min(y,i),s=Math.max(y,s),g.copy(o).add(u).subtract(f).subtract(d),m.copy(g).subtract(e),y=r.dot(m),i=Math.min(y,i),s=Math.max(y,s),o.copy(g).subtract(u).add(f).add(d),m.copy(g).subtract(e),y=r.dot(m),i=Math.min(y,i),s=Math.max(y,s),o.copy(g).subtract(u).add(f).subtract(d),m.copy(g).subtract(e),y=r.dot(m),i=Math.min(y,i),s=Math.max(y,s),o.copy(g).subtract(u).subtract(f).add(d),m.copy(g).subtract(e),y=r.dot(m),i=Math.min(y,i),s=Math.max(y,s),o.copy(g).subtract(u).subtract(f).subtract(d),m.copy(g).subtract(e),y=r.dot(m),i=Math.min(y,i),s=Math.max(y,s),n[0]=i,n[1]=s,n}transform(e){this.center.transformAsPoint(e);const r=this.halfAxes.getColumn(0,_f);r.transformAsPoint(e);const n=this.halfAxes.getColumn(1,yf);n.transformAsPoint(e);const i=this.halfAxes.getColumn(2,vf);return i.transformAsPoint(e),this.halfAxes=new sr([...r,...n,...i]),this}getTransform(){throw new Error("not implemented")}}const aA=new ye,lA=new ye;class gc{constructor(e=[0,0,1],r=0){this.normal=new ye,this.distance=-0,this.fromNormalDistance(e,r)}fromNormalDistance(e,r){return cc(Number.isFinite(r)),this.normal.from(e).normalize(),this.distance=r,this}fromPointNormal(e,r){e=aA.from(e),this.normal.from(r).normalize();const n=-this.normal.dot(e);return this.distance=n,this}fromCoefficients(e,r,n,i){return this.normal.set(e,r,n),cc(ri(this.normal.len(),1)),this.distance=i,this}clone(){return new gc(this.normal,this.distance)}equals(e){return ri(this.distance,e.distance)&&ri(this.normal,e.normal)}getPointDistance(e){return this.normal.dot(e)+this.distance}transform(e){const r=lA.copy(this.normal).transformAsVector(e).normalize(),n=this.normal.scale(-this.distance).transform(e);return this.fromPointNormal(n,r)}projectPointOntoPlane(e,r=[0,0,0]){const n=aA.from(e),i=this.getPointDistance(n),s=lA.copy(this.normal).scale(i);return n.subtract(s).to(r)}}const cA=[new ye([1,0,0]),new ye([0,1,0]),new ye([0,0,1])],uA=new ye,PH=new ye;class ti{constructor(e=[]){this.planes=e}fromBoundingSphere(e){this.planes.length=2*cA.length;const r=e.center,n=e.radius;let i=0;for(const s of cA){let o=this.planes[i],l=this.planes[i+1];o||(o=this.planes[i]=new gc),l||(l=this.planes[i+1]=new gc);const u=uA.copy(s).scale(-n).add(r);o.fromPointNormal(u,s);const f=uA.copy(s).scale(n).add(r),d=PH.copy(s).negate();l.fromPointNormal(f,d),i+=2}return this}computeVisibility(e){let r=pr.INSIDE;for(const n of this.planes)switch(e.intersectPlane(n)){case pr.OUTSIDE:return pr.OUTSIDE;case pr.INTERSECTING:r=pr.INTERSECTING;break}return r}computeVisibilityWithPlaneMask(e,r){if(cc(Number.isFinite(r),"parentPlaneMask is required."),r===ti.MASK_OUTSIDE||r===ti.MASK_INSIDE)return r;let n=ti.MASK_INSIDE;const i=this.planes;for(let s=0;s<this.planes.length;++s){const o=s<31?1<<s:0;if(s<31&&!(r&o))continue;const l=i[s],u=e.intersectPlane(l);if(u===pr.OUTSIDE)return ti.MASK_OUTSIDE;u===pr.INTERSECTING&&(n|=o)}return n}}ti.MASK_OUTSIDE=4294967295;ti.MASK_INSIDE=0;ti.MASK_INDETERMINATE=2147483647;new ye;new ye;new ye;new ye;new ye;new ye;new ye;new ye;new ye;new ye;new ye;new ye;new ye;new ye;new ye;new ye;new ye;const On=new sr,MH=new sr,IH=new sr,bf=new sr,fA=new sr;function OH(t,e={}){const r=PL,n=10;let i=0,s=0;const o=MH,l=IH;o.identity(),l.copy(t);const u=r*kH(l);for(;s<n&&NH(l)>u;)FH(l,bf),fA.copy(bf).transpose(),l.multiplyRight(bf),l.multiplyLeft(fA),o.multiplyRight(bf),++i>2&&(++s,i=0);return e.unitary=o.toTarget(e.unitary),e.diagonal=l.toTarget(e.diagonal),e}function kH(t){let e=0;for(let r=0;r<9;++r){const n=t[r];e+=n*n}return Math.sqrt(e)}const mv=[1,0,0],_v=[2,2,1];function NH(t){let e=0;for(let r=0;r<3;++r){const n=t[On.getElementIndex(_v[r],mv[r])];e+=2*n*n}return Math.sqrt(e)}function FH(t,e){const r=RL;let n=0,i=1;for(let f=0;f<3;++f){const d=Math.abs(t[On.getElementIndex(_v[f],mv[f])]);d>n&&(i=f,n=d)}const s=mv[i],o=_v[i];let l=1,u=0;if(Math.abs(t[On.getElementIndex(o,s)])>r){const f=t[On.getElementIndex(o,o)],d=t[On.getElementIndex(s,s)],g=t[On.getElementIndex(o,s)],m=(f-d)/2/g;let y;m<0?y=-1/(-m+Math.sqrt(1+m*m)):y=1/(m+Math.sqrt(1+m*m)),l=1/Math.sqrt(1+y*y),u=y*l}return sr.IDENTITY.to(e),e[On.getElementIndex(s,s)]=e[On.getElementIndex(o,o)]=l,e[On.getElementIndex(o,s)]=u,e[On.getElementIndex(s,o)]=-u,e}const Ni=new ye,DH=new ye,BH=new ye,LH=new ye,UH=new ye,zH=new sr,$H={diagonal:new sr,unitary:new sr};function VH(t,e=new wb){if(!t||t.length===0)return e.halfAxes=new sr([0,0,0,0,0,0,0,0,0]),e.center=new ye,e;const r=t.length,n=new ye(0,0,0);for(const J of t)n.add(J);const i=1/r;n.multiplyByScalar(i);let s=0,o=0,l=0,u=0,f=0,d=0;for(const J of t){const A=Ni.copy(J).subtract(n);s+=A.x*A.x,o+=A.x*A.y,l+=A.x*A.z,u+=A.y*A.y,f+=A.y*A.z,d+=A.z*A.z}s*=i,o*=i,l*=i,u*=i,f*=i,d*=i;const g=zH;g[0]=s,g[1]=o,g[2]=l,g[3]=o,g[4]=u,g[5]=f,g[6]=l,g[7]=f,g[8]=d;const{unitary:m}=OH(g,$H),y=e.halfAxes.copy(m);let w=y.getColumn(0,BH),b=y.getColumn(1,LH),S=y.getColumn(2,UH),E=-Number.MAX_VALUE,k=-Number.MAX_VALUE,C=-Number.MAX_VALUE,P=Number.MAX_VALUE,M=Number.MAX_VALUE,D=Number.MAX_VALUE;for(const J of t)Ni.copy(J),E=Math.max(Ni.dot(w),E),k=Math.max(Ni.dot(b),k),C=Math.max(Ni.dot(S),C),P=Math.min(Ni.dot(w),P),M=Math.min(Ni.dot(b),M),D=Math.min(Ni.dot(S),D);w=w.multiplyByScalar(.5*(P+E)),b=b.multiplyByScalar(.5*(M+k)),S=S.multiplyByScalar(.5*(D+C)),e.center.copy(w).add(b).add(S);const q=DH.set(E-P,k-M,C-D).multiplyByScalar(.5),ee=new sr([q[0],0,0,0,q[1],0,0,0,q[2]]);return e.halfAxes.multiplyRight(ee),e}const da=512,jH=3,xI=[[.5,.5],[0,0],[0,1],[1,0],[1,1]],TI=xI.concat([[0,.5],[.5,0],[1,.5],[.5,1]]),HH=TI.concat([[.25,.5],[.75,.5]]);class pa{constructor(e,r,n){this.x=e,this.y=r,this.z=n}get children(){if(!this._children){const e=this.x*2,r=this.y*2,n=this.z+1;this._children=[new pa(e,r,n),new pa(e,r+1,n),new pa(e+1,r,n),new pa(e+1,r+1,n)]}return this._children}update(e){const{viewport:r,cullingVolume:n,elevationBounds:i,minZ:s,maxZ:o,bounds:l,offset:u,project:f}=e,d=this.getBoundingVolume(i,u,f);if(l&&!this.insideBounds(l)||n.computeVisibility(d)<0)return!1;if(!this.childVisible){let{z:m}=this;if(m<o&&m>=s){const y=d.distanceTo(r.cameraPosition)*r.scale/r.height;m+=Math.floor(Math.log2(y))}if(m>=o)return this.selected=!0,!0}this.selected=!1,this.childVisible=!0;for(const m of this.children)m.update(e);return!0}getSelected(e=[]){if(this.selected&&e.push(this),this._children)for(const r of this._children)r.getSelected(e);return e}insideBounds([e,r,n,i]){const s=Math.pow(2,this.z),o=da/s;return this.x*o<n&&this.y*o<i&&(this.x+1)*o>e&&(this.y+1)*o>r}getBoundingVolume(e,r,n){if(n){const u=this.z<1?HH:this.z<2?TI:xI,f=[];for(const d of u){const g=vv(this.x+d[0],this.y+d[1],this.z);g[2]=e[0],f.push(n(g)),e[0]!==e[1]&&(g[2]=e[1],f.push(n(g)))}return VH(f)}const i=Math.pow(2,this.z),s=da/i,o=this.x*s+r*da,l=da-(this.y+1)*s;return new vb([o,l,e[0]],[o+s,l+s,e[1]])}}function WH(t,e,r,n){const i=t instanceof AV&&t.resolution?t.projectPosition:null,s=Object.values(t.getFrustumPlanes()).map(({normal:y,distance:w})=>new gc(y.clone().negate(),w)),o=new ti(s),l=t.distanceScales.unitsPerMeter[2],u=r&&r[0]*l||0,f=r&&r[1]*l||0,d=t instanceof qi&&t.pitch<=60?e:0;if(n){const[y,w,b,S]=n,E=Wi([y,S]),k=Wi([b,w]);n=[E[0],da-E[1],k[0],da-k[1]]}const g=new pa(0,0,0),m={viewport:t,project:i,cullingVolume:o,elevationBounds:[u,f],minZ:d,maxZ:e,bounds:n,offset:0};if(g.update(m),t instanceof qi&&t.subViewports&&t.subViewports.length>1){for(m.offset=-1;g.update(m)&&!(--m.offset<-3););for(m.offset=1;g.update(m)&&!(++m.offset>jH););}return g.getSelected()}const ii=512,qH=[-1/0,-1/0,1/0,1/0],XH={type:"object",value:null,validate:(t,e)=>e.optional&&t===null||typeof t=="string"||Array.isArray(t)&&t.every(r=>typeof r=="string"),equal:(t,e)=>{if(t===e)return!0;if(!Array.isArray(t)||!Array.isArray(e))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}};function EI(t,e){const r=[e.transformAsPoint([t[0],t[1]]),e.transformAsPoint([t[2],t[1]]),e.transformAsPoint([t[0],t[3]]),e.transformAsPoint([t[2],t[3]])];return[Math.min(...r.map(i=>i[0])),Math.min(...r.map(i=>i[1])),Math.max(...r.map(i=>i[0])),Math.max(...r.map(i=>i[1]))]}function KH(t){return Math.abs(t.split("").reduce((e,r)=>(e<<5)-e+r.charCodeAt(0)|0,0))}function YH(t,e){if(!t||!t.length)return null;const{index:r,id:n}=e;if(Array.isArray(t)){const s=KH(n)%t.length;t=t[s]}let i=t;for(const s of Object.keys(r)){const o=new RegExp(`{${s}}`,"g");i=i.replace(o,String(r[s]))}return Number.isInteger(r.y)&&Number.isInteger(r.z)&&(i=i.replace(/\{-y\}/g,String(Math.pow(2,r.z)-r.y-1))),i}function ZH(t,e,r){let n;return n=t.getBounds(),t.isGeospatial?[Math.max(n[0],r[0]),Math.max(n[1],r[1]),Math.min(n[2],r[2]),Math.min(n[3],r[3])]:[Math.max(Math.min(n[0],r[2]),r[0]),Math.max(Math.min(n[1],r[3]),r[1]),Math.min(Math.max(n[2],r[0]),r[2]),Math.min(Math.max(n[3],r[1]),r[3])]}function GH({viewport:t,z:e,cullRect:r}){return(t.subViewports||[t]).map(i=>yv(i,e||0,r))}function yv(t,e,r){if(!Array.isArray(e)){const s=r.x-t.x,o=r.y-t.y,{width:l,height:u}=r,f={targetZ:e},d=t.unproject([s,o],f),g=t.unproject([s+l,o],f),m=t.unproject([s,o+u],f),y=t.unproject([s+l,o+u],f);return[Math.min(d[0],g[0],m[0],y[0]),Math.min(d[1],g[1],m[1],y[1]),Math.max(d[0],g[0],m[0],y[0]),Math.max(d[1],g[1],m[1],y[1])]}const n=yv(t,e[0],r),i=yv(t,e[1],r);return[Math.min(n[0],i[0]),Math.min(n[1],i[1]),Math.max(n[2],i[2]),Math.max(n[3],i[3])]}function QH(t,e,r){return r?EI(t,r).map(i=>i*e/ii):t.map(n=>n*e/ii)}function Sb(t,e){return Math.pow(2,t)*ii/e}function vv(t,e,r){const n=Sb(r,ii),i=t/n*360-180,s=Math.PI-2*Math.PI*e/n,o=180/Math.PI*Math.atan(.5*(Math.exp(s)-Math.exp(-s)));return[i,o]}function hA(t,e,r,n){const i=Sb(r,n);return[t/i*ii,e/i*ii]}function JH(t,e,r,n,i=ii){if(t.isGeospatial){const[f,d]=vv(e,r,n),[g,m]=vv(e+1,r+1,n);return{west:f,north:d,east:g,south:m}}const[s,o]=hA(e,r,n,i),[l,u]=hA(e+1,r+1,n,i);return{left:s,top:o,right:l,bottom:u}}function eW(t,e,r,n,i){const s=ZH(t,null,n),o=Sb(e,r),[l,u,f,d]=QH(s,o,i),g=[];for(let m=Math.floor(l);m<f;m++)for(let y=Math.floor(u);y<d;y++)g.push({x:m,y,z:e});return g}function tW({viewport:t,maxZoom:e,minZoom:r,zRange:n,extent:i,tileSize:s=ii,modelMatrix:o,modelMatrixInverse:l,zoomOffset:u=0}){let f=t.isGeospatial?Math.round(t.zoom+Math.log2(ii/s))+u:Math.ceil(t.zoom)+u;if(typeof r=="number"&&Number.isFinite(r)&&f<r){if(!i)return[];f=r}typeof e=="number"&&Number.isFinite(e)&&f>e&&(f=e);let d=i;return o&&l&&i&&!t.isGeospatial&&(d=EI(i,o)),t.isGeospatial?WH(t,f,n,i):eW(t,f,s,d||qH,l)}function rW(t){let e={},r;return n=>{for(const i in n)if(!nW(n[i],e[i])){r=t(n),e=n;break}return r}}function nW(t,e){if(t===e)return!0;if(Array.isArray(t)){const r=t.length;if(!e||e.length!==r)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}return!1}const dA=1,ld=2,iW="never",sW="no-overlap",xb="best-available",oW=5,aW={[xb]:uW,[sW]:fW,[iW]:()=>{}},lW={extent:null,tileSize:512,maxZoom:null,minZoom:null,maxCacheSize:null,maxCacheByteSize:null,refinementStrategy:"best-available",zRange:null,maxRequests:6,debounceTime:0,zoomOffset:0,onTileLoad:()=>{},onTileUnload:()=>{},onTileError:()=>{}};class cW{constructor(e){this._getCullBounds=rW(GH),this.opts={...lW,...e},this.setOptions(this.opts),this.onTileLoad=r=>{var n,i;(i=(n=this.opts).onTileLoad)==null||i.call(n,r),this.opts.maxCacheByteSize!==null&&(this._cacheByteSize+=r.byteLength,this._resizeCache())},this._requestScheduler=new l4({throttleRequests:this.opts.maxRequests>0||this.opts.debounceTime>0,maxRequests:this.opts.maxRequests,debounceTime:this.opts.debounceTime}),this._cache=new Map,this._tiles=[],this._dirty=!1,this._cacheByteSize=0,this._viewport=null,this._zRange=null,this._selectedTiles=null,this._frameNumber=0,this._modelMatrix=new or,this._modelMatrixInverse=new or}get tiles(){return this._tiles}get selectedTiles(){return this._selectedTiles}get isLoaded(){return this._selectedTiles!==null&&this._selectedTiles.every(e=>e.isLoaded)}get needsReload(){return this._selectedTiles!==null&&this._selectedTiles.some(e=>e.needsReload)}setOptions(e){Object.assign(this.opts,e),Number.isFinite(e.maxZoom)&&(this._maxZoom=Math.floor(e.maxZoom)),Number.isFinite(e.minZoom)&&(this._minZoom=Math.ceil(e.minZoom))}finalize(){for(const e of this._cache.values())e.isLoading&&e.abort();this._cache.clear(),this._tiles=[],this._selectedTiles=null}reloadAll(){for(const e of this._cache.keys()){const r=this._cache.get(e);!this._selectedTiles||!this._selectedTiles.includes(r)?this._cache.delete(e):r.setNeedsReload()}}update(e,{zRange:r,modelMatrix:n}={zRange:null,modelMatrix:null}){const i=n?new or(n):new or,s=!i.equals(this._modelMatrix);if(!this._viewport||!e.equals(this._viewport)||!ri(this._zRange,r)||s){s&&(this._modelMatrixInverse=i.clone().invert(),this._modelMatrix=i),this._viewport=e,this._zRange=r;const l=this.getTileIndices({viewport:e,maxZoom:this._maxZoom,minZoom:this._minZoom,zRange:r,modelMatrix:this._modelMatrix,modelMatrixInverse:this._modelMatrixInverse});this._selectedTiles=l.map(u=>this._getTile(u,!0)),this._dirty&&this._rebuildTree()}else this.needsReload&&(this._selectedTiles=this._selectedTiles.map(l=>this._getTile(l.index,!0)));const o=this.updateTileStates();return this._pruneRequests(),this._dirty&&this._resizeCache(),o&&this._frameNumber++,this._frameNumber}isTileVisible(e,r){if(!e.isVisible)return!1;if(r&&this._viewport){const n=this._getCullBounds({viewport:this._viewport,z:this._zRange,cullRect:r}),{bbox:i}=e;for(const[s,o,l,u]of n){let f;if("west"in i)f=i.west<l&&i.east>s&&i.south<u&&i.north>o;else{const d=Math.min(i.top,i.bottom),g=Math.max(i.top,i.bottom);f=i.left<l&&i.right>s&&d<u&&g>o}if(f)return!0}return!1}return!0}getTileIndices({viewport:e,maxZoom:r,minZoom:n,zRange:i,modelMatrix:s,modelMatrixInverse:o}){const{tileSize:l,extent:u,zoomOffset:f}=this.opts;return tW({viewport:e,maxZoom:r,minZoom:n,zRange:i,tileSize:l,extent:u,modelMatrix:s,modelMatrixInverse:o,zoomOffset:f})}getTileId(e){return`${e.x}-${e.y}-${e.z}`}getTileZoom(e){return e.z}getTileMetadata(e){const{tileSize:r}=this.opts;return{bbox:JH(this._viewport,e.x,e.y,e.z,r)}}getParentIndex(e){const r=Math.floor(e.x/2),n=Math.floor(e.y/2),i=e.z-1;return{x:r,y:n,z:i}}updateTileStates(){const e=this.opts.refinementStrategy||xb,r=new Array(this._cache.size);let n=0;for(const i of this._cache.values())r[n++]=i.isVisible,i.isSelected=!1,i.isVisible=!1;for(const i of this._selectedTiles)i.isSelected=!0,i.isVisible=!0;(typeof e=="function"?e:aW[e])(Array.from(this._cache.values())),n=0;for(const i of this._cache.values())if(r[n++]!==i.isVisible)return!0;return!1}_pruneRequests(){const{maxRequests:e=0}=this.opts,r=[];let n=0;for(const i of this._cache.values())i.isLoading&&(n++,!i.isSelected&&!i.isVisible&&r.push(i));for(;e>0&&n>e&&r.length>0;)r.shift().abort(),n--}_rebuildTree(){const{_cache:e}=this;for(const r of e.values())r.parent=null,r.children&&(r.children.length=0);for(const r of e.values()){const n=this._getNearestAncestor(r);r.parent=n,n!=null&&n.children&&n.children.push(r)}}_resizeCache(){var o,l;const{_cache:e,opts:r}=this,n=r.maxCacheSize??(r.maxCacheByteSize!==null?1/0:oW*this.selectedTiles.length),i=r.maxCacheByteSize??1/0;if(e.size>n||this._cacheByteSize>i){for(const[u,f]of e)if(!f.isVisible&&!f.isSelected&&(this._cacheByteSize-=r.maxCacheByteSize!==null?f.byteLength:0,e.delete(u),(l=(o=this.opts).onTileUnload)==null||l.call(o,f)),e.size<=n&&this._cacheByteSize<=i)break;this._rebuildTree(),this._dirty=!0}this._dirty&&(this._tiles=Array.from(this._cache.values()).sort((u,f)=>u.zoom-f.zoom),this._dirty=!1)}_getTile(e,r){const n=this.getTileId(e);let i=this._cache.get(n),s=!1;return!i&&r?(i=new xH(e),Object.assign(i,this.getTileMetadata(i.index)),Object.assign(i,{id:n,zoom:this.getTileZoom(i.index)}),s=!0,this._cache.set(n,i),this._dirty=!0):i&&i.needsReload&&(s=!0),i&&s&&i.loadData({getData:this.opts.getTileData,requestScheduler:this._requestScheduler,onLoad:this.onTileLoad,onError:this.opts.onTileError}),i}_getNearestAncestor(e){const{_minZoom:r=0}=this;let n=e.index;for(;this.getTileZoom(n)>r;){n=this.getParentIndex(n);const i=this._getTile(n);if(i)return i}return null}}function uW(t){for(const e of t)e.state=0;for(const e of t)e.isSelected&&!AI(e)&&Tb(e);for(const e of t)e.isVisible=!!(e.state&ld)}function fW(t){for(const r of t)r.state=0;for(const r of t)r.isSelected&&AI(r);const e=Array.from(t).sort((r,n)=>r.zoom-n.zoom);for(const r of e)if(r.isVisible=!!(r.state&ld),r.children&&(r.isVisible||r.state&dA))for(const n of r.children)n.state=dA;else r.isSelected&&Tb(r)}function AI(t){let e=t;for(;e;){if(e.isLoaded||e.content)return e.state|=ld,!0;e=e.parent}return!1}function Tb(t){for(const e of t.children)e.isLoaded||e.content?e.state|=ld:Tb(e)}const hW={TilesetClass:cW,data:{type:"data",value:[]},dataComparator:XH.equal,renderSubLayers:{type:"function",value:t=>new yb(t)},getTileData:{type:"function",optional:!0,value:null},onViewportLoad:{type:"function",optional:!0,value:null},onTileLoad:{type:"function",value:t=>{}},onTileUnload:{type:"function",value:t=>{}},onTileError:{type:"function",value:t=>console.error(t)},extent:{type:"array",optional:!0,value:null,compare:!0},tileSize:512,maxZoom:null,minZoom:0,maxCacheSize:null,maxCacheByteSize:null,refinementStrategy:xb,zRange:null,maxRequests:6,debounceTime:0,zoomOffset:0};class Eb extends od{initializeState(){this.state={tileset:null,isLoaded:!1}}finalizeState(){var e,r;(r=(e=this.state)==null?void 0:e.tileset)==null||r.finalize()}get isLoaded(){var e,r,n;return!!((n=(r=(e=this.state)==null?void 0:e.tileset)==null?void 0:r.selectedTiles)!=null&&n.every(i=>i.isLoaded&&i.layers&&i.layers.every(s=>s.isLoaded)))}shouldUpdateState({changeFlags:e}){return e.somethingChanged}updateState({changeFlags:e}){let{tileset:r}=this.state;const n=e.propsOrDataChanged||e.updateTriggersChanged,i=e.dataChanged||e.updateTriggersChanged&&(e.updateTriggersChanged.all||e.updateTriggersChanged.getTileData);r?n&&(r.setOptions(this._getTilesetOptions()),i?r.reloadAll():r.tiles.forEach(s=>{s.layers=null})):(r=new this.props.TilesetClass(this._getTilesetOptions()),this.setState({tileset:r})),this._updateTileset()}_getTilesetOptions(){const{tileSize:e,maxCacheSize:r,maxCacheByteSize:n,refinementStrategy:i,extent:s,maxZoom:o,minZoom:l,maxRequests:u,debounceTime:f,zoomOffset:d}=this.props;return{maxCacheSize:r,maxCacheByteSize:n,maxZoom:o,minZoom:l,tileSize:e,refinementStrategy:i,extent:s,maxRequests:u,debounceTime:f,zoomOffset:d,getTileData:this.getTileData.bind(this),onTileLoad:this._onTileLoad.bind(this),onTileError:this._onTileError.bind(this),onTileUnload:this._onTileUnload.bind(this)}}_updateTileset(){const e=this.state.tileset,{zRange:r,modelMatrix:n}=this.props,i=e.update(this.context.viewport,{zRange:r,modelMatrix:n}),{isLoaded:s}=e,o=this.state.isLoaded!==s,l=this.state.frameNumber!==i;s&&(o||l)&&this._onViewportLoad(),l&&this.setState({frameNumber:i}),this.state.isLoaded=s}_onViewportLoad(){const{tileset:e}=this.state,{onViewportLoad:r}=this.props;r&&r(e.selectedTiles)}_onTileLoad(e){this.props.onTileLoad(e),e.layers=null,this.setNeedsUpdate()}_onTileError(e,r){this.props.onTileError(e),r.layers=null,this.setNeedsUpdate()}_onTileUnload(e){this.props.onTileUnload(e)}getTileData(e){const{data:r,getTileData:n,fetch:i}=this.props,{signal:s}=e;return e.url=typeof r=="string"||Array.isArray(r)?YH(r,e):null,n?n(e):i&&e.url?i(e.url,{propName:"data",layer:this,signal:s}):null}renderSubLayers(e){return this.props.renderSubLayers(e)}getSubLayerPropsByTile(e){return null}getPickingInfo(e){const r=e.sourceLayer,n=r.props.tile,i=e.info;return i.picked&&(i.tile=n),i.sourceTile=n,i.sourceTileSubLayer=r,i}_updateAutoHighlight(e){e.sourceTileSubLayer.updateAutoHighlight(e)}renderLayers(){return this.state.tileset.tiles.map(e=>{const r=this.getSubLayerPropsByTile(e);if(!(!e.isLoaded&&!e.content))if(e.layers)r&&e.layers[0]&&Object.keys(r).some(n=>e.layers[0].props[n]!==r[n])&&(e.layers=e.layers.map(n=>n.clone(r)));else{const n=this.renderSubLayers({...this.props,...this.getSubLayerProps({id:e.id,updateTriggers:this.props.updateTriggers}),data:e.content,_offset:0,tile:e});e.layers=rd(n,Boolean).map(i=>i.clone({tile:e,...r}))}return e.layers})}filterSubLayer({layer:e,cullRect:r}){const{tile:n}=e.props;return this.state.tileset.isTileVisible(n,r)}}Eb.defaultProps=hW;Eb.layerName="TileLayer";const dW=typeof window<"u"?re.useLayoutEffect:re.useEffect;function wh(t,e){for(;t;){if(t===e)return!0;t=Object.getPrototypeOf(t)}return!1}const pW={position:"absolute",zIndex:-1};function CI(t,e){if(typeof t=="function")return t(e);if(Array.isArray(t))return t.map(r=>CI(r,e));if(cd(t)){if(gW(t))return e.style=pW,re.cloneElement(t,e);if(mW(t))return re.cloneElement(t,e)}return t}function cd(t){return t&&typeof t=="object"&&"type"in t||!1}function gW(t){var e;return(e=t.props)==null?void 0:e.mapStyle}function mW(t){const e=t.type;return e&&e.deckGLViewProps}function bv(t){if(typeof t=="function")return re.createElement(Ns,{},t);if(Array.isArray(t))return t.map(bv);if(cd(t)){if(t.type===re.Fragment)return bv(t.props.children);if(wh(t.type,Ns))return t}return t}function _W({children:t,layers:e=[],views:r=null}){const n=[],i=[],s={};return re.Children.forEach(bv(t),o=>{if(cd(o)){const l=o.type;if(wh(l,zn)){const u=yW(l,o.props);i.push(u)}else n.push(o);if(wh(l,Ns)&&l!==Ns&&o.props.id){const u=new l(o.props);s[u.id]=u}}else o&&n.push(o)}),Object.keys(s).length>0&&(Array.isArray(r)?r.forEach(o=>{s[o.id]=o}):r&&(s[r.id]=r),r=Object.values(s)),e=i.length>0?[...i,...e]:e,{layers:e,children:n,views:r}}function yW(t,e){const r={},n=t.defaultProps||{};for(const i in e)n[i]!==e[i]&&(r[i]=e[i]);return new t(r)}const vW=re.createContext();function bW({children:t,deck:e,ContextProvider:r=vW.Provider}){const{viewManager:n}=e||{};if(!n||!n.views.length)return[];const i={},s=n.views[0].id;for(const o of t){let l=s,u=o;cd(o)&&wh(o.type,Ns)&&(l=o.props.id||s,u=o.props.children);const f=n.getViewport(l),d=n.getViewState(l);if(f){d.padding=f.padding;const{x:g,y:m,width:y,height:w}=f;u=CI(u,{x:g,y:m,width:y,height:w,viewport:f,viewState:d}),i[l]||(i[l]={viewport:f,children:[]}),i[l].children.push(u)}}return Object.keys(i).map(o=>{const{viewport:l,children:u}=i[o],{x:f,y:d,width:g,height:m}=l,y={position:"absolute",left:f,top:d,width:g,height:m},w=`view-${o}`,b=re.createElement("div",{key:w,id:w,style:y},...u),S={deck:e,viewport:l,container:e.canvas.offsetParent,eventManager:e.eventManager,onViewStateChange:k=>{k.viewId=o,e._onViewStateChange(k)},widgets:[]},E=`view-${o}-context`;return re.createElement(r,{key:E,value:S},b)})}const wW={mixBlendMode:null};function SW({width:t,height:e,style:r}){const n={position:"absolute",zIndex:0,left:0,top:0,width:t,height:e},i={left:0,top:0};if(r)for(const s in r)s in wW?i[s]=r[s]:n[s]=r[s];return{containerStyle:n,canvasStyle:i}}function xW(t){return{get deck(){return t.deck},pickObject:e=>t.deck.pickObject(e),pickMultipleObjects:e=>t.deck.pickMultipleObjects(e),pickObjects:e=>t.deck.pickObjects(e)}}function RI(t){t.redrawReason&&(t.deck._drawLayers(t.redrawReason),t.redrawReason=null)}function TW(t,e,r){const n=new e({...r,_customRender:i=>{t.redrawReason=i;const s=n.getViewports();t.lastRenderedViewports!==s?t.forceUpdate():RI(t)}});return n}function EW(t,e){const[r,n]=re.useState(0),s=re.useRef({control:null,version:r,forceUpdate:()=>n(M=>M+1)}).current,o=re.useRef(null),l=re.useRef(null),u=re.useMemo(()=>_W(t),[t.layers,t.views,t.children]);let f=!0;const d=M=>{var D;return f&&t.viewState?(s.viewStateUpdateRequested=M,null):(s.viewStateUpdateRequested=null,(D=t.onViewStateChange)==null?void 0:D.call(t,M))},g=M=>{var D;f?s.interactionStateUpdateRequested=M:(s.interactionStateUpdateRequested=null,(D=t.onInteractionStateChange)==null||D.call(t,M))},m=re.useMemo(()=>{const M={widgets:[],...t,style:null,width:"100%",height:"100%",parent:o.current,canvas:l.current,layers:u.layers,views:u.views,onViewStateChange:d,onInteractionStateChange:g};return delete M._customRender,s.deck&&s.deck.setProps(M),M},[t]);re.useEffect(()=>{const M=t.Deck||cb;return s.deck=TW(s,M,{...m,parent:o.current,canvas:l.current}),()=>{var D;return(D=s.deck)==null?void 0:D.finalize()}},[]),dW(()=>{RI(s);const{viewStateUpdateRequested:M,interactionStateUpdateRequested:D}=s;M&&d(M),D&&g(D)}),re.useImperativeHandle(e,()=>xW(s),[]);const y=s.deck&&s.deck.isInitialized?s.deck.getViewports():void 0,{ContextProvider:w,width:b="100%",height:S="100%",id:E,style:k}=t,{containerStyle:C,canvasStyle:P}=re.useMemo(()=>SW({width:b,height:S,style:k}),[b,S,k]);if(!s.viewStateUpdateRequested&&s.lastRenderedViewports===y||s.version!==r){s.lastRenderedViewports=y,s.version=r;const M=bW({children:u.children,deck:s.deck,ContextProvider:w}),D=re.createElement("canvas",{key:"canvas",id:E||"deckgl-overlay",ref:l,style:P});s.control=re.createElement("div",{id:`${E||"deckgl"}-wrapper`,ref:o,style:C},[D,M])}return f=!1,s.control}const AW=re.forwardRef(EW),CW={"978-0":"English language","978-1":"English language","978-2":"French language","978-3":"German language","978-4":"Japan","978-5":"former U.S.S.R","978-600":"Iran","978-601":"Kazakhstan","978-602":"Indonesia","978-603":"Saudi Arabia","978-604":"Vietnam","978-605":"Turkey","978-606":"Romania","978-607":"Mexico","978-608":"North Macedonia","978-609":"Lithuania","978-611":"Thailand","978-612":"Peru","978-613":"Mauritius","978-614":"Lebanon","978-615":"Hungary","978-616":"Thailand","978-617":"Ukraine","978-618":"Greece","978-619":"Bulgaria","978-620":"Mauritius","978-621":"Philippines","978-622":"Iran","978-623":"Indonesia","978-624":"Sri Lanka","978-625":"Turkey","978-626":"Taiwan","978-627":"Pakistan","978-628":"Colombia","978-629":"Malaysia","978-630":"Romania","978-631":"Argentina","978-65":"Brazil","978-7":"China, People's Republic","978-80":"former Czechoslovakia","978-81":"India","978-82":"Norway","978-83":"Poland","978-84":"Spain","978-85":"Brazil","978-86":"former Yugoslavia","978-87":"Denmark","978-88":"Italy","978-89":"Korea, Republic","978-90":"Netherlands","978-91":"Sweden","978-92":"International NGO Publishers and EU Organizations","978-93":"India","978-94":"Netherlands","978-950":"Argentina","978-951":"Finland","978-952":"Finland","978-953":"Croatia","978-954":"Bulgaria","978-955":"Sri Lanka","978-956":"Chile","978-957":"Taiwan","978-958":"Colombia","978-959":"Cuba","978-960":"Greece","978-961":"Slovenia","978-962":"Hong Kong, China","978-963":"Hungary","978-964":"Iran","978-965":"Israel","978-966":"Ukraine","978-967":"Malaysia","978-968":"Mexico","978-969":"Pakistan","978-970":"Mexico","978-971":"Philippines","978-972":"Portugal","978-973":"Romania","978-974":"Thailand","978-975":"Turkey","978-976":"Caribbean Community","978-977":"Egypt","978-978":"Nigeria","978-979":"Indonesia","978-980":"Venezuela","978-981":"Singapore","978-982":"South Pacific","978-983":"Malaysia","978-984":"Bangladesh","978-985":"Belarus","978-986":"Taiwan","978-987":"Argentina","978-988":"Hong Kong, China","978-989":"Portugal","978-9910":"Uzbekistan","978-9911":"Montenegro","978-9912":"Tanzania","978-9913":"Uganda","978-9914":"Kenya","978-9915":"Uruguay","978-9916":"Estonia","978-9917":"Bolivia","978-9918":"Malta","978-9919":"Mongolia","978-9920":"Morocco","978-9921":"Kuwait","978-9922":"Iraq","978-9923":"Jordan","978-9924":"Cambodia","978-9925":"Cyprus","978-9926":"Bosnia and Herzegovina","978-9927":"Qatar","978-9928":"Albania","978-9929":"Guatemala","978-9930":"Costa Rica","978-9931":"Algeria","978-9932":"Lao People's Democratic Republic","978-9933":"Syria","978-9934":"Latvia","978-9935":"Iceland","978-9936":"Afghanistan","978-9937":"Nepal","978-9938":"Tunisia","978-9939":"Armenia","978-9940":"Montenegro","978-9941":"Georgia","978-9942":"Ecuador","978-9943":"Uzbekistan","978-9944":"Turkey","978-9945":"Dominican Republic","978-9946":"Korea, P.D.R.","978-9947":"Algeria","978-9948":"United Arab Emirates","978-9949":"Estonia","978-9950":"Palestine","978-9951":"Kosova","978-9952":"Azerbaijan","978-9953":"Lebanon","978-9954":"Morocco","978-9955":"Lithuania","978-9956":"Cameroon","978-9957":"Jordan","978-9958":"Bosnia and Herzegovina","978-9959":"Libya","978-9960":"Saudi Arabia","978-9961":"Algeria","978-9962":"Panama","978-9963":"Cyprus","978-9964":"Ghana","978-9965":"Kazakhstan","978-9966":"Kenya","978-9967":"Kyrgyz Republic","978-9968":"Costa Rica","978-9969":"Algeria","978-9970":"Uganda","978-9971":"Singapore","978-9972":"Peru","978-9973":"Tunisia","978-9974":"Uruguay","978-9975":"Moldova","978-9976":"Tanzania","978-9977":"Costa Rica","978-9978":"Ecuador","978-9979":"Iceland","978-9980":"Papua New Guinea","978-9981":"Morocco","978-9982":"Zambia","978-9983":"Gambia","978-9984":"Latvia","978-9985":"Estonia","978-9986":"Lithuania","978-9987":"Tanzania","978-9988":"Ghana","978-9989":"North Macedonia","978-99901":"Bahrain","978-99902":"Reserved Agency","978-99903":"Mauritius","978-99904":"Curaçao","978-99905":"Bolivia","978-99906":"Kuwait","978-99908":"Malawi","978-99909":"Malta","978-99910":"Sierra Leone","978-99911":"Lesotho","978-99912":"Botswana","978-99913":"Andorra","978-99914":"International NGO Publishers","978-99915":"Maldives","978-99916":"Namibia","978-99917":"Brunei Darussalam","978-99918":"Faroe Islands","978-99919":"Benin","978-99920":"Andorra","978-99921":"Qatar","978-99922":"Guatemala","978-99923":"El Salvador","978-99924":"Nicaragua","978-99925":"Paraguay","978-99926":"Honduras","978-99927":"Albania","978-99928":"Georgia","978-99929":"Mongolia","978-99930":"Armenia","978-99931":"Seychelles","978-99932":"Malta","978-99933":"Nepal","978-99934":"Dominican Republic","978-99935":"Haiti","978-99936":"Bhutan","978-99937":"Macau","978-99938":"Srpska, Republic of","978-99939":"Guatemala","978-99940":"Georgia","978-99941":"Armenia","978-99942":"Sudan","978-99943":"Albania","978-99944":"Ethiopia","978-99945":"Namibia","978-99946":"Nepal","978-99947":"Tajikistan","978-99948":"Eritrea","978-99949":"Mauritius","978-99950":"Cambodia","978-99951":"Reserved Agency","978-99952":"Mali","978-99953":"Paraguay","978-99954":"Bolivia","978-99955":"Srpska, Republic of","978-99956":"Albania","978-99957":"Malta","978-99958":"Bahrain","978-99959":"Luxembourg","978-99960":"Malawi","978-99961":"El Salvador","978-99962":"Mongolia","978-99963":"Cambodia","978-99964":"Nicaragua","978-99965":"Macau","978-99966":"Kuwait","978-99967":"Paraguay","978-99968":"Botswana","978-99969":"Oman","978-99970":"Haiti","978-99971":"Myanmar","978-99972":"Faroe Islands","978-99973":"Mongolia","978-99974":"Bolivia","978-99975":"Tajikistan","978-99976":"Srpska, Republic of","978-99977":"Rwanda","978-99978":"Mongolia","978-99979":"Honduras","978-99980":"Bhutan","978-99981":"Macau","978-99982":"Benin","978-99983":"El Salvador","978-99984":"Brunei Darussalam","978-99985":"Tajikistan","978-99986":"Myanmar","978-99987":"Luxembourg","978-99988":"Sudan","978-99989":"Paraguay","978-99990":"Ethiopia","978-99992":"Oman","978-99993":"Mauritius","979-10":"France","979-11":"Korea, Republic","979-12":"Italy","979-8":"United States"};function RW(t){const e=t.toString();let r=0;for(let n=0;n<e.length;n++)r+=Number(e[n])*(n%2===0?1:3);return`${e}${(10-r%10)%10}`}const PW=({layersConfig:t})=>{const e=t.map(({id:s,url:o,color:l,opacity:u,visible:f})=>new Eb({id:s,opacity:u,visible:f,pickable:!0,tileSize:El.tileSize,minZoom:-4,maxZoom:0,extent:[0,0,El.width,El.height],getTileData:({index:d})=>{const{x:g,y:m,z:y}=d;return ac(`${o}/${El.maxLevel+y}/${g}_${m}.png`)},renderSubLayers:d=>{const[[g,m],[y,w]]=d.tile.boundingBox,{width:b,height:S}=El,{data:E,...k}=d;return new fb(k,{image:d.data,bounds:[Mt(g,0,b),Mt(w,0,S),Mt(y,0,b),Mt(m,0,S)],textureParameters:{minFilter:"nearest",magFilter:"nearest"},tintColor:l})}}));function r({tile:s,bitmap:o,layer:l}){const u=s.boundingBox[0][0]+o.pixel[0],f=s.boundingBox[0][1]+o.pixel[1],d=u+f*l.props.extent[2];return`${RW(d+978e9)}`}function n(s){var u;const{tile:o,bitmap:l}=s;if(o&&l){if(o.index.z!==0)return null;const f=r(s),d=((u=Object.entries(CW).find(([g])=>f.startsWith(g.replace("-",""))))==null?void 0:u[1])||"Unknown";return`${f} (${d})`}return null}function i(s){const{tile:o,bitmap:l}=s;if(o&&l){if(o.index.z!==0)return null;const u=r(s);window.open(`https://annas-archive.org/search?q=${u}`,"_blank")}}return ke.jsx(AW,{views:[new oI({id:"ortho"})],initialViewState:{ortho:bF},controller:!0,layers:e,getTooltip:n,onClick:i})};var Ar={},Io={},hm,pA;function PI(){if(pA)return hm;pA=1;var t=typeof Hu=="object"&&Hu&&Hu.Object===Object&&Hu;return hm=t,hm}var dm,gA;function $n(){if(gA)return dm;gA=1;var t=PI(),e=typeof self=="object"&&self&&self.Object===Object&&self,r=t||e||Function("return this")();return dm=r,dm}var pm,mA;function Mc(){if(mA)return pm;mA=1;var t=$n(),e=t.Symbol;return pm=e,pm}var gm,_A;function MW(){if(_A)return gm;_A=1;var t=Mc(),e=Object.prototype,r=e.hasOwnProperty,n=e.toString,i=t?t.toStringTag:void 0;function s(o){var l=r.call(o,i),u=o[i];try{o[i]=void 0;var f=!0}catch{}var d=n.call(o);return f&&(l?o[i]=u:delete o[i]),d}return gm=s,gm}var mm,yA;function IW(){if(yA)return mm;yA=1;var t=Object.prototype,e=t.toString;function r(n){return e.call(n)}return mm=r,mm}var _m,vA;function Ws(){if(vA)return _m;vA=1;var t=Mc(),e=MW(),r=IW(),n="[object Null]",i="[object Undefined]",s=t?t.toStringTag:void 0;function o(l){return l==null?l===void 0?i:n:s&&s in Object(l)?e(l):r(l)}return _m=o,_m}var ym,bA;function wn(){if(bA)return ym;bA=1;var t=Array.isArray;return ym=t,ym}var vm,wA;function oi(){if(wA)return vm;wA=1;function t(e){return e!=null&&typeof e=="object"}return vm=t,vm}var bm,SA;function OW(){if(SA)return bm;SA=1;var t=Ws(),e=wn(),r=oi(),n="[object String]";function i(s){return typeof s=="string"||!e(s)&&r(s)&&t(s)==n}return bm=i,bm}var wm,xA;function kW(){if(xA)return wm;xA=1;function t(e){return function(r,n,i){for(var s=-1,o=Object(r),l=i(r),u=l.length;u--;){var f=l[e?u:++s];if(n(o[f],f,o)===!1)break}return r}}return wm=t,wm}var Sm,TA;function NW(){if(TA)return Sm;TA=1;var t=kW(),e=t();return Sm=e,Sm}var xm,EA;function FW(){if(EA)return xm;EA=1;function t(e,r){for(var n=-1,i=Array(e);++n<e;)i[n]=r(n);return i}return xm=t,xm}var Tm,AA;function DW(){if(AA)return Tm;AA=1;var t=Ws(),e=oi(),r="[object Arguments]";function n(i){return e(i)&&t(i)==r}return Tm=n,Tm}var Em,CA;function MI(){if(CA)return Em;CA=1;var t=DW(),e=oi(),r=Object.prototype,n=r.hasOwnProperty,i=r.propertyIsEnumerable,s=t(function(){return arguments}())?t:function(o){return e(o)&&n.call(o,"callee")&&!i.call(o,"callee")};return Em=s,Em}var Vl={exports:{}},Am,RA;function BW(){if(RA)return Am;RA=1;function t(){return!1}return Am=t,Am}Vl.exports;var PA;function Ab(){return PA||(PA=1,function(t,e){var r=$n(),n=BW(),i=e&&!e.nodeType&&e,s=i&&!0&&t&&!t.nodeType&&t,o=s&&s.exports===i,l=o?r.Buffer:void 0,u=l?l.isBuffer:void 0,f=u||n;t.exports=f}(Vl,Vl.exports)),Vl.exports}var Cm,MA;function II(){if(MA)return Cm;MA=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function r(n,i){var s=typeof n;return i=i??t,!!i&&(s=="number"||s!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<i}return Cm=r,Cm}var Rm,IA;function Cb(){if(IA)return Rm;IA=1;var t=9007199254740991;function e(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=t}return Rm=e,Rm}var Pm,OA;function LW(){if(OA)return Pm;OA=1;var t=Ws(),e=Cb(),r=oi(),n="[object Arguments]",i="[object Array]",s="[object Boolean]",o="[object Date]",l="[object Error]",u="[object Function]",f="[object Map]",d="[object Number]",g="[object Object]",m="[object RegExp]",y="[object Set]",w="[object String]",b="[object WeakMap]",S="[object ArrayBuffer]",E="[object DataView]",k="[object Float32Array]",C="[object Float64Array]",P="[object Int8Array]",M="[object Int16Array]",D="[object Int32Array]",q="[object Uint8Array]",ee="[object Uint8ClampedArray]",J="[object Uint16Array]",A="[object Uint32Array]",X={};X[k]=X[C]=X[P]=X[M]=X[D]=X[q]=X[ee]=X[J]=X[A]=!0,X[n]=X[i]=X[S]=X[s]=X[E]=X[o]=X[l]=X[u]=X[f]=X[d]=X[g]=X[m]=X[y]=X[w]=X[b]=!1;function te(Q){return r(Q)&&e(Q.length)&&!!X[t(Q)]}return Pm=te,Pm}var Mm,kA;function Rb(){if(kA)return Mm;kA=1;function t(e){return function(r){return e(r)}}return Mm=t,Mm}var jl={exports:{}};jl.exports;var NA;function Pb(){return NA||(NA=1,function(t,e){var r=PI(),n=e&&!e.nodeType&&e,i=n&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===n,o=s&&r.process,l=function(){try{var u=i&&i.require&&i.require("util").types;return u||o&&o.binding&&o.binding("util")}catch{}}();t.exports=l}(jl,jl.exports)),jl.exports}var Im,FA;function OI(){if(FA)return Im;FA=1;var t=LW(),e=Rb(),r=Pb(),n=r&&r.isTypedArray,i=n?e(n):t;return Im=i,Im}var Om,DA;function kI(){if(DA)return Om;DA=1;var t=FW(),e=MI(),r=wn(),n=Ab(),i=II(),s=OI(),o=Object.prototype,l=o.hasOwnProperty;function u(f,d){var g=r(f),m=!g&&e(f),y=!g&&!m&&n(f),w=!g&&!m&&!y&&s(f),b=g||m||y||w,S=b?t(f.length,String):[],E=S.length;for(var k in f)(d||l.call(f,k))&&!(b&&(k=="length"||y&&(k=="offset"||k=="parent")||w&&(k=="buffer"||k=="byteLength"||k=="byteOffset")||i(k,E)))&&S.push(k);return S}return Om=u,Om}var km,BA;function Mb(){if(BA)return km;BA=1;var t=Object.prototype;function e(r){var n=r&&r.constructor,i=typeof n=="function"&&n.prototype||t;return r===i}return km=e,km}var Nm,LA;function NI(){if(LA)return Nm;LA=1;function t(e,r){return function(n){return e(r(n))}}return Nm=t,Nm}var Fm,UA;function UW(){if(UA)return Fm;UA=1;var t=NI(),e=t(Object.keys,Object);return Fm=e,Fm}var Dm,zA;function zW(){if(zA)return Dm;zA=1;var t=Mb(),e=UW(),r=Object.prototype,n=r.hasOwnProperty;function i(s){if(!t(s))return e(s);var o=[];for(var l in Object(s))n.call(s,l)&&l!="constructor"&&o.push(l);return o}return Dm=i,Dm}var Bm,$A;function Fa(){if($A)return Bm;$A=1;function t(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}return Bm=t,Bm}var Lm,VA;function FI(){if(VA)return Lm;VA=1;var t=Ws(),e=Fa(),r="[object AsyncFunction]",n="[object Function]",i="[object GeneratorFunction]",s="[object Proxy]";function o(l){if(!e(l))return!1;var u=t(l);return u==n||u==i||u==r||u==s}return Lm=o,Lm}var Um,jA;function ud(){if(jA)return Um;jA=1;var t=FI(),e=Cb();function r(n){return n!=null&&e(n.length)&&!t(n)}return Um=r,Um}var zm,HA;function Ic(){if(HA)return zm;HA=1;var t=kI(),e=zW(),r=ud();function n(i){return r(i)?t(i):e(i)}return zm=n,zm}var $m,WA;function DI(){if(WA)return $m;WA=1;var t=NW(),e=Ic();function r(n,i){return n&&t(n,i,e)}return $m=r,$m}var Vm,qA;function BI(){if(qA)return Vm;qA=1;function t(e){return e}return Vm=t,Vm}var jm,XA;function $W(){if(XA)return jm;XA=1;var t=BI();function e(r){return typeof r=="function"?r:t}return jm=e,jm}var Hm,KA;function Ib(){if(KA)return Hm;KA=1;var t=DI(),e=$W();function r(n,i){return n&&t(n,e(i))}return Hm=r,Hm}var Wm,YA;function Ob(){if(YA)return Wm;YA=1;var t=NI(),e=t(Object.getPrototypeOf,Object);return Wm=e,Wm}var qm,ZA;function VW(){if(ZA)return qm;ZA=1;var t=Ws(),e=Ob(),r=oi(),n="[object Object]",i=Function.prototype,s=Object.prototype,o=i.toString,l=s.hasOwnProperty,u=o.call(Object);function f(d){if(!r(d)||t(d)!=n)return!1;var g=e(d);if(g===null)return!0;var m=l.call(g,"constructor")&&g.constructor;return typeof m=="function"&&m instanceof m&&o.call(m)==u}return qm=f,qm}var Xm,GA;function LI(){if(GA)return Xm;GA=1;function t(e,r){for(var n=-1,i=e==null?0:e.length,s=Array(i);++n<i;)s[n]=r(e[n],n,e);return s}return Xm=t,Xm}var Km,QA;function jW(){if(QA)return Km;QA=1;function t(){this.__data__=[],this.size=0}return Km=t,Km}var Ym,JA;function kb(){if(JA)return Ym;JA=1;function t(e,r){return e===r||e!==e&&r!==r}return Ym=t,Ym}var Zm,eC;function fd(){if(eC)return Zm;eC=1;var t=kb();function e(r,n){for(var i=r.length;i--;)if(t(r[i][0],n))return i;return-1}return Zm=e,Zm}var Gm,tC;function HW(){if(tC)return Gm;tC=1;var t=fd(),e=Array.prototype,r=e.splice;function n(i){var s=this.__data__,o=t(s,i);if(o<0)return!1;var l=s.length-1;return o==l?s.pop():r.call(s,o,1),--this.size,!0}return Gm=n,Gm}var Qm,rC;function WW(){if(rC)return Qm;rC=1;var t=fd();function e(r){var n=this.__data__,i=t(n,r);return i<0?void 0:n[i][1]}return Qm=e,Qm}var Jm,nC;function qW(){if(nC)return Jm;nC=1;var t=fd();function e(r){return t(this.__data__,r)>-1}return Jm=e,Jm}var e0,iC;function XW(){if(iC)return e0;iC=1;var t=fd();function e(r,n){var i=this.__data__,s=t(i,r);return s<0?(++this.size,i.push([r,n])):i[s][1]=n,this}return e0=e,e0}var t0,sC;function hd(){if(sC)return t0;sC=1;var t=jW(),e=HW(),r=WW(),n=qW(),i=XW();function s(o){var l=-1,u=o==null?0:o.length;for(this.clear();++l<u;){var f=o[l];this.set(f[0],f[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=r,s.prototype.has=n,s.prototype.set=i,t0=s,t0}var r0,oC;function KW(){if(oC)return r0;oC=1;var t=hd();function e(){this.__data__=new t,this.size=0}return r0=e,r0}var n0,aC;function YW(){if(aC)return n0;aC=1;function t(e){var r=this.__data__,n=r.delete(e);return this.size=r.size,n}return n0=t,n0}var i0,lC;function ZW(){if(lC)return i0;lC=1;function t(e){return this.__data__.get(e)}return i0=t,i0}var s0,cC;function GW(){if(cC)return s0;cC=1;function t(e){return this.__data__.has(e)}return s0=t,s0}var o0,uC;function QW(){if(uC)return o0;uC=1;var t=$n(),e=t["__core-js_shared__"];return o0=e,o0}var a0,fC;function JW(){if(fC)return a0;fC=1;var t=QW(),e=function(){var n=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function r(n){return!!e&&e in n}return a0=r,a0}var l0,hC;function UI(){if(hC)return l0;hC=1;var t=Function.prototype,e=t.toString;function r(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return l0=r,l0}var c0,dC;function eq(){if(dC)return c0;dC=1;var t=FI(),e=JW(),r=Fa(),n=UI(),i=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,o=Function.prototype,l=Object.prototype,u=o.toString,f=l.hasOwnProperty,d=RegExp("^"+u.call(f).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function g(m){if(!r(m)||e(m))return!1;var y=t(m)?d:s;return y.test(n(m))}return c0=g,c0}var u0,pC;function tq(){if(pC)return u0;pC=1;function t(e,r){return e==null?void 0:e[r]}return u0=t,u0}var f0,gC;function qs(){if(gC)return f0;gC=1;var t=eq(),e=tq();function r(n,i){var s=e(n,i);return t(s)?s:void 0}return f0=r,f0}var h0,mC;function Nb(){if(mC)return h0;mC=1;var t=qs(),e=$n(),r=t(e,"Map");return h0=r,h0}var d0,_C;function dd(){if(_C)return d0;_C=1;var t=qs(),e=t(Object,"create");return d0=e,d0}var p0,yC;function rq(){if(yC)return p0;yC=1;var t=dd();function e(){this.__data__=t?t(null):{},this.size=0}return p0=e,p0}var g0,vC;function nq(){if(vC)return g0;vC=1;function t(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}return g0=t,g0}var m0,bC;function iq(){if(bC)return m0;bC=1;var t=dd(),e="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function i(s){var o=this.__data__;if(t){var l=o[s];return l===e?void 0:l}return n.call(o,s)?o[s]:void 0}return m0=i,m0}var _0,wC;function sq(){if(wC)return _0;wC=1;var t=dd(),e=Object.prototype,r=e.hasOwnProperty;function n(i){var s=this.__data__;return t?s[i]!==void 0:r.call(s,i)}return _0=n,_0}var y0,SC;function oq(){if(SC)return y0;SC=1;var t=dd(),e="__lodash_hash_undefined__";function r(n,i){var s=this.__data__;return this.size+=this.has(n)?0:1,s[n]=t&&i===void 0?e:i,this}return y0=r,y0}var v0,xC;function aq(){if(xC)return v0;xC=1;var t=rq(),e=nq(),r=iq(),n=sq(),i=oq();function s(o){var l=-1,u=o==null?0:o.length;for(this.clear();++l<u;){var f=o[l];this.set(f[0],f[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=r,s.prototype.has=n,s.prototype.set=i,v0=s,v0}var b0,TC;function lq(){if(TC)return b0;TC=1;var t=aq(),e=hd(),r=Nb();function n(){this.size=0,this.__data__={hash:new t,map:new(r||e),string:new t}}return b0=n,b0}var w0,EC;function cq(){if(EC)return w0;EC=1;function t(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}return w0=t,w0}var S0,AC;function pd(){if(AC)return S0;AC=1;var t=cq();function e(r,n){var i=r.__data__;return t(n)?i[typeof n=="string"?"string":"hash"]:i.map}return S0=e,S0}var x0,CC;function uq(){if(CC)return x0;CC=1;var t=pd();function e(r){var n=t(this,r).delete(r);return this.size-=n?1:0,n}return x0=e,x0}var T0,RC;function fq(){if(RC)return T0;RC=1;var t=pd();function e(r){return t(this,r).get(r)}return T0=e,T0}var E0,PC;function hq(){if(PC)return E0;PC=1;var t=pd();function e(r){return t(this,r).has(r)}return E0=e,E0}var A0,MC;function dq(){if(MC)return A0;MC=1;var t=pd();function e(r,n){var i=t(this,r),s=i.size;return i.set(r,n),this.size+=i.size==s?0:1,this}return A0=e,A0}var C0,IC;function Fb(){if(IC)return C0;IC=1;var t=lq(),e=uq(),r=fq(),n=hq(),i=dq();function s(o){var l=-1,u=o==null?0:o.length;for(this.clear();++l<u;){var f=o[l];this.set(f[0],f[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=r,s.prototype.has=n,s.prototype.set=i,C0=s,C0}var R0,OC;function pq(){if(OC)return R0;OC=1;var t=hd(),e=Nb(),r=Fb(),n=200;function i(s,o){var l=this.__data__;if(l instanceof t){var u=l.__data__;if(!e||u.length<n-1)return u.push([s,o]),this.size=++l.size,this;l=this.__data__=new r(u)}return l.set(s,o),this.size=l.size,this}return R0=i,R0}var P0,kC;function Db(){if(kC)return P0;kC=1;var t=hd(),e=KW(),r=YW(),n=ZW(),i=GW(),s=pq();function o(l){var u=this.__data__=new t(l);this.size=u.size}return o.prototype.clear=e,o.prototype.delete=r,o.prototype.get=n,o.prototype.has=i,o.prototype.set=s,P0=o,P0}var M0,NC;function gq(){if(NC)return M0;NC=1;var t="__lodash_hash_undefined__";function e(r){return this.__data__.set(r,t),this}return M0=e,M0}var I0,FC;function mq(){if(FC)return I0;FC=1;function t(e){return this.__data__.has(e)}return I0=t,I0}var O0,DC;function _q(){if(DC)return O0;DC=1;var t=Fb(),e=gq(),r=mq();function n(i){var s=-1,o=i==null?0:i.length;for(this.__data__=new t;++s<o;)this.add(i[s])}return n.prototype.add=n.prototype.push=e,n.prototype.has=r,O0=n,O0}var k0,BC;function yq(){if(BC)return k0;BC=1;function t(e,r){for(var n=-1,i=e==null?0:e.length;++n<i;)if(r(e[n],n,e))return!0;return!1}return k0=t,k0}var N0,LC;function vq(){if(LC)return N0;LC=1;function t(e,r){return e.has(r)}return N0=t,N0}var F0,UC;function zI(){if(UC)return F0;UC=1;var t=_q(),e=yq(),r=vq(),n=1,i=2;function s(o,l,u,f,d,g){var m=u&n,y=o.length,w=l.length;if(y!=w&&!(m&&w>y))return!1;var b=g.get(o),S=g.get(l);if(b&&S)return b==l&&S==o;var E=-1,k=!0,C=u&i?new t:void 0;for(g.set(o,l),g.set(l,o);++E<y;){var P=o[E],M=l[E];if(f)var D=m?f(M,P,E,l,o,g):f(P,M,E,o,l,g);if(D!==void 0){if(D)continue;k=!1;break}if(C){if(!e(l,function(q,ee){if(!r(C,ee)&&(P===q||d(P,q,u,f,g)))return C.push(ee)})){k=!1;break}}else if(!(P===M||d(P,M,u,f,g))){k=!1;break}}return g.delete(o),g.delete(l),k}return F0=s,F0}var D0,zC;function $I(){if(zC)return D0;zC=1;var t=$n(),e=t.Uint8Array;return D0=e,D0}var B0,$C;function bq(){if($C)return B0;$C=1;function t(e){var r=-1,n=Array(e.size);return e.forEach(function(i,s){n[++r]=[s,i]}),n}return B0=t,B0}var L0,VC;function wq(){if(VC)return L0;VC=1;function t(e){var r=-1,n=Array(e.size);return e.forEach(function(i){n[++r]=i}),n}return L0=t,L0}var U0,jC;function Sq(){if(jC)return U0;jC=1;var t=Mc(),e=$I(),r=kb(),n=zI(),i=bq(),s=wq(),o=1,l=2,u="[object Boolean]",f="[object Date]",d="[object Error]",g="[object Map]",m="[object Number]",y="[object RegExp]",w="[object Set]",b="[object String]",S="[object Symbol]",E="[object ArrayBuffer]",k="[object DataView]",C=t?t.prototype:void 0,P=C?C.valueOf:void 0;function M(D,q,ee,J,A,X,te){switch(ee){case k:if(D.byteLength!=q.byteLength||D.byteOffset!=q.byteOffset)return!1;D=D.buffer,q=q.buffer;case E:return!(D.byteLength!=q.byteLength||!X(new e(D),new e(q)));case u:case f:case m:return r(+D,+q);case d:return D.name==q.name&&D.message==q.message;case y:case b:return D==q+"";case g:var Q=i;case w:var ie=J&o;if(Q||(Q=s),D.size!=q.size&&!ie)return!1;var xe=te.get(D);if(xe)return xe==q;J|=l,te.set(D,q);var F=n(Q(D),Q(q),J,A,X,te);return te.delete(D),F;case S:if(P)return P.call(D)==P.call(q)}return!1}return U0=M,U0}var z0,HC;function VI(){if(HC)return z0;HC=1;function t(e,r){for(var n=-1,i=r.length,s=e.length;++n<i;)e[s+n]=r[n];return e}return z0=t,z0}var $0,WC;function jI(){if(WC)return $0;WC=1;var t=VI(),e=wn();function r(n,i,s){var o=i(n);return e(n)?o:t(o,s(n))}return $0=r,$0}var V0,qC;function xq(){if(qC)return V0;qC=1;function t(e,r){for(var n=-1,i=e==null?0:e.length,s=0,o=[];++n<i;){var l=e[n];r(l,n,e)&&(o[s++]=l)}return o}return V0=t,V0}var j0,XC;function HI(){if(XC)return j0;XC=1;function t(){return[]}return j0=t,j0}var H0,KC;function Bb(){if(KC)return H0;KC=1;var t=xq(),e=HI(),r=Object.prototype,n=r.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(o){return o==null?[]:(o=Object(o),t(i(o),function(l){return n.call(o,l)}))}:e;return H0=s,H0}var W0,YC;function WI(){if(YC)return W0;YC=1;var t=jI(),e=Bb(),r=Ic();function n(i){return t(i,r,e)}return W0=n,W0}var q0,ZC;function Tq(){if(ZC)return q0;ZC=1;var t=WI(),e=1,r=Object.prototype,n=r.hasOwnProperty;function i(s,o,l,u,f,d){var g=l&e,m=t(s),y=m.length,w=t(o),b=w.length;if(y!=b&&!g)return!1;for(var S=y;S--;){var E=m[S];if(!(g?E in o:n.call(o,E)))return!1}var k=d.get(s),C=d.get(o);if(k&&C)return k==o&&C==s;var P=!0;d.set(s,o),d.set(o,s);for(var M=g;++S<y;){E=m[S];var D=s[E],q=o[E];if(u)var ee=g?u(q,D,E,o,s,d):u(D,q,E,s,o,d);if(!(ee===void 0?D===q||f(D,q,l,u,d):ee)){P=!1;break}M||(M=E=="constructor")}if(P&&!M){var J=s.constructor,A=o.constructor;J!=A&&"constructor"in s&&"constructor"in o&&!(typeof J=="function"&&J instanceof J&&typeof A=="function"&&A instanceof A)&&(P=!1)}return d.delete(s),d.delete(o),P}return q0=i,q0}var X0,GC;function Eq(){if(GC)return X0;GC=1;var t=qs(),e=$n(),r=t(e,"DataView");return X0=r,X0}var K0,QC;function Aq(){if(QC)return K0;QC=1;var t=qs(),e=$n(),r=t(e,"Promise");return K0=r,K0}var Y0,JC;function Cq(){if(JC)return Y0;JC=1;var t=qs(),e=$n(),r=t(e,"Set");return Y0=r,Y0}var Z0,e2;function Rq(){if(e2)return Z0;e2=1;var t=qs(),e=$n(),r=t(e,"WeakMap");return Z0=r,Z0}var G0,t2;function gd(){if(t2)return G0;t2=1;var t=Eq(),e=Nb(),r=Aq(),n=Cq(),i=Rq(),s=Ws(),o=UI(),l="[object Map]",u="[object Object]",f="[object Promise]",d="[object Set]",g="[object WeakMap]",m="[object DataView]",y=o(t),w=o(e),b=o(r),S=o(n),E=o(i),k=s;return(t&&k(new t(new ArrayBuffer(1)))!=m||e&&k(new e)!=l||r&&k(r.resolve())!=f||n&&k(new n)!=d||i&&k(new i)!=g)&&(k=function(C){var P=s(C),M=P==u?C.constructor:void 0,D=M?o(M):"";if(D)switch(D){case y:return m;case w:return l;case b:return f;case S:return d;case E:return g}return P}),G0=k,G0}var Q0,r2;function Pq(){if(r2)return Q0;r2=1;var t=Db(),e=zI(),r=Sq(),n=Tq(),i=gd(),s=wn(),o=Ab(),l=OI(),u=1,f="[object Arguments]",d="[object Array]",g="[object Object]",m=Object.prototype,y=m.hasOwnProperty;function w(b,S,E,k,C,P){var M=s(b),D=s(S),q=M?d:i(b),ee=D?d:i(S);q=q==f?g:q,ee=ee==f?g:ee;var J=q==g,A=ee==g,X=q==ee;if(X&&o(b)){if(!o(S))return!1;M=!0,J=!1}if(X&&!J)return P||(P=new t),M||l(b)?e(b,S,E,k,C,P):r(b,S,q,E,k,C,P);if(!(E&u)){var te=J&&y.call(b,"__wrapped__"),Q=A&&y.call(S,"__wrapped__");if(te||Q){var ie=te?b.value():b,xe=Q?S.value():S;return P||(P=new t),C(ie,xe,E,k,P)}}return X?(P||(P=new t),n(b,S,E,k,C,P)):!1}return Q0=w,Q0}var J0,n2;function qI(){if(n2)return J0;n2=1;var t=Pq(),e=oi();function r(n,i,s,o,l){return n===i?!0:n==null||i==null||!e(n)&&!e(i)?n!==n&&i!==i:t(n,i,s,o,r,l)}return J0=r,J0}var e_,i2;function Mq(){if(i2)return e_;i2=1;var t=Db(),e=qI(),r=1,n=2;function i(s,o,l,u){var f=l.length,d=f,g=!u;if(s==null)return!d;for(s=Object(s);f--;){var m=l[f];if(g&&m[2]?m[1]!==s[m[0]]:!(m[0]in s))return!1}for(;++f<d;){m=l[f];var y=m[0],w=s[y],b=m[1];if(g&&m[2]){if(w===void 0&&!(y in s))return!1}else{var S=new t;if(u)var E=u(w,b,y,s,o,S);if(!(E===void 0?e(b,w,r|n,u,S):E))return!1}}return!0}return e_=i,e_}var t_,s2;function XI(){if(s2)return t_;s2=1;var t=Fa();function e(r){return r===r&&!t(r)}return t_=e,t_}var r_,o2;function Iq(){if(o2)return r_;o2=1;var t=XI(),e=Ic();function r(n){for(var i=e(n),s=i.length;s--;){var o=i[s],l=n[o];i[s]=[o,l,t(l)]}return i}return r_=r,r_}var n_,a2;function KI(){if(a2)return n_;a2=1;function t(e,r){return function(n){return n==null?!1:n[e]===r&&(r!==void 0||e in Object(n))}}return n_=t,n_}var i_,l2;function Oq(){if(l2)return i_;l2=1;var t=Mq(),e=Iq(),r=KI();function n(i){var s=e(i);return s.length==1&&s[0][2]?r(s[0][0],s[0][1]):function(o){return o===i||t(o,i,s)}}return i_=n,i_}var s_,c2;function Lb(){if(c2)return s_;c2=1;var t=Ws(),e=oi(),r="[object Symbol]";function n(i){return typeof i=="symbol"||e(i)&&t(i)==r}return s_=n,s_}var o_,u2;function Ub(){if(u2)return o_;u2=1;var t=wn(),e=Lb(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(s,o){if(t(s))return!1;var l=typeof s;return l=="number"||l=="symbol"||l=="boolean"||s==null||e(s)?!0:n.test(s)||!r.test(s)||o!=null&&s in Object(o)}return o_=i,o_}var a_,f2;function kq(){if(f2)return a_;f2=1;var t=Fb(),e="Expected a function";function r(n,i){if(typeof n!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var s=function(){var o=arguments,l=i?i.apply(this,o):o[0],u=s.cache;if(u.has(l))return u.get(l);var f=n.apply(this,o);return s.cache=u.set(l,f)||u,f};return s.cache=new(r.Cache||t),s}return r.Cache=t,a_=r,a_}var l_,h2;function Nq(){if(h2)return l_;h2=1;var t=kq(),e=500;function r(n){var i=t(n,function(o){return s.size===e&&s.clear(),o}),s=i.cache;return i}return l_=r,l_}var c_,d2;function Fq(){if(d2)return c_;d2=1;var t=Nq(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=t(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(e,function(o,l,u,f){s.push(u?f.replace(r,"$1"):l||o)}),s});return c_=n,c_}var u_,p2;function Dq(){if(p2)return u_;p2=1;var t=Mc(),e=LI(),r=wn(),n=Lb(),i=t?t.prototype:void 0,s=i?i.toString:void 0;function o(l){if(typeof l=="string")return l;if(r(l))return e(l,o)+"";if(n(l))return s?s.call(l):"";var u=l+"";return u=="0"&&1/l==-1/0?"-0":u}return u_=o,u_}var f_,g2;function Bq(){if(g2)return f_;g2=1;var t=Dq();function e(r){return r==null?"":t(r)}return f_=e,f_}var h_,m2;function YI(){if(m2)return h_;m2=1;var t=wn(),e=Ub(),r=Fq(),n=Bq();function i(s,o){return t(s)?s:e(s,o)?[s]:r(n(s))}return h_=i,h_}var d_,_2;function md(){if(_2)return d_;_2=1;var t=Lb();function e(r){if(typeof r=="string"||t(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return d_=e,d_}var p_,y2;function ZI(){if(y2)return p_;y2=1;var t=YI(),e=md();function r(n,i){i=t(i,n);for(var s=0,o=i.length;n!=null&&s<o;)n=n[e(i[s++])];return s&&s==o?n:void 0}return p_=r,p_}var g_,v2;function Lq(){if(v2)return g_;v2=1;var t=ZI();function e(r,n,i){var s=r==null?void 0:t(r,n);return s===void 0?i:s}return g_=e,g_}var m_,b2;function Uq(){if(b2)return m_;b2=1;function t(e,r){return e!=null&&r in Object(e)}return m_=t,m_}var __,w2;function zq(){if(w2)return __;w2=1;var t=YI(),e=MI(),r=wn(),n=II(),i=Cb(),s=md();function o(l,u,f){u=t(u,l);for(var d=-1,g=u.length,m=!1;++d<g;){var y=s(u[d]);if(!(m=l!=null&&f(l,y)))break;l=l[y]}return m||++d!=g?m:(g=l==null?0:l.length,!!g&&i(g)&&n(y,g)&&(r(l)||e(l)))}return __=o,__}var y_,S2;function $q(){if(S2)return y_;S2=1;var t=Uq(),e=zq();function r(n,i){return n!=null&&e(n,i,t)}return y_=r,y_}var v_,x2;function Vq(){if(x2)return v_;x2=1;var t=qI(),e=Lq(),r=$q(),n=Ub(),i=XI(),s=KI(),o=md(),l=1,u=2;function f(d,g){return n(d)&&i(g)?s(o(d),g):function(m){var y=e(m,d);return y===void 0&&y===g?r(m,d):t(g,y,l|u)}}return v_=f,v_}var b_,T2;function jq(){if(T2)return b_;T2=1;function t(e){return function(r){return r==null?void 0:r[e]}}return b_=t,b_}var w_,E2;function Hq(){if(E2)return w_;E2=1;var t=ZI();function e(r){return function(n){return t(n,r)}}return w_=e,w_}var S_,A2;function Wq(){if(A2)return S_;A2=1;var t=jq(),e=Hq(),r=Ub(),n=md();function i(s){return r(s)?t(n(s)):e(s)}return S_=i,S_}var x_,C2;function qq(){if(C2)return x_;C2=1;var t=Oq(),e=Vq(),r=BI(),n=wn(),i=Wq();function s(o){return typeof o=="function"?o:o==null?r:typeof o=="object"?n(o)?e(o[0],o[1]):t(o):i(o)}return x_=s,x_}var T_,R2;function Xq(){if(R2)return T_;R2=1;var t=ud();function e(r,n){return function(i,s){if(i==null)return i;if(!t(i))return r(i,s);for(var o=i.length,l=n?o:-1,u=Object(i);(n?l--:++l<o)&&s(u[l],l,u)!==!1;);return i}}return T_=e,T_}var E_,P2;function Kq(){if(P2)return E_;P2=1;var t=DI(),e=Xq(),r=e(t);return E_=r,E_}var A_,M2;function Yq(){if(M2)return A_;M2=1;var t=Kq(),e=ud();function r(n,i){var s=-1,o=e(n)?Array(n.length):[];return t(n,function(l,u,f){o[++s]=i(l,u,f)}),o}return A_=r,A_}var C_,I2;function Zq(){if(I2)return C_;I2=1;var t=LI(),e=qq(),r=Yq(),n=wn();function i(s,o){var l=n(s)?t:r;return l(s,e(o,3))}return C_=i,C_}var O2;function Gq(){if(O2)return Io;O2=1,Object.defineProperty(Io,"__esModule",{value:!0}),Io.flattenNames=void 0;var t=OW(),e=u(t),r=Ib(),n=u(r),i=VW(),s=u(i),o=Zq(),l=u(o);function u(d){return d&&d.__esModule?d:{default:d}}var f=Io.flattenNames=function d(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],m=[];return(0,l.default)(g,function(y){Array.isArray(y)?d(y).map(function(w){return m.push(w)}):(0,s.default)(y)?(0,n.default)(y,function(w,b){w===!0&&m.push(b),m.push(b+"-"+w)}):(0,e.default)(y)&&m.push(y)}),m};return Io.default=f,Io}var Oo={},R_,k2;function Qq(){if(k2)return R_;k2=1;function t(e,r){for(var n=-1,i=e==null?0:e.length;++n<i&&r(e[n],n,e)!==!1;);return e}return R_=t,R_}var P_,N2;function Jq(){if(N2)return P_;N2=1;var t=qs(),e=function(){try{var r=t(Object,"defineProperty");return r({},"",{}),r}catch{}}();return P_=e,P_}var M_,F2;function GI(){if(F2)return M_;F2=1;var t=Jq();function e(r,n,i){n=="__proto__"&&t?t(r,n,{configurable:!0,enumerable:!0,value:i,writable:!0}):r[n]=i}return M_=e,M_}var I_,D2;function QI(){if(D2)return I_;D2=1;var t=GI(),e=kb(),r=Object.prototype,n=r.hasOwnProperty;function i(s,o,l){var u=s[o];(!(n.call(s,o)&&e(u,l))||l===void 0&&!(o in s))&&t(s,o,l)}return I_=i,I_}var O_,B2;function _d(){if(B2)return O_;B2=1;var t=QI(),e=GI();function r(n,i,s,o){var l=!s;s||(s={});for(var u=-1,f=i.length;++u<f;){var d=i[u],g=o?o(s[d],n[d],d,s,n):void 0;g===void 0&&(g=n[d]),l?e(s,d,g):t(s,d,g)}return s}return O_=r,O_}var k_,L2;function eX(){if(L2)return k_;L2=1;var t=_d(),e=Ic();function r(n,i){return n&&t(i,e(i),n)}return k_=r,k_}var N_,U2;function tX(){if(U2)return N_;U2=1;function t(e){var r=[];if(e!=null)for(var n in Object(e))r.push(n);return r}return N_=t,N_}var F_,z2;function rX(){if(z2)return F_;z2=1;var t=Fa(),e=Mb(),r=tX(),n=Object.prototype,i=n.hasOwnProperty;function s(o){if(!t(o))return r(o);var l=e(o),u=[];for(var f in o)f=="constructor"&&(l||!i.call(o,f))||u.push(f);return u}return F_=s,F_}var D_,$2;function zb(){if($2)return D_;$2=1;var t=kI(),e=rX(),r=ud();function n(i){return r(i)?t(i,!0):e(i)}return D_=n,D_}var B_,V2;function nX(){if(V2)return B_;V2=1;var t=_d(),e=zb();function r(n,i){return n&&t(i,e(i),n)}return B_=r,B_}var Hl={exports:{}};Hl.exports;var j2;function iX(){return j2||(j2=1,function(t,e){var r=$n(),n=e&&!e.nodeType&&e,i=n&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===n,o=s?r.Buffer:void 0,l=o?o.allocUnsafe:void 0;function u(f,d){if(d)return f.slice();var g=f.length,m=l?l(g):new f.constructor(g);return f.copy(m),m}t.exports=u}(Hl,Hl.exports)),Hl.exports}var L_,H2;function sX(){if(H2)return L_;H2=1;function t(e,r){var n=-1,i=e.length;for(r||(r=Array(i));++n<i;)r[n]=e[n];return r}return L_=t,L_}var U_,W2;function oX(){if(W2)return U_;W2=1;var t=_d(),e=Bb();function r(n,i){return t(n,e(n),i)}return U_=r,U_}var z_,q2;function JI(){if(q2)return z_;q2=1;var t=VI(),e=Ob(),r=Bb(),n=HI(),i=Object.getOwnPropertySymbols,s=i?function(o){for(var l=[];o;)t(l,r(o)),o=e(o);return l}:n;return z_=s,z_}var $_,X2;function aX(){if(X2)return $_;X2=1;var t=_d(),e=JI();function r(n,i){return t(n,e(n),i)}return $_=r,$_}var V_,K2;function lX(){if(K2)return V_;K2=1;var t=jI(),e=JI(),r=zb();function n(i){return t(i,r,e)}return V_=n,V_}var j_,Y2;function cX(){if(Y2)return j_;Y2=1;var t=Object.prototype,e=t.hasOwnProperty;function r(n){var i=n.length,s=new n.constructor(i);return i&&typeof n[0]=="string"&&e.call(n,"index")&&(s.index=n.index,s.input=n.input),s}return j_=r,j_}var H_,Z2;function $b(){if(Z2)return H_;Z2=1;var t=$I();function e(r){var n=new r.constructor(r.byteLength);return new t(n).set(new t(r)),n}return H_=e,H_}var W_,G2;function uX(){if(G2)return W_;G2=1;var t=$b();function e(r,n){var i=n?t(r.buffer):r.buffer;return new r.constructor(i,r.byteOffset,r.byteLength)}return W_=e,W_}var q_,Q2;function fX(){if(Q2)return q_;Q2=1;var t=/\w*$/;function e(r){var n=new r.constructor(r.source,t.exec(r));return n.lastIndex=r.lastIndex,n}return q_=e,q_}var X_,J2;function hX(){if(J2)return X_;J2=1;var t=Mc(),e=t?t.prototype:void 0,r=e?e.valueOf:void 0;function n(i){return r?Object(r.call(i)):{}}return X_=n,X_}var K_,eR;function dX(){if(eR)return K_;eR=1;var t=$b();function e(r,n){var i=n?t(r.buffer):r.buffer;return new r.constructor(i,r.byteOffset,r.length)}return K_=e,K_}var Y_,tR;function pX(){if(tR)return Y_;tR=1;var t=$b(),e=uX(),r=fX(),n=hX(),i=dX(),s="[object Boolean]",o="[object Date]",l="[object Map]",u="[object Number]",f="[object RegExp]",d="[object Set]",g="[object String]",m="[object Symbol]",y="[object ArrayBuffer]",w="[object DataView]",b="[object Float32Array]",S="[object Float64Array]",E="[object Int8Array]",k="[object Int16Array]",C="[object Int32Array]",P="[object Uint8Array]",M="[object Uint8ClampedArray]",D="[object Uint16Array]",q="[object Uint32Array]";function ee(J,A,X){var te=J.constructor;switch(A){case y:return t(J);case s:case o:return new te(+J);case w:return e(J,X);case b:case S:case E:case k:case C:case P:case M:case D:case q:return i(J,X);case l:return new te;case u:case g:return new te(J);case f:return r(J);case d:return new te;case m:return n(J)}}return Y_=ee,Y_}var Z_,rR;function gX(){if(rR)return Z_;rR=1;var t=Fa(),e=Object.create,r=function(){function n(){}return function(i){if(!t(i))return{};if(e)return e(i);n.prototype=i;var s=new n;return n.prototype=void 0,s}}();return Z_=r,Z_}var G_,nR;function mX(){if(nR)return G_;nR=1;var t=gX(),e=Ob(),r=Mb();function n(i){return typeof i.constructor=="function"&&!r(i)?t(e(i)):{}}return G_=n,G_}var Q_,iR;function _X(){if(iR)return Q_;iR=1;var t=gd(),e=oi(),r="[object Map]";function n(i){return e(i)&&t(i)==r}return Q_=n,Q_}var J_,sR;function yX(){if(sR)return J_;sR=1;var t=_X(),e=Rb(),r=Pb(),n=r&&r.isMap,i=n?e(n):t;return J_=i,J_}var ey,oR;function vX(){if(oR)return ey;oR=1;var t=gd(),e=oi(),r="[object Set]";function n(i){return e(i)&&t(i)==r}return ey=n,ey}var ty,aR;function bX(){if(aR)return ty;aR=1;var t=vX(),e=Rb(),r=Pb(),n=r&&r.isSet,i=n?e(n):t;return ty=i,ty}var ry,lR;function wX(){if(lR)return ry;lR=1;var t=Db(),e=Qq(),r=QI(),n=eX(),i=nX(),s=iX(),o=sX(),l=oX(),u=aX(),f=WI(),d=lX(),g=gd(),m=cX(),y=pX(),w=mX(),b=wn(),S=Ab(),E=yX(),k=Fa(),C=bX(),P=Ic(),M=zb(),D=1,q=2,ee=4,J="[object Arguments]",A="[object Array]",X="[object Boolean]",te="[object Date]",Q="[object Error]",ie="[object Function]",xe="[object GeneratorFunction]",F="[object Map]",z="[object Number]",O="[object Object]",$="[object RegExp]",j="[object Set]",R="[object String]",L="[object Symbol]",se="[object WeakMap]",ue="[object ArrayBuffer]",he="[object DataView]",we="[object Float32Array]",Te="[object Float64Array]",me="[object Int8Array]",Oe="[object Int16Array]",Ne="[object Int32Array]",Tt="[object Uint8Array]",vt="[object Uint8ClampedArray]",nt="[object Uint16Array]",Dt="[object Uint32Array]",ve={};ve[J]=ve[A]=ve[ue]=ve[he]=ve[X]=ve[te]=ve[we]=ve[Te]=ve[me]=ve[Oe]=ve[Ne]=ve[F]=ve[z]=ve[O]=ve[$]=ve[j]=ve[R]=ve[L]=ve[Tt]=ve[vt]=ve[nt]=ve[Dt]=!0,ve[Q]=ve[ie]=ve[se]=!1;function ze(Ie,Ot,Jt,mr,Kt,Re){var pt,Vr=Ot&D,le=Ot&q,ge=Ot&ee;if(Jt&&(pt=Kt?Jt(Ie,mr,Kt,Re):Jt(Ie)),pt!==void 0)return pt;if(!k(Ie))return Ie;var Me=b(Ie);if(Me){if(pt=m(Ie),!Vr)return o(Ie,pt)}else{var Ue=g(Ie),qe=Ue==ie||Ue==xe;if(S(Ie))return s(Ie,Vr);if(Ue==O||Ue==J||qe&&!Kt){if(pt=le||qe?{}:w(Ie),!Vr)return le?u(Ie,i(pt,Ie)):l(Ie,n(pt,Ie))}else{if(!ve[Ue])return Kt?Ie:{};pt=y(Ie,Ue,Vr)}}Re||(Re=new t);var Pe=Re.get(Ie);if(Pe)return Pe;Re.set(Ie,pt),C(Ie)?Ie.forEach(function(Ye){pt.add(ze(Ye,Ot,Jt,Ye,Ie,Re))}):E(Ie)&&Ie.forEach(function(Ye,bt){pt.set(bt,ze(Ye,Ot,Jt,bt,Ie,Re))});var ct=ge?le?d:f:le?M:P,Bt=Me?void 0:ct(Ie);return e(Bt||Ie,function(Ye,bt){Bt&&(bt=Ye,Ye=Ie[bt]),r(pt,bt,ze(Ye,Ot,Jt,bt,Ie,Re))}),pt}return ry=ze,ry}var ny,cR;function SX(){if(cR)return ny;cR=1;var t=wX(),e=1,r=4;function n(i){return t(i,e|r)}return ny=n,ny}var uR;function xX(){if(uR)return Oo;uR=1,Object.defineProperty(Oo,"__esModule",{value:!0}),Oo.mergeClasses=void 0;var t=Ib(),e=s(t),r=SX(),n=s(r),i=Object.assign||function(l){for(var u=1;u<arguments.length;u++){var f=arguments[u];for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(l[d]=f[d])}return l};function s(l){return l&&l.__esModule?l:{default:l}}var o=Oo.mergeClasses=function(u){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],d=u.default&&(0,n.default)(u.default)||{};return f.map(function(g){var m=u[g];return m&&(0,e.default)(m,function(y,w){d[w]||(d[w]={}),d[w]=i({},d[w],m[w])}),g}),d};return Oo.default=o,Oo}var ko={},fR;function TX(){if(fR)return ko;fR=1,Object.defineProperty(ko,"__esModule",{value:!0}),ko.autoprefix=void 0;var t=Ib(),e=n(t),r=Object.assign||function(o){for(var l=1;l<arguments.length;l++){var u=arguments[l];for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(o[f]=u[f])}return o};function n(o){return o&&o.__esModule?o:{default:o}}var i={borderRadius:function(l){return{msBorderRadius:l,MozBorderRadius:l,OBorderRadius:l,WebkitBorderRadius:l,borderRadius:l}},boxShadow:function(l){return{msBoxShadow:l,MozBoxShadow:l,OBoxShadow:l,WebkitBoxShadow:l,boxShadow:l}},userSelect:function(l){return{WebkitTouchCallout:l,KhtmlUserSelect:l,MozUserSelect:l,msUserSelect:l,WebkitUserSelect:l,userSelect:l}},flex:function(l){return{WebkitBoxFlex:l,MozBoxFlex:l,WebkitFlex:l,msFlex:l,flex:l}},flexBasis:function(l){return{WebkitFlexBasis:l,flexBasis:l}},justifyContent:function(l){return{WebkitJustifyContent:l,justifyContent:l}},transition:function(l){return{msTransition:l,MozTransition:l,OTransition:l,WebkitTransition:l,transition:l}},transform:function(l){return{msTransform:l,MozTransform:l,OTransform:l,WebkitTransform:l,transform:l}},absolute:function(l){var u=l&&l.split(" ");return{position:"absolute",top:u&&u[0],right:u&&u[1],bottom:u&&u[2],left:u&&u[3]}},extend:function(l,u){var f=u[l];return f||{extend:l}}},s=ko.autoprefix=function(l){var u={};return(0,e.default)(l,function(f,d){var g={};(0,e.default)(f,function(m,y){var w=i[y];w?g=r({},g,w(m)):g[y]=m}),u[d]=g}),u};return ko.default=s,ko}var No={},hR;function EX(){if(hR)return No;hR=1,Object.defineProperty(No,"__esModule",{value:!0}),No.hover=void 0;var t=Object.assign||function(u){for(var f=1;f<arguments.length;f++){var d=arguments[f];for(var g in d)Object.prototype.hasOwnProperty.call(d,g)&&(u[g]=d[g])}return u},e=Us(),r=n(e);function n(u){return u&&u.__esModule?u:{default:u}}function i(u,f){if(!(u instanceof f))throw new TypeError("Cannot call a class as a function")}function s(u,f){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:u}function o(u,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);u.prototype=Object.create(f&&f.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(u,f):u.__proto__=f)}var l=No.hover=function(f){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(g){o(m,g);function m(){var y,w,b,S;i(this,m);for(var E=arguments.length,k=Array(E),C=0;C<E;C++)k[C]=arguments[C];return S=(w=(b=s(this,(y=m.__proto__||Object.getPrototypeOf(m)).call.apply(y,[this].concat(k))),b),b.state={hover:!1},b.handleMouseOver=function(){return b.setState({hover:!0})},b.handleMouseOut=function(){return b.setState({hover:!1})},b.render=function(){return r.default.createElement(d,{onMouseOver:b.handleMouseOver,onMouseOut:b.handleMouseOut},r.default.createElement(f,t({},b.props,b.state)))},w),s(b,S)}return m}(r.default.Component)};return No.default=l,No}var Fo={},dR;function AX(){if(dR)return Fo;dR=1,Object.defineProperty(Fo,"__esModule",{value:!0}),Fo.active=void 0;var t=Object.assign||function(u){for(var f=1;f<arguments.length;f++){var d=arguments[f];for(var g in d)Object.prototype.hasOwnProperty.call(d,g)&&(u[g]=d[g])}return u},e=Us(),r=n(e);function n(u){return u&&u.__esModule?u:{default:u}}function i(u,f){if(!(u instanceof f))throw new TypeError("Cannot call a class as a function")}function s(u,f){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:u}function o(u,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);u.prototype=Object.create(f&&f.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(u,f):u.__proto__=f)}var l=Fo.active=function(f){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(g){o(m,g);function m(){var y,w,b,S;i(this,m);for(var E=arguments.length,k=Array(E),C=0;C<E;C++)k[C]=arguments[C];return S=(w=(b=s(this,(y=m.__proto__||Object.getPrototypeOf(m)).call.apply(y,[this].concat(k))),b),b.state={active:!1},b.handleMouseDown=function(){return b.setState({active:!0})},b.handleMouseUp=function(){return b.setState({active:!1})},b.render=function(){return r.default.createElement(d,{onMouseDown:b.handleMouseDown,onMouseUp:b.handleMouseUp},r.default.createElement(f,t({},b.props,b.state)))},w),s(b,S)}return m}(r.default.Component)};return Fo.default=l,Fo}var wf={},pR;function CX(){if(pR)return wf;pR=1,Object.defineProperty(wf,"__esModule",{value:!0});var t=function(r,n){var i={},s=function(l){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;i[l]=u};return r===0&&s("first-child"),r===n-1&&s("last-child"),(r===0||r%2===0)&&s("even"),Math.abs(r%2)===1&&s("odd"),s("nth-child",r),i};return wf.default=t,wf}var gR;function RX(){if(gR)return Ar;gR=1,Object.defineProperty(Ar,"__esModule",{value:!0}),Ar.ReactCSS=Ar.loop=Ar.handleActive=Ar.handleHover=Ar.hover=void 0;var t=Gq(),e=m(t),r=xX(),n=m(r),i=TX(),s=m(i),o=EX(),l=m(o),u=AX(),f=m(u),d=CX(),g=m(d);function m(w){return w&&w.__esModule?w:{default:w}}Ar.hover=l.default,Ar.handleHover=l.default,Ar.handleActive=f.default,Ar.loop=g.default;var y=Ar.ReactCSS=function(b){for(var S=arguments.length,E=Array(S>1?S-1:0),k=1;k<S;k++)E[k-1]=arguments[k];var C=(0,e.default)(E),P=(0,n.default)(b,C);return(0,s.default)(P)};return Ar.default=y,Ar}var Vb=RX();const Be=Ma(Vb);var iy={exports:{}},sy,mR;function PX(){if(mR)return sy;mR=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return sy=t,sy}var oy,_R;function MX(){if(_R)return oy;_R=1;var t=PX();function e(){}function r(){}return r.resetWarningCache=e,oy=function(){function n(o,l,u,f,d,g){if(g!==t){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}}n.isRequired=n;function i(){return n}var s={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:i,element:n,elementType:n,instanceOf:i,node:n,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:r,resetWarningCache:e};return s.PropTypes=s,s},oy}var yR;function IX(){return yR||(yR=1,iy.exports=MX()()),iy.exports}var OX=IX();const pe=Ma(OX);function eO(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(r=eO(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function xt(){for(var t,e,r=0,n="",i=arguments.length;r<i;r++)(t=arguments[r])&&(e=eO(t))&&(n&&(n+=" "),n+=e);return n}function Xs(t,e,r=void 0){const n={};for(const i in t){const s=t[i];let o="",l=!0;for(let u=0;u<s.length;u+=1){const f=s[u];f&&(o+=(l===!0?"":" ")+e(f),l=!1,r&&r[f]&&(o+=" "+r[f]))}n[i]=o}return n}function Fs(t,...e){const r=new URL(`https://mui.com/production-error/?code=${t}`);return e.forEach(n=>r.searchParams.append("args[]",n)),`Minified MUI error #${t}; visit ${r} for the full message.`}function jo(t,e=Number.MIN_SAFE_INTEGER,r=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(t,r))}function jb(t,e=0,r=1){return jo(t,e,r)}function kX(t){t=t.slice(1);const e=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let r=t.match(e);return r&&r[0].length===1&&(r=r.map(n=>n+n)),r?`rgb${r.length===4?"a":""}(${r.map((n,i)=>i<3?parseInt(n,16):Math.round(parseInt(n,16)/255*1e3)/1e3).join(", ")})`:""}function Xi(t){if(t.type)return t;if(t.charAt(0)==="#")return Xi(kX(t));const e=t.indexOf("("),r=t.substring(0,e);if(!["rgb","rgba","hsl","hsla","color"].includes(r))throw new Error(Fs(9,t));let n=t.substring(e+1,t.length-1),i;if(r==="color"){if(n=n.split(" "),i=n.shift(),n.length===4&&n[3].charAt(0)==="/"&&(n[3]=n[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(i))throw new Error(Fs(10,i))}else n=n.split(",");return n=n.map(s=>parseFloat(s)),{type:r,values:n,colorSpace:i}}const NX=t=>{const e=Xi(t);return e.values.slice(0,3).map((r,n)=>e.type.includes("hsl")&&n!==0?`${r}%`:r).join(" ")},Wl=(t,e)=>{try{return NX(t)}catch{return t}};function yd(t){const{type:e,colorSpace:r}=t;let{values:n}=t;return e.includes("rgb")?n=n.map((i,s)=>s<3?parseInt(i,10):i):e.includes("hsl")&&(n[1]=`${n[1]}%`,n[2]=`${n[2]}%`),e.includes("color")?n=`${r} ${n.join(" ")}`:n=`${n.join(", ")}`,`${e}(${n})`}function tO(t){t=Xi(t);const{values:e}=t,r=e[0],n=e[1]/100,i=e[2]/100,s=n*Math.min(i,1-i),o=(f,d=(f+r/30)%12)=>i-s*Math.max(Math.min(d-3,9-d,1),-1);let l="rgb";const u=[Math.round(o(0)*255),Math.round(o(8)*255),Math.round(o(4)*255)];return t.type==="hsla"&&(l+="a",u.push(e[3])),yd({type:l,values:u})}function wv(t){t=Xi(t);let e=t.type==="hsl"||t.type==="hsla"?Xi(tO(t)).values:t.values;return e=e.map(r=>(t.type!=="color"&&(r/=255),r<=.03928?r/12.92:((r+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function FX(t,e){const r=wv(t),n=wv(e);return(Math.max(r,n)+.05)/(Math.min(r,n)+.05)}function Ds(t,e){return t=Xi(t),e=jb(e),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.type==="color"?t.values[3]=`/${e}`:t.values[3]=e,yd(t)}function Sf(t,e,r){try{return Ds(t,e)}catch{return t}}function mc(t,e){if(t=Xi(t),e=jb(e),t.type.includes("hsl"))t.values[2]*=1-e;else if(t.type.includes("rgb")||t.type.includes("color"))for(let r=0;r<3;r+=1)t.values[r]*=1-e;return yd(t)}function ot(t,e,r){try{return mc(t,e)}catch{return t}}function _c(t,e){if(t=Xi(t),e=jb(e),t.type.includes("hsl"))t.values[2]+=(100-t.values[2])*e;else if(t.type.includes("rgb"))for(let r=0;r<3;r+=1)t.values[r]+=(255-t.values[r])*e;else if(t.type.includes("color"))for(let r=0;r<3;r+=1)t.values[r]+=(1-t.values[r])*e;return yd(t)}function at(t,e,r){try{return _c(t,e)}catch{return t}}function DX(t,e=.15){return wv(t)>.5?mc(t,e):_c(t,e)}function xf(t,e,r){try{return DX(t,e)}catch{return t}}const BX=re.createContext(),LX=()=>re.useContext(BX)??!1;function UX(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function Sh(...t){return re.useMemo(()=>t.every(e=>e==null)?null:e=>{t.forEach(r=>{UX(r,e)})},t)}function zX(t){return typeof t=="string"}function $X(t,e,r){return t===void 0||zX(t)?e:{...e,ownerState:{...e.ownerState,...r}}}function jf(t,e=[]){if(t===void 0)return{};const r={};return Object.keys(t).filter(n=>n.match(/^on[A-Z]/)&&typeof t[n]=="function"&&!e.includes(n)).forEach(n=>{r[n]=t[n]}),r}function vR(t){if(t===void 0)return{};const e={};return Object.keys(t).filter(r=>!(r.match(/^on[A-Z]/)&&typeof t[r]=="function")).forEach(r=>{e[r]=t[r]}),e}function VX(t){const{getSlotProps:e,additionalProps:r,externalSlotProps:n,externalForwardedProps:i,className:s}=t;if(!e){const y=xt(r==null?void 0:r.className,s,i==null?void 0:i.className,n==null?void 0:n.className),w={...r==null?void 0:r.style,...i==null?void 0:i.style,...n==null?void 0:n.style},b={...r,...i,...n};return y.length>0&&(b.className=y),Object.keys(w).length>0&&(b.style=w),{props:b,internalRef:void 0}}const o=jf({...i,...n}),l=vR(n),u=vR(i),f=e(o),d=xt(f==null?void 0:f.className,r==null?void 0:r.className,s,i==null?void 0:i.className,n==null?void 0:n.className),g={...f==null?void 0:f.style,...r==null?void 0:r.style,...i==null?void 0:i.style,...n==null?void 0:n.style},m={...f,...r,...u,...l};return d.length>0&&(m.className=d),Object.keys(g).length>0&&(m.style=g),{props:m,internalRef:f.ref}}function jX(t,e,r){return typeof t=="function"?t(e,r):t}function Fi(t){var g;const{elementType:e,externalSlotProps:r,ownerState:n,skipResolvingSlotProps:i=!1,...s}=t,o=i?{}:jX(r,n),{props:l,internalRef:u}=VX({...s,externalSlotProps:o}),f=Sh(u,o==null?void 0:o.ref,(g=t.additionalProps)==null?void 0:g.ref);return $X(e,{...l,ref:f},n)}var ay={exports:{}},tt={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bR;function HX(){if(bR)return tt;bR=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),m=Symbol.for("react.offscreen"),y=Symbol.for("react.client.reference");function w(b){if(typeof b=="object"&&b!==null){var S=b.$$typeof;switch(S){case t:switch(b=b.type,b){case r:case i:case n:case u:case f:return b;default:switch(b=b&&b.$$typeof,b){case o:case l:case g:case d:return b;case s:return b;default:return S}}case e:return S}}}return tt.ContextConsumer=s,tt.ContextProvider=o,tt.Element=t,tt.ForwardRef=l,tt.Fragment=r,tt.Lazy=g,tt.Memo=d,tt.Portal=e,tt.Profiler=i,tt.StrictMode=n,tt.Suspense=u,tt.SuspenseList=f,tt.isContextConsumer=function(b){return w(b)===s},tt.isContextProvider=function(b){return w(b)===o},tt.isElement=function(b){return typeof b=="object"&&b!==null&&b.$$typeof===t},tt.isForwardRef=function(b){return w(b)===l},tt.isFragment=function(b){return w(b)===r},tt.isLazy=function(b){return w(b)===g},tt.isMemo=function(b){return w(b)===d},tt.isPortal=function(b){return w(b)===e},tt.isProfiler=function(b){return w(b)===i},tt.isStrictMode=function(b){return w(b)===n},tt.isSuspense=function(b){return w(b)===u},tt.isSuspenseList=function(b){return w(b)===f},tt.isValidElementType=function(b){return typeof b=="string"||typeof b=="function"||b===r||b===i||b===n||b===u||b===f||b===m||typeof b=="object"&&b!==null&&(b.$$typeof===g||b.$$typeof===d||b.$$typeof===o||b.$$typeof===s||b.$$typeof===l||b.$$typeof===y||b.getModuleId!==void 0)},tt.typeOf=w,tt}var wR;function WX(){return wR||(wR=1,ay.exports=HX()),ay.exports}var rO=WX();function Dn(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function nO(t){if(re.isValidElement(t)||rO.isValidElementType(t)||!Dn(t))return t;const e={};return Object.keys(t).forEach(r=>{e[r]=nO(t[r])}),e}function vr(t,e,r={clone:!0}){const n=r.clone?{...t}:t;return Dn(t)&&Dn(e)&&Object.keys(e).forEach(i=>{re.isValidElement(e[i])||rO.isValidElementType(e[i])?n[i]=e[i]:Dn(e[i])&&Object.prototype.hasOwnProperty.call(t,i)&&Dn(t[i])?n[i]=vr(t[i],e[i],r):r.clone?n[i]=Dn(e[i])?nO(e[i]):e[i]:n[i]=e[i]}),n}function Xt(t){if(typeof t!="string")throw new Error(Fs(7));return t.charAt(0).toUpperCase()+t.slice(1)}function Hf(t){return t&&t.ownerDocument||document}const iO=typeof window<"u"?re.useLayoutEffect:re.useEffect;function sO({controlled:t,default:e,name:r,state:n="value"}){const{current:i}=re.useRef(t!==void 0),[s,o]=re.useState(e),l=i?t:s,u=re.useCallback(f=>{i||o(f)},[]);return[l,u]}function Ms(t){const e=re.useRef(t);return iO(()=>{e.current=t}),re.useRef((...r)=>(0,e.current)(...r)).current}const SR={};function oO(t,e){const r=re.useRef(SR);return r.current===SR&&(r.current=t(e)),r}const qX=[];function XX(t){re.useEffect(t,qX)}class Hb{constructor(){T(this,"currentId",null);T(this,"clear",()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)});T(this,"disposeEffect",()=>this.clear)}static create(){return new Hb}start(e,r){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,r()},e)}}function KX(){const t=oO(Hb.create).current;return XX(t.disposeEffect),t}function xh(t){try{return t.matches(":focus-visible")}catch{}return!1}const YX={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};function Th(t,e){const r={...e};for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=n;if(i==="components"||i==="slots")r[i]={...t[i],...r[i]};else if(i==="componentsProps"||i==="slotProps"){const s=t[i],o=e[i];if(!o)r[i]=s||{};else if(!s)r[i]=o;else{r[i]={...o};for(const l in s)if(Object.prototype.hasOwnProperty.call(s,l)){const u=l;r[i][u]=Th(s[u],o[u])}}}else r[i]===void 0&&(r[i]=t[i])}return r}const xR=t=>t,ZX=()=>{let t=xR;return{configure(e){t=e},generate(e){return t(e)},reset(){t=xR}}},GX=ZX(),QX={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Zi(t,e,r="Mui"){const n=QX[e];return n?`${r}-${n}`:`${GX.generate(t)}-${e}`}function Ks(t,e,r="Mui"){const n={};return e.forEach(i=>{n[i]=Zi(t,i,r)}),n}function JX(t,e,r=(n,i)=>n===i){return t.length===e.length&&t.every((n,i)=>r(n,e[i]))}const eK=2;function Do(t,e,r,n,i){return r===1?Math.min(t+e,i):Math.max(t-e,n)}function aO(t,e){return t-e}function TR(t,e){const{index:r}=t.reduce((n,i,s)=>{const o=Math.abs(e-i);return n===null||o<n.distance||o===n.distance?{distance:o,index:s}:n},null)??{};return r}function Tf(t,e){if(e.current!==void 0&&t.changedTouches){const r=t;for(let n=0;n<r.changedTouches.length;n+=1){const i=r.changedTouches[n];if(i.identifier===e.current)return{x:i.clientX,y:i.clientY}}return!1}return{x:t.clientX,y:t.clientY}}function Eh(t,e,r){return(t-e)*100/(r-e)}function tK(t,e,r){return(r-e)*t+e}function rK(t){if(Math.abs(t)<1){const r=t.toExponential().split("e-"),n=r[0].split(".")[1];return(n?n.length:0)+parseInt(r[1],10)}const e=t.toString().split(".")[1];return e?e.length:0}function nK(t,e,r){const n=Math.round((t-r)/e)*e+r;return Number(n.toFixed(rK(e)))}function ER({values:t,newValue:e,index:r}){const n=t.slice();return n[r]=e,n.sort(aO)}function Ef({sliderRef:t,activeIndex:e,setActive:r}){var i,s,o;const n=Hf(t.current);(!((i=t.current)!=null&&i.contains(n.activeElement))||Number((s=n==null?void 0:n.activeElement)==null?void 0:s.getAttribute("data-index"))!==e)&&((o=t.current)==null||o.querySelector(`[type="range"][data-index="${e}"]`).focus()),r&&r(e)}function Af(t,e){return typeof t=="number"&&typeof e=="number"?t===e:typeof t=="object"&&typeof e=="object"?JX(t,e):!1}const iK={horizontal:{offset:t=>({left:`${t}%`}),leap:t=>({width:`${t}%`})},"horizontal-reverse":{offset:t=>({right:`${t}%`}),leap:t=>({width:`${t}%`})},vertical:{offset:t=>({bottom:`${t}%`}),leap:t=>({height:`${t}%`})}},sK=t=>t;let Cf;function AR(){return Cf===void 0&&(typeof CSS<"u"&&typeof CSS.supports=="function"?Cf=CSS.supports("touch-action","none"):Cf=!0),Cf}function oK(t){const{"aria-labelledby":e,defaultValue:r,disabled:n=!1,disableSwap:i=!1,isRtl:s=!1,marks:o=!1,max:l=100,min:u=0,name:f,onChange:d,onChangeCommitted:g,orientation:m="horizontal",rootRef:y,scale:w=sK,step:b=1,shiftStep:S=10,tabIndex:E,value:k}=t,C=re.useRef(void 0),[P,M]=re.useState(-1),[D,q]=re.useState(-1),[ee,J]=re.useState(!1),A=re.useRef(0),X=re.useRef(null),[te,Q]=sO({controlled:k,default:r??u,name:"Slider"}),ie=d&&((le,ge,Me)=>{const Ue=le.nativeEvent||le,qe=new Ue.constructor(Ue.type,Ue);Object.defineProperty(qe,"target",{writable:!0,value:{value:ge,name:f}}),X.current=ge,d(qe,ge,Me)}),xe=Array.isArray(te);let F=xe?te.slice().sort(aO):[te];F=F.map(le=>le==null?u:jo(le,u,l));const z=o===!0&&b!==null?[...Array(Math.floor((l-u)/b)+1)].map((le,ge)=>({value:u+b*ge})):o||[],O=z.map(le=>le.value),[$,j]=re.useState(-1),R=re.useRef(null),L=Sh(y,R),se=le=>ge=>{var Ue;const Me=Number(ge.currentTarget.getAttribute("data-index"));xh(ge.target)&&j(Me),q(Me),(Ue=le==null?void 0:le.onFocus)==null||Ue.call(le,ge)},ue=le=>ge=>{var Me;xh(ge.target)||j(-1),q(-1),(Me=le==null?void 0:le.onBlur)==null||Me.call(le,ge)},he=(le,ge)=>{const Me=Number(le.currentTarget.getAttribute("data-index")),Ue=F[Me],qe=O.indexOf(Ue);let Pe=ge;if(z&&b==null){const ct=O[O.length-1];Pe>ct?Pe=ct:Pe<O[0]?Pe=O[0]:Pe=Pe<Ue?O[qe-1]:O[qe+1]}if(Pe=jo(Pe,u,l),xe){i&&(Pe=jo(Pe,F[Me-1]||-1/0,F[Me+1]||1/0));const ct=Pe;Pe=ER({values:F,newValue:Pe,index:Me});let Bt=Me;i||(Bt=Pe.indexOf(ct)),Ef({sliderRef:R,activeIndex:Bt})}Q(Pe),j(Me),ie&&!Af(Pe,te)&&ie(le,Pe,Me),g&&g(le,X.current??Pe)},we=le=>ge=>{var Me;if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","PageUp","PageDown","Home","End"].includes(ge.key)){ge.preventDefault();const Ue=Number(ge.currentTarget.getAttribute("data-index")),qe=F[Ue];let Pe=null;if(b!=null){const ct=ge.shiftKey?S:b;switch(ge.key){case"ArrowUp":Pe=Do(qe,ct,1,u,l);break;case"ArrowRight":Pe=Do(qe,ct,s?-1:1,u,l);break;case"ArrowDown":Pe=Do(qe,ct,-1,u,l);break;case"ArrowLeft":Pe=Do(qe,ct,s?1:-1,u,l);break;case"PageUp":Pe=Do(qe,S,1,u,l);break;case"PageDown":Pe=Do(qe,S,-1,u,l);break;case"Home":Pe=u;break;case"End":Pe=l;break}}else if(z){const ct=O[O.length-1],Bt=O.indexOf(qe),Ye=[s?"ArrowRight":"ArrowLeft","ArrowDown","PageDown","Home"],bt=[s?"ArrowLeft":"ArrowRight","ArrowUp","PageUp","End"];Ye.includes(ge.key)?Bt===0?Pe=O[0]:Pe=O[Bt-1]:bt.includes(ge.key)&&(Bt===O.length-1?Pe=ct:Pe=O[Bt+1])}Pe!=null&&he(ge,Pe)}(Me=le==null?void 0:le.onKeyDown)==null||Me.call(le,ge)};iO(()=>{var le;n&&R.current.contains(document.activeElement)&&((le=document.activeElement)==null||le.blur())},[n]),n&&P!==-1&&M(-1),n&&$!==-1&&j(-1);const Te=le=>ge=>{var Me;(Me=le.onChange)==null||Me.call(le,ge),he(ge,ge.target.valueAsNumber)},me=re.useRef(void 0);let Oe=m;s&&m==="horizontal"&&(Oe+="-reverse");const Ne=({finger:le,move:ge=!1})=>{const{current:Me}=R,{width:Ue,height:qe,bottom:Pe,left:ct}=Me.getBoundingClientRect();let Bt;Oe.startsWith("vertical")?Bt=(Pe-le.y)/qe:Bt=(le.x-ct)/Ue,Oe.includes("-reverse")&&(Bt=1-Bt);let Ye;if(Ye=tK(Bt,u,l),b)Ye=nK(Ye,b,u);else{const Qi=TR(O,Ye);Ye=O[Qi]}Ye=jo(Ye,u,l);let bt=0;if(xe){ge?bt=me.current:bt=TR(F,Ye),i&&(Ye=jo(Ye,F[bt-1]||-1/0,F[bt+1]||1/0));const Qi=Ye;Ye=ER({values:F,newValue:Ye,index:bt}),i&&ge||(bt=Ye.indexOf(Qi),me.current=bt)}return{newValue:Ye,activeIndex:bt}},Tt=Ms(le=>{const ge=Tf(le,C);if(!ge)return;if(A.current+=1,le.type==="mousemove"&&le.buttons===0){vt(le);return}const{newValue:Me,activeIndex:Ue}=Ne({finger:ge,move:!0});Ef({sliderRef:R,activeIndex:Ue,setActive:M}),Q(Me),!ee&&A.current>eK&&J(!0),ie&&!Af(Me,te)&&ie(le,Me,Ue)}),vt=Ms(le=>{const ge=Tf(le,C);if(J(!1),!ge)return;const{newValue:Me}=Ne({finger:ge,move:!0});M(-1),le.type==="touchend"&&q(-1),g&&g(le,X.current??Me),C.current=void 0,Dt()}),nt=Ms(le=>{if(n)return;AR()||le.preventDefault();const ge=le.changedTouches[0];ge!=null&&(C.current=ge.identifier);const Me=Tf(le,C);if(Me!==!1){const{newValue:qe,activeIndex:Pe}=Ne({finger:Me});Ef({sliderRef:R,activeIndex:Pe,setActive:M}),Q(qe),ie&&!Af(qe,te)&&ie(le,qe,Pe)}A.current=0;const Ue=Hf(R.current);Ue.addEventListener("touchmove",Tt,{passive:!0}),Ue.addEventListener("touchend",vt,{passive:!0})}),Dt=re.useCallback(()=>{const le=Hf(R.current);le.removeEventListener("mousemove",Tt),le.removeEventListener("mouseup",vt),le.removeEventListener("touchmove",Tt),le.removeEventListener("touchend",vt)},[vt,Tt]);re.useEffect(()=>{const{current:le}=R;return le.addEventListener("touchstart",nt,{passive:AR()}),()=>{le.removeEventListener("touchstart",nt),Dt()}},[Dt,nt]),re.useEffect(()=>{n&&Dt()},[n,Dt]);const ve=le=>ge=>{var qe;if((qe=le.onMouseDown)==null||qe.call(le,ge),n||ge.defaultPrevented||ge.button!==0)return;ge.preventDefault();const Me=Tf(ge,C);if(Me!==!1){const{newValue:Pe,activeIndex:ct}=Ne({finger:Me});Ef({sliderRef:R,activeIndex:ct,setActive:M}),Q(Pe),ie&&!Af(Pe,te)&&ie(ge,Pe,ct)}A.current=0;const Ue=Hf(R.current);Ue.addEventListener("mousemove",Tt,{passive:!0}),Ue.addEventListener("mouseup",vt)},ze=Eh(xe?F[0]:u,u,l),Ie=Eh(F[F.length-1],u,l)-ze,Ot=(le={})=>{const ge=jf(le),Me={onMouseDown:ve(ge||{})},Ue={...ge,...Me};return{...le,ref:L,...Ue}},Jt=le=>ge=>{var Ue;(Ue=le.onMouseOver)==null||Ue.call(le,ge);const Me=Number(ge.currentTarget.getAttribute("data-index"));q(Me)},mr=le=>ge=>{var Me;(Me=le.onMouseLeave)==null||Me.call(le,ge),q(-1)},Kt=(le={})=>{const ge=jf(le),Me={onMouseOver:Jt(ge||{}),onMouseLeave:mr(ge||{})};return{...le,...ge,...Me}},Re=le=>({pointerEvents:P!==-1&&P!==le?"none":void 0});let pt;return m==="vertical"&&(pt=s?"vertical-rl":"vertical-lr"),{active:P,axis:Oe,axisProps:iK,dragging:ee,focusedThumbIndex:$,getHiddenInputProps:(le={})=>{const ge=jf(le),Me={onChange:Te(ge||{}),onFocus:se(ge||{}),onBlur:ue(ge||{}),onKeyDown:we(ge||{})},Ue={...ge,...Me};return{tabIndex:E,"aria-labelledby":e,"aria-orientation":m,"aria-valuemax":w(l),"aria-valuemin":w(u),name:f,type:"range",min:t.min,max:t.max,step:t.step===null&&t.marks?"any":t.step??void 0,disabled:n,...le,...Ue,style:{...YX,direction:s?"rtl":"ltr",width:"100%",height:"100%",writingMode:pt}}},getRootProps:Ot,getThumbProps:Kt,marks:z,open:D,range:xe,rootRef:L,trackLeap:Ie,trackOffset:ze,values:F,getThumbStyle:Re}}function Wf(t){return typeof t=="string"}function nc(t,e){return e?vr(t,e,{clone:!1}):t}function aK(t,e){if(!t.containerQueries)return e;const r=Object.keys(e).filter(n=>n.startsWith("@container")).sort((n,i)=>{var o,l;const s=/min-width:\s*([0-9.]+)/;return+(((o=n.match(s))==null?void 0:o[1])||0)-+(((l=i.match(s))==null?void 0:l[1])||0)});return r.length?r.reduce((n,i)=>{const s=e[i];return delete n[i],n[i]=s,n},{...e}):e}function lK(t,e){return e==="@"||e.startsWith("@")&&(t.some(r=>e.startsWith(`@${r}`))||!!e.match(/^@\d/))}function cK(t,e){const r=e.match(/^@([^/]+)?\/?(.+)?$/);if(!r)return null;const[,n,i]=r,s=Number.isNaN(+n)?n||0:+n;return t.containerQueries(i).up(s)}function uK(t){const e=(s,o)=>s.replace("@media",o?`@container ${o}`:"@container");function r(s,o){s.up=(...l)=>e(t.breakpoints.up(...l),o),s.down=(...l)=>e(t.breakpoints.down(...l),o),s.between=(...l)=>e(t.breakpoints.between(...l),o),s.only=(...l)=>e(t.breakpoints.only(...l),o),s.not=(...l)=>{const u=e(t.breakpoints.not(...l),o);return u.includes("not all and")?u.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):u}}const n={},i=s=>(r(n,s),n);return r(i),{...t,containerQueries:i}}const vd={xs:0,sm:600,md:900,lg:1200,xl:1536},CR={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${vd[t]}px)`},fK={containerQueries:t=>({up:e=>{let r=typeof e=="number"?e:vd[e]||e;return typeof r=="number"&&(r=`${r}px`),t?`@container ${t} (min-width:${r})`:`@container (min-width:${r})`}})};function bn(t,e,r){const n=t.theme||{};if(Array.isArray(e)){const s=n.breakpoints||CR;return e.reduce((o,l,u)=>(o[s.up(s.keys[u])]=r(e[u]),o),{})}if(typeof e=="object"){const s=n.breakpoints||CR;return Object.keys(e).reduce((o,l)=>{if(lK(s.keys,l)){const u=cK(n.containerQueries?n:fK,l);u&&(o[u]=r(e[l],l))}else if(Object.keys(s.values||vd).includes(l)){const u=s.up(l);o[u]=r(e[l],l)}else{const u=l;o[u]=e[u]}return o},{})}return r(e)}function lO(t={}){var r;return((r=t.keys)==null?void 0:r.reduce((n,i)=>{const s=t.up(i);return n[s]={},n},{}))||{}}function cO(t,e){return t.reduce((r,n)=>{const i=r[n];return(!i||Object.keys(i).length===0)&&delete r[n],r},e)}function hK(t,...e){const r=lO(t),n=[r,...e].reduce((i,s)=>vr(i,s),{});return cO(Object.keys(r),n)}function dK(t,e){if(typeof t!="object")return{};const r={},n=Object.keys(e);return Array.isArray(t)?n.forEach((i,s)=>{s<t.length&&(r[i]=!0)}):n.forEach(i=>{t[i]!=null&&(r[i]=!0)}),r}function ly({values:t,breakpoints:e,base:r}){const n=r||dK(t,e),i=Object.keys(n);if(i.length===0)return t;let s;return i.reduce((o,l,u)=>(Array.isArray(t)?(o[l]=t[u]!=null?t[u]:t[s],s=u):typeof t=="object"?(o[l]=t[l]!=null?t[l]:t[s],s=l):o[l]=t,o),{})}function bd(t,e,r=!0){if(!e||typeof e!="string")return null;if(t&&t.vars&&r){const n=`vars.${e}`.split(".").reduce((i,s)=>i&&i[s]?i[s]:null,t);if(n!=null)return n}return e.split(".").reduce((n,i)=>n&&n[i]!=null?n[i]:null,t)}function Ah(t,e,r,n=r){let i;return typeof t=="function"?i=t(r):Array.isArray(t)?i=t[r]||n:i=bd(t,r)||n,e&&(i=e(i,n,t)),i}function Ft(t){const{prop:e,cssProperty:r=t.prop,themeKey:n,transform:i}=t,s=o=>{if(o[e]==null)return null;const l=o[e],u=o.theme,f=bd(u,n)||{};return bn(o,l,g=>{let m=Ah(f,i,g);return g===m&&typeof g=="string"&&(m=Ah(f,i,`${e}${g==="default"?"":Xt(g)}`,g)),r===!1?m:{[r]:m}})};return s.propTypes={},s.filterProps=[e],s}function pK(t){const e={};return r=>(e[r]===void 0&&(e[r]=t(r)),e[r])}const gK={m:"margin",p:"padding"},mK={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},RR={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},_K=pK(t=>{if(t.length>2)if(RR[t])t=RR[t];else return[t];const[e,r]=t.split(""),n=gK[e],i=mK[r]||"";return Array.isArray(i)?i.map(s=>n+s):[n+i]}),Wb=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],qb=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...Wb,...qb];function Oc(t,e,r,n){const i=bd(t,e,!0)??r;return typeof i=="number"||typeof i=="string"?s=>typeof s=="string"?s:typeof i=="string"?`calc(${s} * ${i})`:i*s:Array.isArray(i)?s=>{if(typeof s=="string")return s;const o=Math.abs(s),l=i[o];return s>=0?l:typeof l=="number"?-l:`-${l}`}:typeof i=="function"?i:()=>{}}function wd(t){return Oc(t,"spacing",8)}function Bs(t,e){return typeof e=="string"||e==null?e:t(e)}function yK(t,e){return r=>t.reduce((n,i)=>(n[i]=Bs(e,r),n),{})}function vK(t,e,r,n){if(!e.includes(r))return null;const i=_K(r),s=yK(i,n),o=t[r];return bn(t,o,s)}function uO(t,e){const r=wd(t.theme);return Object.keys(t).map(n=>vK(t,e,n,r)).reduce(nc,{})}function Ct(t){return uO(t,Wb)}Ct.propTypes={};Ct.filterProps=Wb;function Rt(t){return uO(t,qb)}Rt.propTypes={};Rt.filterProps=qb;function Sd(...t){const e=t.reduce((n,i)=>(i.filterProps.forEach(s=>{n[s]=i}),n),{}),r=n=>Object.keys(n).reduce((i,s)=>e[s]?nc(i,e[s](n)):i,{});return r.propTypes={},r.filterProps=t.reduce((n,i)=>n.concat(i.filterProps),[]),r}function Gr(t){return typeof t!="number"?t:`${t}px solid`}function rn(t,e){return Ft({prop:t,themeKey:"borders",transform:e})}const bK=rn("border",Gr),wK=rn("borderTop",Gr),SK=rn("borderRight",Gr),xK=rn("borderBottom",Gr),TK=rn("borderLeft",Gr),EK=rn("borderColor"),AK=rn("borderTopColor"),CK=rn("borderRightColor"),RK=rn("borderBottomColor"),PK=rn("borderLeftColor"),MK=rn("outline",Gr),IK=rn("outlineColor"),xd=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const e=Oc(t.theme,"shape.borderRadius",4),r=n=>({borderRadius:Bs(e,n)});return bn(t,t.borderRadius,r)}return null};xd.propTypes={};xd.filterProps=["borderRadius"];Sd(bK,wK,SK,xK,TK,EK,AK,CK,RK,PK,xd,MK,IK);const Td=t=>{if(t.gap!==void 0&&t.gap!==null){const e=Oc(t.theme,"spacing",8),r=n=>({gap:Bs(e,n)});return bn(t,t.gap,r)}return null};Td.propTypes={};Td.filterProps=["gap"];const Ed=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const e=Oc(t.theme,"spacing",8),r=n=>({columnGap:Bs(e,n)});return bn(t,t.columnGap,r)}return null};Ed.propTypes={};Ed.filterProps=["columnGap"];const Ad=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const e=Oc(t.theme,"spacing",8),r=n=>({rowGap:Bs(e,n)});return bn(t,t.rowGap,r)}return null};Ad.propTypes={};Ad.filterProps=["rowGap"];const OK=Ft({prop:"gridColumn"}),kK=Ft({prop:"gridRow"}),NK=Ft({prop:"gridAutoFlow"}),FK=Ft({prop:"gridAutoColumns"}),DK=Ft({prop:"gridAutoRows"}),BK=Ft({prop:"gridTemplateColumns"}),LK=Ft({prop:"gridTemplateRows"}),UK=Ft({prop:"gridTemplateAreas"}),zK=Ft({prop:"gridArea"});Sd(Td,Ed,Ad,OK,kK,NK,FK,DK,BK,LK,UK,zK);function va(t,e){return e==="grey"?e:t}const $K=Ft({prop:"color",themeKey:"palette",transform:va}),VK=Ft({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:va}),jK=Ft({prop:"backgroundColor",themeKey:"palette",transform:va});Sd($K,VK,jK);function Br(t){return t<=1&&t!==0?`${t*100}%`:t}const HK=Ft({prop:"width",transform:Br}),Xb=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const e=r=>{var i,s,o,l,u;const n=((o=(s=(i=t.theme)==null?void 0:i.breakpoints)==null?void 0:s.values)==null?void 0:o[r])||vd[r];return n?((u=(l=t.theme)==null?void 0:l.breakpoints)==null?void 0:u.unit)!=="px"?{maxWidth:`${n}${t.theme.breakpoints.unit}`}:{maxWidth:n}:{maxWidth:Br(r)}};return bn(t,t.maxWidth,e)}return null};Xb.filterProps=["maxWidth"];const WK=Ft({prop:"minWidth",transform:Br}),qK=Ft({prop:"height",transform:Br}),XK=Ft({prop:"maxHeight",transform:Br}),KK=Ft({prop:"minHeight",transform:Br});Ft({prop:"size",cssProperty:"width",transform:Br});Ft({prop:"size",cssProperty:"height",transform:Br});const YK=Ft({prop:"boxSizing"});Sd(HK,Xb,WK,qK,XK,KK,YK);const kc={border:{themeKey:"borders",transform:Gr},borderTop:{themeKey:"borders",transform:Gr},borderRight:{themeKey:"borders",transform:Gr},borderBottom:{themeKey:"borders",transform:Gr},borderLeft:{themeKey:"borders",transform:Gr},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Gr},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:xd},color:{themeKey:"palette",transform:va},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:va},backgroundColor:{themeKey:"palette",transform:va},p:{style:Rt},pt:{style:Rt},pr:{style:Rt},pb:{style:Rt},pl:{style:Rt},px:{style:Rt},py:{style:Rt},padding:{style:Rt},paddingTop:{style:Rt},paddingRight:{style:Rt},paddingBottom:{style:Rt},paddingLeft:{style:Rt},paddingX:{style:Rt},paddingY:{style:Rt},paddingInline:{style:Rt},paddingInlineStart:{style:Rt},paddingInlineEnd:{style:Rt},paddingBlock:{style:Rt},paddingBlockStart:{style:Rt},paddingBlockEnd:{style:Rt},m:{style:Ct},mt:{style:Ct},mr:{style:Ct},mb:{style:Ct},ml:{style:Ct},mx:{style:Ct},my:{style:Ct},margin:{style:Ct},marginTop:{style:Ct},marginRight:{style:Ct},marginBottom:{style:Ct},marginLeft:{style:Ct},marginX:{style:Ct},marginY:{style:Ct},marginInline:{style:Ct},marginInlineStart:{style:Ct},marginInlineEnd:{style:Ct},marginBlock:{style:Ct},marginBlockStart:{style:Ct},marginBlockEnd:{style:Ct},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Td},rowGap:{style:Ad},columnGap:{style:Ed},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Br},maxWidth:{style:Xb},minWidth:{transform:Br},height:{transform:Br},maxHeight:{transform:Br},minHeight:{transform:Br},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function ZK(...t){const e=t.reduce((n,i)=>n.concat(Object.keys(i)),[]),r=new Set(e);return t.every(n=>r.size===Object.keys(n).length)}function GK(t,e){return typeof t=="function"?t(e):t}function QK(){function t(r,n,i,s){const o={[r]:n,theme:i},l=s[r];if(!l)return{[r]:n};const{cssProperty:u=r,themeKey:f,transform:d,style:g}=l;if(n==null)return null;if(f==="typography"&&n==="inherit")return{[r]:n};const m=bd(i,f)||{};return g?g(o):bn(o,n,w=>{let b=Ah(m,d,w);return w===b&&typeof w=="string"&&(b=Ah(m,d,`${r}${w==="default"?"":Xt(w)}`,w)),u===!1?b:{[u]:b}})}function e(r){const{sx:n,theme:i={}}=r||{};if(!n)return null;const s=i.unstable_sxConfig??kc;function o(l){let u=l;if(typeof l=="function")u=l(i);else if(typeof l!="object")return l;if(!u)return null;const f=lO(i.breakpoints),d=Object.keys(f);let g=f;return Object.keys(u).forEach(m=>{const y=GK(u[m],i);if(y!=null)if(typeof y=="object")if(s[m])g=nc(g,t(m,y,i,s));else{const w=bn({theme:i},y,b=>({[m]:b}));ZK(w,y)?g[m]=e({sx:y,theme:i}):g=nc(g,w)}else g=nc(g,t(m,y,i,s))}),aK(i,cO(d,g))}return Array.isArray(n)?n.map(o):o(n)}return e}const Ra=QK();Ra.filterProps=["sx"];const JK=t=>{var n;const e={systemProps:{},otherProps:{}},r=((n=t==null?void 0:t.theme)==null?void 0:n.unstable_sxConfig)??kc;return Object.keys(t).forEach(i=>{r[i]?e.systemProps[i]=t[i]:e.otherProps[i]=t[i]}),e};function eY(t){const{sx:e,...r}=t,{systemProps:n,otherProps:i}=JK(r);let s;return Array.isArray(e)?s=[n,...e]:typeof e=="function"?s=(...o)=>{const l=e(...o);return Dn(l)?{...n,...l}:n}:s={...n,...e},{...i,sx:s}}function Ch(){return Ch=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ch.apply(null,arguments)}function tY(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function rY(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var nY=function(){function t(r){var n=this;this._insertTag=function(i){var s;n.tags.length===0?n.insertionPoint?s=n.insertionPoint.nextSibling:n.prepend?s=n.container.firstChild:s=n.before:s=n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(i,s),n.tags.push(i)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(n){n.forEach(this._insertTag)},e.insert=function(n){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(rY(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=tY(i);try{s.insertRule(n,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(n));this.ctr++},e.flush=function(){this.tags.forEach(function(n){var i;return(i=n.parentNode)==null?void 0:i.removeChild(n)}),this.tags=[],this.ctr=0},t}(),hr="-ms-",Rh="-moz-",Ze="-webkit-",fO="comm",Kb="rule",Yb="decl",iY="@import",hO="@keyframes",sY="@layer",oY=Math.abs,Cd=String.fromCharCode,aY=Object.assign;function lY(t,e){return nr(t,0)^45?(((e<<2^nr(t,0))<<2^nr(t,1))<<2^nr(t,2))<<2^nr(t,3):0}function dO(t){return t.trim()}function cY(t,e){return(t=e.exec(t))?t[0]:t}function Ge(t,e,r){return t.replace(e,r)}function Sv(t,e){return t.indexOf(e)}function nr(t,e){return t.charCodeAt(e)|0}function yc(t,e,r){return t.slice(e,r)}function kn(t){return t.length}function Zb(t){return t.length}function Rf(t,e){return e.push(t),t}function uY(t,e){return t.map(e).join("")}var Rd=1,Pa=1,pO=0,Rr=0,Vt=0,Da="";function Pd(t,e,r,n,i,s,o){return{value:t,root:e,parent:r,type:n,props:i,children:s,line:Rd,column:Pa,length:o,return:""}}function Ol(t,e){return aY(Pd("",null,null,"",null,null,0),t,{length:-t.length},e)}function fY(){return Vt}function hY(){return Vt=Rr>0?nr(Da,--Rr):0,Pa--,Vt===10&&(Pa=1,Rd--),Vt}function zr(){return Vt=Rr<pO?nr(Da,Rr++):0,Pa++,Vt===10&&(Pa=1,Rd++),Vt}function Bn(){return nr(Da,Rr)}function qf(){return Rr}function Nc(t,e){return yc(Da,t,e)}function vc(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function gO(t){return Rd=Pa=1,pO=kn(Da=t),Rr=0,[]}function mO(t){return Da="",t}function Xf(t){return dO(Nc(Rr-1,xv(t===91?t+2:t===40?t+1:t)))}function dY(t){for(;(Vt=Bn())&&Vt<33;)zr();return vc(t)>2||vc(Vt)>3?"":" "}function pY(t,e){for(;--e&&zr()&&!(Vt<48||Vt>102||Vt>57&&Vt<65||Vt>70&&Vt<97););return Nc(t,qf()+(e<6&&Bn()==32&&zr()==32))}function xv(t){for(;zr();)switch(Vt){case t:return Rr;case 34:case 39:t!==34&&t!==39&&xv(Vt);break;case 40:t===41&&xv(t);break;case 92:zr();break}return Rr}function gY(t,e){for(;zr()&&t+Vt!==57;)if(t+Vt===84&&Bn()===47)break;return"/*"+Nc(e,Rr-1)+"*"+Cd(t===47?t:zr())}function mY(t){for(;!vc(Bn());)zr();return Nc(t,Rr)}function _Y(t){return mO(Kf("",null,null,null,[""],t=gO(t),0,[0],t))}function Kf(t,e,r,n,i,s,o,l,u){for(var f=0,d=0,g=o,m=0,y=0,w=0,b=1,S=1,E=1,k=0,C="",P=i,M=s,D=n,q=C;S;)switch(w=k,k=zr()){case 40:if(w!=108&&nr(q,g-1)==58){Sv(q+=Ge(Xf(k),"&","&\f"),"&\f")!=-1&&(E=-1);break}case 34:case 39:case 91:q+=Xf(k);break;case 9:case 10:case 13:case 32:q+=dY(w);break;case 92:q+=pY(qf()-1,7);continue;case 47:switch(Bn()){case 42:case 47:Rf(yY(gY(zr(),qf()),e,r),u);break;default:q+="/"}break;case 123*b:l[f++]=kn(q)*E;case 125*b:case 59:case 0:switch(k){case 0:case 125:S=0;case 59+d:E==-1&&(q=Ge(q,/\f/g,"")),y>0&&kn(q)-g&&Rf(y>32?MR(q+";",n,r,g-1):MR(Ge(q," ","")+";",n,r,g-2),u);break;case 59:q+=";";default:if(Rf(D=PR(q,e,r,f,d,i,l,C,P=[],M=[],g),s),k===123)if(d===0)Kf(q,e,D,D,P,s,g,l,M);else switch(m===99&&nr(q,3)===110?100:m){case 100:case 108:case 109:case 115:Kf(t,D,D,n&&Rf(PR(t,D,D,0,0,i,l,C,i,P=[],g),M),i,M,g,l,n?P:M);break;default:Kf(q,D,D,D,[""],M,0,l,M)}}f=d=y=0,b=E=1,C=q="",g=o;break;case 58:g=1+kn(q),y=w;default:if(b<1){if(k==123)--b;else if(k==125&&b++==0&&hY()==125)continue}switch(q+=Cd(k),k*b){case 38:E=d>0?1:(q+="\f",-1);break;case 44:l[f++]=(kn(q)-1)*E,E=1;break;case 64:Bn()===45&&(q+=Xf(zr())),m=Bn(),d=g=kn(C=q+=mY(qf())),k++;break;case 45:w===45&&kn(q)==2&&(b=0)}}return s}function PR(t,e,r,n,i,s,o,l,u,f,d){for(var g=i-1,m=i===0?s:[""],y=Zb(m),w=0,b=0,S=0;w<n;++w)for(var E=0,k=yc(t,g+1,g=oY(b=o[w])),C=t;E<y;++E)(C=dO(b>0?m[E]+" "+k:Ge(k,/&\f/g,m[E])))&&(u[S++]=C);return Pd(t,e,r,i===0?Kb:l,u,f,d)}function yY(t,e,r){return Pd(t,e,r,fO,Cd(fY()),yc(t,2,-2),0)}function MR(t,e,r,n){return Pd(t,e,r,Yb,yc(t,0,n),yc(t,n+1,-1),n)}function ba(t,e){for(var r="",n=Zb(t),i=0;i<n;i++)r+=e(t[i],i,t,e)||"";return r}function vY(t,e,r,n){switch(t.type){case sY:if(t.children.length)break;case iY:case Yb:return t.return=t.return||t.value;case fO:return"";case hO:return t.return=t.value+"{"+ba(t.children,n)+"}";case Kb:t.value=t.props.join(",")}return kn(r=ba(t.children,n))?t.return=t.value+"{"+r+"}":""}function bY(t){var e=Zb(t);return function(r,n,i,s){for(var o="",l=0;l<e;l++)o+=t[l](r,n,i,s)||"";return o}}function wY(t){return function(e){e.root||(e=e.return)&&t(e)}}function _O(t){var e=Object.create(null);return function(r){return e[r]===void 0&&(e[r]=t(r)),e[r]}}var SY=function(e,r,n){for(var i=0,s=0;i=s,s=Bn(),i===38&&s===12&&(r[n]=1),!vc(s);)zr();return Nc(e,Rr)},xY=function(e,r){var n=-1,i=44;do switch(vc(i)){case 0:i===38&&Bn()===12&&(r[n]=1),e[n]+=SY(Rr-1,r,n);break;case 2:e[n]+=Xf(i);break;case 4:if(i===44){e[++n]=Bn()===58?"&\f":"",r[n]=e[n].length;break}default:e[n]+=Cd(i)}while(i=zr());return e},TY=function(e,r){return mO(xY(gO(e),r))},IR=new WeakMap,EY=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var r=e.value,n=e.parent,i=e.column===n.column&&e.line===n.line;n.type!=="rule";)if(n=n.parent,!n)return;if(!(e.props.length===1&&r.charCodeAt(0)!==58&&!IR.get(n))&&!i){IR.set(e,!0);for(var s=[],o=TY(r,s),l=n.props,u=0,f=0;u<o.length;u++)for(var d=0;d<l.length;d++,f++)e.props[f]=s[u]?o[u].replace(/&\f/g,l[d]):l[d]+" "+o[u]}}},AY=function(e){if(e.type==="decl"){var r=e.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(e.return="",e.value="")}};function yO(t,e){switch(lY(t,e)){case 5103:return Ze+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ze+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Ze+t+Rh+t+hr+t+t;case 6828:case 4268:return Ze+t+hr+t+t;case 6165:return Ze+t+hr+"flex-"+t+t;case 5187:return Ze+t+Ge(t,/(\w+).+(:[^]+)/,Ze+"box-$1$2"+hr+"flex-$1$2")+t;case 5443:return Ze+t+hr+"flex-item-"+Ge(t,/flex-|-self/,"")+t;case 4675:return Ze+t+hr+"flex-line-pack"+Ge(t,/align-content|flex-|-self/,"")+t;case 5548:return Ze+t+hr+Ge(t,"shrink","negative")+t;case 5292:return Ze+t+hr+Ge(t,"basis","preferred-size")+t;case 6060:return Ze+"box-"+Ge(t,"-grow","")+Ze+t+hr+Ge(t,"grow","positive")+t;case 4554:return Ze+Ge(t,/([^-])(transform)/g,"$1"+Ze+"$2")+t;case 6187:return Ge(Ge(Ge(t,/(zoom-|grab)/,Ze+"$1"),/(image-set)/,Ze+"$1"),t,"")+t;case 5495:case 3959:return Ge(t,/(image-set\([^]*)/,Ze+"$1$`$1");case 4968:return Ge(Ge(t,/(.+:)(flex-)?(.*)/,Ze+"box-pack:$3"+hr+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ze+t+t;case 4095:case 3583:case 4068:case 2532:return Ge(t,/(.+)-inline(.+)/,Ze+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(kn(t)-1-e>6)switch(nr(t,e+1)){case 109:if(nr(t,e+4)!==45)break;case 102:return Ge(t,/(.+:)(.+)-([^]+)/,"$1"+Ze+"$2-$3$1"+Rh+(nr(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~Sv(t,"stretch")?yO(Ge(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(nr(t,e+1)!==115)break;case 6444:switch(nr(t,kn(t)-3-(~Sv(t,"!important")&&10))){case 107:return Ge(t,":",":"+Ze)+t;case 101:return Ge(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Ze+(nr(t,14)===45?"inline-":"")+"box$3$1"+Ze+"$2$3$1"+hr+"$2box$3")+t}break;case 5936:switch(nr(t,e+11)){case 114:return Ze+t+hr+Ge(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Ze+t+hr+Ge(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Ze+t+hr+Ge(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return Ze+t+hr+t+t}return t}var CY=function(e,r,n,i){if(e.length>-1&&!e.return)switch(e.type){case Yb:e.return=yO(e.value,e.length);break;case hO:return ba([Ol(e,{value:Ge(e.value,"@","@"+Ze)})],i);case Kb:if(e.length)return uY(e.props,function(s){switch(cY(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return ba([Ol(e,{props:[Ge(s,/:(read-\w+)/,":"+Rh+"$1")]})],i);case"::placeholder":return ba([Ol(e,{props:[Ge(s,/:(plac\w+)/,":"+Ze+"input-$1")]}),Ol(e,{props:[Ge(s,/:(plac\w+)/,":"+Rh+"$1")]}),Ol(e,{props:[Ge(s,/:(plac\w+)/,hr+"input-$1")]})],i)}return""})}},RY=[CY],PY=function(e){var r=e.key;if(r==="css"){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(b){var S=b.getAttribute("data-emotion");S.indexOf(" ")!==-1&&(document.head.appendChild(b),b.setAttribute("data-s",""))})}var i=e.stylisPlugins||RY,s={},o,l=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(b){for(var S=b.getAttribute("data-emotion").split(" "),E=1;E<S.length;E++)s[S[E]]=!0;l.push(b)});var u,f=[EY,AY];{var d,g=[vY,wY(function(b){d.insert(b)})],m=bY(f.concat(i,g)),y=function(S){return ba(_Y(S),m)};u=function(S,E,k,C){d=k,y(S?S+"{"+E.styles+"}":E.styles),C&&(w.inserted[E.name]=!0)}}var w={key:r,sheet:new nY({key:r,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:u};return w.sheet.hydrate(l),w},cy={exports:{}},Qe={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OR;function MY(){if(OR)return Qe;OR=1;var t=typeof Symbol=="function"&&Symbol.for,e=t?Symbol.for("react.element"):60103,r=t?Symbol.for("react.portal"):60106,n=t?Symbol.for("react.fragment"):60107,i=t?Symbol.for("react.strict_mode"):60108,s=t?Symbol.for("react.profiler"):60114,o=t?Symbol.for("react.provider"):60109,l=t?Symbol.for("react.context"):60110,u=t?Symbol.for("react.async_mode"):60111,f=t?Symbol.for("react.concurrent_mode"):60111,d=t?Symbol.for("react.forward_ref"):60112,g=t?Symbol.for("react.suspense"):60113,m=t?Symbol.for("react.suspense_list"):60120,y=t?Symbol.for("react.memo"):60115,w=t?Symbol.for("react.lazy"):60116,b=t?Symbol.for("react.block"):60121,S=t?Symbol.for("react.fundamental"):60117,E=t?Symbol.for("react.responder"):60118,k=t?Symbol.for("react.scope"):60119;function C(M){if(typeof M=="object"&&M!==null){var D=M.$$typeof;switch(D){case e:switch(M=M.type,M){case u:case f:case n:case s:case i:case g:return M;default:switch(M=M&&M.$$typeof,M){case l:case d:case w:case y:case o:return M;default:return D}}case r:return D}}}function P(M){return C(M)===f}return Qe.AsyncMode=u,Qe.ConcurrentMode=f,Qe.ContextConsumer=l,Qe.ContextProvider=o,Qe.Element=e,Qe.ForwardRef=d,Qe.Fragment=n,Qe.Lazy=w,Qe.Memo=y,Qe.Portal=r,Qe.Profiler=s,Qe.StrictMode=i,Qe.Suspense=g,Qe.isAsyncMode=function(M){return P(M)||C(M)===u},Qe.isConcurrentMode=P,Qe.isContextConsumer=function(M){return C(M)===l},Qe.isContextProvider=function(M){return C(M)===o},Qe.isElement=function(M){return typeof M=="object"&&M!==null&&M.$$typeof===e},Qe.isForwardRef=function(M){return C(M)===d},Qe.isFragment=function(M){return C(M)===n},Qe.isLazy=function(M){return C(M)===w},Qe.isMemo=function(M){return C(M)===y},Qe.isPortal=function(M){return C(M)===r},Qe.isProfiler=function(M){return C(M)===s},Qe.isStrictMode=function(M){return C(M)===i},Qe.isSuspense=function(M){return C(M)===g},Qe.isValidElementType=function(M){return typeof M=="string"||typeof M=="function"||M===n||M===f||M===s||M===i||M===g||M===m||typeof M=="object"&&M!==null&&(M.$$typeof===w||M.$$typeof===y||M.$$typeof===o||M.$$typeof===l||M.$$typeof===d||M.$$typeof===S||M.$$typeof===E||M.$$typeof===k||M.$$typeof===b)},Qe.typeOf=C,Qe}var kR;function IY(){return kR||(kR=1,cy.exports=MY()),cy.exports}var uy,NR;function OY(){if(NR)return uy;NR=1;var t=IY(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},n={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};s[t.ForwardRef]=n,s[t.Memo]=i;function o(w){return t.isMemo(w)?i:s[w.$$typeof]||e}var l=Object.defineProperty,u=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,g=Object.getPrototypeOf,m=Object.prototype;function y(w,b,S){if(typeof b!="string"){if(m){var E=g(b);E&&E!==m&&y(w,E,S)}var k=u(b);f&&(k=k.concat(f(b)));for(var C=o(w),P=o(b),M=0;M<k.length;++M){var D=k[M];if(!r[D]&&!(S&&S[D])&&!(P&&P[D])&&!(C&&C[D])){var q=d(b,D);try{l(w,D,q)}catch{}}}}return w}return uy=y,uy}OY();var kY=!0;function vO(t,e,r){var n="";return r.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):i&&(n+=i+" ")}),n}var Gb=function(e,r,n){var i=e.key+"-"+r.name;(n===!1||kY===!1)&&e.registered[i]===void 0&&(e.registered[i]=r.styles)},bO=function(e,r,n){Gb(e,r,n);var i=e.key+"-"+r.name;if(e.inserted[r.name]===void 0){var s=r;do e.insert(r===s?"."+i:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function NY(t){for(var e=0,r,n=0,i=t.length;i>=4;++n,i-=4)r=t.charCodeAt(n)&255|(t.charCodeAt(++n)&255)<<8|(t.charCodeAt(++n)&255)<<16|(t.charCodeAt(++n)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,e=(r&65535)*1540483477+((r>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(n+2)&255)<<16;case 2:e^=(t.charCodeAt(n+1)&255)<<8;case 1:e^=t.charCodeAt(n)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var FY={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},DY=/[A-Z]|^ms/g,BY=/_EMO_([^_]+?)_([^]*?)_EMO_/g,wO=function(e){return e.charCodeAt(1)===45},FR=function(e){return e!=null&&typeof e!="boolean"},fy=_O(function(t){return wO(t)?t:t.replace(DY,"-$&").toLowerCase()}),DR=function(e,r){switch(e){case"animation":case"animationName":if(typeof r=="string")return r.replace(BY,function(n,i,s){return Nn={name:i,styles:s,next:Nn},i})}return FY[e]!==1&&!wO(e)&&typeof r=="number"&&r!==0?r+"px":r};function bc(t,e,r){if(r==null)return"";var n=r;if(n.__emotion_styles!==void 0)return n;switch(typeof r){case"boolean":return"";case"object":{var i=r;if(i.anim===1)return Nn={name:i.name,styles:i.styles,next:Nn},i.name;var s=r;if(s.styles!==void 0){var o=s.next;if(o!==void 0)for(;o!==void 0;)Nn={name:o.name,styles:o.styles,next:Nn},o=o.next;var l=s.styles+";";return l}return LY(t,e,r)}case"function":{if(t!==void 0){var u=Nn,f=r(t);return Nn=u,bc(t,e,f)}break}}var d=r;if(e==null)return d;var g=e[d];return g!==void 0?g:d}function LY(t,e,r){var n="";if(Array.isArray(r))for(var i=0;i<r.length;i++)n+=bc(t,e,r[i])+";";else for(var s in r){var o=r[s];if(typeof o!="object"){var l=o;e!=null&&e[l]!==void 0?n+=s+"{"+e[l]+"}":FR(l)&&(n+=fy(s)+":"+DR(s,l)+";")}else if(Array.isArray(o)&&typeof o[0]=="string"&&(e==null||e[o[0]]===void 0))for(var u=0;u<o.length;u++)FR(o[u])&&(n+=fy(s)+":"+DR(s,o[u])+";");else{var f=bc(t,e,o);switch(s){case"animation":case"animationName":{n+=fy(s)+":"+f+";";break}default:n+=s+"{"+f+"}"}}}return n}var BR=/label:\s*([^\s;{]+)\s*(;|$)/g,Nn;function Md(t,e,r){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var n=!0,i="";Nn=void 0;var s=t[0];if(s==null||s.raw===void 0)n=!1,i+=bc(r,e,s);else{var o=s;i+=o[0]}for(var l=1;l<t.length;l++)if(i+=bc(r,e,t[l]),n){var u=s;i+=u[l]}BR.lastIndex=0;for(var f="",d;(d=BR.exec(i))!==null;)f+="-"+d[1];var g=NY(i)+f;return{name:g,styles:i,next:Nn}}var UY=function(e){return e()},zY=mx.useInsertionEffect?mx.useInsertionEffect:!1,SO=zY||UY,xO=re.createContext(typeof HTMLElement<"u"?PY({key:"css"}):null);xO.Provider;var TO=function(e){return re.forwardRef(function(r,n){var i=re.useContext(xO);return e(r,i,n)})},Qb=re.createContext({}),Jb={}.hasOwnProperty,Tv="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",$Y=function(e,r){var n={};for(var i in r)Jb.call(r,i)&&(n[i]=r[i]);return n[Tv]=e,n},VY=function(e){var r=e.cache,n=e.serialized,i=e.isStringTag;return Gb(r,n,i),SO(function(){return bO(r,n,i)}),null},jY=TO(function(t,e,r){var n=t.css;typeof n=="string"&&e.registered[n]!==void 0&&(n=e.registered[n]);var i=t[Tv],s=[n],o="";typeof t.className=="string"?o=vO(e.registered,s,t.className):t.className!=null&&(o=t.className+" ");var l=Md(s,void 0,re.useContext(Qb));o+=e.key+"-"+l.name;var u={};for(var f in t)Jb.call(t,f)&&f!=="css"&&f!==Tv&&(u[f]=t[f]);return u.className=o,r&&(u.ref=r),re.createElement(re.Fragment,null,re.createElement(VY,{cache:e,serialized:l,isStringTag:typeof i=="string"}),re.createElement(i,u))}),HY=jY,WY=function(e,r){var n=arguments;if(r==null||!Jb.call(r,"css"))return re.createElement.apply(void 0,n);var i=n.length,s=new Array(i);s[0]=HY,s[1]=$Y(e,r);for(var o=2;o<i;o++)s[o]=n[o];return re.createElement.apply(null,s)};(function(t){var e;e||(e=t.JSX||(t.JSX={}))})(WY);function qY(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return Md(e)}function e1(){var t=qY.apply(void 0,arguments),e="animation-"+t.name;return{name:e,styles:"@keyframes "+e+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var XY=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,KY=_O(function(t){return XY.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91}),YY=KY,ZY=function(e){return e!=="theme"},LR=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?YY:ZY},UR=function(e,r,n){var i;if(r){var s=r.shouldForwardProp;i=e.__emotion_forwardProp&&s?function(o){return e.__emotion_forwardProp(o)&&s(o)}:s}return typeof i!="function"&&n&&(i=e.__emotion_forwardProp),i},GY=function(e){var r=e.cache,n=e.serialized,i=e.isStringTag;return Gb(r,n,i),SO(function(){return bO(r,n,i)}),null},QY=function t(e,r){var n=e.__emotion_real===e,i=n&&e.__emotion_base||e,s,o;r!==void 0&&(s=r.label,o=r.target);var l=UR(e,r,n),u=l||LR(i),f=!u("as");return function(){var d=arguments,g=n&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(s!==void 0&&g.push("label:"+s+";"),d[0]==null||d[0].raw===void 0)g.push.apply(g,d);else{var m=d[0];g.push(m[0]);for(var y=d.length,w=1;w<y;w++)g.push(d[w],m[w])}var b=TO(function(S,E,k){var C=f&&S.as||i,P="",M=[],D=S;if(S.theme==null){D={};for(var q in S)D[q]=S[q];D.theme=re.useContext(Qb)}typeof S.className=="string"?P=vO(E.registered,M,S.className):S.className!=null&&(P=S.className+" ");var ee=Md(g.concat(M),E.registered,D);P+=E.key+"-"+ee.name,o!==void 0&&(P+=" "+o);var J=f&&l===void 0?LR(C):u,A={};for(var X in S)f&&X==="as"||J(X)&&(A[X]=S[X]);return A.className=P,k&&(A.ref=k),re.createElement(re.Fragment,null,re.createElement(GY,{cache:E,serialized:ee,isStringTag:typeof C=="string"}),re.createElement(C,A))});return b.displayName=s!==void 0?s:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",b.defaultProps=e.defaultProps,b.__emotion_real=b,b.__emotion_base=i,b.__emotion_styles=g,b.__emotion_forwardProp=l,Object.defineProperty(b,"toString",{value:function(){return"."+o}}),b.withComponent=function(S,E){var k=t(S,Ch({},r,E,{shouldForwardProp:UR(b,E,!0)}));return k.apply(void 0,g)},b}},JY=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],Ev=QY.bind(null);JY.forEach(function(t){Ev[t]=Ev(t)});/**
 * @mui/styled-engine v6.4.0
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function eZ(t,e){return Ev(t,e)}function tZ(t,e){Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))}const zR=[];function $R(t){return zR[0]=t,Md(zR)}const rZ=t=>{const e=Object.keys(t).map(r=>({key:r,val:t[r]}))||[];return e.sort((r,n)=>r.val-n.val),e.reduce((r,n)=>({...r,[n.key]:n.val}),{})};function nZ(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:r="px",step:n=5,...i}=t,s=rZ(e),o=Object.keys(s);function l(m){return`@media (min-width:${typeof e[m]=="number"?e[m]:m}${r})`}function u(m){return`@media (max-width:${(typeof e[m]=="number"?e[m]:m)-n/100}${r})`}function f(m,y){const w=o.indexOf(y);return`@media (min-width:${typeof e[m]=="number"?e[m]:m}${r}) and (max-width:${(w!==-1&&typeof e[o[w]]=="number"?e[o[w]]:y)-n/100}${r})`}function d(m){return o.indexOf(m)+1<o.length?f(m,o[o.indexOf(m)+1]):l(m)}function g(m){const y=o.indexOf(m);return y===0?l(o[1]):y===o.length-1?u(o[y]):f(m,o[o.indexOf(m)+1]).replace("@media","@media not all and")}return{keys:o,values:s,up:l,down:u,between:f,only:d,not:g,unit:r,...i}}const iZ={borderRadius:4};function EO(t=8,e=wd({spacing:t})){if(t.mui)return t;const r=(...n)=>(n.length===0?[1]:n).map(s=>{const o=e(s);return typeof o=="number"?`${o}px`:o}).join(" ");return r.mui=!0,r}function sZ(t,e){var n;const r=this;if(r.vars){if(!((n=r.colorSchemes)!=null&&n[t])||typeof r.getColorSchemeSelector!="function")return{};let i=r.getColorSchemeSelector(t);return i==="&"?e:((i.includes("data-")||i.includes("."))&&(i=`*:where(${i.replace(/\s*&$/,"")}) &`),{[i]:e})}return r.palette.mode===t?e:{}}function Id(t={},...e){const{breakpoints:r={},palette:n={},spacing:i,shape:s={},...o}=t,l=nZ(r),u=EO(i);let f=vr({breakpoints:l,direction:"ltr",components:{},palette:{mode:"light",...n},spacing:u,shape:{...iZ,...s}},o);return f=uK(f),f.applyStyles=sZ,f=e.reduce((d,g)=>vr(d,g),f),f.unstable_sxConfig={...kc,...o==null?void 0:o.unstable_sxConfig},f.unstable_sx=function(g){return Ra({sx:g,theme:this})},f}function oZ(t){return Object.keys(t).length===0}function aZ(t=null){const e=re.useContext(Qb);return!e||oZ(e)?t:e}const lZ=Id();function AO(t=lZ){return aZ(t)}function CO(t){const{variants:e,...r}=t,n={variants:e,style:$R(r),isProcessed:!0};return n.style===r||e&&e.forEach(i=>{typeof i.style!="function"&&(i.style=$R(i.style))}),n}const cZ=Id();function hy(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}function uZ(t){return t?(e,r)=>r[t]:null}function fZ(t,e,r){t.theme=dZ(t.theme)?r:t.theme[e]||t.theme}function Yf(t,e){const r=typeof e=="function"?e(t):e;if(Array.isArray(r))return r.flatMap(n=>Yf(t,n));if(Array.isArray(r==null?void 0:r.variants)){let n;if(r.isProcessed)n=r.style;else{const{variants:i,...s}=r;n=s}return RO(t,r.variants,[n])}return r!=null&&r.isProcessed?r.style:r}function RO(t,e,r=[]){var i;let n;e:for(let s=0;s<e.length;s+=1){const o=e[s];if(typeof o.props=="function"){if(n??(n={...t,...t.ownerState,ownerState:t.ownerState}),!o.props(n))continue}else for(const l in o.props)if(t[l]!==o.props[l]&&((i=t.ownerState)==null?void 0:i[l])!==o.props[l])continue e;typeof o.style=="function"?(n??(n={...t,...t.ownerState,ownerState:t.ownerState}),r.push(o.style(n))):r.push(o.style)}return r}function PO(t={}){const{themeId:e,defaultTheme:r=cZ,rootShouldForwardProp:n=hy,slotShouldForwardProp:i=hy}=t;function s(l){fZ(l,e,r)}return(l,u={})=>{tZ(l,M=>M.filter(D=>D!==Ra));const{name:f,slot:d,skipVariantsResolver:g,skipSx:m,overridesResolver:y=uZ(gZ(d)),...w}=u,b=g!==void 0?g:d&&d!=="Root"&&d!=="root"||!1,S=m||!1;let E=hy;d==="Root"||d==="root"?E=n:d?E=i:pZ(l)&&(E=void 0);const k=eZ(l,{shouldForwardProp:E,label:hZ(),...w}),C=M=>{if(typeof M=="function"&&M.__emotion_real!==M)return function(q){return Yf(q,M)};if(Dn(M)){const D=CO(M);return D.variants?function(ee){return Yf(ee,D)}:D.style}return M},P=(...M)=>{const D=[],q=M.map(C),ee=[];if(D.push(s),f&&y&&ee.push(function(te){var F,z;const ie=(z=(F=te.theme.components)==null?void 0:F[f])==null?void 0:z.styleOverrides;if(!ie)return null;const xe={};for(const O in ie)xe[O]=Yf(te,ie[O]);return y(te,xe)}),f&&!b&&ee.push(function(te){var xe,F;const Q=te.theme,ie=(F=(xe=Q==null?void 0:Q.components)==null?void 0:xe[f])==null?void 0:F.variants;return ie?RO(te,ie):null}),S||ee.push(Ra),Array.isArray(q[0])){const X=q.shift(),te=new Array(D.length).fill(""),Q=new Array(ee.length).fill("");let ie;ie=[...te,...X,...Q],ie.raw=[...te,...X.raw,...Q],D.unshift(ie)}const J=[...D,...q,...ee],A=k(...J);return l.muiName&&(A.muiName=l.muiName),A};return k.withConfig&&(P.withConfig=k.withConfig),P}}function hZ(t,e){return void 0}function dZ(t){for(const e in t)return!1;return!0}function pZ(t){return typeof t=="string"&&t.charCodeAt(0)>96}function gZ(t){return t&&t.charAt(0).toLowerCase()+t.slice(1)}const mZ=PO();function _Z(t){const{theme:e,name:r,props:n}=t;return!e||!e.components||!e.components[r]||!e.components[r].defaultProps?n:Th(e.components[r].defaultProps,n)}function yZ({props:t,name:e,defaultTheme:r,themeId:n}){let i=AO(r);return n&&(i=i[n]||i),_Z({theme:i,name:e,props:t})}const vZ=re.createContext(void 0);function bZ(t){const{theme:e,name:r,props:n}=t;if(!e||!e.components||!e.components[r])return n;const i=e.components[r];return i.defaultProps?Th(i.defaultProps,n):!i.styleOverrides&&!i.variants?Th(i,n):n}function wZ({props:t,name:e}){const r=re.useContext(vZ);return bZ({props:t,name:e,theme:{components:r}})}const VR={theme:void 0};function SZ(t){let e,r;return function(i){let s=e;return(s===void 0||i.theme!==r)&&(VR.theme=i.theme,s=CO(t(VR)),e=s,r=i.theme),s}}function xZ(t=""){function e(...n){if(!n.length)return"";const i=n[0];return typeof i=="string"&&!i.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${t?`${t}-`:""}${i}${e(...n.slice(1))})`:`, ${i}`}return(n,...i)=>`var(--${t?`${t}-`:""}${n}${e(...i)})`}const jR=(t,e,r,n=[])=>{let i=t;e.forEach((s,o)=>{o===e.length-1?Array.isArray(i)?i[Number(s)]=r:i&&typeof i=="object"&&(i[s]=r):i&&typeof i=="object"&&(i[s]||(i[s]=n.includes(s)?[]:{}),i=i[s])})},TZ=(t,e,r)=>{function n(i,s=[],o=[]){Object.entries(i).forEach(([l,u])=>{(!r||!r([...s,l]))&&u!=null&&(typeof u=="object"&&Object.keys(u).length>0?n(u,[...s,l],Array.isArray(u)?[...o,l]:o):e([...s,l],u,o))})}n(t)},EZ=(t,e)=>typeof e=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(n=>t.includes(n))||t[t.length-1].toLowerCase().includes("opacity")?e:`${e}px`:e;function dy(t,e){const{prefix:r,shouldSkipGeneratingVar:n}=e||{},i={},s={},o={};return TZ(t,(l,u,f)=>{if((typeof u=="string"||typeof u=="number")&&(!n||!n(l,u))){const d=`--${r?`${r}-`:""}${l.join("-")}`,g=EZ(l,u);Object.assign(i,{[d]:g}),jR(s,l,`var(${d})`,f),jR(o,l,`var(${d}, ${g})`,f)}},l=>l[0]==="vars"),{css:i,vars:s,varsWithDefaults:o}}function AZ(t,e={}){const{getSelector:r=S,disableCssColorScheme:n,colorSchemeSelector:i}=e,{colorSchemes:s={},components:o,defaultColorScheme:l="light",...u}=t,{vars:f,css:d,varsWithDefaults:g}=dy(u,e);let m=g;const y={},{[l]:w,...b}=s;if(Object.entries(b||{}).forEach(([C,P])=>{const{vars:M,css:D,varsWithDefaults:q}=dy(P,e);m=vr(m,q),y[C]={css:D,vars:M}}),w){const{css:C,vars:P,varsWithDefaults:M}=dy(w,e);m=vr(m,M),y[l]={css:C,vars:P}}function S(C,P){var D,q;let M=i;if(i==="class"&&(M=".%s"),i==="data"&&(M="[data-%s]"),i!=null&&i.startsWith("data-")&&!i.includes("%s")&&(M=`[${i}="%s"]`),C){if(M==="media")return t.defaultColorScheme===C?":root":{[`@media (prefers-color-scheme: ${((q=(D=s[C])==null?void 0:D.palette)==null?void 0:q.mode)||C})`]:{":root":P}};if(M)return t.defaultColorScheme===C?`:root, ${M.replace("%s",String(C))}`:M.replace("%s",String(C))}return":root"}return{vars:m,generateThemeVars:()=>{let C={...f};return Object.entries(y).forEach(([,{vars:P}])=>{C=vr(C,P)}),C},generateStyleSheets:()=>{var ee,J;const C=[],P=t.defaultColorScheme||"light";function M(A,X){Object.keys(X).length&&C.push(typeof A=="string"?{[A]:{...X}}:A)}M(r(void 0,{...d}),d);const{[P]:D,...q}=y;if(D){const{css:A}=D,X=(J=(ee=s[P])==null?void 0:ee.palette)==null?void 0:J.mode,te=!n&&X?{colorScheme:X,...A}:{...A};M(r(P,{...te}),te)}return Object.entries(q).forEach(([A,{css:X}])=>{var ie,xe;const te=(xe=(ie=s[A])==null?void 0:ie.palette)==null?void 0:xe.mode,Q=!n&&te?{colorScheme:te,...X}:{...X};M(r(A,{...Q}),Q)}),C}}}function CZ(t){return function(r){return t==="media"?`@media (prefers-color-scheme: ${r})`:t?t.startsWith("data-")&&!t.includes("%s")?`[${t}="${r}"] &`:t==="class"?`.${r} &`:t==="data"?`[data-${r}] &`:`${t.replace("%s",r)} &`:"&"}}const RZ=Id(),PZ=mZ("div",{name:"MuiStack",slot:"Root",overridesResolver:(t,e)=>e.root});function MZ(t){return yZ({props:t,name:"MuiStack",defaultTheme:RZ})}function IZ(t,e){const r=re.Children.toArray(t).filter(Boolean);return r.reduce((n,i,s)=>(n.push(i),s<r.length-1&&n.push(re.cloneElement(e,{key:`separator-${s}`})),n),[])}const OZ=t=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[t],kZ=({ownerState:t,theme:e})=>{let r={display:"flex",flexDirection:"column",...bn({theme:e},ly({values:t.direction,breakpoints:e.breakpoints.values}),n=>({flexDirection:n}))};if(t.spacing){const n=wd(e),i=Object.keys(e.breakpoints.values).reduce((u,f)=>((typeof t.spacing=="object"&&t.spacing[f]!=null||typeof t.direction=="object"&&t.direction[f]!=null)&&(u[f]=!0),u),{}),s=ly({values:t.direction,base:i}),o=ly({values:t.spacing,base:i});typeof s=="object"&&Object.keys(s).forEach((u,f,d)=>{if(!s[u]){const m=f>0?s[d[f-1]]:"column";s[u]=m}}),r=vr(r,bn({theme:e},o,(u,f)=>t.useFlexGap?{gap:Bs(n,u)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${OZ(f?s[f]:t.direction)}`]:Bs(n,u)}}))}return r=hK(e.breakpoints,r),r};function NZ(t={}){const{createStyledComponent:e=PZ,useThemeProps:r=MZ,componentName:n="MuiStack"}=t,i=()=>Xs({root:["root"]},u=>Zi(n,u),{}),s=e(kZ);return re.forwardRef(function(u,f){const d=r(u),g=eY(d),{component:m="div",direction:y="column",spacing:w=0,divider:b,children:S,className:E,useFlexGap:k=!1,...C}=g,P={direction:y,spacing:w,useFlexGap:k},M=i();return ke.jsx(s,{as:m,ownerState:P,ref:f,className:xt(M.root,E),...C,children:b?IZ(S,b):S})})}const wc={black:"#000",white:"#fff"},FZ={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Bo={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},Lo={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},kl={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},Uo={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},zo={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},$o={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};function MO(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:wc.white,default:wc.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const DZ=MO();function IO(){return{text:{primary:wc.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:wc.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const HR=IO();function WR(t,e,r,n){const i=n.light||n,s=n.dark||n*1.5;t[e]||(t.hasOwnProperty(r)?t[e]=t[r]:e==="light"?t.light=_c(t.main,i):e==="dark"&&(t.dark=mc(t.main,s)))}function BZ(t="light"){return t==="dark"?{main:Uo[200],light:Uo[50],dark:Uo[400]}:{main:Uo[700],light:Uo[400],dark:Uo[800]}}function LZ(t="light"){return t==="dark"?{main:Bo[200],light:Bo[50],dark:Bo[400]}:{main:Bo[500],light:Bo[300],dark:Bo[700]}}function UZ(t="light"){return t==="dark"?{main:Lo[500],light:Lo[300],dark:Lo[700]}:{main:Lo[700],light:Lo[400],dark:Lo[800]}}function zZ(t="light"){return t==="dark"?{main:zo[400],light:zo[300],dark:zo[700]}:{main:zo[700],light:zo[500],dark:zo[900]}}function $Z(t="light"){return t==="dark"?{main:$o[400],light:$o[300],dark:$o[700]}:{main:$o[800],light:$o[500],dark:$o[900]}}function VZ(t="light"){return t==="dark"?{main:kl[400],light:kl[300],dark:kl[700]}:{main:"#ed6c02",light:kl[500],dark:kl[900]}}function t1(t){const{mode:e="light",contrastThreshold:r=3,tonalOffset:n=.2,...i}=t,s=t.primary||BZ(e),o=t.secondary||LZ(e),l=t.error||UZ(e),u=t.info||zZ(e),f=t.success||$Z(e),d=t.warning||VZ(e);function g(b){return FX(b,HR.text.primary)>=r?HR.text.primary:DZ.text.primary}const m=({color:b,name:S,mainShade:E=500,lightShade:k=300,darkShade:C=700})=>{if(b={...b},!b.main&&b[E]&&(b.main=b[E]),!b.hasOwnProperty("main"))throw new Error(Fs(11,S?` (${S})`:"",E));if(typeof b.main!="string")throw new Error(Fs(12,S?` (${S})`:"",JSON.stringify(b.main)));return WR(b,"light",k,n),WR(b,"dark",C,n),b.contrastText||(b.contrastText=g(b.main)),b};let y;return e==="light"?y=MO():e==="dark"&&(y=IO()),vr({common:{...wc},mode:e,primary:m({color:s,name:"primary"}),secondary:m({color:o,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:m({color:l,name:"error"}),warning:m({color:d,name:"warning"}),info:m({color:u,name:"info"}),success:m({color:f,name:"success"}),grey:FZ,contrastThreshold:r,getContrastText:g,augmentColor:m,tonalOffset:n,...y},i)}function jZ(t){const e={};return Object.entries(t).forEach(n=>{const[i,s]=n;typeof s=="object"&&(e[i]=`${s.fontStyle?`${s.fontStyle} `:""}${s.fontVariant?`${s.fontVariant} `:""}${s.fontWeight?`${s.fontWeight} `:""}${s.fontStretch?`${s.fontStretch} `:""}${s.fontSize||""}${s.lineHeight?`/${s.lineHeight} `:""}${s.fontFamily||""}`)}),e}function HZ(t,e){return{toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}},...e}}function WZ(t){return Math.round(t*1e5)/1e5}const qR={textTransform:"uppercase"},XR='"Roboto", "Helvetica", "Arial", sans-serif';function qZ(t,e){const{fontFamily:r=XR,fontSize:n=14,fontWeightLight:i=300,fontWeightRegular:s=400,fontWeightMedium:o=500,fontWeightBold:l=700,htmlFontSize:u=16,allVariants:f,pxToRem:d,...g}=typeof e=="function"?e(t):e,m=n/14,y=d||(S=>`${S/u*m}rem`),w=(S,E,k,C,P)=>({fontFamily:r,fontWeight:S,fontSize:y(E),lineHeight:k,...r===XR?{letterSpacing:`${WZ(C/E)}em`}:{},...P,...f}),b={h1:w(i,96,1.167,-1.5),h2:w(i,60,1.2,-.5),h3:w(s,48,1.167,0),h4:w(s,34,1.235,.25),h5:w(s,24,1.334,0),h6:w(o,20,1.6,.15),subtitle1:w(s,16,1.75,.15),subtitle2:w(o,14,1.57,.1),body1:w(s,16,1.5,.15),body2:w(s,14,1.43,.15),button:w(o,14,1.75,.4,qR),caption:w(s,12,1.66,.4),overline:w(s,12,2.66,1,qR),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return vr({htmlFontSize:u,pxToRem:y,fontFamily:r,fontSize:n,fontWeightLight:i,fontWeightRegular:s,fontWeightMedium:o,fontWeightBold:l,...b},g,{clone:!1})}const XZ=.2,KZ=.14,YZ=.12;function mt(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${XZ})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${KZ})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${YZ})`].join(",")}const ZZ=["none",mt(0,2,1,-1,0,1,1,0,0,1,3,0),mt(0,3,1,-2,0,2,2,0,0,1,5,0),mt(0,3,3,-2,0,3,4,0,0,1,8,0),mt(0,2,4,-1,0,4,5,0,0,1,10,0),mt(0,3,5,-1,0,5,8,0,0,1,14,0),mt(0,3,5,-1,0,6,10,0,0,1,18,0),mt(0,4,5,-2,0,7,10,1,0,2,16,1),mt(0,5,5,-3,0,8,10,1,0,3,14,2),mt(0,5,6,-3,0,9,12,1,0,3,16,2),mt(0,6,6,-3,0,10,14,1,0,4,18,3),mt(0,6,7,-4,0,11,15,1,0,4,20,3),mt(0,7,8,-4,0,12,17,2,0,5,22,4),mt(0,7,8,-4,0,13,19,2,0,5,24,4),mt(0,7,9,-4,0,14,21,2,0,5,26,4),mt(0,8,9,-5,0,15,22,2,0,6,28,5),mt(0,8,10,-5,0,16,24,2,0,6,30,5),mt(0,8,11,-5,0,17,26,2,0,6,32,5),mt(0,9,11,-5,0,18,28,2,0,7,34,6),mt(0,9,12,-6,0,19,29,2,0,7,36,6),mt(0,10,13,-6,0,20,31,3,0,8,38,7),mt(0,10,13,-6,0,21,33,3,0,8,40,7),mt(0,10,14,-6,0,22,35,3,0,8,42,7),mt(0,11,14,-7,0,23,36,3,0,9,44,8),mt(0,11,15,-7,0,24,38,3,0,9,46,8)],GZ={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},QZ={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function KR(t){return`${Math.round(t)}ms`}function JZ(t){if(!t)return 0;const e=t/36;return Math.min(Math.round((4+15*e**.25+e/5)*10),3e3)}function eG(t){const e={...GZ,...t.easing},r={...QZ,...t.duration};return{getAutoHeightDuration:JZ,create:(i=["all"],s={})=>{const{duration:o=r.standard,easing:l=e.easeInOut,delay:u=0,...f}=s;return(Array.isArray(i)?i:[i]).map(d=>`${d} ${typeof o=="string"?o:KR(o)} ${l} ${typeof u=="string"?u:KR(u)}`).join(",")},...t,easing:e,duration:r}}const tG={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function rG(t){return Dn(t)||typeof t>"u"||typeof t=="string"||typeof t=="boolean"||typeof t=="number"||Array.isArray(t)}function OO(t={}){const e={...t};function r(n){const i=Object.entries(n);for(let s=0;s<i.length;s++){const[o,l]=i[s];!rG(l)||o.startsWith("unstable_")?delete n[o]:Dn(l)&&(n[o]={...l},r(n[o]))}}return r(e),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(e,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function Av(t={},...e){const{breakpoints:r,mixins:n={},spacing:i,palette:s={},transitions:o={},typography:l={},shape:u,...f}=t;if(t.vars)throw new Error(Fs(20));const d=t1(s),g=Id(t);let m=vr(g,{mixins:HZ(g.breakpoints,n),palette:d,shadows:ZZ.slice(),typography:qZ(d,l),transitions:eG(o),zIndex:{...tG}});return m=vr(m,f),m=e.reduce((y,w)=>vr(y,w),m),m.unstable_sxConfig={...kc,...f==null?void 0:f.unstable_sxConfig},m.unstable_sx=function(w){return Ra({sx:w,theme:this})},m.toRuntimeSource=OO,m}function Cv(t){let e;return t<1?e=5.11916*t**2:e=4.5*Math.log(t+1)+2,Math.round(e*10)/1e3}const nG=[...Array(25)].map((t,e)=>{if(e===0)return"none";const r=Cv(e);return`linear-gradient(rgba(255 255 255 / ${r}), rgba(255 255 255 / ${r}))`});function kO(t){return{inputPlaceholder:t==="dark"?.5:.42,inputUnderline:t==="dark"?.7:.42,switchTrackDisabled:t==="dark"?.2:.12,switchTrack:t==="dark"?.3:.38}}function NO(t){return t==="dark"?nG:[]}function iG(t){const{palette:e={mode:"light"},opacity:r,overlays:n,...i}=t,s=t1(e);return{palette:s,opacity:{...kO(s.mode),...r},overlays:n||NO(s.mode),...i}}function sG(t){var e;return!!t[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!t[0].match(/sxConfig$/)||t[0]==="palette"&&!!((e=t[1])!=null&&e.match(/(mode|contrastThreshold|tonalOffset)/))}const oG=t=>[...[...Array(25)].map((e,r)=>`--${t?`${t}-`:""}overlays-${r}`),`--${t?`${t}-`:""}palette-AppBar-darkBg`,`--${t?`${t}-`:""}palette-AppBar-darkColor`],aG=t=>(e,r)=>{const n=t.rootSelector||":root",i=t.colorSchemeSelector;let s=i;if(i==="class"&&(s=".%s"),i==="data"&&(s="[data-%s]"),i!=null&&i.startsWith("data-")&&!i.includes("%s")&&(s=`[${i}="%s"]`),t.defaultColorScheme===e){if(e==="dark"){const o={};return oG(t.cssVarPrefix).forEach(l=>{o[l]=r[l],delete r[l]}),s==="media"?{[n]:r,"@media (prefers-color-scheme: dark)":{[n]:o}}:s?{[s.replace("%s",e)]:o,[`${n}, ${s.replace("%s",e)}`]:r}:{[n]:{...r,...o}}}if(s&&s!=="media")return`${n}, ${s.replace("%s",String(e))}`}else if(e){if(s==="media")return{[`@media (prefers-color-scheme: ${String(e)})`]:{[n]:r}};if(s)return s.replace("%s",String(e))}return n};function lG(t,e){e.forEach(r=>{t[r]||(t[r]={})})}function ne(t,e,r){!t[e]&&r&&(t[e]=r)}function ql(t){return typeof t!="string"||!t.startsWith("hsl")?t:tO(t)}function Gn(t,e){`${e}Channel`in t||(t[`${e}Channel`]=Wl(ql(t[e])))}function cG(t){return typeof t=="number"?`${t}px`:typeof t=="string"||typeof t=="function"||Array.isArray(t)?t:"8px"}const In=t=>{try{return t()}catch{}},uG=(t="mui")=>xZ(t);function py(t,e,r,n){if(!e)return;e=e===!0?{}:e;const i=n==="dark"?"dark":"light";if(!r){t[n]=iG({...e,palette:{mode:i,...e==null?void 0:e.palette}});return}const{palette:s,...o}=Av({...r,palette:{mode:i,...e==null?void 0:e.palette}});return t[n]={...e,palette:s,opacity:{...kO(i),...e==null?void 0:e.opacity},overlays:(e==null?void 0:e.overlays)||NO(i)},o}function fG(t={},...e){const{colorSchemes:r={light:!0},defaultColorScheme:n,disableCssColorScheme:i=!1,cssVarPrefix:s="mui",shouldSkipGeneratingVar:o=sG,colorSchemeSelector:l=r.light&&r.dark?"media":void 0,rootSelector:u=":root",...f}=t,d=Object.keys(r)[0],g=n||(r.light&&d!=="light"?"light":d),m=uG(s),{[g]:y,light:w,dark:b,...S}=r,E={...S};let k=y;if((g==="dark"&&!("dark"in r)||g==="light"&&!("light"in r))&&(k=!0),!k)throw new Error(Fs(21,g));const C=py(E,k,f,g);w&&!E.light&&py(E,w,void 0,"light"),b&&!E.dark&&py(E,b,void 0,"dark");let P={defaultColorScheme:g,...C,cssVarPrefix:s,colorSchemeSelector:l,rootSelector:u,getCssVar:m,colorSchemes:E,font:{...jZ(C.typography),...C.font},spacing:cG(f.spacing)};Object.keys(P.colorSchemes).forEach(J=>{const A=P.colorSchemes[J].palette,X=te=>{const Q=te.split("-"),ie=Q[1],xe=Q[2];return m(te,A[ie][xe])};if(A.mode==="light"&&(ne(A.common,"background","#fff"),ne(A.common,"onBackground","#000")),A.mode==="dark"&&(ne(A.common,"background","#000"),ne(A.common,"onBackground","#fff")),lG(A,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),A.mode==="light"){ne(A.Alert,"errorColor",ot(A.error.light,.6)),ne(A.Alert,"infoColor",ot(A.info.light,.6)),ne(A.Alert,"successColor",ot(A.success.light,.6)),ne(A.Alert,"warningColor",ot(A.warning.light,.6)),ne(A.Alert,"errorFilledBg",X("palette-error-main")),ne(A.Alert,"infoFilledBg",X("palette-info-main")),ne(A.Alert,"successFilledBg",X("palette-success-main")),ne(A.Alert,"warningFilledBg",X("palette-warning-main")),ne(A.Alert,"errorFilledColor",In(()=>A.getContrastText(A.error.main))),ne(A.Alert,"infoFilledColor",In(()=>A.getContrastText(A.info.main))),ne(A.Alert,"successFilledColor",In(()=>A.getContrastText(A.success.main))),ne(A.Alert,"warningFilledColor",In(()=>A.getContrastText(A.warning.main))),ne(A.Alert,"errorStandardBg",at(A.error.light,.9)),ne(A.Alert,"infoStandardBg",at(A.info.light,.9)),ne(A.Alert,"successStandardBg",at(A.success.light,.9)),ne(A.Alert,"warningStandardBg",at(A.warning.light,.9)),ne(A.Alert,"errorIconColor",X("palette-error-main")),ne(A.Alert,"infoIconColor",X("palette-info-main")),ne(A.Alert,"successIconColor",X("palette-success-main")),ne(A.Alert,"warningIconColor",X("palette-warning-main")),ne(A.AppBar,"defaultBg",X("palette-grey-100")),ne(A.Avatar,"defaultBg",X("palette-grey-400")),ne(A.Button,"inheritContainedBg",X("palette-grey-300")),ne(A.Button,"inheritContainedHoverBg",X("palette-grey-A100")),ne(A.Chip,"defaultBorder",X("palette-grey-400")),ne(A.Chip,"defaultAvatarColor",X("palette-grey-700")),ne(A.Chip,"defaultIconColor",X("palette-grey-700")),ne(A.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),ne(A.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),ne(A.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),ne(A.LinearProgress,"primaryBg",at(A.primary.main,.62)),ne(A.LinearProgress,"secondaryBg",at(A.secondary.main,.62)),ne(A.LinearProgress,"errorBg",at(A.error.main,.62)),ne(A.LinearProgress,"infoBg",at(A.info.main,.62)),ne(A.LinearProgress,"successBg",at(A.success.main,.62)),ne(A.LinearProgress,"warningBg",at(A.warning.main,.62)),ne(A.Skeleton,"bg",`rgba(${X("palette-text-primaryChannel")} / 0.11)`),ne(A.Slider,"primaryTrack",at(A.primary.main,.62)),ne(A.Slider,"secondaryTrack",at(A.secondary.main,.62)),ne(A.Slider,"errorTrack",at(A.error.main,.62)),ne(A.Slider,"infoTrack",at(A.info.main,.62)),ne(A.Slider,"successTrack",at(A.success.main,.62)),ne(A.Slider,"warningTrack",at(A.warning.main,.62));const te=xf(A.background.default,.8);ne(A.SnackbarContent,"bg",te),ne(A.SnackbarContent,"color",In(()=>A.getContrastText(te))),ne(A.SpeedDialAction,"fabHoverBg",xf(A.background.paper,.15)),ne(A.StepConnector,"border",X("palette-grey-400")),ne(A.StepContent,"border",X("palette-grey-400")),ne(A.Switch,"defaultColor",X("palette-common-white")),ne(A.Switch,"defaultDisabledColor",X("palette-grey-100")),ne(A.Switch,"primaryDisabledColor",at(A.primary.main,.62)),ne(A.Switch,"secondaryDisabledColor",at(A.secondary.main,.62)),ne(A.Switch,"errorDisabledColor",at(A.error.main,.62)),ne(A.Switch,"infoDisabledColor",at(A.info.main,.62)),ne(A.Switch,"successDisabledColor",at(A.success.main,.62)),ne(A.Switch,"warningDisabledColor",at(A.warning.main,.62)),ne(A.TableCell,"border",at(Sf(A.divider,1),.88)),ne(A.Tooltip,"bg",Sf(A.grey[700],.92))}if(A.mode==="dark"){ne(A.Alert,"errorColor",at(A.error.light,.6)),ne(A.Alert,"infoColor",at(A.info.light,.6)),ne(A.Alert,"successColor",at(A.success.light,.6)),ne(A.Alert,"warningColor",at(A.warning.light,.6)),ne(A.Alert,"errorFilledBg",X("palette-error-dark")),ne(A.Alert,"infoFilledBg",X("palette-info-dark")),ne(A.Alert,"successFilledBg",X("palette-success-dark")),ne(A.Alert,"warningFilledBg",X("palette-warning-dark")),ne(A.Alert,"errorFilledColor",In(()=>A.getContrastText(A.error.dark))),ne(A.Alert,"infoFilledColor",In(()=>A.getContrastText(A.info.dark))),ne(A.Alert,"successFilledColor",In(()=>A.getContrastText(A.success.dark))),ne(A.Alert,"warningFilledColor",In(()=>A.getContrastText(A.warning.dark))),ne(A.Alert,"errorStandardBg",ot(A.error.light,.9)),ne(A.Alert,"infoStandardBg",ot(A.info.light,.9)),ne(A.Alert,"successStandardBg",ot(A.success.light,.9)),ne(A.Alert,"warningStandardBg",ot(A.warning.light,.9)),ne(A.Alert,"errorIconColor",X("palette-error-main")),ne(A.Alert,"infoIconColor",X("palette-info-main")),ne(A.Alert,"successIconColor",X("palette-success-main")),ne(A.Alert,"warningIconColor",X("palette-warning-main")),ne(A.AppBar,"defaultBg",X("palette-grey-900")),ne(A.AppBar,"darkBg",X("palette-background-paper")),ne(A.AppBar,"darkColor",X("palette-text-primary")),ne(A.Avatar,"defaultBg",X("palette-grey-600")),ne(A.Button,"inheritContainedBg",X("palette-grey-800")),ne(A.Button,"inheritContainedHoverBg",X("palette-grey-700")),ne(A.Chip,"defaultBorder",X("palette-grey-700")),ne(A.Chip,"defaultAvatarColor",X("palette-grey-300")),ne(A.Chip,"defaultIconColor",X("palette-grey-300")),ne(A.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),ne(A.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),ne(A.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),ne(A.LinearProgress,"primaryBg",ot(A.primary.main,.5)),ne(A.LinearProgress,"secondaryBg",ot(A.secondary.main,.5)),ne(A.LinearProgress,"errorBg",ot(A.error.main,.5)),ne(A.LinearProgress,"infoBg",ot(A.info.main,.5)),ne(A.LinearProgress,"successBg",ot(A.success.main,.5)),ne(A.LinearProgress,"warningBg",ot(A.warning.main,.5)),ne(A.Skeleton,"bg",`rgba(${X("palette-text-primaryChannel")} / 0.13)`),ne(A.Slider,"primaryTrack",ot(A.primary.main,.5)),ne(A.Slider,"secondaryTrack",ot(A.secondary.main,.5)),ne(A.Slider,"errorTrack",ot(A.error.main,.5)),ne(A.Slider,"infoTrack",ot(A.info.main,.5)),ne(A.Slider,"successTrack",ot(A.success.main,.5)),ne(A.Slider,"warningTrack",ot(A.warning.main,.5));const te=xf(A.background.default,.98);ne(A.SnackbarContent,"bg",te),ne(A.SnackbarContent,"color",In(()=>A.getContrastText(te))),ne(A.SpeedDialAction,"fabHoverBg",xf(A.background.paper,.15)),ne(A.StepConnector,"border",X("palette-grey-600")),ne(A.StepContent,"border",X("palette-grey-600")),ne(A.Switch,"defaultColor",X("palette-grey-300")),ne(A.Switch,"defaultDisabledColor",X("palette-grey-600")),ne(A.Switch,"primaryDisabledColor",ot(A.primary.main,.55)),ne(A.Switch,"secondaryDisabledColor",ot(A.secondary.main,.55)),ne(A.Switch,"errorDisabledColor",ot(A.error.main,.55)),ne(A.Switch,"infoDisabledColor",ot(A.info.main,.55)),ne(A.Switch,"successDisabledColor",ot(A.success.main,.55)),ne(A.Switch,"warningDisabledColor",ot(A.warning.main,.55)),ne(A.TableCell,"border",ot(Sf(A.divider,1),.68)),ne(A.Tooltip,"bg",Sf(A.grey[700],.92))}Gn(A.background,"default"),Gn(A.background,"paper"),Gn(A.common,"background"),Gn(A.common,"onBackground"),Gn(A,"divider"),Object.keys(A).forEach(te=>{const Q=A[te];te!=="tonalOffset"&&Q&&typeof Q=="object"&&(Q.main&&ne(A[te],"mainChannel",Wl(ql(Q.main))),Q.light&&ne(A[te],"lightChannel",Wl(ql(Q.light))),Q.dark&&ne(A[te],"darkChannel",Wl(ql(Q.dark))),Q.contrastText&&ne(A[te],"contrastTextChannel",Wl(ql(Q.contrastText))),te==="text"&&(Gn(A[te],"primary"),Gn(A[te],"secondary")),te==="action"&&(Q.active&&Gn(A[te],"active"),Q.selected&&Gn(A[te],"selected")))})}),P=e.reduce((J,A)=>vr(J,A),P);const M={prefix:s,disableCssColorScheme:i,shouldSkipGeneratingVar:o,getSelector:aG(P)},{vars:D,generateThemeVars:q,generateStyleSheets:ee}=AZ(P,M);return P.vars=D,Object.entries(P.colorSchemes[P.defaultColorScheme]).forEach(([J,A])=>{P[J]=A}),P.generateThemeVars=q,P.generateStyleSheets=ee,P.generateSpacing=function(){return EO(f.spacing,wd(this))},P.getColorSchemeSelector=CZ(l),P.spacing=P.generateSpacing(),P.shouldSkipGeneratingVar=o,P.unstable_sxConfig={...kc,...f==null?void 0:f.unstable_sxConfig},P.unstable_sx=function(A){return Ra({sx:A,theme:this})},P.toRuntimeSource=OO,P}function YR(t,e,r){t.colorSchemes&&r&&(t.colorSchemes[e]={...r!==!0&&r,palette:t1({...r===!0?{}:r.palette,mode:e})})}function hG(t={},...e){const{palette:r,cssVariables:n=!1,colorSchemes:i=r?void 0:{light:!0},defaultColorScheme:s=r==null?void 0:r.mode,...o}=t,l=s||"light",u=i==null?void 0:i[l],f={...i,...r?{[l]:{...typeof u!="boolean"&&u,palette:r}}:void 0};if(n===!1){if(!("colorSchemes"in t))return Av(t,...e);let d=r;"palette"in t||f[l]&&(f[l]!==!0?d=f[l].palette:l==="dark"&&(d={mode:"dark"}));const g=Av({...t,palette:d},...e);return g.defaultColorScheme=l,g.colorSchemes=f,g.palette.mode==="light"&&(g.colorSchemes.light={...f.light!==!0&&f.light,palette:g.palette},YR(g,"dark",f.dark)),g.palette.mode==="dark"&&(g.colorSchemes.dark={...f.dark!==!0&&f.dark,palette:g.palette},YR(g,"light",f.light)),g}return!r&&!("light"in f)&&l==="light"&&(f.light=!0),fG({...o,colorSchemes:f,defaultColorScheme:l,...typeof n!="boolean"&&n},...e)}const FO=hG(),DO="$$material";function dG(){const t=AO(FO);return t[DO]||t}function r1(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const n1=t=>r1(t)&&t!=="classes",gr=PO({themeId:DO,defaultTheme:FO,rootShouldForwardProp:n1}),ai=SZ;function Ys(t){return wZ(t)}const pG=t=>!t||!Wf(t);function gG(t){return typeof t.main=="string"}function mG(t,e=[]){if(!gG(t))return!1;for(const r of e)if(!t.hasOwnProperty(r)||typeof t[r]!="string")return!1;return!0}function Sc(t=[]){return([,e])=>e&&mG(e,t)}function _G(t){return Zi("MuiSlider",t)}const Qr=Ks("MuiSlider",["root","active","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","thumbColorError","thumbColorSuccess","thumbColorInfo","thumbColorWarning","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]),yG=t=>{const{open:e}=t;return{offset:xt(e&&Qr.valueLabelOpen),circle:Qr.valueLabelCircle,label:Qr.valueLabelLabel}};function vG(t){const{children:e,className:r,value:n}=t,i=yG(t);return e?re.cloneElement(e,{className:xt(e.props.className)},ke.jsxs(re.Fragment,{children:[e.props.children,ke.jsx("span",{className:xt(i.offset,r),"aria-hidden":!0,children:ke.jsx("span",{className:i.circle,children:ke.jsx("span",{className:i.label,children:n})})})]})):null}function ZR(t){return t}const bG=gr("span",{name:"MuiSlider",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:r}=t;return[e.root,e[`color${Xt(r.color)}`],r.size!=="medium"&&e[`size${Xt(r.size)}`],r.marked&&e.marked,r.orientation==="vertical"&&e.vertical,r.track==="inverted"&&e.trackInverted,r.track===!1&&e.trackFalse]}})(ai(({theme:t})=>({borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",WebkitTapHighlightColor:"transparent","@media print":{colorAdjust:"exact"},[`&.${Qr.disabled}`]:{pointerEvents:"none",cursor:"default",color:(t.vars||t).palette.grey[400]},[`&.${Qr.dragging}`]:{[`& .${Qr.thumb}, & .${Qr.track}`]:{transition:"none"}},variants:[...Object.entries(t.palette).filter(Sc()).map(([e])=>({props:{color:e},style:{color:(t.vars||t).palette[e].main}})),{props:{orientation:"horizontal"},style:{height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}}},{props:{orientation:"horizontal",size:"small"},style:{height:2}},{props:{orientation:"horizontal",marked:!0},style:{marginBottom:20}},{props:{orientation:"vertical"},style:{height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}}},{props:{orientation:"vertical",size:"small"},style:{width:2}},{props:{orientation:"vertical",marked:!0},style:{marginRight:44}}]}))),wG=gr("span",{name:"MuiSlider",slot:"Rail",overridesResolver:(t,e)=>e.rail})({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38,variants:[{props:{orientation:"horizontal"},style:{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:"inverted"},style:{opacity:1}}]}),SG=gr("span",{name:"MuiSlider",slot:"Track",overridesResolver:(t,e)=>e.track})(ai(({theme:t})=>({display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:t.transitions.create(["left","width","bottom","height"],{duration:t.transitions.duration.shortest}),variants:[{props:{size:"small"},style:{border:"none"}},{props:{orientation:"horizontal"},style:{height:"inherit",top:"50%",transform:"translateY(-50%)"}},{props:{orientation:"vertical"},style:{width:"inherit",left:"50%",transform:"translateX(-50%)"}},{props:{track:!1},style:{display:"none"}},...Object.entries(t.palette).filter(Sc()).map(([e])=>({props:{color:e,track:"inverted"},style:{...t.vars?{backgroundColor:t.vars.palette.Slider[`${e}Track`],borderColor:t.vars.palette.Slider[`${e}Track`]}:{backgroundColor:_c(t.palette[e].main,.62),borderColor:_c(t.palette[e].main,.62),...t.applyStyles("dark",{backgroundColor:mc(t.palette[e].main,.5)}),...t.applyStyles("dark",{borderColor:mc(t.palette[e].main,.5)})}}}))]}))),xG=gr("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(t,e)=>{const{ownerState:r}=t;return[e.thumb,e[`thumbColor${Xt(r.color)}`],r.size!=="medium"&&e[`thumbSize${Xt(r.size)}`]]}})(ai(({theme:t})=>({position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:t.transitions.create(["box-shadow","left","bottom"],{duration:t.transitions.duration.shortest}),"&::before":{position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(t.vars||t).shadows[2]},"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&.${Qr.disabled}`]:{"&:hover":{boxShadow:"none"}},variants:[{props:{size:"small"},style:{width:12,height:12,"&::before":{boxShadow:"none"}}},{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-50%, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 50%)"}},...Object.entries(t.palette).filter(Sc()).map(([e])=>({props:{color:e},style:{[`&:hover, &.${Qr.focusVisible}`]:{...t.vars?{boxShadow:`0px 0px 0px 8px rgba(${t.vars.palette[e].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 8px ${Ds(t.palette[e].main,.16)}`},"@media (hover: none)":{boxShadow:"none"}},[`&.${Qr.active}`]:{...t.vars?{boxShadow:`0px 0px 0px 14px rgba(${t.vars.palette[e].mainChannel} / 0.16)`}:{boxShadow:`0px 0px 0px 14px ${Ds(t.palette[e].main,.16)}`}}}}))]}))),TG=gr(vG,{name:"MuiSlider",slot:"ValueLabel",overridesResolver:(t,e)=>e.valueLabel})(ai(({theme:t})=>({zIndex:1,whiteSpace:"nowrap",...t.typography.body2,fontWeight:500,transition:t.transitions.create(["transform"],{duration:t.transitions.duration.shortest}),position:"absolute",backgroundColor:(t.vars||t).palette.grey[600],borderRadius:2,color:(t.vars||t).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem",variants:[{props:{orientation:"horizontal"},style:{transform:"translateY(-100%) scale(0)",top:"-10px",transformOrigin:"bottom center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"},[`&.${Qr.valueLabelOpen}`]:{transform:"translateY(-100%) scale(1)"}}},{props:{orientation:"vertical"},style:{transform:"translateY(-50%) scale(0)",right:"30px",top:"50%",transformOrigin:"right center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, -50%) rotate(45deg)",backgroundColor:"inherit",right:-8,top:"50%"},[`&.${Qr.valueLabelOpen}`]:{transform:"translateY(-50%) scale(1)"}}},{props:{size:"small"},style:{fontSize:t.typography.pxToRem(12),padding:"0.25rem 0.5rem"}},{props:{orientation:"vertical",size:"small"},style:{right:"20px"}}]}))),EG=gr("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:t=>r1(t)&&t!=="markActive",overridesResolver:(t,e)=>{const{markActive:r}=t;return[e.mark,r&&e.markActive]}})(ai(({theme:t})=>({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor",variants:[{props:{orientation:"horizontal"},style:{top:"50%",transform:"translate(-1px, -50%)"}},{props:{orientation:"vertical"},style:{left:"50%",transform:"translate(-50%, 1px)"}},{props:{markActive:!0},style:{backgroundColor:(t.vars||t).palette.background.paper,opacity:.8}}]}))),AG=gr("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:t=>r1(t)&&t!=="markLabelActive",overridesResolver:(t,e)=>e.markLabel})(ai(({theme:t})=>({...t.typography.body2,color:(t.vars||t).palette.text.secondary,position:"absolute",whiteSpace:"nowrap",variants:[{props:{orientation:"horizontal"},style:{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}}},{props:{orientation:"vertical"},style:{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}}},{props:{markLabelActive:!0},style:{color:(t.vars||t).palette.text.primary}}]}))),CG=t=>{const{disabled:e,dragging:r,marked:n,orientation:i,track:s,classes:o,color:l,size:u}=t,f={root:["root",e&&"disabled",r&&"dragging",n&&"marked",i==="vertical"&&"vertical",s==="inverted"&&"trackInverted",s===!1&&"trackFalse",l&&`color${Xt(l)}`,u&&`size${Xt(u)}`],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",e&&"disabled",u&&`thumbSize${Xt(u)}`,l&&`thumbColor${Xt(l)}`],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return Xs(f,_G,o)},RG=({children:t})=>t,PG=re.forwardRef(function(e,r){const n=Ys({props:e,name:"MuiSlider"}),i=LX(),{"aria-label":s,"aria-valuetext":o,"aria-labelledby":l,component:u="span",components:f={},componentsProps:d={},color:g="primary",classes:m,className:y,disableSwap:w=!1,disabled:b=!1,getAriaLabel:S,getAriaValueText:E,marks:k=!1,max:C=100,min:P=0,name:M,onChange:D,onChangeCommitted:q,orientation:ee="horizontal",shiftStep:J=10,size:A="medium",step:X=1,scale:te=ZR,slotProps:Q,slots:ie,tabIndex:xe,track:F="normal",value:z,valueLabelDisplay:O="off",valueLabelFormat:$=ZR,...j}=n,R={...n,isRtl:i,max:C,min:P,classes:m,disabled:b,disableSwap:w,orientation:ee,marks:k,color:g,size:A,step:X,shiftStep:J,scale:te,track:F,valueLabelDisplay:O,valueLabelFormat:$},{axisProps:L,getRootProps:se,getHiddenInputProps:ue,getThumbProps:he,open:we,active:Te,axis:me,focusedThumbIndex:Oe,range:Ne,dragging:Tt,marks:vt,values:nt,trackOffset:Dt,trackLeap:ve,getThumbStyle:ze}=oK({...R,rootRef:r});R.marked=vt.length>0&&vt.some(it=>it.label),R.dragging=Tt,R.focusedThumbIndex=Oe;const Ie=CG(R),Ot=(ie==null?void 0:ie.root)??f.Root??bG,Jt=(ie==null?void 0:ie.rail)??f.Rail??wG,mr=(ie==null?void 0:ie.track)??f.Track??SG,Kt=(ie==null?void 0:ie.thumb)??f.Thumb??xG,Re=(ie==null?void 0:ie.valueLabel)??f.ValueLabel??TG,pt=(ie==null?void 0:ie.mark)??f.Mark??EG,Vr=(ie==null?void 0:ie.markLabel)??f.MarkLabel??AG,le=(ie==null?void 0:ie.input)??f.Input??"input",ge=(Q==null?void 0:Q.root)??d.root,Me=(Q==null?void 0:Q.rail)??d.rail,Ue=(Q==null?void 0:Q.track)??d.track,qe=(Q==null?void 0:Q.thumb)??d.thumb,Pe=(Q==null?void 0:Q.valueLabel)??d.valueLabel,ct=(Q==null?void 0:Q.mark)??d.mark,Bt=(Q==null?void 0:Q.markLabel)??d.markLabel,Ye=(Q==null?void 0:Q.input)??d.input,bt=Fi({elementType:Ot,getSlotProps:se,externalSlotProps:ge,externalForwardedProps:j,additionalProps:{...pG(Ot)&&{as:u}},ownerState:{...R,...ge==null?void 0:ge.ownerState},className:[Ie.root,y]}),Qi=Fi({elementType:Jt,externalSlotProps:Me,ownerState:R,className:Ie.rail}),za=Fi({elementType:mr,externalSlotProps:Ue,additionalProps:{style:{...L[me].offset(Dt),...L[me].leap(ve)}},ownerState:{...R,...Ue==null?void 0:Ue.ownerState},className:Ie.track}),Ji=Fi({elementType:Kt,getSlotProps:he,externalSlotProps:qe,ownerState:{...R,...qe==null?void 0:qe.ownerState},className:Ie.thumb}),$a=Fi({elementType:Re,externalSlotProps:Pe,ownerState:{...R,...Pe==null?void 0:Pe.ownerState},className:Ie.valueLabel}),es=Fi({elementType:pt,externalSlotProps:ct,ownerState:R,className:Ie.mark}),ts=Fi({elementType:Vr,externalSlotProps:Bt,ownerState:R,className:Ie.markLabel}),ui=Fi({elementType:le,getSlotProps:ue,externalSlotProps:Ye,ownerState:R});return ke.jsxs(Ot,{...bt,children:[ke.jsx(Jt,{...Qi}),ke.jsx(mr,{...za}),vt.filter(it=>it.value>=P&&it.value<=C).map((it,Lt)=>{const to=Eh(it.value,P,C),rs=L[me].offset(to);let jr;return F===!1?jr=nt.includes(it.value):jr=F==="normal"&&(Ne?it.value>=nt[0]&&it.value<=nt[nt.length-1]:it.value<=nt[0])||F==="inverted"&&(Ne?it.value<=nt[0]||it.value>=nt[nt.length-1]:it.value>=nt[0]),ke.jsxs(re.Fragment,{children:[ke.jsx(pt,{"data-index":Lt,...es,...!Wf(pt)&&{markActive:jr},style:{...rs,...es.style},className:xt(es.className,jr&&Ie.markActive)}),it.label!=null?ke.jsx(Vr,{"aria-hidden":!0,"data-index":Lt,...ts,...!Wf(Vr)&&{markLabelActive:jr},style:{...rs,...ts.style},className:xt(Ie.markLabel,ts.className,jr&&Ie.markLabelActive),children:it.label}):null]},Lt)}),nt.map((it,Lt)=>{const to=Eh(it,P,C),rs=L[me].offset(to),jr=O==="off"?RG:Re;return ke.jsx(jr,{...!Wf(jr)&&{valueLabelFormat:$,valueLabelDisplay:O,value:typeof $=="function"?$(te(it),Lt):$,index:Lt,open:we===Lt||Te===Lt||O==="on",disabled:b},...$a,children:ke.jsx(Kt,{"data-index":Lt,...Ji,className:xt(Ie.thumb,Ji.className,Te===Lt&&Ie.active,Oe===Lt&&Ie.focusVisible),style:{...rs,...ze(Lt),...Ji.style},children:ke.jsx(le,{"data-index":Lt,"aria-label":S?S(Lt):s,"aria-valuenow":te(it),"aria-labelledby":l,"aria-valuetext":E?E(te(it),Lt):o,value:nt[Lt],...ui})})},Lt)})]})});function MG(t){return Zi("MuiPaper",t)}Ks("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const IG=t=>{const{square:e,elevation:r,variant:n,classes:i}=t,s={root:["root",n,!e&&"rounded",n==="elevation"&&`elevation${r}`]};return Xs(s,MG,i)},OG=gr("div",{name:"MuiPaper",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:r}=t;return[e.root,e[r.variant],!r.square&&e.rounded,r.variant==="elevation"&&e[`elevation${r.elevation}`]]}})(ai(({theme:t})=>({backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow"),variants:[{props:({ownerState:e})=>!e.square,style:{borderRadius:t.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(t.vars||t).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),kG=re.forwardRef(function(e,r){var y;const n=Ys({props:e,name:"MuiPaper"}),i=dG(),{className:s,component:o="div",elevation:l=1,square:u=!1,variant:f="elevation",...d}=n,g={...n,component:o,elevation:l,square:u,variant:f},m=IG(g);return ke.jsx(OG,{as:o,ownerState:g,className:xt(m.root,s),ref:r,...d,style:{...f==="elevation"&&{"--Paper-shadow":(i.vars||i).shadows[l],...i.vars&&{"--Paper-overlay":(y=i.vars.overlays)==null?void 0:y[l]},...!i.vars&&i.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${Ds("#fff",Cv(l))}, ${Ds("#fff",Cv(l))})`}},...d.style}})}),NG=re.createContext(void 0);function FG(){return re.useContext(NG)}class Ph{constructor(){T(this,"mountEffect",()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())});this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}static create(){return new Ph}static use(){const e=oO(Ph.create).current,[r,n]=re.useState(!1);return e.shouldMount=r,e.setShouldMount=n,re.useEffect(e.mountEffect,[r]),e}mount(){return this.mounted||(this.mounted=BG(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}start(...e){this.mount().then(()=>{var r;return(r=this.ref.current)==null?void 0:r.start(...e)})}stop(...e){this.mount().then(()=>{var r;return(r=this.ref.current)==null?void 0:r.stop(...e)})}pulsate(...e){this.mount().then(()=>{var r;return(r=this.ref.current)==null?void 0:r.pulsate(...e)})}}function DG(){return Ph.use()}function BG(){let t,e;const r=new Promise((n,i)=>{t=n,e=i});return r.resolve=t,r.reject=e,r}function LG(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Rv(t,e){return Rv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Rv(t,e)}function UG(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Rv(t,e)}const GR=N.createContext(null);function zG(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i1(t,e){var r=function(s){return e&&re.isValidElement(s)?e(s):s},n=Object.create(null);return t&&re.Children.map(t,function(i){return i}).forEach(function(i){n[i.key]=r(i)}),n}function $G(t,e){t=t||{},e=e||{};function r(d){return d in e?e[d]:t[d]}var n=Object.create(null),i=[];for(var s in t)s in e?i.length&&(n[s]=i,i=[]):i.push(s);var o,l={};for(var u in e){if(n[u])for(o=0;o<n[u].length;o++){var f=n[u][o];l[n[u][o]]=r(f)}l[u]=r(u)}for(o=0;o<i.length;o++)l[i[o]]=r(i[o]);return l}function xs(t,e,r){return r[e]!=null?r[e]:t.props[e]}function VG(t,e){return i1(t.children,function(r){return re.cloneElement(r,{onExited:e.bind(null,r),in:!0,appear:xs(r,"appear",t),enter:xs(r,"enter",t),exit:xs(r,"exit",t)})})}function jG(t,e,r){var n=i1(t.children),i=$G(e,n);return Object.keys(i).forEach(function(s){var o=i[s];if(re.isValidElement(o)){var l=s in e,u=s in n,f=e[s],d=re.isValidElement(f)&&!f.props.in;u&&(!l||d)?i[s]=re.cloneElement(o,{onExited:r.bind(null,o),in:!0,exit:xs(o,"exit",t),enter:xs(o,"enter",t)}):!u&&l&&!d?i[s]=re.cloneElement(o,{in:!1}):u&&l&&re.isValidElement(f)&&(i[s]=re.cloneElement(o,{onExited:r.bind(null,o),in:f.props.in,exit:xs(o,"exit",t),enter:xs(o,"enter",t)}))}}),i}var HG=Object.values||function(t){return Object.keys(t).map(function(e){return t[e]})},WG={component:"div",childFactory:function(e){return e}},s1=function(t){UG(e,t);function e(n,i){var s;s=t.call(this,n,i)||this;var o=s.handleExited.bind(zG(s));return s.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},s}var r=e.prototype;return r.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},r.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(i,s){var o=s.children,l=s.handleExited,u=s.firstRender;return{children:u?VG(i,l):jG(i,o,l),firstRender:!1}},r.handleExited=function(i,s){var o=i1(this.props.children);i.key in o||(i.props.onExited&&i.props.onExited(s),this.mounted&&this.setState(function(l){var u=Ch({},l.children);return delete u[i.key],{children:u}}))},r.render=function(){var i=this.props,s=i.component,o=i.childFactory,l=LG(i,["component","childFactory"]),u=this.state.contextValue,f=HG(this.state.children).map(o);return delete l.appear,delete l.enter,delete l.exit,s===null?N.createElement(GR.Provider,{value:u},f):N.createElement(GR.Provider,{value:u},N.createElement(s,l,f))},e}(N.Component);s1.propTypes={};s1.defaultProps=WG;function qG(t){const{className:e,classes:r,pulsate:n=!1,rippleX:i,rippleY:s,rippleSize:o,in:l,onExited:u,timeout:f}=t,[d,g]=re.useState(!1),m=xt(e,r.ripple,r.rippleVisible,n&&r.ripplePulsate),y={width:o,height:o,top:-(o/2)+s,left:-(o/2)+i},w=xt(r.child,d&&r.childLeaving,n&&r.childPulsate);return!l&&!d&&g(!0),re.useEffect(()=>{if(!l&&u!=null){const b=setTimeout(u,f);return()=>{clearTimeout(b)}}},[u,l,f]),ke.jsx("span",{className:m,style:y,children:ke.jsx("span",{className:w})})}const Zr=Ks("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),Pv=550,XG=80,KG=e1`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,YG=e1`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,ZG=e1`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,GG=gr("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),QG=gr(qG,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${Zr.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${KG};
    animation-duration: ${Pv}ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
  }

  &.${Zr.ripplePulsate} {
    animation-duration: ${({theme:t})=>t.transitions.duration.shorter}ms;
  }

  & .${Zr.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${Zr.childLeaving} {
    opacity: 0;
    animation-name: ${YG};
    animation-duration: ${Pv}ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
  }

  & .${Zr.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${ZG};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,JG=re.forwardRef(function(e,r){const n=Ys({props:e,name:"MuiTouchRipple"}),{center:i=!1,classes:s={},className:o,...l}=n,[u,f]=re.useState([]),d=re.useRef(0),g=re.useRef(null);re.useEffect(()=>{g.current&&(g.current(),g.current=null)},[u]);const m=re.useRef(!1),y=KX(),w=re.useRef(null),b=re.useRef(null),S=re.useCallback(P=>{const{pulsate:M,rippleX:D,rippleY:q,rippleSize:ee,cb:J}=P;f(A=>[...A,ke.jsx(QG,{classes:{ripple:xt(s.ripple,Zr.ripple),rippleVisible:xt(s.rippleVisible,Zr.rippleVisible),ripplePulsate:xt(s.ripplePulsate,Zr.ripplePulsate),child:xt(s.child,Zr.child),childLeaving:xt(s.childLeaving,Zr.childLeaving),childPulsate:xt(s.childPulsate,Zr.childPulsate)},timeout:Pv,pulsate:M,rippleX:D,rippleY:q,rippleSize:ee},d.current)]),d.current+=1,g.current=J},[s]),E=re.useCallback((P={},M={},D=()=>{})=>{const{pulsate:q=!1,center:ee=i||M.pulsate,fakeElement:J=!1}=M;if((P==null?void 0:P.type)==="mousedown"&&m.current){m.current=!1;return}(P==null?void 0:P.type)==="touchstart"&&(m.current=!0);const A=J?null:b.current,X=A?A.getBoundingClientRect():{width:0,height:0,left:0,top:0};let te,Q,ie;if(ee||P===void 0||P.clientX===0&&P.clientY===0||!P.clientX&&!P.touches)te=Math.round(X.width/2),Q=Math.round(X.height/2);else{const{clientX:xe,clientY:F}=P.touches&&P.touches.length>0?P.touches[0]:P;te=Math.round(xe-X.left),Q=Math.round(F-X.top)}if(ee)ie=Math.sqrt((2*X.width**2+X.height**2)/3),ie%2===0&&(ie+=1);else{const xe=Math.max(Math.abs((A?A.clientWidth:0)-te),te)*2+2,F=Math.max(Math.abs((A?A.clientHeight:0)-Q),Q)*2+2;ie=Math.sqrt(xe**2+F**2)}P!=null&&P.touches?w.current===null&&(w.current=()=>{S({pulsate:q,rippleX:te,rippleY:Q,rippleSize:ie,cb:D})},y.start(XG,()=>{w.current&&(w.current(),w.current=null)})):S({pulsate:q,rippleX:te,rippleY:Q,rippleSize:ie,cb:D})},[i,S,y]),k=re.useCallback(()=>{E({},{pulsate:!0})},[E]),C=re.useCallback((P,M)=>{if(y.clear(),(P==null?void 0:P.type)==="touchend"&&w.current){w.current(),w.current=null,y.start(0,()=>{C(P,M)});return}w.current=null,f(D=>D.length>0?D.slice(1):D),g.current=M},[y]);return re.useImperativeHandle(r,()=>({pulsate:k,start:E,stop:C}),[k,E,C]),ke.jsx(GG,{className:xt(Zr.root,s.root,o),ref:b,...l,children:ke.jsx(s1,{component:null,exit:!0,children:u})})});function eQ(t){return Zi("MuiButtonBase",t)}const tQ=Ks("MuiButtonBase",["root","disabled","focusVisible"]),rQ=t=>{const{disabled:e,focusVisible:r,focusVisibleClassName:n,classes:i}=t,o=Xs({root:["root",e&&"disabled",r&&"focusVisible"]},eQ,i);return r&&n&&(o.root+=` ${n}`),o},nQ=gr("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(t,e)=>e.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${tQ.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),iQ=re.forwardRef(function(e,r){const n=Ys({props:e,name:"MuiButtonBase"}),{action:i,centerRipple:s=!1,children:o,className:l,component:u="button",disabled:f=!1,disableRipple:d=!1,disableTouchRipple:g=!1,focusRipple:m=!1,focusVisibleClassName:y,LinkComponent:w="a",onBlur:b,onClick:S,onContextMenu:E,onDragLeave:k,onFocus:C,onFocusVisible:P,onKeyDown:M,onKeyUp:D,onMouseDown:q,onMouseLeave:ee,onMouseUp:J,onTouchEnd:A,onTouchMove:X,onTouchStart:te,tabIndex:Q=0,TouchRippleProps:ie,touchRippleRef:xe,type:F,...z}=n,O=re.useRef(null),$=DG(),j=Sh($.ref,xe),[R,L]=re.useState(!1);f&&R&&L(!1),re.useImperativeHandle(i,()=>({focusVisible:()=>{L(!0),O.current.focus()}}),[]);const se=$.shouldMount&&!d&&!f;re.useEffect(()=>{R&&m&&!d&&$.pulsate()},[d,m,R,$]);const ue=Qn($,"start",q,g),he=Qn($,"stop",E,g),we=Qn($,"stop",k,g),Te=Qn($,"stop",J,g),me=Qn($,"stop",Re=>{R&&Re.preventDefault(),ee&&ee(Re)},g),Oe=Qn($,"start",te,g),Ne=Qn($,"stop",A,g),Tt=Qn($,"stop",X,g),vt=Qn($,"stop",Re=>{xh(Re.target)||L(!1),b&&b(Re)},!1),nt=Ms(Re=>{O.current||(O.current=Re.currentTarget),xh(Re.target)&&(L(!0),P&&P(Re)),C&&C(Re)}),Dt=()=>{const Re=O.current;return u&&u!=="button"&&!(Re.tagName==="A"&&Re.href)},ve=Ms(Re=>{m&&!Re.repeat&&R&&Re.key===" "&&$.stop(Re,()=>{$.start(Re)}),Re.target===Re.currentTarget&&Dt()&&Re.key===" "&&Re.preventDefault(),M&&M(Re),Re.target===Re.currentTarget&&Dt()&&Re.key==="Enter"&&!f&&(Re.preventDefault(),S&&S(Re))}),ze=Ms(Re=>{m&&Re.key===" "&&R&&!Re.defaultPrevented&&$.stop(Re,()=>{$.pulsate(Re)}),D&&D(Re),S&&Re.target===Re.currentTarget&&Dt()&&Re.key===" "&&!Re.defaultPrevented&&S(Re)});let Ie=u;Ie==="button"&&(z.href||z.to)&&(Ie=w);const Ot={};Ie==="button"?(Ot.type=F===void 0?"button":F,Ot.disabled=f):(!z.href&&!z.to&&(Ot.role="button"),f&&(Ot["aria-disabled"]=f));const Jt=Sh(r,O),mr={...n,centerRipple:s,component:u,disabled:f,disableRipple:d,disableTouchRipple:g,focusRipple:m,tabIndex:Q,focusVisible:R},Kt=rQ(mr);return ke.jsxs(nQ,{as:Ie,className:xt(Kt.root,l),ownerState:mr,onBlur:vt,onClick:S,onContextMenu:he,onFocus:nt,onKeyDown:ve,onKeyUp:ze,onMouseDown:ue,onMouseLeave:me,onMouseUp:Te,onDragLeave:we,onTouchEnd:Ne,onTouchMove:Tt,onTouchStart:Oe,ref:Jt,tabIndex:f?-1:Q,type:F,...Ot,...z,children:[o,se?ke.jsx(JG,{ref:j,center:s,...ie}):null]})});function Qn(t,e,r,n=!1){return Ms(i=>(r&&r(i),n||t[e](i),!0))}function sQ(t){return Zi("PrivateSwitchBase",t)}Ks("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const oQ=t=>{const{classes:e,checked:r,disabled:n,edge:i}=t,s={root:["root",r&&"checked",n&&"disabled",i&&`edge${Xt(i)}`],input:["input"]};return Xs(s,sQ,e)},aQ=gr(iQ)({padding:9,borderRadius:"50%",variants:[{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:({edge:t,ownerState:e})=>t==="start"&&e.size!=="small",style:{marginLeft:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}},{props:({edge:t,ownerState:e})=>t==="end"&&e.size!=="small",style:{marginRight:-12}}]}),lQ=gr("input",{shouldForwardProp:n1})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),cQ=re.forwardRef(function(e,r){const{autoFocus:n,checked:i,checkedIcon:s,className:o,defaultChecked:l,disabled:u,disableFocusRipple:f=!1,edge:d=!1,icon:g,id:m,inputProps:y,inputRef:w,name:b,onBlur:S,onChange:E,onFocus:k,readOnly:C,required:P=!1,tabIndex:M,type:D,value:q,...ee}=e,[J,A]=sO({controlled:i,default:!!l,name:"SwitchBase",state:"checked"}),X=FG(),te=$=>{k&&k($),X&&X.onFocus&&X.onFocus($)},Q=$=>{S&&S($),X&&X.onBlur&&X.onBlur($)},ie=$=>{if($.nativeEvent.defaultPrevented)return;const j=$.target.checked;A(j),E&&E($,j)};let xe=u;X&&typeof xe>"u"&&(xe=X.disabled);const F=D==="checkbox"||D==="radio",z={...e,checked:J,disabled:xe,disableFocusRipple:f,edge:d},O=oQ(z);return ke.jsxs(aQ,{component:"span",className:xt(O.root,o),centerRipple:!0,focusRipple:!f,disabled:xe,tabIndex:null,role:void 0,onFocus:te,onBlur:Q,ownerState:z,ref:r,...ee,children:[ke.jsx(lQ,{autoFocus:n,checked:i,defaultChecked:l,className:O.input,disabled:xe,id:F?m:void 0,name:b,onChange:ie,readOnly:C,ref:w,required:P,ownerState:z,tabIndex:M,type:D,...D==="checkbox"&&q===void 0?{}:{value:q},...y}),J?s:g]})});function uQ(t){return Zi("MuiSvgIcon",t)}Ks("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const fQ=t=>{const{color:e,fontSize:r,classes:n}=t,i={root:["root",e!=="inherit"&&`color${Xt(e)}`,`fontSize${Xt(r)}`]};return Xs(i,uQ,n)},hQ=gr("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:r}=t;return[e.root,r.color!=="inherit"&&e[`color${Xt(r.color)}`],e[`fontSize${Xt(r.fontSize)}`]]}})(ai(({theme:t})=>{var e,r,n,i,s,o,l,u,f,d,g,m,y,w;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:(i=(e=t.transitions)==null?void 0:e.create)==null?void 0:i.call(e,"fill",{duration:(n=(r=(t.vars??t).transitions)==null?void 0:r.duration)==null?void 0:n.shorter}),variants:[{props:b=>!b.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:((o=(s=t.typography)==null?void 0:s.pxToRem)==null?void 0:o.call(s,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:((u=(l=t.typography)==null?void 0:l.pxToRem)==null?void 0:u.call(l,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:((d=(f=t.typography)==null?void 0:f.pxToRem)==null?void 0:d.call(f,35))||"2.1875rem"}},...Object.entries((t.vars??t).palette).filter(([,b])=>b&&b.main).map(([b])=>{var S,E;return{props:{color:b},style:{color:(E=(S=(t.vars??t).palette)==null?void 0:S[b])==null?void 0:E.main}}}),{props:{color:"action"},style:{color:(m=(g=(t.vars??t).palette)==null?void 0:g.action)==null?void 0:m.active}},{props:{color:"disabled"},style:{color:(w=(y=(t.vars??t).palette)==null?void 0:y.action)==null?void 0:w.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),Mv=re.forwardRef(function(e,r){const n=Ys({props:e,name:"MuiSvgIcon"}),{children:i,className:s,color:o="inherit",component:l="svg",fontSize:u="medium",htmlColor:f,inheritViewBox:d=!1,titleAccess:g,viewBox:m="0 0 24 24",...y}=n,w=re.isValidElement(i)&&i.type==="svg",b={...n,color:o,component:l,fontSize:u,instanceFontSize:e.fontSize,inheritViewBox:d,viewBox:m,hasSvgAsChild:w},S={};d||(S.viewBox=m);const E=fQ(b);return ke.jsxs(hQ,{as:l,className:xt(E.root,s),focusable:"false",color:f,"aria-hidden":g?void 0:!0,role:g?"img":void 0,ref:r,...S,...y,...w&&i.props,ownerState:b,children:[w?i.props.children:i,g?ke.jsx("title",{children:g}):null]})});Mv.muiName="SvgIcon";function o1(t,e){function r(n,i){return ke.jsx(Mv,{"data-testid":`${e}Icon`,ref:i,...n,children:t})}return r.muiName=Mv.muiName,re.memo(re.forwardRef(r))}const dQ=o1(ke.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),pQ=o1(ke.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),gQ=o1(ke.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function mQ(t){return Zi("MuiCheckbox",t)}const gy=Ks("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),_Q=t=>{const{classes:e,indeterminate:r,color:n,size:i}=t,s={root:["root",r&&"indeterminate",`color${Xt(n)}`,`size${Xt(i)}`]},o=Xs(s,mQ,e);return{...e,...o}},yQ=gr(cQ,{shouldForwardProp:t=>n1(t)||t==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:r}=t;return[e.root,r.indeterminate&&e.indeterminate,e[`size${Xt(r.size)}`],r.color!=="default"&&e[`color${Xt(r.color)}`]]}})(ai(({theme:t})=>({color:(t.vars||t).palette.text.secondary,variants:[{props:{color:"default",disableRipple:!1},style:{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:Ds(t.palette.action.active,t.palette.action.hoverOpacity)}}},...Object.entries(t.palette).filter(Sc()).map(([e])=>({props:{color:e,disableRipple:!1},style:{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette[e].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Ds(t.palette[e].main,t.palette.action.hoverOpacity)}}})),...Object.entries(t.palette).filter(Sc()).map(([e])=>({props:{color:e},style:{[`&.${gy.checked}, &.${gy.indeterminate}`]:{color:(t.vars||t).palette[e].main},[`&.${gy.disabled}`]:{color:(t.vars||t).palette.action.disabled}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]}))),vQ=ke.jsx(pQ,{}),bQ=ke.jsx(dQ,{}),wQ=ke.jsx(gQ,{}),SQ=re.forwardRef(function(e,r){const n=Ys({props:e,name:"MuiCheckbox"}),{checkedIcon:i=vQ,color:s="primary",icon:o=bQ,indeterminate:l=!1,indeterminateIcon:u=wQ,inputProps:f,size:d="medium",disableRipple:g=!1,className:m,...y}=n,w=l?u:o,b=l?u:i,S={...n,disableRipple:g,color:s,indeterminate:l,size:d},E=_Q(S);return ke.jsx(yQ,{type:"checkbox",inputProps:{"data-indeterminate":l,...f},icon:re.cloneElement(w,{fontSize:w.props.fontSize??d}),checkedIcon:re.cloneElement(b,{fontSize:b.props.fontSize??d}),ownerState:S,ref:r,className:xt(E.root,m),disableRipple:g,...y,classes:E})}),BO=NZ({createStyledComponent:gr("div",{name:"MuiStack",slot:"Root",overridesResolver:(t,e)=>e.root}),useThemeProps:t=>Ys({props:t,name:"MuiStack"})});var xQ=function(e,r,n,i,s){var o=s.clientWidth,l=s.clientHeight,u=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,f=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,d=u-(s.getBoundingClientRect().left+window.pageXOffset),g=f-(s.getBoundingClientRect().top+window.pageYOffset);if(n==="vertical"){var m=void 0;if(g<0?m=0:g>l?m=1:m=Math.round(g*100/l)/100,r.a!==m)return{h:r.h,s:r.s,l:r.l,a:m,source:"rgb"}}else{var y=void 0;if(d<0?y=0:d>o?y=1:y=Math.round(d*100/o)/100,i!==y)return{h:r.h,s:r.s,l:r.l,a:y,source:"rgb"}}return null},my={},TQ=function(e,r,n,i){if(typeof document>"u"&&!i)return null;var s=i?new i:document.createElement("canvas");s.width=n*2,s.height=n*2;var o=s.getContext("2d");return o?(o.fillStyle=e,o.fillRect(0,0,s.width,s.height),o.fillStyle=r,o.fillRect(0,0,n,n),o.translate(n,n),o.fillRect(0,0,n,n),s.toDataURL()):null},EQ=function(e,r,n,i){var s=e+"-"+r+"-"+n+(i?"-server":"");if(my[s])return my[s];var o=TQ(e,r,n,i);return my[s]=o,o},QR=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ba=function(e){var r=e.white,n=e.grey,i=e.size,s=e.renderers,o=e.borderRadius,l=e.boxShadow,u=e.children,f=Be({default:{grid:{borderRadius:o,boxShadow:l,absolute:"0px 0px 0px 0px",background:"url("+EQ(r,n,i,s.canvas)+") center left"}}});return re.isValidElement(u)?N.cloneElement(u,QR({},u.props,{style:QR({},u.props.style,f.grid)})):N.createElement("div",{style:f.grid})};Ba.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}};var AQ=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},CQ=function(){function t(e,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();function RQ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function JR(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function PQ(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a1=function(t){PQ(e,t);function e(){var r,n,i,s;RQ(this,e);for(var o=arguments.length,l=Array(o),u=0;u<o;u++)l[u]=arguments[u];return s=(n=(i=JR(this,(r=e.__proto__||Object.getPrototypeOf(e)).call.apply(r,[this].concat(l))),i),i.handleChange=function(f){var d=xQ(f,i.props.hsl,i.props.direction,i.props.a,i.container);d&&typeof i.props.onChange=="function"&&i.props.onChange(d,f)},i.handleMouseDown=function(f){i.handleChange(f),window.addEventListener("mousemove",i.handleChange),window.addEventListener("mouseup",i.handleMouseUp)},i.handleMouseUp=function(){i.unbindEventListeners()},i.unbindEventListeners=function(){window.removeEventListener("mousemove",i.handleChange),window.removeEventListener("mouseup",i.handleMouseUp)},n),JR(i,s)}return CQ(e,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var n=this,i=this.props.rgb,s=Be({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+i.r+","+i.g+","+i.b+`, 0) 0%,
           rgba(`+i.r+","+i.g+","+i.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:i.a*100+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+i.r+","+i.g+","+i.b+`, 0) 0%,
           rgba(`+i.r+","+i.g+","+i.b+", 1) 100%)"},pointer:{left:0,top:i.a*100+"%"}},overwrite:AQ({},this.props.style)},{vertical:this.props.direction==="vertical",overwrite:!0});return N.createElement("div",{style:s.alpha},N.createElement("div",{style:s.checkboard},N.createElement(Ba,{renderers:this.props.renderers})),N.createElement("div",{style:s.gradient}),N.createElement("div",{style:s.container,ref:function(l){return n.container=l},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},N.createElement("div",{style:s.pointer},this.props.pointer?N.createElement(this.props.pointer,this.props):N.createElement("div",{style:s.slider}))))}}]),e}(re.PureComponent||re.Component),MQ=function(){function t(e,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();function IQ(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function OQ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kQ(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function NQ(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var FQ=1,LO=38,DQ=40,BQ=[LO,DQ],LQ=function(e){return BQ.indexOf(e)>-1},UQ=function(e){return Number(String(e).replace(/%/g,""))},zQ=1,He=function(t){NQ(e,t);function e(r){OQ(this,e);var n=kQ(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.handleBlur=function(){n.state.blurValue&&n.setState({value:n.state.blurValue,blurValue:null})},n.handleChange=function(i){n.setUpdatedValue(i.target.value,i)},n.handleKeyDown=function(i){var s=UQ(i.target.value);if(!isNaN(s)&&LQ(i.keyCode)){var o=n.getArrowOffset(),l=i.keyCode===LO?s+o:s-o;n.setUpdatedValue(l,i)}},n.handleDrag=function(i){if(n.props.dragLabel){var s=Math.round(n.props.value+i.movementX);s>=0&&s<=n.props.dragMax&&n.props.onChange&&n.props.onChange(n.getValueObjectWithLabel(s),i)}},n.handleMouseDown=function(i){n.props.dragLabel&&(i.preventDefault(),n.handleDrag(i),window.addEventListener("mousemove",n.handleDrag),window.addEventListener("mouseup",n.handleMouseUp))},n.handleMouseUp=function(){n.unbindEventListeners()},n.unbindEventListeners=function(){window.removeEventListener("mousemove",n.handleDrag),window.removeEventListener("mouseup",n.handleMouseUp)},n.state={value:String(r.value).toUpperCase(),blurValue:String(r.value).toUpperCase()},n.inputId="rc-editable-input-"+zQ++,n}return MQ(e,[{key:"componentDidUpdate",value:function(n,i){this.props.value!==this.state.value&&(n.value!==this.props.value||i.value!==this.state.value)&&(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(n){return IQ({},this.props.label,n)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||FQ}},{key:"setUpdatedValue",value:function(n,i){var s=this.props.label?this.getValueObjectWithLabel(n):n;this.props.onChange&&this.props.onChange(s,i),this.setState({value:n})}},{key:"render",value:function(){var n=this,i=Be({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return N.createElement("div",{style:i.wrap},N.createElement("input",{id:this.inputId,style:i.input,ref:function(o){return n.input=o},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?N.createElement("label",{htmlFor:this.inputId,style:i.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),e}(re.PureComponent||re.Component),$Q=function(e,r,n,i){var s=i.clientWidth,o=i.clientHeight,l=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,u=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,f=l-(i.getBoundingClientRect().left+window.pageXOffset),d=u-(i.getBoundingClientRect().top+window.pageYOffset);if(r==="vertical"){var g=void 0;if(d<0)g=359;else if(d>o)g=0;else{var m=-(d*100/o)+100;g=360*m/100}if(n.h!==g)return{h:g,s:n.s,l:n.l,a:n.a,source:"hsl"}}else{var y=void 0;if(f<0)y=0;else if(f>s)y=359;else{var w=f*100/s;y=360*w/100}if(n.h!==y)return{h:y,s:n.s,l:n.l,a:n.a,source:"hsl"}}return null},VQ=function(){function t(e,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();function jQ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e3(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function HQ(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var La=function(t){HQ(e,t);function e(){var r,n,i,s;jQ(this,e);for(var o=arguments.length,l=Array(o),u=0;u<o;u++)l[u]=arguments[u];return s=(n=(i=e3(this,(r=e.__proto__||Object.getPrototypeOf(e)).call.apply(r,[this].concat(l))),i),i.handleChange=function(f){var d=$Q(f,i.props.direction,i.props.hsl,i.container);d&&typeof i.props.onChange=="function"&&i.props.onChange(d,f)},i.handleMouseDown=function(f){i.handleChange(f),window.addEventListener("mousemove",i.handleChange),window.addEventListener("mouseup",i.handleMouseUp)},i.handleMouseUp=function(){i.unbindEventListeners()},n),e3(i,s)}return VQ(e,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var n=this,i=this.props.direction,s=i===void 0?"horizontal":i,o=Be({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:this.props.hsl.h*100/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-(this.props.hsl.h*100/360)+100+"%"}}},{vertical:s==="vertical"});return N.createElement("div",{style:o.hue},N.createElement("div",{className:"hue-"+s,style:o.container,ref:function(u){return n.container=u},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},N.createElement("style",null,`
            .hue-horizontal {
              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0
                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to right, #f00 0%, #ff0
                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }

            .hue-vertical {
              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,
                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,
                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }
          `),N.createElement("div",{style:o.pointer},this.props.pointer?N.createElement(this.props.pointer,this.props):N.createElement("div",{style:o.slider}))))}}]),e}(re.PureComponent||re.Component);function WQ(){this.__data__=[],this.size=0}function Fc(t,e){return t===e||t!==t&&e!==e}function Od(t,e){for(var r=t.length;r--;)if(Fc(t[r][0],e))return r;return-1}var qQ=Array.prototype,XQ=qQ.splice;function KQ(t){var e=this.__data__,r=Od(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():XQ.call(e,r,1),--this.size,!0}function YQ(t){var e=this.__data__,r=Od(e,t);return r<0?void 0:e[r][1]}function ZQ(t){return Od(this.__data__,t)>-1}function GQ(t,e){var r=this.__data__,n=Od(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}function li(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}li.prototype.clear=WQ;li.prototype.delete=KQ;li.prototype.get=YQ;li.prototype.has=ZQ;li.prototype.set=GQ;function QQ(){this.__data__=new li,this.size=0}function JQ(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}function eJ(t){return this.__data__.get(t)}function tJ(t){return this.__data__.has(t)}var UO=typeof global=="object"&&global&&global.Object===Object&&global,rJ=typeof self=="object"&&self&&self.Object===Object&&self,Sn=UO||rJ||Function("return this")(),Ki=Sn.Symbol,zO=Object.prototype,nJ=zO.hasOwnProperty,iJ=zO.toString,Nl=Ki?Ki.toStringTag:void 0;function sJ(t){var e=nJ.call(t,Nl),r=t[Nl];try{t[Nl]=void 0;var n=!0}catch{}var i=iJ.call(t);return n&&(e?t[Nl]=r:delete t[Nl]),i}var oJ=Object.prototype,aJ=oJ.toString;function lJ(t){return aJ.call(t)}var cJ="[object Null]",uJ="[object Undefined]",t3=Ki?Ki.toStringTag:void 0;function Zs(t){return t==null?t===void 0?uJ:cJ:t3&&t3 in Object(t)?sJ(t):lJ(t)}function tn(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var fJ="[object AsyncFunction]",hJ="[object Function]",dJ="[object GeneratorFunction]",pJ="[object Proxy]";function l1(t){if(!tn(t))return!1;var e=Zs(t);return e==hJ||e==dJ||e==fJ||e==pJ}var _y=Sn["__core-js_shared__"],r3=function(){var t=/[^.]+$/.exec(_y&&_y.keys&&_y.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function gJ(t){return!!r3&&r3 in t}var mJ=Function.prototype,_J=mJ.toString;function Gs(t){if(t!=null){try{return _J.call(t)}catch{}try{return t+""}catch{}}return""}var yJ=/[\\^$.*+?()[\]{}|]/g,vJ=/^\[object .+?Constructor\]$/,bJ=Function.prototype,wJ=Object.prototype,SJ=bJ.toString,xJ=wJ.hasOwnProperty,TJ=RegExp("^"+SJ.call(xJ).replace(yJ,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function EJ(t){if(!tn(t)||gJ(t))return!1;var e=l1(t)?TJ:vJ;return e.test(Gs(t))}function AJ(t,e){return t==null?void 0:t[e]}function Qs(t,e){var r=AJ(t,e);return EJ(r)?r:void 0}var xc=Qs(Sn,"Map"),Tc=Qs(Object,"create");function CJ(){this.__data__=Tc?Tc(null):{},this.size=0}function RJ(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var PJ="__lodash_hash_undefined__",MJ=Object.prototype,IJ=MJ.hasOwnProperty;function OJ(t){var e=this.__data__;if(Tc){var r=e[t];return r===PJ?void 0:r}return IJ.call(e,t)?e[t]:void 0}var kJ=Object.prototype,NJ=kJ.hasOwnProperty;function FJ(t){var e=this.__data__;return Tc?e[t]!==void 0:NJ.call(e,t)}var DJ="__lodash_hash_undefined__";function BJ(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Tc&&e===void 0?DJ:e,this}function Ls(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Ls.prototype.clear=CJ;Ls.prototype.delete=RJ;Ls.prototype.get=OJ;Ls.prototype.has=FJ;Ls.prototype.set=BJ;function LJ(){this.size=0,this.__data__={hash:new Ls,map:new(xc||li),string:new Ls}}function UJ(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function kd(t,e){var r=t.__data__;return UJ(e)?r[typeof e=="string"?"string":"hash"]:r.map}function zJ(t){var e=kd(this,t).delete(t);return this.size-=e?1:0,e}function $J(t){return kd(this,t).get(t)}function VJ(t){return kd(this,t).has(t)}function jJ(t,e){var r=kd(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}function ci(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ci.prototype.clear=LJ;ci.prototype.delete=zJ;ci.prototype.get=$J;ci.prototype.has=VJ;ci.prototype.set=jJ;var HJ=200;function WJ(t,e){var r=this.__data__;if(r instanceof li){var n=r.__data__;if(!xc||n.length<HJ-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new ci(n)}return r.set(t,e),this.size=r.size,this}function Ln(t){var e=this.__data__=new li(t);this.size=e.size}Ln.prototype.clear=QQ;Ln.prototype.delete=JQ;Ln.prototype.get=eJ;Ln.prototype.has=tJ;Ln.prototype.set=WJ;var Mh=function(){try{var t=Qs(Object,"defineProperty");return t({},"",{}),t}catch{}}();function c1(t,e,r){e=="__proto__"&&Mh?Mh(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function Iv(t,e,r){(r!==void 0&&!Fc(t[e],r)||r===void 0&&!(e in t))&&c1(t,e,r)}function qJ(t){return function(e,r,n){for(var i=-1,s=Object(e),o=n(e),l=o.length;l--;){var u=o[++i];if(r(s[u],u,s)===!1)break}return e}}var $O=qJ(),VO=typeof Lr=="object"&&Lr&&!Lr.nodeType&&Lr,n3=VO&&typeof Ur=="object"&&Ur&&!Ur.nodeType&&Ur,XJ=n3&&n3.exports===VO,i3=XJ?Sn.Buffer:void 0;i3&&i3.allocUnsafe;function KJ(t,e){return t.slice()}var Ih=Sn.Uint8Array;function YJ(t){var e=new t.constructor(t.byteLength);return new Ih(e).set(new Ih(t)),e}function ZJ(t,e){var r=YJ(t.buffer);return new t.constructor(r,t.byteOffset,t.length)}function GJ(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}var s3=Object.create,QJ=function(){function t(){}return function(e){if(!tn(e))return{};if(s3)return s3(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();function jO(t,e){return function(r){return t(e(r))}}var HO=jO(Object.getPrototypeOf,Object),JJ=Object.prototype;function u1(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||JJ;return t===r}function eee(t){return typeof t.constructor=="function"&&!u1(t)?QJ(HO(t)):{}}function Yi(t){return t!=null&&typeof t=="object"}var tee="[object Arguments]";function o3(t){return Yi(t)&&Zs(t)==tee}var WO=Object.prototype,ree=WO.hasOwnProperty,nee=WO.propertyIsEnumerable,Oh=o3(function(){return arguments}())?o3:function(t){return Yi(t)&&ree.call(t,"callee")&&!nee.call(t,"callee")},$r=Array.isArray,iee=9007199254740991;function f1(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=iee}function Ua(t){return t!=null&&f1(t.length)&&!l1(t)}function see(t){return Yi(t)&&Ua(t)}function oee(){return!1}var qO=typeof Lr=="object"&&Lr&&!Lr.nodeType&&Lr,a3=qO&&typeof Ur=="object"&&Ur&&!Ur.nodeType&&Ur,aee=a3&&a3.exports===qO,l3=aee?Sn.Buffer:void 0,lee=l3?l3.isBuffer:void 0,kh=lee||oee,cee="[object Object]",uee=Function.prototype,fee=Object.prototype,XO=uee.toString,hee=fee.hasOwnProperty,dee=XO.call(Object);function pee(t){if(!Yi(t)||Zs(t)!=cee)return!1;var e=HO(t);if(e===null)return!0;var r=hee.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&XO.call(r)==dee}var gee="[object Arguments]",mee="[object Array]",_ee="[object Boolean]",yee="[object Date]",vee="[object Error]",bee="[object Function]",wee="[object Map]",See="[object Number]",xee="[object Object]",Tee="[object RegExp]",Eee="[object Set]",Aee="[object String]",Cee="[object WeakMap]",Ree="[object ArrayBuffer]",Pee="[object DataView]",Mee="[object Float32Array]",Iee="[object Float64Array]",Oee="[object Int8Array]",kee="[object Int16Array]",Nee="[object Int32Array]",Fee="[object Uint8Array]",Dee="[object Uint8ClampedArray]",Bee="[object Uint16Array]",Lee="[object Uint32Array]",dt={};dt[Mee]=dt[Iee]=dt[Oee]=dt[kee]=dt[Nee]=dt[Fee]=dt[Dee]=dt[Bee]=dt[Lee]=!0;dt[gee]=dt[mee]=dt[Ree]=dt[_ee]=dt[Pee]=dt[yee]=dt[vee]=dt[bee]=dt[wee]=dt[See]=dt[xee]=dt[Tee]=dt[Eee]=dt[Aee]=dt[Cee]=!1;function Uee(t){return Yi(t)&&f1(t.length)&&!!dt[Zs(t)]}function zee(t){return function(e){return t(e)}}var KO=typeof Lr=="object"&&Lr&&!Lr.nodeType&&Lr,ic=KO&&typeof Ur=="object"&&Ur&&!Ur.nodeType&&Ur,$ee=ic&&ic.exports===KO,yy=$ee&&UO.process,c3=function(){try{var t=ic&&ic.require&&ic.require("util").types;return t||yy&&yy.binding&&yy.binding("util")}catch{}}(),u3=c3&&c3.isTypedArray,h1=u3?zee(u3):Uee;function Ov(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}var Vee=Object.prototype,jee=Vee.hasOwnProperty;function Hee(t,e,r){var n=t[e];(!(jee.call(t,e)&&Fc(n,r))||r===void 0&&!(e in t))&&c1(t,e,r)}function Wee(t,e,r,n){var i=!r;r||(r={});for(var s=-1,o=e.length;++s<o;){var l=e[s],u=void 0;u===void 0&&(u=t[l]),i?c1(r,l,u):Hee(r,l,u)}return r}function qee(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var Xee=9007199254740991,Kee=/^(?:0|[1-9]\d*)$/;function d1(t,e){var r=typeof t;return e=e??Xee,!!e&&(r=="number"||r!="symbol"&&Kee.test(t))&&t>-1&&t%1==0&&t<e}var Yee=Object.prototype,Zee=Yee.hasOwnProperty;function YO(t,e){var r=$r(t),n=!r&&Oh(t),i=!r&&!n&&kh(t),s=!r&&!n&&!i&&h1(t),o=r||n||i||s,l=o?qee(t.length,String):[],u=l.length;for(var f in t)(e||Zee.call(t,f))&&!(o&&(f=="length"||i&&(f=="offset"||f=="parent")||s&&(f=="buffer"||f=="byteLength"||f=="byteOffset")||d1(f,u)))&&l.push(f);return l}function Gee(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}var Qee=Object.prototype,Jee=Qee.hasOwnProperty;function ete(t){if(!tn(t))return Gee(t);var e=u1(t),r=[];for(var n in t)n=="constructor"&&(e||!Jee.call(t,n))||r.push(n);return r}function ZO(t){return Ua(t)?YO(t,!0):ete(t)}function tte(t){return Wee(t,ZO(t))}function rte(t,e,r,n,i,s,o){var l=Ov(t,r),u=Ov(e,r),f=o.get(u);if(f){Iv(t,r,f);return}var d=s?s(l,u,r+"",t,e,o):void 0,g=d===void 0;if(g){var m=$r(u),y=!m&&kh(u),w=!m&&!y&&h1(u);d=u,m||y||w?$r(l)?d=l:see(l)?d=GJ(l):y?(g=!1,d=KJ(u)):w?(g=!1,d=ZJ(u)):d=[]:pee(u)||Oh(u)?(d=l,Oh(l)?d=tte(l):(!tn(l)||l1(l))&&(d=eee(u))):g=!1}g&&(o.set(u,d),i(d,u,n,s,o),o.delete(u)),Iv(t,r,d)}function GO(t,e,r,n,i){t!==e&&$O(e,function(s,o){if(i||(i=new Ln),tn(s))rte(t,e,o,r,GO,n,i);else{var l=n?n(Ov(t,o),s,o+"",t,e,i):void 0;l===void 0&&(l=s),Iv(t,o,l)}},ZO)}function Nd(t){return t}function nte(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var f3=Math.max;function ite(t,e,r){return e=f3(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,s=f3(n.length-e,0),o=Array(s);++i<s;)o[i]=n[e+i];i=-1;for(var l=Array(e+1);++i<e;)l[i]=n[i];return l[e]=r(o),nte(t,this,l)}}function ste(t){return function(){return t}}var ote=Mh?function(t,e){return Mh(t,"toString",{configurable:!0,enumerable:!1,value:ste(e),writable:!0})}:Nd,ate=800,lte=16,cte=Date.now;function ute(t){var e=0,r=0;return function(){var n=cte(),i=lte-(n-r);if(r=n,i>0){if(++e>=ate)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var fte=ute(ote);function hte(t,e){return fte(ite(t,e,Nd),t+"")}function dte(t,e,r){if(!tn(r))return!1;var n=typeof e;return(n=="number"?Ua(r)&&d1(e,r.length):n=="string"&&e in r)?Fc(r[e],t):!1}function pte(t){return hte(function(e,r){var n=-1,i=r.length,s=i>1?r[i-1]:void 0,o=i>2?r[2]:void 0;for(s=t.length>3&&typeof s=="function"?(i--,s):void 0,o&&dte(r[0],r[1],o)&&(s=i<3?void 0:s,i=1),e=Object(e);++n<i;){var l=r[n];l&&t(e,l,n,s)}return e})}var Pr=pte(function(t,e,r){GO(t,e,r)}),Dc=function(e){var r=e.zDepth,n=e.radius,i=e.background,s=e.children,o=e.styles,l=o===void 0?{}:o,u=Be(Pr({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+r+"px "+r*4+"px rgba(0,0,0,.24)",borderRadius:n,background:i}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},l),{"zDepth-1":r===1});return N.createElement("div",{style:u.wrap},N.createElement("div",{style:u.bg}),N.createElement("div",{style:u.content},s))};Dc.propTypes={background:pe.string,zDepth:pe.oneOf([0,1,2,3,4,5]),radius:pe.number,styles:pe.object};Dc.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}};var vy=function(){return Sn.Date.now()},gte=/\s/;function mte(t){for(var e=t.length;e--&&gte.test(t.charAt(e)););return e}var _te=/^\s+/;function yte(t){return t&&t.slice(0,mte(t)+1).replace(_te,"")}var vte="[object Symbol]";function Fd(t){return typeof t=="symbol"||Yi(t)&&Zs(t)==vte}var h3=NaN,bte=/^[-+]0x[0-9a-f]+$/i,wte=/^0b[01]+$/i,Ste=/^0o[0-7]+$/i,xte=parseInt;function d3(t){if(typeof t=="number")return t;if(Fd(t))return h3;if(tn(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=tn(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=yte(t);var r=wte.test(t);return r||Ste.test(t)?xte(t.slice(2),r?2:8):bte.test(t)?h3:+t}var Tte="Expected a function",Ete=Math.max,Ate=Math.min;function QO(t,e,r){var n,i,s,o,l,u,f=0,d=!1,g=!1,m=!0;if(typeof t!="function")throw new TypeError(Tte);e=d3(e)||0,tn(r)&&(d=!!r.leading,g="maxWait"in r,s=g?Ete(d3(r.maxWait)||0,e):s,m="trailing"in r?!!r.trailing:m);function y(D){var q=n,ee=i;return n=i=void 0,f=D,o=t.apply(ee,q),o}function w(D){return f=D,l=setTimeout(E,e),d?y(D):o}function b(D){var q=D-u,ee=D-f,J=e-q;return g?Ate(J,s-ee):J}function S(D){var q=D-u,ee=D-f;return u===void 0||q>=e||q<0||g&&ee>=s}function E(){var D=vy();if(S(D))return k(D);l=setTimeout(E,b(D))}function k(D){return l=void 0,m&&n?y(D):(n=i=void 0,o)}function C(){l!==void 0&&clearTimeout(l),f=0,n=u=i=l=void 0}function P(){return l===void 0?o:k(vy())}function M(){var D=vy(),q=S(D);if(n=arguments,i=this,u=D,q){if(l===void 0)return w(u);if(g)return clearTimeout(l),l=setTimeout(E,e),y(u)}return l===void 0&&(l=setTimeout(E,e)),o}return M.cancel=C,M.flush=P,M}var Cte="Expected a function";function Rte(t,e,r){var n=!0,i=!0;if(typeof t!="function")throw new TypeError(Cte);return tn(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),QO(t,e,{leading:n,maxWait:e,trailing:i})}var Pte=function(e,r,n){var i=n.getBoundingClientRect(),s=i.width,o=i.height,l=typeof e.pageX=="number"?e.pageX:e.touches[0].pageX,u=typeof e.pageY=="number"?e.pageY:e.touches[0].pageY,f=l-(n.getBoundingClientRect().left+window.pageXOffset),d=u-(n.getBoundingClientRect().top+window.pageYOffset);f<0?f=0:f>s&&(f=s),d<0?d=0:d>o&&(d=o);var g=f/s,m=1-d/o;return{h:r.h,s:g,v:m,a:r.a,source:"hsv"}},Mte=function(){function t(e,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();function Ite(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ote(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function kte(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Dd=function(t){kte(e,t);function e(r){Ite(this,e);var n=Ote(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r));return n.handleChange=function(i){typeof n.props.onChange=="function"&&n.throttle(n.props.onChange,Pte(i,n.props.hsl,n.container),i)},n.handleMouseDown=function(i){n.handleChange(i);var s=n.getContainerRenderWindow();s.addEventListener("mousemove",n.handleChange),s.addEventListener("mouseup",n.handleMouseUp)},n.handleMouseUp=function(){n.unbindEventListeners()},n.throttle=Rte(function(i,s,o){i(s,o)},50),n}return Mte(e,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var n=this.container,i=window;!i.document.contains(n)&&i.parent!==i;)i=i.parent;return i}},{key:"unbindEventListeners",value:function(){var n=this.getContainerRenderWindow();n.removeEventListener("mousemove",this.handleChange),n.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var n=this,i=this.props.style||{},s=i.color,o=i.white,l=i.black,u=i.pointer,f=i.circle,d=Be({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-(this.props.hsv.v*100)+100+"%",left:this.props.hsv.s*100+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:`0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),
            0 0 1px 2px rgba(0,0,0,.4)`,borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:s,white:o,black:l,pointer:u,circle:f}},{custom:!!this.props.style});return N.createElement("div",{style:d.color,ref:function(m){return n.container=m},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},N.createElement("style",null,`
          .saturation-white {
            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));
            background: linear-gradient(to right, #fff, rgba(255,255,255,0));
          }
          .saturation-black {
            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));
            background: linear-gradient(to top, #000, rgba(0,0,0,0));
          }
        `),N.createElement("div",{style:d.white,className:"saturation-white"},N.createElement("div",{style:d.black,className:"saturation-black"}),N.createElement("div",{style:d.pointer},this.props.pointer?N.createElement(this.props.pointer,this.props):N.createElement("div",{style:d.circle}))))}}]),e}(re.PureComponent||re.Component);function Nte(t,e){for(var r=-1,n=t==null?0:t.length;++r<n&&e(t[r],r,t)!==!1;);return t}var Fte=jO(Object.keys,Object),Dte=Object.prototype,Bte=Dte.hasOwnProperty;function Lte(t){if(!u1(t))return Fte(t);var e=[];for(var r in Object(t))Bte.call(t,r)&&r!="constructor"&&e.push(r);return e}function p1(t){return Ua(t)?YO(t):Lte(t)}function Ute(t,e){return t&&$O(t,e,p1)}function zte(t,e){return function(r,n){if(r==null)return r;if(!Ua(r))return t(r,n);for(var i=r.length,s=-1,o=Object(r);++s<i&&n(o[s],s,o)!==!1;);return r}}var JO=zte(Ute);function $te(t){return typeof t=="function"?t:Nd}function Vte(t,e){var r=$r(t)?Nte:JO;return r(t,$te(e))}function Nh(t){"@babel/helpers - typeof";return Nh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nh(t)}var jte=/^\s+/,Hte=/\s+$/;function Ce(t,e){if(t=t||"",e=e||{},t instanceof Ce)return t;if(!(this instanceof Ce))return new Ce(t,e);var r=Wte(t);this._originalInput=t,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||r.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=r.ok}Ce.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),r,n,i,s,o,l;return r=e.r/255,n=e.g/255,i=e.b/255,r<=.03928?s=r/12.92:s=Math.pow((r+.055)/1.055,2.4),n<=.03928?o=n/12.92:o=Math.pow((n+.055)/1.055,2.4),i<=.03928?l=i/12.92:l=Math.pow((i+.055)/1.055,2.4),.2126*s+.7152*o+.0722*l},setAlpha:function(e){return this._a=ek(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=g3(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=g3(this._r,this._g,this._b),r=Math.round(e.h*360),n=Math.round(e.s*100),i=Math.round(e.v*100);return this._a==1?"hsv("+r+", "+n+"%, "+i+"%)":"hsva("+r+", "+n+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var e=p3(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=p3(this._r,this._g,this._b),r=Math.round(e.h*360),n=Math.round(e.s*100),i=Math.round(e.l*100);return this._a==1?"hsl("+r+", "+n+"%, "+i+"%)":"hsla("+r+", "+n+"%, "+i+"%, "+this._roundA+")"},toHex:function(e){return m3(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return Yte(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(_t(this._r,255)*100)+"%",g:Math.round(_t(this._g,255)*100)+"%",b:Math.round(_t(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(_t(this._r,255)*100)+"%, "+Math.round(_t(this._g,255)*100)+"%, "+Math.round(_t(this._b,255)*100)+"%)":"rgba("+Math.round(_t(this._r,255)*100)+"%, "+Math.round(_t(this._g,255)*100)+"%, "+Math.round(_t(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:are[m3(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var r="#"+_3(this._r,this._g,this._b,this._a),n=r,i=this._gradientType?"GradientType = 1, ":"";if(e){var s=Ce(e);n="#"+_3(s._r,s._g,s._b,s._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+r+",endColorstr="+n+")"},toString:function(e){var r=!!e;e=e||this._format;var n=!1,i=this._a<1&&this._a>=0,s=!r&&i&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return s?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(n=this.toRgbString()),e==="prgb"&&(n=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(n=this.toHexString()),e==="hex3"&&(n=this.toHexString(!0)),e==="hex4"&&(n=this.toHex8String(!0)),e==="hex8"&&(n=this.toHex8String()),e==="name"&&(n=this.toName()),e==="hsl"&&(n=this.toHslString()),e==="hsv"&&(n=this.toHsvString()),n||this.toHexString())},clone:function(){return Ce(this.toString())},_applyModification:function(e,r){var n=e.apply(null,[this].concat([].slice.call(r)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(Jte,arguments)},brighten:function(){return this._applyModification(ere,arguments)},darken:function(){return this._applyModification(tre,arguments)},desaturate:function(){return this._applyModification(Zte,arguments)},saturate:function(){return this._applyModification(Gte,arguments)},greyscale:function(){return this._applyModification(Qte,arguments)},spin:function(){return this._applyModification(rre,arguments)},_applyCombination:function(e,r){return e.apply(null,[this].concat([].slice.call(r)))},analogous:function(){return this._applyCombination(sre,arguments)},complement:function(){return this._applyCombination(nre,arguments)},monochromatic:function(){return this._applyCombination(ore,arguments)},splitcomplement:function(){return this._applyCombination(ire,arguments)},triad:function(){return this._applyCombination(y3,[3])},tetrad:function(){return this._applyCombination(y3,[4])}};Ce.fromRatio=function(t,e){if(Nh(t)=="object"){var r={};for(var n in t)t.hasOwnProperty(n)&&(n==="a"?r[n]=t[n]:r[n]=Xl(t[n]));t=r}return Ce(t,e)};function Wte(t){var e={r:0,g:0,b:0},r=1,n=null,i=null,s=null,o=!1,l=!1;return typeof t=="string"&&(t=fre(t)),Nh(t)=="object"&&(Jn(t.r)&&Jn(t.g)&&Jn(t.b)?(e=qte(t.r,t.g,t.b),o=!0,l=String(t.r).substr(-1)==="%"?"prgb":"rgb"):Jn(t.h)&&Jn(t.s)&&Jn(t.v)?(n=Xl(t.s),i=Xl(t.v),e=Kte(t.h,n,i),o=!0,l="hsv"):Jn(t.h)&&Jn(t.s)&&Jn(t.l)&&(n=Xl(t.s),s=Xl(t.l),e=Xte(t.h,n,s),o=!0,l="hsl"),t.hasOwnProperty("a")&&(r=t.a)),r=ek(r),{ok:o,format:t.format||l,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:r}}function qte(t,e,r){return{r:_t(t,255)*255,g:_t(e,255)*255,b:_t(r,255)*255}}function p3(t,e,r){t=_t(t,255),e=_t(e,255),r=_t(r,255);var n=Math.max(t,e,r),i=Math.min(t,e,r),s,o,l=(n+i)/2;if(n==i)s=o=0;else{var u=n-i;switch(o=l>.5?u/(2-n-i):u/(n+i),n){case t:s=(e-r)/u+(e<r?6:0);break;case e:s=(r-t)/u+2;break;case r:s=(t-e)/u+4;break}s/=6}return{h:s,s:o,l}}function Xte(t,e,r){var n,i,s;t=_t(t,360),e=_t(e,100),r=_t(r,100);function o(f,d,g){return g<0&&(g+=1),g>1&&(g-=1),g<1/6?f+(d-f)*6*g:g<1/2?d:g<2/3?f+(d-f)*(2/3-g)*6:f}if(e===0)n=i=s=r;else{var l=r<.5?r*(1+e):r+e-r*e,u=2*r-l;n=o(u,l,t+1/3),i=o(u,l,t),s=o(u,l,t-1/3)}return{r:n*255,g:i*255,b:s*255}}function g3(t,e,r){t=_t(t,255),e=_t(e,255),r=_t(r,255);var n=Math.max(t,e,r),i=Math.min(t,e,r),s,o,l=n,u=n-i;if(o=n===0?0:u/n,n==i)s=0;else{switch(n){case t:s=(e-r)/u+(e<r?6:0);break;case e:s=(r-t)/u+2;break;case r:s=(t-e)/u+4;break}s/=6}return{h:s,s:o,v:l}}function Kte(t,e,r){t=_t(t,360)*6,e=_t(e,100),r=_t(r,100);var n=Math.floor(t),i=t-n,s=r*(1-e),o=r*(1-i*e),l=r*(1-(1-i)*e),u=n%6,f=[r,o,s,s,l,r][u],d=[l,r,r,o,s,s][u],g=[s,s,l,r,r,o][u];return{r:f*255,g:d*255,b:g*255}}function m3(t,e,r,n){var i=[yn(Math.round(t).toString(16)),yn(Math.round(e).toString(16)),yn(Math.round(r).toString(16))];return n&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function Yte(t,e,r,n,i){var s=[yn(Math.round(t).toString(16)),yn(Math.round(e).toString(16)),yn(Math.round(r).toString(16)),yn(tk(n))];return i&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)&&s[3].charAt(0)==s[3].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}function _3(t,e,r,n){var i=[yn(tk(n)),yn(Math.round(t).toString(16)),yn(Math.round(e).toString(16)),yn(Math.round(r).toString(16))];return i.join("")}Ce.equals=function(t,e){return!t||!e?!1:Ce(t).toRgbString()==Ce(e).toRgbString()};Ce.random=function(){return Ce.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function Zte(t,e){e=e===0?0:e||10;var r=Ce(t).toHsl();return r.s-=e/100,r.s=Bd(r.s),Ce(r)}function Gte(t,e){e=e===0?0:e||10;var r=Ce(t).toHsl();return r.s+=e/100,r.s=Bd(r.s),Ce(r)}function Qte(t){return Ce(t).desaturate(100)}function Jte(t,e){e=e===0?0:e||10;var r=Ce(t).toHsl();return r.l+=e/100,r.l=Bd(r.l),Ce(r)}function ere(t,e){e=e===0?0:e||10;var r=Ce(t).toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(255*-(e/100)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(255*-(e/100)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(255*-(e/100)))),Ce(r)}function tre(t,e){e=e===0?0:e||10;var r=Ce(t).toHsl();return r.l-=e/100,r.l=Bd(r.l),Ce(r)}function rre(t,e){var r=Ce(t).toHsl(),n=(r.h+e)%360;return r.h=n<0?360+n:n,Ce(r)}function nre(t){var e=Ce(t).toHsl();return e.h=(e.h+180)%360,Ce(e)}function y3(t,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var r=Ce(t).toHsl(),n=[Ce(t)],i=360/e,s=1;s<e;s++)n.push(Ce({h:(r.h+s*i)%360,s:r.s,l:r.l}));return n}function ire(t){var e=Ce(t).toHsl(),r=e.h;return[Ce(t),Ce({h:(r+72)%360,s:e.s,l:e.l}),Ce({h:(r+216)%360,s:e.s,l:e.l})]}function sre(t,e,r){e=e||6,r=r||30;var n=Ce(t).toHsl(),i=360/r,s=[Ce(t)];for(n.h=(n.h-(i*e>>1)+720)%360;--e;)n.h=(n.h+i)%360,s.push(Ce(n));return s}function ore(t,e){e=e||6;for(var r=Ce(t).toHsv(),n=r.h,i=r.s,s=r.v,o=[],l=1/e;e--;)o.push(Ce({h:n,s:i,v:s})),s=(s+l)%1;return o}Ce.mix=function(t,e,r){r=r===0?0:r||50;var n=Ce(t).toRgb(),i=Ce(e).toRgb(),s=r/100,o={r:(i.r-n.r)*s+n.r,g:(i.g-n.g)*s+n.g,b:(i.b-n.b)*s+n.b,a:(i.a-n.a)*s+n.a};return Ce(o)};Ce.readability=function(t,e){var r=Ce(t),n=Ce(e);return(Math.max(r.getLuminance(),n.getLuminance())+.05)/(Math.min(r.getLuminance(),n.getLuminance())+.05)};Ce.isReadable=function(t,e,r){var n=Ce.readability(t,e),i,s;switch(s=!1,i=hre(r),i.level+i.size){case"AAsmall":case"AAAlarge":s=n>=4.5;break;case"AAlarge":s=n>=3;break;case"AAAsmall":s=n>=7;break}return s};Ce.mostReadable=function(t,e,r){var n=null,i=0,s,o,l,u;r=r||{},o=r.includeFallbackColors,l=r.level,u=r.size;for(var f=0;f<e.length;f++)s=Ce.readability(t,e[f]),s>i&&(i=s,n=Ce(e[f]));return Ce.isReadable(t,n,{level:l,size:u})||!o?n:(r.includeFallbackColors=!1,Ce.mostReadable(t,["#fff","#000"],r))};var kv=Ce.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},are=Ce.hexNames=lre(kv);function lre(t){var e={};for(var r in t)t.hasOwnProperty(r)&&(e[t[r]]=r);return e}function ek(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function _t(t,e){cre(t)&&(t="100%");var r=ure(t);return t=Math.min(e,Math.max(0,parseFloat(t))),r&&(t=parseInt(t*e,10)/100),Math.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function Bd(t){return Math.min(1,Math.max(0,t))}function Dr(t){return parseInt(t,16)}function cre(t){return typeof t=="string"&&t.indexOf(".")!=-1&&parseFloat(t)===1}function ure(t){return typeof t=="string"&&t.indexOf("%")!=-1}function yn(t){return t.length==1?"0"+t:""+t}function Xl(t){return t<=1&&(t=t*100+"%"),t}function tk(t){return Math.round(parseFloat(t)*255).toString(16)}function v3(t){return Dr(t)/255}var hn=function(){var t="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",r="(?:"+e+")|(?:"+t+")",n="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?",i="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";return{CSS_UNIT:new RegExp(r),rgb:new RegExp("rgb"+n),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+n),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+n),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Jn(t){return!!hn.CSS_UNIT.exec(t)}function fre(t){t=t.replace(jte,"").replace(Hte,"").toLowerCase();var e=!1;if(kv[t])t=kv[t],e=!0;else if(t=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var r;return(r=hn.rgb.exec(t))?{r:r[1],g:r[2],b:r[3]}:(r=hn.rgba.exec(t))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=hn.hsl.exec(t))?{h:r[1],s:r[2],l:r[3]}:(r=hn.hsla.exec(t))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=hn.hsv.exec(t))?{h:r[1],s:r[2],v:r[3]}:(r=hn.hsva.exec(t))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=hn.hex8.exec(t))?{r:Dr(r[1]),g:Dr(r[2]),b:Dr(r[3]),a:v3(r[4]),format:e?"name":"hex8"}:(r=hn.hex6.exec(t))?{r:Dr(r[1]),g:Dr(r[2]),b:Dr(r[3]),format:e?"name":"hex"}:(r=hn.hex4.exec(t))?{r:Dr(r[1]+""+r[1]),g:Dr(r[2]+""+r[2]),b:Dr(r[3]+""+r[3]),a:v3(r[4]+""+r[4]),format:e?"name":"hex8"}:(r=hn.hex3.exec(t))?{r:Dr(r[1]+""+r[1]),g:Dr(r[2]+""+r[2]),b:Dr(r[3]+""+r[3]),format:e?"name":"hex"}:!1}function hre(t){var e,r;return t=t||{level:"AA",size:"small"},e=(t.level||"AA").toUpperCase(),r=(t.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),r!=="small"&&r!=="large"&&(r="small"),{level:e,size:r}}var b3=function(e){var r=["r","g","b","a","h","s","l","v"],n=0,i=0;return Vte(r,function(s){if(e[s]&&(n+=1,isNaN(e[s])||(i+=1),s==="s"||s==="l")){var o=/^\d+%$/;o.test(e[s])&&(i+=1)}}),n===i?e:!1},Kl=function(e,r){var n=e.hex?Ce(e.hex):Ce(e),i=n.toHsl(),s=n.toHsv(),o=n.toRgb(),l=n.toHex();i.s===0&&(i.h=r||0,s.h=r||0);var u=l==="000000"&&o.a===0;return{hsl:i,hex:u?"transparent":"#"+l,rgb:o,hsv:s,oldHue:e.h||r||i.h,source:e.source}},Gi=function(e){if(e==="transparent")return!0;var r=String(e).charAt(0)==="#"?1:0;return e.length!==4+r&&e.length<7+r&&Ce(e).isValid()},g1=function(e){if(!e)return"#fff";var r=Kl(e);if(r.hex==="transparent")return"rgba(0,0,0,0.4)";var n=(r.rgb.r*299+r.rgb.g*587+r.rgb.b*114)/1e3;return n>=128?"#000":"#fff"},by=function(e,r){var n=e.replace("°","");return Ce(r+" ("+n+")")._ok},Fl=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},dre=function(){function t(e,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();function pre(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gre(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function mre(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Mr=function(e){var r=function(n){mre(i,n);function i(s){pre(this,i);var o=gre(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return o.handleChange=function(l,u){var f=b3(l);if(f){var d=Kl(l,l.h||o.state.oldHue);o.setState(d),o.props.onChangeComplete&&o.debounce(o.props.onChangeComplete,d,u),o.props.onChange&&o.props.onChange(d,u)}},o.handleSwatchHover=function(l,u){var f=b3(l);if(f){var d=Kl(l,l.h||o.state.oldHue);o.props.onSwatchHover&&o.props.onSwatchHover(d,u)}},o.state=Fl({},Kl(s.color,0)),o.debounce=QO(function(l,u,f){l(u,f)},100),o}return dre(i,[{key:"render",value:function(){var o={};return this.props.onSwatchHover&&(o.onSwatchHover=this.handleSwatchHover),N.createElement(e,Fl({},this.props,this.state,{onChange:this.handleChange},o))}}],[{key:"getDerivedStateFromProps",value:function(o,l){return Fl({},Kl(o.color,l.oldHue))}}]),i}(re.PureComponent||re.Component);return r.propTypes=Fl({},e.propTypes),r.defaultProps=Fl({},e.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),r},_re=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},yre=function(){function t(e,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();function vre(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function w3(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function bre(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var wre=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(n){bre(i,n);function i(){var s,o,l,u;vre(this,i);for(var f=arguments.length,d=Array(f),g=0;g<f;g++)d[g]=arguments[g];return u=(o=(l=w3(this,(s=i.__proto__||Object.getPrototypeOf(i)).call.apply(s,[this].concat(d))),l),l.state={focus:!1},l.handleFocus=function(){return l.setState({focus:!0})},l.handleBlur=function(){return l.setState({focus:!1})},o),w3(l,u)}return yre(i,[{key:"render",value:function(){return N.createElement(r,{onFocus:this.handleFocus,onBlur:this.handleBlur},N.createElement(e,_re({},this.props,this.state)))}}]),i}(N.Component)},S3=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Sre=13,xre=function(e){var r=e.color,n=e.style,i=e.onClick,s=i===void 0?function(){}:i,o=e.onHover,l=e.title,u=l===void 0?r:l,f=e.children,d=e.focus,g=e.focusStyle,m=g===void 0?{}:g,y=r==="transparent",w=Be({default:{swatch:S3({background:r,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},n,d?m:{})}}),b=function(P){return s(r,P)},S=function(P){return P.keyCode===Sre&&s(r,P)},E=function(P){return o(r,P)},k={};return o&&(k.onMouseOver=E),N.createElement("div",S3({style:w.swatch,onClick:b,title:u,tabIndex:0,onKeyDown:S},k),f,y&&N.createElement(Ba,{borderRadius:w.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};const Js=wre(xre);var Tre=function(e){var r=e.direction,n=Be({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:r==="vertical"});return N.createElement("div",{style:n.picker})},Ere=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},rk=function(e){var r=e.rgb,n=e.hsl,i=e.width,s=e.height,o=e.onChange,l=e.direction,u=e.style,f=e.renderers,d=e.pointer,g=e.className,m=g===void 0?"":g,y=Be({default:{picker:{position:"relative",width:i,height:s},alpha:{radius:"2px",style:u}}});return N.createElement("div",{style:y.picker,className:"alpha-picker "+m},N.createElement(a1,Ere({},y.alpha,{rgb:r,hsl:n,pointer:d,renderers:f,onChange:o,direction:l})))};rk.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:Tre};Mr(rk);function nk(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}var Are="__lodash_hash_undefined__";function Cre(t){return this.__data__.set(t,Are),this}function Rre(t){return this.__data__.has(t)}function Fh(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new ci;++e<r;)this.add(t[e])}Fh.prototype.add=Fh.prototype.push=Cre;Fh.prototype.has=Rre;function Pre(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}function Mre(t,e){return t.has(e)}var Ire=1,Ore=2;function ik(t,e,r,n,i,s){var o=r&Ire,l=t.length,u=e.length;if(l!=u&&!(o&&u>l))return!1;var f=s.get(t),d=s.get(e);if(f&&d)return f==e&&d==t;var g=-1,m=!0,y=r&Ore?new Fh:void 0;for(s.set(t,e),s.set(e,t);++g<l;){var w=t[g],b=e[g];if(n)var S=o?n(b,w,g,e,t,s):n(w,b,g,t,e,s);if(S!==void 0){if(S)continue;m=!1;break}if(y){if(!Pre(e,function(E,k){if(!Mre(y,k)&&(w===E||i(w,E,r,n,s)))return y.push(k)})){m=!1;break}}else if(!(w===b||i(w,b,r,n,s))){m=!1;break}}return s.delete(t),s.delete(e),m}function kre(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r}function Nre(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var Fre=1,Dre=2,Bre="[object Boolean]",Lre="[object Date]",Ure="[object Error]",zre="[object Map]",$re="[object Number]",Vre="[object RegExp]",jre="[object Set]",Hre="[object String]",Wre="[object Symbol]",qre="[object ArrayBuffer]",Xre="[object DataView]",x3=Ki?Ki.prototype:void 0,wy=x3?x3.valueOf:void 0;function Kre(t,e,r,n,i,s,o){switch(r){case Xre:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case qre:return!(t.byteLength!=e.byteLength||!s(new Ih(t),new Ih(e)));case Bre:case Lre:case $re:return Fc(+t,+e);case Ure:return t.name==e.name&&t.message==e.message;case Vre:case Hre:return t==e+"";case zre:var l=kre;case jre:var u=n&Fre;if(l||(l=Nre),t.size!=e.size&&!u)return!1;var f=o.get(t);if(f)return f==e;n|=Dre,o.set(t,e);var d=ik(l(t),l(e),n,i,s,o);return o.delete(t),d;case Wre:if(wy)return wy.call(t)==wy.call(e)}return!1}function Yre(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}function Zre(t,e,r){var n=e(t);return $r(t)?n:Yre(n,r(t))}function Gre(t,e){for(var r=-1,n=t==null?0:t.length,i=0,s=[];++r<n;){var o=t[r];e(o,r,t)&&(s[i++]=o)}return s}function Qre(){return[]}var Jre=Object.prototype,ene=Jre.propertyIsEnumerable,T3=Object.getOwnPropertySymbols,tne=T3?function(t){return t==null?[]:(t=Object(t),Gre(T3(t),function(e){return ene.call(t,e)}))}:Qre;function E3(t){return Zre(t,p1,tne)}var rne=1,nne=Object.prototype,ine=nne.hasOwnProperty;function sne(t,e,r,n,i,s){var o=r&rne,l=E3(t),u=l.length,f=E3(e),d=f.length;if(u!=d&&!o)return!1;for(var g=u;g--;){var m=l[g];if(!(o?m in e:ine.call(e,m)))return!1}var y=s.get(t),w=s.get(e);if(y&&w)return y==e&&w==t;var b=!0;s.set(t,e),s.set(e,t);for(var S=o;++g<u;){m=l[g];var E=t[m],k=e[m];if(n)var C=o?n(k,E,m,e,t,s):n(E,k,m,t,e,s);if(!(C===void 0?E===k||i(E,k,r,n,s):C)){b=!1;break}S||(S=m=="constructor")}if(b&&!S){var P=t.constructor,M=e.constructor;P!=M&&"constructor"in t&&"constructor"in e&&!(typeof P=="function"&&P instanceof P&&typeof M=="function"&&M instanceof M)&&(b=!1)}return s.delete(t),s.delete(e),b}var Nv=Qs(Sn,"DataView"),Fv=Qs(Sn,"Promise"),Dv=Qs(Sn,"Set"),Bv=Qs(Sn,"WeakMap"),A3="[object Map]",one="[object Object]",C3="[object Promise]",R3="[object Set]",P3="[object WeakMap]",M3="[object DataView]",ane=Gs(Nv),lne=Gs(xc),cne=Gs(Fv),une=Gs(Dv),fne=Gs(Bv),Bi=Zs;(Nv&&Bi(new Nv(new ArrayBuffer(1)))!=M3||xc&&Bi(new xc)!=A3||Fv&&Bi(Fv.resolve())!=C3||Dv&&Bi(new Dv)!=R3||Bv&&Bi(new Bv)!=P3)&&(Bi=function(t){var e=Zs(t),r=e==one?t.constructor:void 0,n=r?Gs(r):"";if(n)switch(n){case ane:return M3;case lne:return A3;case cne:return C3;case une:return R3;case fne:return P3}return e});var hne=1,I3="[object Arguments]",O3="[object Array]",Pf="[object Object]",dne=Object.prototype,k3=dne.hasOwnProperty;function pne(t,e,r,n,i,s){var o=$r(t),l=$r(e),u=o?O3:Bi(t),f=l?O3:Bi(e);u=u==I3?Pf:u,f=f==I3?Pf:f;var d=u==Pf,g=f==Pf,m=u==f;if(m&&kh(t)){if(!kh(e))return!1;o=!0,d=!1}if(m&&!d)return s||(s=new Ln),o||h1(t)?ik(t,e,r,n,i,s):Kre(t,e,u,r,n,i,s);if(!(r&hne)){var y=d&&k3.call(t,"__wrapped__"),w=g&&k3.call(e,"__wrapped__");if(y||w){var b=y?t.value():t,S=w?e.value():e;return s||(s=new Ln),i(b,S,r,n,s)}}return m?(s||(s=new Ln),sne(t,e,r,n,i,s)):!1}function m1(t,e,r,n,i){return t===e?!0:t==null||e==null||!Yi(t)&&!Yi(e)?t!==t&&e!==e:pne(t,e,r,n,m1,i)}var gne=1,mne=2;function _ne(t,e,r,n){var i=r.length,s=i;if(t==null)return!s;for(t=Object(t);i--;){var o=r[i];if(o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++i<s;){o=r[i];var l=o[0],u=t[l],f=o[1];if(o[2]){if(u===void 0&&!(l in t))return!1}else{var d=new Ln,g;if(!(g===void 0?m1(f,u,gne|mne,n,d):g))return!1}}return!0}function sk(t){return t===t&&!tn(t)}function yne(t){for(var e=p1(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,sk(i)]}return e}function ok(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}function vne(t){var e=yne(t);return e.length==1&&e[0][2]?ok(e[0][0],e[0][1]):function(r){return r===t||_ne(r,t,e)}}var bne=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,wne=/^\w*$/;function _1(t,e){if($r(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||Fd(t)?!0:wne.test(t)||!bne.test(t)||e!=null&&t in Object(e)}var Sne="Expected a function";function y1(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(Sne);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],s=r.cache;if(s.has(i))return s.get(i);var o=t.apply(this,n);return r.cache=s.set(i,o)||s,o};return r.cache=new(y1.Cache||ci),r}y1.Cache=ci;var xne=500;function Tne(t){var e=y1(t,function(n){return r.size===xne&&r.clear(),n}),r=e.cache;return e}var Ene=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ane=/\\(\\)?/g,Cne=Tne(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Ene,function(r,n,i,s){e.push(i?s.replace(Ane,"$1"):n||r)}),e}),N3=Ki?Ki.prototype:void 0,F3=N3?N3.toString:void 0;function ak(t){if(typeof t=="string")return t;if($r(t))return nk(t,ak)+"";if(Fd(t))return F3?F3.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function Rne(t){return t==null?"":ak(t)}function lk(t,e){return $r(t)?t:_1(t,e)?[t]:Cne(Rne(t))}function Ld(t){if(typeof t=="string"||Fd(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function ck(t,e){e=lk(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[Ld(e[r++])];return r&&r==n?t:void 0}function Pne(t,e,r){var n=t==null?void 0:ck(t,e);return n===void 0?r:n}function Mne(t,e){return t!=null&&e in Object(t)}function Ine(t,e,r){e=lk(e,t);for(var n=-1,i=e.length,s=!1;++n<i;){var o=Ld(e[n]);if(!(s=t!=null&&r(t,o)))break;t=t[o]}return s||++n!=i?s:(i=t==null?0:t.length,!!i&&f1(i)&&d1(o,i)&&($r(t)||Oh(t)))}function One(t,e){return t!=null&&Ine(t,e,Mne)}var kne=1,Nne=2;function Fne(t,e){return _1(t)&&sk(e)?ok(Ld(t),e):function(r){var n=Pne(r,t);return n===void 0&&n===e?One(r,t):m1(e,n,kne|Nne)}}function Dne(t){return function(e){return e==null?void 0:e[t]}}function Bne(t){return function(e){return ck(e,t)}}function Lne(t){return _1(t)?Dne(Ld(t)):Bne(t)}function Une(t){return typeof t=="function"?t:t==null?Nd:typeof t=="object"?$r(t)?Fne(t[0],t[1]):vne(t):Lne(t)}function zne(t,e){var r=-1,n=Ua(t)?Array(t.length):[];return JO(t,function(i,s,o){n[++r]=e(i,s,o)}),n}function eo(t,e){var r=$r(t)?nk:zne;return r(t,Une(e))}var $ne=function(e){var r=e.colors,n=e.onClick,i=e.onSwatchHover,s=Be({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return N.createElement("div",{style:s.swatches},eo(r,function(o){return N.createElement(Js,{key:o,color:o,style:s.swatch,onClick:n,onHover:i,focusStyle:{boxShadow:"0 0 4px "+o}})}),N.createElement("div",{style:s.clear}))},v1=function(e){var r=e.onChange,n=e.onSwatchHover,i=e.hex,s=e.colors,o=e.width,l=e.triangle,u=e.styles,f=u===void 0?{}:u,d=e.className,g=d===void 0?"":d,m=i==="transparent",y=function(S,E){Gi(S)&&r({hex:S,source:"hex"},E)},w=Be(Pr({default:{card:{width:o,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:i,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:g1(i),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+i+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},f),{"hide-triangle":l==="hide"});return N.createElement("div",{style:w.card,className:"block-picker "+g},N.createElement("div",{style:w.triangle}),N.createElement("div",{style:w.head},m&&N.createElement(Ba,{borderRadius:"6px 6px 0 0"}),N.createElement("div",{style:w.label},i)),N.createElement("div",{style:w.body},N.createElement($ne,{colors:s,onClick:y,onSwatchHover:n}),N.createElement(He,{style:{input:w.input},value:i,onChange:y})))};v1.propTypes={width:pe.oneOfType([pe.string,pe.number]),colors:pe.arrayOf(pe.string),triangle:pe.oneOf(["top","hide"]),styles:pe.object};v1.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top",styles:{}};Mr(v1);var Ho={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",a100:"#ff8a80",a200:"#ff5252",a400:"#ff1744",a700:"#d50000"},Wo={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",a100:"#ff80ab",a200:"#ff4081",a400:"#f50057",a700:"#c51162"},qo={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",a100:"#ea80fc",a200:"#e040fb",a400:"#d500f9",a700:"#aa00ff"},Xo={50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",a100:"#b388ff",a200:"#7c4dff",a400:"#651fff",a700:"#6200ea"},Ko={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",a100:"#8c9eff",a200:"#536dfe",a400:"#3d5afe",a700:"#304ffe"},Yo={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",a100:"#82b1ff",a200:"#448aff",a400:"#2979ff",a700:"#2962ff"},Zo={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",a100:"#80d8ff",a200:"#40c4ff",a400:"#00b0ff",a700:"#0091ea"},Go={50:"#e0f7fa",100:"#b2ebf2",200:"#80deea",300:"#4dd0e1",400:"#26c6da",500:"#00bcd4",600:"#00acc1",700:"#0097a7",800:"#00838f",900:"#006064",a100:"#84ffff",a200:"#18ffff",a400:"#00e5ff",a700:"#00b8d4"},Qo={50:"#e0f2f1",100:"#b2dfdb",200:"#80cbc4",300:"#4db6ac",400:"#26a69a",500:"#009688",600:"#00897b",700:"#00796b",800:"#00695c",900:"#004d40",a100:"#a7ffeb",a200:"#64ffda",a400:"#1de9b6",a700:"#00bfa5"},Yl={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",a100:"#b9f6ca",a200:"#69f0ae",a400:"#00e676",a700:"#00c853"},Jo={50:"#f1f8e9",100:"#dcedc8",200:"#c5e1a5",300:"#aed581",400:"#9ccc65",500:"#8bc34a",600:"#7cb342",700:"#689f38",800:"#558b2f",900:"#33691e",a100:"#ccff90",a200:"#b2ff59",a400:"#76ff03",a700:"#64dd17"},ea={50:"#f9fbe7",100:"#f0f4c3",200:"#e6ee9c",300:"#dce775",400:"#d4e157",500:"#cddc39",600:"#c0ca33",700:"#afb42b",800:"#9e9d24",900:"#827717",a100:"#f4ff81",a200:"#eeff41",a400:"#c6ff00",a700:"#aeea00"},ta={50:"#fffde7",100:"#fff9c4",200:"#fff59d",300:"#fff176",400:"#ffee58",500:"#ffeb3b",600:"#fdd835",700:"#fbc02d",800:"#f9a825",900:"#f57f17",a100:"#ffff8d",a200:"#ffff00",a400:"#ffea00",a700:"#ffd600"},ra={50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",a100:"#ffe57f",a200:"#ffd740",a400:"#ffc400",a700:"#ffab00"},na={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",a100:"#ffd180",a200:"#ffab40",a400:"#ff9100",a700:"#ff6d00"},ia={50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",a100:"#ff9e80",a200:"#ff6e40",a400:"#ff3d00",a700:"#dd2c00"},sa={50:"#efebe9",100:"#d7ccc8",200:"#bcaaa4",300:"#a1887f",400:"#8d6e63",500:"#795548",600:"#6d4c41",700:"#5d4037",800:"#4e342e",900:"#3e2723"},oa={50:"#eceff1",100:"#cfd8dc",200:"#b0bec5",300:"#90a4ae",400:"#78909c",500:"#607d8b",600:"#546e7a",700:"#455a64",800:"#37474f",900:"#263238"},uk=function(e){var r=e.color,n=e.onClick,i=e.onSwatchHover,s=e.hover,o=e.active,l=e.circleSize,u=e.circleSpacing,f=Be({default:{swatch:{width:l,height:l,marginRight:u,marginBottom:u,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+(l/2+1)+"px "+r,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+r}}},{hover:s,active:o});return N.createElement("div",{style:f.swatch},N.createElement(Js,{style:f.Swatch,color:r,onClick:n,onHover:i,focusStyle:{boxShadow:f.Swatch.boxShadow+", 0 0 5px "+r}}))};uk.defaultProps={circleSize:28,circleSpacing:14};const Vne=Vb.handleHover(uk);var b1=function(e){var r=e.width,n=e.onChange,i=e.onSwatchHover,s=e.colors,o=e.hex,l=e.circleSize,u=e.styles,f=u===void 0?{}:u,d=e.circleSpacing,g=e.className,m=g===void 0?"":g,y=Be(Pr({default:{card:{width:r,display:"flex",flexWrap:"wrap",marginRight:-d,marginBottom:-d}}},f)),w=function(S,E){return n({hex:S,source:"hex"},E)};return N.createElement("div",{style:y.card,className:"circle-picker "+m},eo(s,function(b){return N.createElement(Vne,{key:b,color:b,onClick:w,onSwatchHover:i,active:o===b.toLowerCase(),circleSize:l,circleSpacing:d})}))};b1.propTypes={width:pe.oneOfType([pe.string,pe.number]),circleSize:pe.number,circleSpacing:pe.number,styles:pe.object};b1.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[Ho[500],Wo[500],qo[500],Xo[500],Ko[500],Yo[500],Zo[500],Go[500],Qo[500],Yl[500],Jo[500],ea[500],ta[500],ra[500],na[500],ia[500],sa[500],oa[500]],styles:{}};Mr(b1);function D3(t){return t===void 0}var Mf={},B3;function jne(){if(B3)return Mf;B3=1,Object.defineProperty(Mf,"__esModule",{value:!0});var t=Object.assign||function(o){for(var l=1;l<arguments.length;l++){var u=arguments[l];for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(o[f]=u[f])}return o},e=Us(),r=n(e);function n(o){return o&&o.__esModule?o:{default:o}}function i(o,l){var u={};for(var f in o)l.indexOf(f)>=0||Object.prototype.hasOwnProperty.call(o,f)&&(u[f]=o[f]);return u}var s=24;return Mf.default=function(o){var l=o.fill,u=l===void 0?"currentColor":l,f=o.width,d=f===void 0?s:f,g=o.height,m=g===void 0?s:g,y=o.style,w=y===void 0?{}:y,b=i(o,["fill","width","height","style"]);return r.default.createElement("svg",t({viewBox:"0 0 "+s+" "+s,style:t({fill:u,width:d,height:m},w)},b),r.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))},Mf}var Hne=jne();const Wne=Ma(Hne);var qne=function(){function t(e,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();function Xne(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Kne(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Yne(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var fk=function(t){Yne(e,t);function e(r){Xne(this,e);var n=Kne(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.toggleViews=function(){n.state.view==="hex"?n.setState({view:"rgb"}):n.state.view==="rgb"?n.setState({view:"hsl"}):n.state.view==="hsl"&&(n.props.hsl.a===1?n.setState({view:"hex"}):n.setState({view:"rgb"}))},n.handleChange=function(i,s){i.hex?Gi(i.hex)&&n.props.onChange({hex:i.hex,source:"hex"},s):i.r||i.g||i.b?n.props.onChange({r:i.r||n.props.rgb.r,g:i.g||n.props.rgb.g,b:i.b||n.props.rgb.b,source:"rgb"},s):i.a?(i.a<0?i.a=0:i.a>1&&(i.a=1),n.props.onChange({h:n.props.hsl.h,s:n.props.hsl.s,l:n.props.hsl.l,a:Math.round(i.a*100)/100,source:"rgb"},s)):(i.h||i.s||i.l)&&(typeof i.s=="string"&&i.s.includes("%")&&(i.s=i.s.replace("%","")),typeof i.l=="string"&&i.l.includes("%")&&(i.l=i.l.replace("%","")),i.s==1?i.s=.01:i.l==1&&(i.l=.01),n.props.onChange({h:i.h||n.props.hsl.h,s:Number(D3(i.s)?n.props.hsl.s:i.s),l:Number(D3(i.l)?n.props.hsl.l:i.l),source:"hsl"},s))},n.showHighlight=function(i){i.currentTarget.style.background="#eee"},n.hideHighlight=function(i){i.currentTarget.style.background="transparent"},r.hsl.a!==1&&r.view==="hex"?n.state={view:"rgb"}:n.state={view:r.view},n}return qne(e,[{key:"render",value:function(){var n=this,i=Be({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),s=void 0;return this.state.view==="hex"?s=N.createElement("div",{style:i.fields,className:"flexbox-fix"},N.createElement("div",{style:i.field},N.createElement(He,{style:{input:i.input,label:i.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):this.state.view==="rgb"?s=N.createElement("div",{style:i.fields,className:"flexbox-fix"},N.createElement("div",{style:i.field},N.createElement(He,{style:{input:i.input,label:i.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),N.createElement("div",{style:i.field},N.createElement(He,{style:{input:i.input,label:i.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),N.createElement("div",{style:i.field},N.createElement(He,{style:{input:i.input,label:i.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),N.createElement("div",{style:i.alpha},N.createElement(He,{style:{input:i.input,label:i.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):this.state.view==="hsl"&&(s=N.createElement("div",{style:i.fields,className:"flexbox-fix"},N.createElement("div",{style:i.field},N.createElement(He,{style:{input:i.input,label:i.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),N.createElement("div",{style:i.field},N.createElement(He,{style:{input:i.input,label:i.label},label:"s",value:Math.round(this.props.hsl.s*100)+"%",onChange:this.handleChange})),N.createElement("div",{style:i.field},N.createElement(He,{style:{input:i.input,label:i.label},label:"l",value:Math.round(this.props.hsl.l*100)+"%",onChange:this.handleChange})),N.createElement("div",{style:i.alpha},N.createElement(He,{style:{input:i.input,label:i.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),N.createElement("div",{style:i.wrap,className:"flexbox-fix"},s,N.createElement("div",{style:i.toggle},N.createElement("div",{style:i.icon,onClick:this.toggleViews,ref:function(l){return n.icon=l}},N.createElement(Wne,{style:i.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.hsl.a!==1&&i.view==="hex"?{view:"rgb"}:null}}]),e}(N.Component);fk.defaultProps={view:"hex"};var L3=function(){var e=Be({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return N.createElement("div",{style:e.picker})},Zne=function(){var e=Be({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return N.createElement("div",{style:e.picker})},w1=function(e){var r=e.width,n=e.onChange,i=e.disableAlpha,s=e.rgb,o=e.hsl,l=e.hsv,u=e.hex,f=e.renderers,d=e.styles,g=d===void 0?{}:d,m=e.className,y=m===void 0?"":m,w=e.defaultView,b=Be(Pr({default:{picker:{width:r,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+s.r+", "+s.g+", "+s.b+", "+s.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},g),{disableAlpha:i});return N.createElement("div",{style:b.picker,className:"chrome-picker "+y},N.createElement("div",{style:b.saturation},N.createElement(Dd,{style:b.Saturation,hsl:o,hsv:l,pointer:Zne,onChange:n})),N.createElement("div",{style:b.body},N.createElement("div",{style:b.controls,className:"flexbox-fix"},N.createElement("div",{style:b.color},N.createElement("div",{style:b.swatch},N.createElement("div",{style:b.active}),N.createElement(Ba,{renderers:f}))),N.createElement("div",{style:b.toggles},N.createElement("div",{style:b.hue},N.createElement(La,{style:b.Hue,hsl:o,pointer:L3,onChange:n})),N.createElement("div",{style:b.alpha},N.createElement(a1,{style:b.Alpha,rgb:s,hsl:o,pointer:L3,renderers:f,onChange:n})))),N.createElement(fk,{rgb:s,hsl:o,hex:u,view:w,onChange:n,disableAlpha:i})))};w1.propTypes={width:pe.oneOfType([pe.string,pe.number]),disableAlpha:pe.bool,styles:pe.object,defaultView:pe.oneOf(["hex","rgb","hsl"])};w1.defaultProps={width:225,disableAlpha:!1,styles:{}};Mr(w1);var Gne=function(e){var r=e.color,n=e.onClick,i=n===void 0?function(){}:n,s=e.onSwatchHover,o=e.active,l=Be({default:{color:{background:r,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:g1(r),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:o,"color-#FFFFFF":r==="#FFFFFF",transparent:r==="transparent"});return N.createElement(Js,{style:l.color,color:r,onClick:i,onHover:s,focusStyle:{boxShadow:"0 0 4px "+r}},N.createElement("div",{style:l.dot}))},Qne=function(e){var r=e.hex,n=e.rgb,i=e.onChange,s=Be({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:r},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),o=function(u,f){u.r||u.g||u.b?i({r:u.r||n.r,g:u.g||n.g,b:u.b||n.b,source:"rgb"},f):i({hex:u.hex,source:"hex"},f)};return N.createElement("div",{style:s.fields,className:"flexbox-fix"},N.createElement("div",{style:s.active}),N.createElement(He,{style:{wrap:s.HEXwrap,input:s.HEXinput,label:s.HEXlabel},label:"hex",value:r,onChange:o}),N.createElement(He,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"r",value:n.r,onChange:o}),N.createElement(He,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"g",value:n.g,onChange:o}),N.createElement(He,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"b",value:n.b,onChange:o}))},S1=function(e){var r=e.onChange,n=e.onSwatchHover,i=e.colors,s=e.hex,o=e.rgb,l=e.styles,u=l===void 0?{}:l,f=e.className,d=f===void 0?"":f,g=Be(Pr({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}},u)),m=function(w,b){w.hex?Gi(w.hex)&&r({hex:w.hex,source:"hex"},b):r(w,b)};return N.createElement(Dc,{style:g.Compact,styles:u},N.createElement("div",{style:g.compact,className:"compact-picker "+d},N.createElement("div",null,eo(i,function(y){return N.createElement(Gne,{key:y,color:y,active:y.toLowerCase()===s,onClick:m,onSwatchHover:n})}),N.createElement("div",{style:g.clear})),N.createElement(Qne,{hex:s,rgb:o,onChange:m})))};S1.propTypes={colors:pe.arrayOf(pe.string),styles:pe.object};S1.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],styles:{}};const Jne=Mr(S1);var eie=function(e){var r=e.hover,n=e.color,i=e.onClick,s=e.onSwatchHover,o={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},l=Be({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:o}},{hover:r});return N.createElement("div",{style:l.swatch},N.createElement(Js,{color:n,onClick:i,onHover:s,focusStyle:o}))};const tie=Vb.handleHover(eie);var x1=function(e){var r=e.width,n=e.colors,i=e.onChange,s=e.onSwatchHover,o=e.triangle,l=e.styles,u=l===void 0?{}:l,f=e.className,d=f===void 0?"":f,g=Be(Pr({default:{card:{width:r,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},u),{"hide-triangle":o==="hide","top-left-triangle":o==="top-left","top-right-triangle":o==="top-right","bottom-left-triangle":o==="bottom-left","bottom-right-triangle":o==="bottom-right"}),m=function(w,b){return i({hex:w,source:"hex"},b)};return N.createElement("div",{style:g.card,className:"github-picker "+d},N.createElement("div",{style:g.triangleShadow}),N.createElement("div",{style:g.triangle}),eo(n,function(y){return N.createElement(tie,{color:y,key:y,onClick:m,onSwatchHover:s})}))};x1.propTypes={width:pe.oneOfType([pe.string,pe.number]),colors:pe.arrayOf(pe.string),triangle:pe.oneOf(["hide","top-left","top-right","bottom-left","bottom-right"]),styles:pe.object};x1.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left",styles:{}};Mr(x1);var rie=function(e){var r=e.direction,n=Be({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:r==="vertical"});return N.createElement("div",{style:n.picker})},nie=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},T1=function(e){var r=e.width,n=e.height,i=e.onChange,s=e.hsl,o=e.direction,l=e.pointer,u=e.styles,f=u===void 0?{}:u,d=e.className,g=d===void 0?"":d,m=Be(Pr({default:{picker:{position:"relative",width:r,height:n},hue:{radius:"2px"}}},f)),y=function(b){return i({a:1,h:b.h,l:.5,s:1})};return N.createElement("div",{style:m.picker,className:"hue-picker "+g},N.createElement(La,nie({},m.hue,{hsl:s,pointer:l,onChange:y,direction:o})))};T1.propTypes={styles:pe.object};T1.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:rie,styles:{}};Mr(T1);var iie=function(e){var r=e.onChange,n=e.hex,i=e.rgb,s=e.styles,o=s===void 0?{}:s,l=e.className,u=l===void 0?"":l,f=Be(Pr({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+n,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}},o)),d=function(m,y){m.hex?Gi(m.hex)&&r({hex:m.hex,source:"hex"},y):(m.r||m.g||m.b)&&r({r:m.r||i.r,g:m.g||i.g,b:m.b||i.b,source:"rgb"},y)};return N.createElement(Dc,{styles:o},N.createElement("div",{style:f.material,className:"material-picker "+u},N.createElement(He,{style:{wrap:f.HEXwrap,input:f.HEXinput,label:f.HEXlabel},label:"hex",value:n,onChange:d}),N.createElement("div",{style:f.split,className:"flexbox-fix"},N.createElement("div",{style:f.third},N.createElement(He,{style:{wrap:f.RGBwrap,input:f.RGBinput,label:f.RGBlabel},label:"r",value:i.r,onChange:d})),N.createElement("div",{style:f.third},N.createElement(He,{style:{wrap:f.RGBwrap,input:f.RGBinput,label:f.RGBlabel},label:"g",value:i.g,onChange:d})),N.createElement("div",{style:f.third},N.createElement(He,{style:{wrap:f.RGBwrap,input:f.RGBinput,label:f.RGBlabel},label:"b",value:i.b,onChange:d})))))};Mr(iie);var sie=function(e){var r=e.onChange,n=e.rgb,i=e.hsv,s=e.hex,o=Be({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",top:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),l=function(f,d){f["#"]?Gi(f["#"])&&r({hex:f["#"],source:"hex"},d):f.r||f.g||f.b?r({r:f.r||n.r,g:f.g||n.g,b:f.b||n.b,source:"rgb"},d):(f.h||f.s||f.v)&&r({h:f.h||i.h,s:f.s||i.s,v:f.v||i.v,source:"hsv"},d)};return N.createElement("div",{style:o.fields},N.createElement(He,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"h",value:Math.round(i.h),onChange:l}),N.createElement(He,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"s",value:Math.round(i.s*100),onChange:l}),N.createElement(He,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"v",value:Math.round(i.v*100),onChange:l}),N.createElement("div",{style:o.divider}),N.createElement(He,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"r",value:n.r,onChange:l}),N.createElement(He,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"g",value:n.g,onChange:l}),N.createElement(He,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"b",value:n.b,onChange:l}),N.createElement("div",{style:o.divider}),N.createElement(He,{style:{wrap:o.HEXwrap,input:o.HEXinput,label:o.HEXlabel},label:"#",value:s.replace("#",""),onChange:l}),N.createElement("div",{style:o.fieldSymbols},N.createElement("div",{style:o.symbol},"°"),N.createElement("div",{style:o.symbol},"%"),N.createElement("div",{style:o.symbol},"%")))},oie=function(e){var r=e.hsl,n=Be({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":r.l>.5});return N.createElement("div",{style:n.picker})},aie=function(){var e=Be({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return N.createElement("div",{style:e.pointer},N.createElement("div",{style:e.left},N.createElement("div",{style:e.leftInside})),N.createElement("div",{style:e.right},N.createElement("div",{style:e.rightInside})))},U3=function(e){var r=e.onClick,n=e.label,i=e.children,s=e.active,o=Be({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:s});return N.createElement("div",{style:o.button,onClick:r},n||i)},lie=function(e){var r=e.rgb,n=e.currentColor,i=Be({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+r.r+","+r.g+", "+r.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:n,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return N.createElement("div",null,N.createElement("div",{style:i.label},"new"),N.createElement("div",{style:i.swatches},N.createElement("div",{style:i.new}),N.createElement("div",{style:i.current})),N.createElement("div",{style:i.label},"current"))},cie=function(){function t(e,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();function uie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fie(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function hie(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var E1=function(t){hie(e,t);function e(r){uie(this,e);var n=fie(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.state={currentColor:r.hex},n}return cie(e,[{key:"render",value:function(){var n=this.props,i=n.styles,s=i===void 0?{}:i,o=n.className,l=o===void 0?"":o,u=Be(Pr({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}},s));return N.createElement("div",{style:u.picker,className:"photoshop-picker "+l},N.createElement("div",{style:u.head},this.props.header),N.createElement("div",{style:u.body,className:"flexbox-fix"},N.createElement("div",{style:u.saturation},N.createElement(Dd,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:oie,onChange:this.props.onChange})),N.createElement("div",{style:u.hue},N.createElement(La,{direction:"vertical",hsl:this.props.hsl,pointer:aie,onChange:this.props.onChange})),N.createElement("div",{style:u.controls},N.createElement("div",{style:u.top,className:"flexbox-fix"},N.createElement("div",{style:u.previews},N.createElement(lie,{rgb:this.props.rgb,currentColor:this.state.currentColor})),N.createElement("div",{style:u.actions},N.createElement(U3,{label:"OK",onClick:this.props.onAccept,active:!0}),N.createElement(U3,{label:"Cancel",onClick:this.props.onCancel}),N.createElement(sie,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),e}(N.Component);E1.propTypes={header:pe.string,styles:pe.object};E1.defaultProps={header:"Color Picker",styles:{}};Mr(E1);var die=function(e){var r=e.onChange,n=e.rgb,i=e.hsl,s=e.hex,o=e.disableAlpha,l=Be({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:o}),u=function(d,g){d.hex?Gi(d.hex)&&r({hex:d.hex,source:"hex"},g):d.r||d.g||d.b?r({r:d.r||n.r,g:d.g||n.g,b:d.b||n.b,a:n.a,source:"rgb"},g):d.a&&(d.a<0?d.a=0:d.a>100&&(d.a=100),d.a/=100,r({h:i.h,s:i.s,l:i.l,a:d.a,source:"rgb"},g))};return N.createElement("div",{style:l.fields,className:"flexbox-fix"},N.createElement("div",{style:l.double},N.createElement(He,{style:{input:l.input,label:l.label},label:"hex",value:s.replace("#",""),onChange:u})),N.createElement("div",{style:l.single},N.createElement(He,{style:{input:l.input,label:l.label},label:"r",value:n.r,onChange:u,dragLabel:"true",dragMax:"255"})),N.createElement("div",{style:l.single},N.createElement(He,{style:{input:l.input,label:l.label},label:"g",value:n.g,onChange:u,dragLabel:"true",dragMax:"255"})),N.createElement("div",{style:l.single},N.createElement(He,{style:{input:l.input,label:l.label},label:"b",value:n.b,onChange:u,dragLabel:"true",dragMax:"255"})),N.createElement("div",{style:l.alpha},N.createElement(He,{style:{input:l.input,label:l.label},label:"a",value:Math.round(n.a*100),onChange:u,dragLabel:"true",dragMax:"100"})))},pie=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},hk=function(e){var r=e.colors,n=e.onClick,i=n===void 0?function(){}:n,s=e.onSwatchHover,o=Be({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!r||!r.length}),l=function(f,d){i({hex:f,source:"hex"},d)};return N.createElement("div",{style:o.colors,className:"flexbox-fix"},r.map(function(u){var f=typeof u=="string"?{color:u}:u,d=""+f.color+(f.title||"");return N.createElement("div",{key:d,style:o.swatchWrap},N.createElement(Js,pie({},f,{style:o.swatch,onClick:l,onHover:s,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+f.color}})))}))};hk.propTypes={colors:pe.arrayOf(pe.oneOfType([pe.string,pe.shape({color:pe.string,title:pe.string})])).isRequired};var gie=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},A1=function(e){var r=e.width,n=e.rgb,i=e.hex,s=e.hsv,o=e.hsl,l=e.onChange,u=e.onSwatchHover,f=e.disableAlpha,d=e.presetColors,g=e.renderers,m=e.styles,y=m===void 0?{}:m,w=e.className,b=w===void 0?"":w,S=Be(Pr({default:gie({picker:{width:r,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+n.r+","+n.g+","+n.b+","+n.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},y),disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},y),{disableAlpha:f});return N.createElement("div",{style:S.picker,className:"sketch-picker "+b},N.createElement("div",{style:S.saturation},N.createElement(Dd,{style:S.Saturation,hsl:o,hsv:s,onChange:l})),N.createElement("div",{style:S.controls,className:"flexbox-fix"},N.createElement("div",{style:S.sliders},N.createElement("div",{style:S.hue},N.createElement(La,{style:S.Hue,hsl:o,onChange:l})),N.createElement("div",{style:S.alpha},N.createElement(a1,{style:S.Alpha,rgb:n,hsl:o,renderers:g,onChange:l}))),N.createElement("div",{style:S.color},N.createElement(Ba,null),N.createElement("div",{style:S.activeColor}))),N.createElement(die,{rgb:n,hsl:o,hex:i,onChange:l,disableAlpha:f}),N.createElement(hk,{colors:d,onClick:l,onSwatchHover:u}))};A1.propTypes={disableAlpha:pe.bool,width:pe.oneOfType([pe.string,pe.number]),styles:pe.object};A1.defaultProps={disableAlpha:!1,width:200,styles:{},presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]};Mr(A1);var Dl=function(e){var r=e.hsl,n=e.offset,i=e.onClick,s=i===void 0?function(){}:i,o=e.active,l=e.first,u=e.last,f=Be({default:{swatch:{height:"12px",background:"hsl("+r.h+", 50%, "+n*100+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:o,first:l,last:u}),d=function(m){return s({h:r.h,s:.5,l:n,source:"hsl"},m)};return N.createElement("div",{style:f.swatch,onClick:d})},mie=function(e){var r=e.onClick,n=e.hsl,i=Be({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}}),s=.1;return N.createElement("div",{style:i.swatches},N.createElement("div",{style:i.swatch},N.createElement(Dl,{hsl:n,offset:".80",active:Math.abs(n.l-.8)<s&&Math.abs(n.s-.5)<s,onClick:r,first:!0})),N.createElement("div",{style:i.swatch},N.createElement(Dl,{hsl:n,offset:".65",active:Math.abs(n.l-.65)<s&&Math.abs(n.s-.5)<s,onClick:r})),N.createElement("div",{style:i.swatch},N.createElement(Dl,{hsl:n,offset:".50",active:Math.abs(n.l-.5)<s&&Math.abs(n.s-.5)<s,onClick:r})),N.createElement("div",{style:i.swatch},N.createElement(Dl,{hsl:n,offset:".35",active:Math.abs(n.l-.35)<s&&Math.abs(n.s-.5)<s,onClick:r})),N.createElement("div",{style:i.swatch},N.createElement(Dl,{hsl:n,offset:".20",active:Math.abs(n.l-.2)<s&&Math.abs(n.s-.5)<s,onClick:r,last:!0})),N.createElement("div",{style:i.clear}))},_ie=function(){var e=Be({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return N.createElement("div",{style:e.picker})},C1=function(e){var r=e.hsl,n=e.onChange,i=e.pointer,s=e.styles,o=s===void 0?{}:s,l=e.className,u=l===void 0?"":l,f=Be(Pr({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}},o));return N.createElement("div",{style:f.wrap||{},className:"slider-picker "+u},N.createElement("div",{style:f.hue},N.createElement(La,{style:f.Hue,hsl:r,pointer:i,onChange:n})),N.createElement("div",{style:f.swatches},N.createElement(mie,{hsl:r,onClick:n})))};C1.propTypes={styles:pe.object};C1.defaultProps={pointer:_ie,styles:{}};Mr(C1);var If={},z3;function yie(){if(z3)return If;z3=1,Object.defineProperty(If,"__esModule",{value:!0});var t=Object.assign||function(o){for(var l=1;l<arguments.length;l++){var u=arguments[l];for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(o[f]=u[f])}return o},e=Us(),r=n(e);function n(o){return o&&o.__esModule?o:{default:o}}function i(o,l){var u={};for(var f in o)l.indexOf(f)>=0||Object.prototype.hasOwnProperty.call(o,f)&&(u[f]=o[f]);return u}var s=24;return If.default=function(o){var l=o.fill,u=l===void 0?"currentColor":l,f=o.width,d=f===void 0?s:f,g=o.height,m=g===void 0?s:g,y=o.style,w=y===void 0?{}:y,b=i(o,["fill","width","height","style"]);return r.default.createElement("svg",t({viewBox:"0 0 "+s+" "+s,style:t({fill:u,width:d,height:m},w)},b),r.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))},If}var vie=yie();const bie=Ma(vie);var wie=function(e){var r=e.color,n=e.onClick,i=n===void 0?function(){}:n,s=e.onSwatchHover,o=e.first,l=e.last,u=e.active,f=Be({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:r,marginBottom:"1px"},check:{color:g1(r),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{color:"#333"}},transparent:{check:{color:"#333"}}},{first:o,last:l,active:u,"color-#FFFFFF":r==="#FFFFFF",transparent:r==="transparent"});return N.createElement(Js,{color:r,style:f.color,onClick:i,onHover:s,focusStyle:{boxShadow:"0 0 4px "+r}},N.createElement("div",{style:f.check},N.createElement(bie,null)))},Sie=function(e){var r=e.onClick,n=e.onSwatchHover,i=e.group,s=e.active,o=Be({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return N.createElement("div",{style:o.group},eo(i,function(l,u){return N.createElement(wie,{key:l,color:l,active:l.toLowerCase()===s,first:u===0,last:u===i.length-1,onClick:r,onSwatchHover:n})}))},R1=function(e){var r=e.width,n=e.height,i=e.onChange,s=e.onSwatchHover,o=e.colors,l=e.hex,u=e.styles,f=u===void 0?{}:u,d=e.className,g=d===void 0?"":d,m=Be(Pr({default:{picker:{width:r,height:n},overflow:{height:n,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}},f)),y=function(b,S){return i({hex:b,source:"hex"},S)};return N.createElement("div",{style:m.picker,className:"swatches-picker "+g},N.createElement(Dc,null,N.createElement("div",{style:m.overflow},N.createElement("div",{style:m.body},eo(o,function(w){return N.createElement(Sie,{key:w.toString(),group:w,active:l,onClick:y,onSwatchHover:s})}),N.createElement("div",{style:m.clear})))))};R1.propTypes={width:pe.oneOfType([pe.string,pe.number]),height:pe.oneOfType([pe.string,pe.number]),colors:pe.arrayOf(pe.arrayOf(pe.string)),styles:pe.object};R1.defaultProps={width:320,height:240,colors:[[Ho[900],Ho[700],Ho[500],Ho[300],Ho[100]],[Wo[900],Wo[700],Wo[500],Wo[300],Wo[100]],[qo[900],qo[700],qo[500],qo[300],qo[100]],[Xo[900],Xo[700],Xo[500],Xo[300],Xo[100]],[Ko[900],Ko[700],Ko[500],Ko[300],Ko[100]],[Yo[900],Yo[700],Yo[500],Yo[300],Yo[100]],[Zo[900],Zo[700],Zo[500],Zo[300],Zo[100]],[Go[900],Go[700],Go[500],Go[300],Go[100]],[Qo[900],Qo[700],Qo[500],Qo[300],Qo[100]],["#194D33",Yl[700],Yl[500],Yl[300],Yl[100]],[Jo[900],Jo[700],Jo[500],Jo[300],Jo[100]],[ea[900],ea[700],ea[500],ea[300],ea[100]],[ta[900],ta[700],ta[500],ta[300],ta[100]],[ra[900],ra[700],ra[500],ra[300],ra[100]],[na[900],na[700],na[500],na[300],na[100]],[ia[900],ia[700],ia[500],ia[300],ia[100]],[sa[900],sa[700],sa[500],sa[300],sa[100]],[oa[900],oa[700],oa[500],oa[300],oa[100]],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]],styles:{}};Mr(R1);var P1=function(e){var r=e.onChange,n=e.onSwatchHover,i=e.hex,s=e.colors,o=e.width,l=e.triangle,u=e.styles,f=u===void 0?{}:u,d=e.className,g=d===void 0?"":d,m=Be(Pr({default:{card:{width:o,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},f),{"hide-triangle":l==="hide","top-left-triangle":l==="top-left","top-right-triangle":l==="top-right"}),y=function(b,S){Gi(b)&&r({hex:b,source:"hex"},S)};return N.createElement("div",{style:m.card,className:"twitter-picker "+g},N.createElement("div",{style:m.triangleShadow}),N.createElement("div",{style:m.triangle}),N.createElement("div",{style:m.body},eo(s,function(w,b){return N.createElement(Js,{key:b,color:w,hex:w,style:m.swatch,onClick:y,onHover:n,focusStyle:{boxShadow:"0 0 4px "+w}})}),N.createElement("div",{style:m.hash},"#"),N.createElement(He,{label:null,style:{input:m.input},value:i.replace("#",""),onChange:y}),N.createElement("div",{style:m.clear})))};P1.propTypes={width:pe.oneOfType([pe.string,pe.number]),triangle:pe.oneOf(["hide","top-left","top-right"]),colors:pe.arrayOf(pe.string),styles:pe.object};P1.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left",styles:{}};Mr(P1);var M1=function(e){var r=Be({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",border:"2px #fff solid",transform:"translate(-12px, -13px)",background:"hsl("+Math.round(e.hsl.h)+", "+Math.round(e.hsl.s*100)+"%, "+Math.round(e.hsl.l*100)+"%)"}}});return N.createElement("div",{style:r.picker})};M1.propTypes={hsl:pe.shape({h:pe.number,s:pe.number,l:pe.number,a:pe.number})};M1.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var I1=function(e){var r=Be({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",transform:"translate(-10px, -7px)",background:"hsl("+Math.round(e.hsl.h)+", 100%, 50%)",border:"2px white solid"}}});return N.createElement("div",{style:r.picker})};I1.propTypes={hsl:pe.shape({h:pe.number,s:pe.number,l:pe.number,a:pe.number})};I1.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var xie=function(e){var r=e.onChange,n=e.rgb,i=e.hsl,s=e.hex,o=e.hsv,l=function(y,w){if(y.hex)Gi(y.hex)&&r({hex:y.hex,source:"hex"},w);else if(y.rgb){var b=y.rgb.split(",");by(y.rgb,"rgb")&&r({r:b[0],g:b[1],b:b[2],a:1,source:"rgb"},w)}else if(y.hsv){var S=y.hsv.split(",");by(y.hsv,"hsv")&&(S[2]=S[2].replace("%",""),S[1]=S[1].replace("%",""),S[0]=S[0].replace("°",""),S[1]==1?S[1]=.01:S[2]==1&&(S[2]=.01),r({h:Number(S[0]),s:Number(S[1]),v:Number(S[2]),source:"hsv"},w))}else if(y.hsl){var E=y.hsl.split(",");by(y.hsl,"hsl")&&(E[2]=E[2].replace("%",""),E[1]=E[1].replace("%",""),E[0]=E[0].replace("°",""),g[1]==1?g[1]=.01:g[2]==1&&(g[2]=.01),r({h:Number(E[0]),s:Number(E[1]),v:Number(E[2]),source:"hsl"},w))}},u=Be({default:{wrap:{display:"flex",height:"100px",marginTop:"4px"},fields:{width:"100%"},column:{paddingTop:"10px",display:"flex",justifyContent:"space-between"},double:{padding:"0px 4.4px",boxSizing:"border-box"},input:{width:"100%",height:"38px",boxSizing:"border-box",padding:"4px 10% 3px",textAlign:"center",border:"1px solid #dadce0",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",fontFamily:"Roboto,Arial,sans-serif"},input2:{height:"38px",width:"100%",border:"1px solid #dadce0",boxSizing:"border-box",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",paddingLeft:"10px",fontFamily:"Roboto,Arial,sans-serif"},label:{textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"35px",top:"-6px",left:"0",right:"0",marginLeft:"auto",marginRight:"auto",fontFamily:"Roboto,Arial,sans-serif"},label2:{left:"10px",textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"32px",top:"-6px",fontFamily:"Roboto,Arial,sans-serif"},single:{flexGrow:"1",margin:"0px 4.4px"}}}),f=n.r+", "+n.g+", "+n.b,d=Math.round(i.h)+"°, "+Math.round(i.s*100)+"%, "+Math.round(i.l*100)+"%",g=Math.round(o.h)+"°, "+Math.round(o.s*100)+"%, "+Math.round(o.v*100)+"%";return N.createElement("div",{style:u.wrap,className:"flexbox-fix"},N.createElement("div",{style:u.fields},N.createElement("div",{style:u.double},N.createElement(He,{style:{input:u.input,label:u.label},label:"hex",value:s,onChange:l})),N.createElement("div",{style:u.column},N.createElement("div",{style:u.single},N.createElement(He,{style:{input:u.input2,label:u.label2},label:"rgb",value:f,onChange:l})),N.createElement("div",{style:u.single},N.createElement(He,{style:{input:u.input2,label:u.label2},label:"hsv",value:g,onChange:l})),N.createElement("div",{style:u.single},N.createElement(He,{style:{input:u.input2,label:u.label2},label:"hsl",value:d,onChange:l})))))},O1=function(e){var r=e.width,n=e.onChange,i=e.rgb,s=e.hsl,o=e.hsv,l=e.hex,u=e.header,f=e.styles,d=f===void 0?{}:f,g=e.className,m=g===void 0?"":g,y=Be(Pr({default:{picker:{width:r,background:"#fff",border:"1px solid #dfe1e5",boxSizing:"initial",display:"flex",flexWrap:"wrap",borderRadius:"8px 8px 0px 0px"},head:{height:"57px",width:"100%",paddingTop:"16px",paddingBottom:"16px",paddingLeft:"16px",fontSize:"20px",boxSizing:"border-box",fontFamily:"Roboto-Regular,HelveticaNeue,Arial,sans-serif"},saturation:{width:"70%",padding:"0px",position:"relative",overflow:"hidden"},swatch:{width:"30%",height:"228px",padding:"0px",background:"rgba("+i.r+", "+i.g+", "+i.b+", 1)",position:"relative",overflow:"hidden"},body:{margin:"auto",width:"95%"},controls:{display:"flex",boxSizing:"border-box",height:"52px",paddingTop:"22px"},color:{width:"32px"},hue:{height:"8px",position:"relative",margin:"0px 16px 0px 16px",width:"100%"},Hue:{radius:"2px"}}},d));return N.createElement("div",{style:y.picker,className:"google-picker "+m},N.createElement("div",{style:y.head},u),N.createElement("div",{style:y.swatch}),N.createElement("div",{style:y.saturation},N.createElement(Dd,{hsl:s,hsv:o,pointer:M1,onChange:n})),N.createElement("div",{style:y.body},N.createElement("div",{style:y.controls,className:"flexbox-fix"},N.createElement("div",{style:y.hue},N.createElement(La,{style:y.Hue,hsl:s,radius:"4px",pointer:I1,onChange:n}))),N.createElement(xie,{rgb:i,hsl:s,hex:l,hsv:o,onChange:n})))};O1.propTypes={width:pe.oneOfType([pe.string,pe.number]),styles:pe.object,header:pe.string};O1.defaultProps={width:652,styles:{},header:"Color picker"};Mr(O1);class Tie extends N.Component{constructor(){super(...arguments);T(this,"state",{displayColorPicker:!1,color:this.props.color||{r:"241",g:"112",b:"19",a:"1"}});T(this,"colors",["#FF0000","#FF4500","#FF8C00","#FFD700","#FFFF00","#D7FF00","#8CFF00","#45FF00","#00FF00","#00FF45","#00FF8C","#00FFD7","#00FFFF","#00D7FF","#008CFF","#0045FF","#0000FF","#4500FF","#8C00FF","#D700FF","#FF00FF","#FFFFFF","#000000"]);T(this,"handleClick",()=>{this.setState({displayColorPicker:!this.state.displayColorPicker})});T(this,"handleClose",()=>{this.setState({displayColorPicker:!1})});T(this,"handleChange",r=>{this.setState({color:r.rgb}),this.props.onChange(r)});T(this,"styles",Be({default:{container:{position:"relative"},color:{width:"20px",height:"20px",borderRadius:"99px",background:`rgb(${this.state.color.r}, ${this.state.color.g}, ${this.state.color.b})`,display:"inline-block",cursor:"pointer"},popover:{position:"absolute",zIndex:"2",right:"-8px"},cover:{position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}}}))}render(){return ke.jsxs("div",{style:this.styles.container,children:[ke.jsx("div",{style:this.styles.color,onClick:this.handleClick}),this.state.displayColorPicker?ke.jsxs("div",{style:this.styles.popover,children:[ke.jsx("div",{style:this.styles.cover,onClick:this.handleClose}),ke.jsx(Jne,{colors:this.colors,triangle:"top-right",color:this.state.color,onChange:this.handleChange})]}):null]})}}function Eie(t){const e=t.layerConfig,r=o=>{t.onColorChange(o)},n=o=>{t.onOpacityChange(o.target.value)},i=o=>{t.onVisibleChange(o.target.checked)},s=Be({default:{card:{padding:"0 1rem",background:"rgba(30,30,30,.75)",color:"#d1d1d1"}}});return ke.jsx(kG,{style:s.card,elevation:3,children:ke.jsxs(BO,{alignItems:"center",justifyContent:"space-between",direction:"row",gap:"1rem",children:[ke.jsx(SQ,{checked:e.visible,onChange:i,sx:{color:`rgb(${e.color[0]}, ${e.color[1]}, ${e.color[2]})`,"&.Mui-checked":{color:`rgb(${e.color[0]}, ${e.color[1]}, ${e.color[2]})`}}}),ke.jsx("span",{children:e.id}),ke.jsx(PG,{value:e.opacity,sx:{width:"5rem"},"aria-label":"Opacity",onChange:n,valueLabelDisplay:"auto",size:"small",step:.01,min:0,max:1,defaultValue:1}),ke.jsx(Tie,{color:{r:e.color[0],g:e.color[1],b:e.color[2],a:1},onChange:r})]})})}function Aie({layersConfig:t,setLayersConfig:e}){const r=(o,l)=>{const u=[...t];u[o].color=[l.rgb.r,l.rgb.g,l.rgb.b],u[o].visible=!1,e(u),setTimeout(()=>{const f=[...t];f[o].visible=!0,e(f)},10)},n=(o,l)=>{const u=[...t];u[o].opacity=l,e(u)},i=(o,l)=>{const u=[...t];u[o].visible=l,e(u)},s=Be({default:{stack:{position:"absolute",zIndex:"2",gap:".5rem",maxHeight:"100dvh",overflowY:"auto",padding:".5rem .5rem 8rem .5rem",backdropFilter:"blur(10px)"}}});return ke.jsx(BO,{sx:s.stack,children:t.map((o,l)=>ke.jsx(Eie,{layerConfig:o,onColorChange:u=>r(l,u),onVisibleChange:u=>i(l,u),onOpacityChange:u=>n(l,u)}))})}function Cie(){function t(){let n=[];for(let i of vF)i!="md5"&&n.push({id:i,url:`${Sx}/${i}_isbns_files`,color:[255,0,0],opacity:.8,visible:!1});return n.push({id:"md5",url:`${Sx}/md5_isbns_files`,color:[0,255,0],opacity:.8,visible:!0}),n}const[e,r]=re.useState(t());return ke.jsxs(ke.Fragment,{children:[ke.jsx(PW,{layersConfig:e}),ke.jsx(Aie,{layersConfig:e,setLayersConfig:r})]})}function Rie(t){yF.createRoot(t).render(ke.jsx(Cie,{}))}Rie(document.getElementById("app"))});export default Pie();
